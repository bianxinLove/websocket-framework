2025-07-31 14:28:05.690 [main] INFO  c.f.w.WebSocketFrameworkApplication - Starting WebSocketFrameworkApplication using Java 1.8.0_202 on DESKTOP-EGK8BP4 with PID 4560 (D:\workTool\IdeaProjects\websocket-framework\target\classes started by admin in D:\workTool\IdeaProjects\websocket-framework)
2025-07-31 14:28:05.703 [main] DEBUG c.f.w.WebSocketFrameworkApplication - Running with Spring Boot v2.7.0, Spring v5.3.20
2025-07-31 14:28:05.704 [main] INFO  c.f.w.WebSocketFrameworkApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-31 14:28:07.182 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2025-07-31 14:28:07.197 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-07-31 14:28:07.251 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 25 ms. Found 0 Redis repository interfaces.
2025-07-31 14:28:08.092 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2025-07-31 14:28:08.111 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-31 14:28:08.111 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.63]
2025-07-31 14:28:08.384 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-31 14:28:08.384 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2522 ms
2025-07-31 14:28:09.201 [main] INFO  c.f.w.c.WebSocketFrameworkConfig - WebSocket线程池已创建: 核心线程=10, 最大线程=50, 队列容量=1000
2025-07-31 14:28:09.258 [main] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件总线初始化完成
2025-07-31 14:28:09.357 [main] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件订阅者注册成功: WebSocketMetricsCollector
2025-07-31 14:28:09.357 [main] INFO  c.f.w.m.WebSocketMetricsCollector - WebSocket指标收集器已启用并注册到事件总线
2025-07-31 14:28:09.378 [main] INFO  c.f.w.p.WebSocketServiceProcessor - WebSocket服务注册成功: serviceId=chatroom, serviceName=聊天室服务, beanName=chatRoomWebSocketService, class=ChatRoomWebSocketService
2025-07-31 14:28:09.380 [main] INFO  c.f.w.p.WebSocketServiceProcessor - WebSocket服务注册成功: serviceId=notification, serviceName=通知推送服务, beanName=notificationWebSocketService, class=NotificationWebSocketService
2025-07-31 14:28:09.397 [main] INFO  c.f.w.monitor.ThreadPoolMonitor - 智能线程池监控器已启动，初始监控间隔: 30秒
2025-07-31 14:28:09.401 [main] INFO  c.f.w.p.WebSocketServiceProcessor - WebSocket服务注册成功: serviceId=monitor, serviceName=monitor, beanName=threadPoolMonitorWebSocketService, class=ThreadPoolMonitorWebSocketService
2025-07-31 14:28:09.411 [main] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件订阅者注册成功: WebSocketMessageHandlerDispatcher
2025-07-31 14:28:09.412 [main] INFO  c.f.w.h.WebSocketMessageHandlerDispatcher - WebSocketMessageHandlerDispatcher初始化完成, 注册了4个消息处理器, 1个拦截器
2025-07-31 14:28:09.447 [main] INFO  c.f.websocket.monitor.MemoryMonitor - 内存监控器已启动 - 初始堆内存使用率: {:.1f}% (0.3418209225275537MB/30MB)
2025-07-31 14:28:09.451 [main] INFO  c.f.w.monitor.ThreadPoolMetricsStore - 线程池监控数据存储服务已启动，数据保留时间: 24小时
2025-07-31 14:28:10.340 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2025-07-31 14:28:10.364 [WebSocket-3] DEBUG c.f.w.s.WebSocketSessionCleaner - 开始清理无效WebSocket会话，内存压力: false
2025-07-31 14:28:10.365 [WebSocket-2] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:28:10.368 [WebSocket-2] INFO  c.f.w.monitor.ThreadPoolMonitor - 线程池监控报告: 状态=健康, 核心线程=10, 活跃线程=3, 队列大小=5, 利用率={:.1f}%, 吞吐量={:.2f}task/s
2025-07-31 14:28:10.378 [WebSocket-7] DEBUG c.f.websocket.monitor.MemoryMonitor - 内存详细统计 - 堆内存: {:.1f}% (1.00211531840128MB/90MB), 非堆内存: 9042MB, 会话: 52, 事件池: Services: 0 (Empty: 0), Sessions: 0, Operations: 0
2025-07-31 14:28:10.386 [main] INFO  c.f.w.WebSocketFrameworkApplication - Started WebSocketFrameworkApplication in 6.025 seconds (JVM running for 9.168)
2025-07-31 14:28:14.087 [WebSocket-6] ERROR c.f.w.s.WebSocketSessionManager - 清理过期心跳缓存失败
org.springframework.data.redis.RedisConnectionFailureException: Unable to connect to Redis; nested exception is io.lettuce.core.RedisConnectionException: Unable to connect to localhost:6379
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.translateException(LettuceConnectionFactory.java:1689)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1597)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getNativeConnection(LettuceConnectionFactory.java:1383)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getConnection(LettuceConnectionFactory.java:1366)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getSharedConnection(LettuceConnectionFactory.java:1093)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getConnection(LettuceConnectionFactory.java:421)
	at org.springframework.data.redis.core.RedisConnectionUtils.fetchConnection(RedisConnectionUtils.java:193)
	at org.springframework.data.redis.core.RedisConnectionUtils.doGetConnection(RedisConnectionUtils.java:144)
	at org.springframework.data.redis.core.RedisConnectionUtils.getConnection(RedisConnectionUtils.java:105)
	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:211)
	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:191)
	at org.springframework.data.redis.core.RedisTemplate.keys(RedisTemplate.java:896)
	at com.framework.websocket.session.WebSocketSessionManager.cleanupExpiredHeartbeats(WebSocketSessionManager.java:221)
	at com.framework.websocket.session.WebSocketSessionCleaner.cleanupExpiredHeartbeatCache(WebSocketSessionCleaner.java:270)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:308)
	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
Caused by: io.lettuce.core.RedisConnectionException: Unable to connect to localhost:6379
	at io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:78)
	at io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:56)
	at io.lettuce.core.AbstractRedisClient.getConnection(AbstractRedisClient.java:330)
	at io.lettuce.core.RedisClient.connect(RedisClient.java:216)
	at org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.lambda$getConnection$1(StandaloneConnectionProvider.java:115)
	at java.util.Optional.orElseGet(Optional.java:267)
	at org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.getConnection(StandaloneConnectionProvider.java:115)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1595)
	... 26 common frames omitted
Caused by: io.netty.channel.AbstractChannel$AnnotatedConnectException: Connection refused: no further information: localhost/127.0.0.1:6379
Caused by: java.net.ConnectException: Connection refused: no further information
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:717)
	at io.netty.channel.socket.nio.NioSocketChannel.doFinishConnect(NioSocketChannel.java:337)
	at io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.finishConnect(AbstractNioChannel.java:334)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:710)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:658)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:584)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:496)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:995)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:28:16.130 [WebSocket-2] WARN  c.f.w.monitor.ThreadPoolMetricsStore - 收集监控数据失败
org.springframework.data.redis.RedisConnectionFailureException: Unable to connect to Redis; nested exception is io.lettuce.core.RedisConnectionException: Unable to connect to localhost:6379
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.translateException(LettuceConnectionFactory.java:1689)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1597)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getNativeConnection(LettuceConnectionFactory.java:1383)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getConnection(LettuceConnectionFactory.java:1366)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getSharedConnection(LettuceConnectionFactory.java:1093)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getConnection(LettuceConnectionFactory.java:421)
	at org.springframework.data.redis.core.RedisConnectionUtils.fetchConnection(RedisConnectionUtils.java:193)
	at org.springframework.data.redis.core.RedisConnectionUtils.doGetConnection(RedisConnectionUtils.java:144)
	at org.springframework.data.redis.core.RedisConnectionUtils.getConnection(RedisConnectionUtils.java:105)
	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:211)
	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:191)
	at org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:97)
	at org.springframework.data.redis.core.DefaultValueOperations.set(DefaultValueOperations.java:325)
	at com.framework.websocket.monitor.ThreadPoolMetricsStore.collectAndStoreMetrics(ThreadPoolMetricsStore.java:69)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:308)
	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
Caused by: io.lettuce.core.RedisConnectionException: Unable to connect to localhost:6379
	at io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:78)
	at io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:56)
	at io.lettuce.core.AbstractRedisClient.getConnection(AbstractRedisClient.java:330)
	at io.lettuce.core.RedisClient.connect(RedisClient.java:216)
	at org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.lambda$getConnection$1(StandaloneConnectionProvider.java:115)
	at java.util.Optional.orElseGet(Optional.java:267)
	at org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.getConnection(StandaloneConnectionProvider.java:115)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1595)
	... 26 common frames omitted
Caused by: io.netty.channel.AbstractChannel$AnnotatedConnectException: Connection refused: no further information: localhost/127.0.0.1:6379
Caused by: java.net.ConnectException: Connection refused: no further information
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:717)
	at io.netty.channel.socket.nio.NioSocketChannel.doFinishConnect(NioSocketChannel.java:337)
	at io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.finishConnect(AbstractNioChannel.java:334)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:710)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:658)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:584)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:496)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:995)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:28:27.195 [SpringApplicationShutdownHook] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件订阅者取消注册成功: WebSocketMessageHandlerDispatcher
2025-07-31 14:28:27.196 [SpringApplicationShutdownHook] INFO  c.f.w.h.WebSocketMessageHandlerDispatcher - WebSocketMessageHandlerDispatcher已取消EventBus订阅
2025-07-31 14:28:27.196 [SpringApplicationShutdownHook] INFO  c.f.w.monitor.ThreadPoolMonitor - 线程池监控器已关闭
2025-07-31 14:28:27.196 [SpringApplicationShutdownHook] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件总线线程池已关闭
2025-07-31 14:30:04.048 [main] INFO  c.f.w.WebSocketFrameworkApplication - Starting WebSocketFrameworkApplication using Java 1.8.0_202 on DESKTOP-EGK8BP4 with PID 8312 (D:\workTool\IdeaProjects\websocket-framework\target\classes started by admin in D:\workTool\IdeaProjects\websocket-framework)
2025-07-31 14:30:04.055 [main] DEBUG c.f.w.WebSocketFrameworkApplication - Running with Spring Boot v2.7.0, Spring v5.3.20
2025-07-31 14:30:04.058 [main] INFO  c.f.w.WebSocketFrameworkApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-31 14:30:06.951 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2025-07-31 14:30:06.959 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-07-31 14:30:07.034 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 33 ms. Found 0 Redis repository interfaces.
2025-07-31 14:30:08.159 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2025-07-31 14:30:08.191 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-31 14:30:08.192 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.63]
2025-07-31 14:30:08.611 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-31 14:30:08.611 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 4145 ms
2025-07-31 14:30:11.326 [main] INFO  c.f.w.c.WebSocketFrameworkConfig - WebSocket线程池已创建: 核心线程=10, 最大线程=50, 队列容量=1000
2025-07-31 14:30:11.478 [main] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件总线初始化完成
2025-07-31 14:30:11.779 [main] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件订阅者注册成功: WebSocketMetricsCollector
2025-07-31 14:30:11.779 [main] INFO  c.f.w.m.WebSocketMetricsCollector - WebSocket指标收集器已启用并注册到事件总线
2025-07-31 14:30:11.848 [main] INFO  c.f.w.p.WebSocketServiceProcessor - WebSocket服务注册成功: serviceId=chatroom, serviceName=聊天室服务, beanName=chatRoomWebSocketService, class=ChatRoomWebSocketService
2025-07-31 14:30:11.859 [main] INFO  c.f.w.p.WebSocketServiceProcessor - WebSocket服务注册成功: serviceId=notification, serviceName=通知推送服务, beanName=notificationWebSocketService, class=NotificationWebSocketService
2025-07-31 14:30:11.920 [main] INFO  c.f.w.monitor.ThreadPoolMonitor - 智能线程池监控器已启动，初始监控间隔: 30秒
2025-07-31 14:30:11.938 [main] INFO  c.f.w.p.WebSocketServiceProcessor - WebSocket服务注册成功: serviceId=monitor, serviceName=monitor, beanName=threadPoolMonitorWebSocketService, class=ThreadPoolMonitorWebSocketService
2025-07-31 14:30:11.964 [main] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件订阅者注册成功: WebSocketMessageHandlerDispatcher
2025-07-31 14:30:11.964 [main] INFO  c.f.w.h.WebSocketMessageHandlerDispatcher - WebSocketMessageHandlerDispatcher初始化完成, 注册了4个消息处理器, 1个拦截器
2025-07-31 14:30:12.046 [main] INFO  c.f.websocket.monitor.MemoryMonitor - 内存监控器已启动 - 初始堆内存使用率: {:.1f}% (0.3772753314933954MB/34MB)
2025-07-31 14:30:12.054 [main] INFO  c.f.w.monitor.ThreadPoolMetricsStore - 线程池监控数据存储服务已启动，数据保留时间: 24小时
2025-07-31 14:30:14.772 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2025-07-31 14:30:14.835 [WebSocket-5] DEBUG c.f.w.s.WebSocketSessionCleaner - 开始清理无效WebSocket会话，内存压力: false
2025-07-31 14:30:14.835 [WebSocket-7] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:30:14.835 [WebSocket-7] INFO  c.f.w.monitor.ThreadPoolMonitor - 线程池监控报告: 状态=健康, 核心线程=10, 活跃线程=4, 队列大小=4, 利用率={:.1f}%, 吞吐量={:.2f}task/s
2025-07-31 14:30:14.882 [WebSocket-6] DEBUG c.f.websocket.monitor.MemoryMonitor - 内存详细统计 - 堆内存: {:.1f}% (1.035814764119439MB/93MB), 非堆内存: 9042MB, 会话: 52, 事件池: Services: 0 (Empty: 0), Sessions: 0, Operations: 0
2025-07-31 14:30:14.883 [main] INFO  c.f.w.WebSocketFrameworkApplication - Started WebSocketFrameworkApplication in 12.203 seconds (JVM running for 12.978)
2025-07-31 14:30:16.837 [WebSocket-7] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:30:16.837 [WebSocket-7] INFO  c.f.w.monitor.ThreadPoolMonitor - 线程池监控报告: 状态=健康, 核心线程=10, 活跃线程=2, 队列大小=6, 利用率={:.1f}%, 吞吐量={:.2f}task/s
2025-07-31 14:30:44.852 [WebSocket-8] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:30:44.853 [WebSocket-4] DEBUG c.f.websocket.monitor.MemoryMonitor - 内存详细统计 - 堆内存: {:.1f}% (1.7587651196002856MB/159MB), 非堆内存: 9042MB, 会话: 59, 事件池: Services: 0 (Empty: 0), Sessions: 0, Operations: 0
2025-07-31 14:30:44.854 [WebSocket-8] INFO  c.f.w.monitor.ThreadPoolMonitor - 线程池监控报告: 状态=健康, 核心线程=10, 活跃线程=2, 队列大小=6, 利用率={:.1f}%, 吞吐量={:.2f}task/s
2025-07-31 14:31:11.954 [ThreadPoolMonitor] DEBUG c.f.w.monitor.ThreadPoolMonitor - 无法通过反射获取进程CPU使用率
java.lang.IllegalAccessException: Class com.framework.websocket.monitor.ThreadPoolMonitor can not access a member of class sun.management.OperatingSystemImpl with modifiers "public native"
	at sun.reflect.Reflection.ensureMemberAccess(Reflection.java:102)
	at java.lang.reflect.AccessibleObject.slowCheckMemberAccess(AccessibleObject.java:296)
	at java.lang.reflect.AccessibleObject.checkAccess(AccessibleObject.java:288)
	at java.lang.reflect.Method.invoke(Method.java:491)
	at com.framework.websocket.monitor.ThreadPoolMonitor.getProcessCpuLoad(ThreadPoolMonitor.java:433)
	at com.framework.websocket.monitor.ThreadPoolMonitor.isSystemUnderHighLoad(ThreadPoolMonitor.java:417)
	at com.framework.websocket.monitor.ThreadPoolMonitor.shouldPerformMonitoring(ThreadPoolMonitor.java:186)
	at com.framework.websocket.monitor.ThreadPoolMonitor.performAdaptiveMonitoring(ThreadPoolMonitor.java:136)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:308)
	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:31:11.956 [ThreadPoolMonitor] INFO  c.f.w.monitor.ThreadPoolMonitor - 调整监控策略: 健康状态=健康, 监控间隔: 30秒->40秒, 采样率: 1:2 -> 1:3
2025-07-31 14:31:11.957 [ThreadPoolMonitor] INFO  c.f.w.monitor.ThreadPoolMonitor - 线程池监控报告: 状态=健康, 核心线程=10, 活跃线程=0, 队列大小=8, 利用率={:.1f}%, 吞吐量={:.2f}task/s
2025-07-31 14:31:11.957 [ThreadPoolMonitor] DEBUG c.f.w.monitor.ThreadPoolMonitor - 无法通过反射获取进程CPU使用率
java.lang.IllegalAccessException: Class com.framework.websocket.monitor.ThreadPoolMonitor can not access a member of class sun.management.OperatingSystemImpl with modifiers "public native"
	at sun.reflect.Reflection.ensureMemberAccess(Reflection.java:102)
	at java.lang.reflect.AccessibleObject.slowCheckMemberAccess(AccessibleObject.java:296)
	at java.lang.reflect.AccessibleObject.checkAccess(AccessibleObject.java:288)
	at java.lang.reflect.Method.invoke(Method.java:491)
	at com.framework.websocket.monitor.ThreadPoolMonitor.getProcessCpuLoad(ThreadPoolMonitor.java:433)
	at com.framework.websocket.monitor.ThreadPoolMonitor.isSystemUnderHighLoad(ThreadPoolMonitor.java:417)
	at com.framework.websocket.monitor.ThreadPoolMonitor.shouldPerformMonitoring(ThreadPoolMonitor.java:186)
	at com.framework.websocket.monitor.ThreadPoolMonitor.performAdaptiveMonitoring(ThreadPoolMonitor.java:136)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:308)
	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:31:11.958 [ThreadPoolMonitor] INFO  c.f.w.monitor.ThreadPoolMonitor - 调整监控策略: 健康状态=健康, 监控间隔: 40秒->50秒, 采样率: 1:3 -> 1:4
2025-07-31 14:31:11.958 [ThreadPoolMonitor] INFO  c.f.w.monitor.ThreadPoolMonitor - 线程池监控报告: 状态=健康, 核心线程=10, 活跃线程=0, 队列大小=8, 利用率={:.1f}%, 吞吐量={:.2f}task/s
2025-07-31 14:31:11.958 [ThreadPoolMonitor] DEBUG c.f.w.monitor.ThreadPoolMonitor - 无法通过反射获取进程CPU使用率
java.lang.IllegalAccessException: Class com.framework.websocket.monitor.ThreadPoolMonitor can not access a member of class sun.management.OperatingSystemImpl with modifiers "public native"
	at sun.reflect.Reflection.ensureMemberAccess(Reflection.java:102)
	at java.lang.reflect.AccessibleObject.slowCheckMemberAccess(AccessibleObject.java:296)
	at java.lang.reflect.AccessibleObject.checkAccess(AccessibleObject.java:288)
	at java.lang.reflect.Method.invoke(Method.java:491)
	at com.framework.websocket.monitor.ThreadPoolMonitor.getProcessCpuLoad(ThreadPoolMonitor.java:433)
	at com.framework.websocket.monitor.ThreadPoolMonitor.isSystemUnderHighLoad(ThreadPoolMonitor.java:417)
	at com.framework.websocket.monitor.ThreadPoolMonitor.shouldPerformMonitoring(ThreadPoolMonitor.java:186)
	at com.framework.websocket.monitor.ThreadPoolMonitor.performAdaptiveMonitoring(ThreadPoolMonitor.java:136)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:308)
	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:31:11.958 [ThreadPoolMonitor] INFO  c.f.w.monitor.ThreadPoolMonitor - 调整监控策略: 健康状态=健康, 监控间隔: 50秒->60秒, 采样率: 1:4 -> 1:5
2025-07-31 14:31:11.958 [ThreadPoolMonitor] INFO  c.f.w.monitor.ThreadPoolMonitor - 线程池监控报告: 状态=健康, 核心线程=10, 活跃线程=0, 队列大小=8, 利用率={:.1f}%, 吞吐量={:.2f}task/s
2025-07-31 14:31:11.958 [ThreadPoolMonitor] DEBUG c.f.w.monitor.ThreadPoolMonitor - 无法通过反射获取进程CPU使用率
java.lang.IllegalAccessException: Class com.framework.websocket.monitor.ThreadPoolMonitor can not access a member of class sun.management.OperatingSystemImpl with modifiers "public native"
	at sun.reflect.Reflection.ensureMemberAccess(Reflection.java:102)
	at java.lang.reflect.AccessibleObject.slowCheckMemberAccess(AccessibleObject.java:296)
	at java.lang.reflect.AccessibleObject.checkAccess(AccessibleObject.java:288)
	at java.lang.reflect.Method.invoke(Method.java:491)
	at com.framework.websocket.monitor.ThreadPoolMonitor.getProcessCpuLoad(ThreadPoolMonitor.java:433)
	at com.framework.websocket.monitor.ThreadPoolMonitor.isSystemUnderHighLoad(ThreadPoolMonitor.java:417)
	at com.framework.websocket.monitor.ThreadPoolMonitor.shouldPerformMonitoring(ThreadPoolMonitor.java:186)
	at com.framework.websocket.monitor.ThreadPoolMonitor.performAdaptiveMonitoring(ThreadPoolMonitor.java:136)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:308)
	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:31:11.958 [ThreadPoolMonitor] INFO  c.f.w.monitor.ThreadPoolMonitor - 调整监控策略: 健康状态=健康, 监控间隔: 60秒->70秒, 采样率: 1:5 -> 1:5
2025-07-31 14:31:11.958 [ThreadPoolMonitor] INFO  c.f.w.monitor.ThreadPoolMonitor - 线程池监控报告: 状态=健康, 核心线程=10, 活跃线程=0, 队列大小=8, 利用率={:.1f}%, 吞吐量={:.2f}task/s
2025-07-31 14:31:14.849 [WebSocket-5] DEBUG c.f.w.s.WebSocketSessionCleaner - 开始清理无效WebSocket会话，内存压力: false
2025-07-31 14:31:14.850 [WebSocket-6] DEBUG c.f.websocket.monitor.MemoryMonitor - 内存详细统计 - 堆内存: {:.1f}% (1.768816311099418MB/159MB), 非堆内存: 9042MB, 会话: 59, 事件池: Services: 0 (Empty: 0), Sessions: 0, Operations: 0
2025-07-31 14:31:14.849 [WebSocket-2] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:31:14.852 [WebSocket-2] INFO  c.f.w.monitor.ThreadPoolMonitor - 线程池监控报告: 状态=健康, 核心线程=10, 活跃线程=4, 队列大小=7, 利用率={:.1f}%, 吞吐量={:.2f}task/s
2025-07-31 14:31:44.853 [WebSocket-11] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:31:44.854 [WebSocket-12] DEBUG c.f.websocket.monitor.MemoryMonitor - 内存详细统计 - 堆内存: {:.1f}% (1.7788690213897644MB/160MB), 非堆内存: 9042MB, 会话: 59, 事件池: Services: 0 (Empty: 0), Sessions: 0, Operations: 0
2025-07-31 14:31:44.855 [WebSocket-11] INFO  c.f.w.monitor.ThreadPoolMonitor - 线程池监控报告: 状态=健康, 核心线程=10, 活跃线程=3, 队列大小=6, 利用率={:.1f}%, 吞吐量={:.2f}task/s
2025-07-31 14:32:14.852 [WebSocket-2] DEBUG c.f.websocket.monitor.MemoryMonitor - 内存详细统计 - 堆内存: {:.1f}% (1.809017617627072MB/163MB), 非堆内存: 9042MB, 会话: 59, 事件池: Services: 0 (Empty: 0), Sessions: 0, Operations: 0
2025-07-31 14:32:14.852 [WebSocket-13] DEBUG c.f.w.s.WebSocketSessionCleaner - 开始清理无效WebSocket会话，内存压力: false
2025-07-31 14:32:14.852 [WebSocket-5] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:32:14.853 [WebSocket-5] INFO  c.f.w.monitor.ThreadPoolMonitor - 线程池监控报告: 状态=健康, 核心线程=10, 活跃线程=3, 队列大小=7, 利用率={:.1f}%, 吞吐量={:.2f}task/s
2025-07-31 14:32:41.576 [SpringApplicationShutdownHook] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件订阅者取消注册成功: WebSocketMessageHandlerDispatcher
2025-07-31 14:32:41.576 [SpringApplicationShutdownHook] INFO  c.f.w.h.WebSocketMessageHandlerDispatcher - WebSocketMessageHandlerDispatcher已取消EventBus订阅
2025-07-31 14:32:41.576 [SpringApplicationShutdownHook] INFO  c.f.w.monitor.ThreadPoolMonitor - 线程池监控器已关闭
2025-07-31 14:32:41.577 [SpringApplicationShutdownHook] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件总线线程池已关闭
2025-07-31 14:35:58.787 [main] INFO  c.f.w.WebSocketFrameworkApplication - Starting WebSocketFrameworkApplication using Java 1.8.0_202 on DESKTOP-EGK8BP4 with PID 32992 (D:\workTool\IdeaProjects\websocket-framework\target\classes started by admin in D:\workTool\IdeaProjects\websocket-framework)
2025-07-31 14:35:58.790 [main] INFO  c.f.w.WebSocketFrameworkApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-31 14:36:00.092 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2025-07-31 14:36:00.097 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-07-31 14:36:00.147 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 23 ms. Found 0 Redis repository interfaces.
2025-07-31 14:36:01.006 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2025-07-31 14:36:01.039 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-31 14:36:01.039 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.63]
2025-07-31 14:36:01.385 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-31 14:36:01.385 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2465 ms
2025-07-31 14:36:02.368 [main] INFO  c.f.w.c.WebSocketFrameworkConfig - WebSocket线程池已创建: 核心线程=10, 最大线程=50, 队列容量=1000
2025-07-31 14:36:02.445 [main] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件总线初始化完成
2025-07-31 14:36:02.569 [main] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件订阅者注册成功: WebSocketMetricsCollector
2025-07-31 14:36:02.570 [main] INFO  c.f.w.m.WebSocketMetricsCollector - WebSocket指标收集器已启用并注册到事件总线
2025-07-31 14:36:02.599 [main] INFO  c.f.w.p.WebSocketServiceProcessor - WebSocket服务注册成功: serviceId=chatroom, serviceName=聊天室服务, beanName=chatRoomWebSocketService, class=ChatRoomWebSocketService
2025-07-31 14:36:02.602 [main] INFO  c.f.w.p.WebSocketServiceProcessor - WebSocket服务注册成功: serviceId=notification, serviceName=通知推送服务, beanName=notificationWebSocketService, class=NotificationWebSocketService
2025-07-31 14:36:02.629 [main] INFO  c.f.w.monitor.ThreadPoolMonitor - 智能线程池监控器已启动，初始监控间隔: 30秒
2025-07-31 14:36:02.633 [main] INFO  c.f.w.p.WebSocketServiceProcessor - WebSocket服务注册成功: serviceId=monitor, serviceName=monitor, beanName=threadPoolMonitorWebSocketService, class=ThreadPoolMonitorWebSocketService
2025-07-31 14:36:02.644 [main] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件订阅者注册成功: WebSocketMessageHandlerDispatcher
2025-07-31 14:36:02.645 [main] INFO  c.f.w.h.WebSocketMessageHandlerDispatcher - WebSocketMessageHandlerDispatcher初始化完成, 注册了4个消息处理器, 1个拦截器
2025-07-31 14:36:02.684 [main] INFO  c.f.websocket.monitor.MemoryMonitor - 内存监控器已启动 - 初始堆内存使用率: {:.1f}% (0.35504191566742355MB/32MB)
2025-07-31 14:36:02.688 [main] INFO  c.f.w.monitor.ThreadPoolMetricsStore - 线程池监控数据存储服务已启动，数据保留时间: 24小时
2025-07-31 14:36:03.802 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2025-07-31 14:36:03.830 [WebSocket-9] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:36:03.848 [main] INFO  c.f.w.WebSocketFrameworkApplication - Started WebSocketFrameworkApplication in 6.191 seconds (JVM running for 9.348)
2025-07-31 14:36:11.769 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-07-31 14:36:11.769 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-07-31 14:36:11.770 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-07-31 14:36:33.842 [WebSocket-2] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:37:03.186 [ThreadPoolMonitor] INFO  c.f.w.monitor.ThreadPoolMonitor - 调整监控策略: 健康状态=健康, 监控间隔: 30秒->40秒, 采样率: 1:2 -> 1:3
2025-07-31 14:37:03.226 [ThreadPoolMonitor] INFO  c.f.w.monitor.ThreadPoolMonitor - 调整监控策略: 健康状态=健康, 监控间隔: 40秒->50秒, 采样率: 1:3 -> 1:4
2025-07-31 14:37:03.263 [ThreadPoolMonitor] INFO  c.f.w.monitor.ThreadPoolMonitor - 调整监控策略: 健康状态=健康, 监控间隔: 50秒->60秒, 采样率: 1:4 -> 1:5
2025-07-31 14:37:03.306 [ThreadPoolMonitor] INFO  c.f.w.monitor.ThreadPoolMonitor - 调整监控策略: 健康状态=健康, 监控间隔: 60秒->70秒, 采样率: 1:5 -> 1:5
2025-07-31 14:37:03.833 [WebSocket-2] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:37:33.840 [WebSocket-4] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:38:03.839 [WebSocket-2] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:38:33.841 [WebSocket-13] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:39:03.843 [WebSocket-12] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:39:33.845 [WebSocket-20] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:40:03.831 [WebSocket-12] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:40:03.893 [WebSocket-12] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:40:33.832 [WebSocket-24] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:41:03.830 [WebSocket-13] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:41:33.834 [WebSocket-18] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:41:43.386 [ThreadPoolMonitor] INFO  c.f.w.monitor.ThreadPoolMonitor - 调整监控策略: 健康状态=健康, 监控间隔: 70秒->80秒, 采样率: 1:5 -> 1:5
2025-07-31 14:42:03.830 [WebSocket-28] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:42:33.842 [WebSocket-23] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:43:03.838 [WebSocket-12] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:43:33.842 [WebSocket-21] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:44:03.835 [WebSocket-12] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:44:33.833 [WebSocket-31] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:45:03.841 [WebSocket-12] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:45:03.888 [WebSocket-12] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:45:33.831 [WebSocket-40] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:46:03.844 [WebSocket-42] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:46:33.835 [WebSocket-38] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:47:03.450 [ThreadPoolMonitor] INFO  c.f.w.monitor.ThreadPoolMonitor - 调整监控策略: 健康状态=健康, 监控间隔: 80秒->90秒, 采样率: 1:5 -> 1:5
2025-07-31 14:47:03.839 [WebSocket-44] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:47:33.833 [WebSocket-41] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:48:03.845 [WebSocket-48] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:48:33.831 [WebSocket-51] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:49:03.843 [WebSocket-50] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:49:33.831 [WebSocket-55] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:50:03.838 [WebSocket-54] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:50:03.871 [WebSocket-54] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:50:33.842 [WebSocket-59] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:50:46.117 [SpringApplicationShutdownHook] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件订阅者取消注册成功: WebSocketMessageHandlerDispatcher
2025-07-31 14:50:46.117 [SpringApplicationShutdownHook] INFO  c.f.w.h.WebSocketMessageHandlerDispatcher - WebSocketMessageHandlerDispatcher已取消EventBus订阅
2025-07-31 14:50:46.118 [SpringApplicationShutdownHook] INFO  c.f.w.monitor.ThreadPoolMonitor - 线程池监控器已关闭
2025-07-31 14:50:46.118 [SpringApplicationShutdownHook] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件总线线程池已关闭
2025-07-31 14:50:52.947 [main] INFO  c.f.w.WebSocketFrameworkApplication - Starting WebSocketFrameworkApplication using Java 1.8.0_202 on DESKTOP-EGK8BP4 with PID 27096 (D:\workTool\IdeaProjects\websocket-framework\target\classes started by admin in D:\workTool\IdeaProjects\websocket-framework)
2025-07-31 14:50:52.948 [main] INFO  c.f.w.WebSocketFrameworkApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-31 14:50:53.841 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2025-07-31 14:50:53.846 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-07-31 14:50:53.898 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 23 ms. Found 0 Redis repository interfaces.
2025-07-31 14:50:54.831 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2025-07-31 14:50:54.865 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-31 14:50:54.866 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.63]
2025-07-31 14:50:55.254 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-31 14:50:55.255 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2245 ms
2025-07-31 14:50:57.668 [main] INFO  c.f.w.c.WebSocketFrameworkConfig - WebSocket线程池已创建: 核心线程=10, 最大线程=50, 队列容量=1000
2025-07-31 14:50:57.853 [main] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件总线初始化完成
2025-07-31 14:50:58.078 [main] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件订阅者注册成功: WebSocketMetricsCollector
2025-07-31 14:50:58.079 [main] INFO  c.f.w.m.WebSocketMetricsCollector - WebSocket指标收集器已启用并注册到事件总线
2025-07-31 14:50:58.173 [main] INFO  c.f.w.p.WebSocketServiceProcessor - WebSocket服务注册成功: serviceId=chatroom, serviceName=聊天室服务, beanName=chatRoomWebSocketService, class=ChatRoomWebSocketService
2025-07-31 14:50:58.186 [main] INFO  c.f.w.p.WebSocketServiceProcessor - WebSocket服务注册成功: serviceId=notification, serviceName=通知推送服务, beanName=notificationWebSocketService, class=NotificationWebSocketService
2025-07-31 14:50:58.234 [main] INFO  c.f.w.monitor.ThreadPoolMonitor - 智能线程池监控器已启动，初始监控间隔: 30秒
2025-07-31 14:50:58.247 [main] INFO  c.f.w.p.WebSocketServiceProcessor - WebSocket服务注册成功: serviceId=monitor, serviceName=monitor, beanName=threadPoolMonitorWebSocketService, class=ThreadPoolMonitorWebSocketService
2025-07-31 14:50:58.274 [main] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件订阅者注册成功: WebSocketMessageHandlerDispatcher
2025-07-31 14:50:58.274 [main] INFO  c.f.w.h.WebSocketMessageHandlerDispatcher - WebSocketMessageHandlerDispatcher初始化完成, 注册了4个消息处理器, 1个拦截器
2025-07-31 14:50:58.362 [main] INFO  c.f.websocket.monitor.MemoryMonitor - 内存监控器已启动 - 初始堆内存使用率: {:.1f}% (0.3613615215312483MB/32MB)
2025-07-31 14:50:58.369 [main] INFO  c.f.w.monitor.ThreadPoolMetricsStore - 线程池监控数据存储服务已启动，数据保留时间: 24小时
2025-07-31 14:51:00.723 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2025-07-31 14:51:00.761 [WebSocket-3] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:51:00.780 [main] INFO  c.f.w.WebSocketFrameworkApplication - Started WebSocketFrameworkApplication in 8.223 seconds (JVM running for 8.979)
2025-07-31 14:51:30.764 [WebSocket-10] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:51:50.794 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-07-31 14:51:50.794 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-07-31 14:51:50.794 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 0 ms
2025-07-31 14:51:50.916 [http-nio-8080-exec-1] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已添加: service=monitor, userId=test_user, sessionId=0
2025-07-31 14:51:50.936 [http-nio-8080-exec-1] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接建立: service=monitor, userId=test_user, sessionId=0, clientIp=null
2025-07-31 14:51:50.939 [WebSocket-1] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端连接: test_user
2025-07-31 14:51:50.946 [WebSocket-1] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"type":"welcome","message":"欢迎连接线程池监控中心","timestamp":1753944710939}
2025-07-31 14:51:50.946 [WebSocket-1] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:51:50.949 [WebSocket-1] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":30,"samplingRate":2,"lastHealthStatus":"HEALTHY","monitoringExecutions":1,"avgMonitoringCostMs":0.1249},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":9,"completedTaskCount":16,"taskCount":26,"totalThreadCount":51,"peakThreadCount":51,"poolUtilization":0.02,"queueUtilization":0.009,"throughput":0.29732408325074333,"timestamp":1753944710946},"timestamp":1753944710946},"type":"threadpool_metrics"}
2025-07-31 14:51:50.956 [WebSocket-1] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:51:50.957 [WebSocket-1] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:51:50.976 [WebSocket-7] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:51:50.976 [WebSocket-7] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:51:52.570 [http-nio-8080-exec-4] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已移除: service=monitor, userId=test_user, sessionId=0
2025-07-31 14:51:52.571 [http-nio-8080-exec-4] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接关闭: service=monitor, userId=test_user, sessionId=0, code=NORMAL_CLOSURE, reason=null
2025-07-31 14:51:52.572 [WebSocket-1] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端断开: test_user
2025-07-31 14:51:52.574 [WebSocket-1] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:51:52.576 [WebSocket-1] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:51:55.229 [http-nio-8080-exec-3] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已添加: service=monitor, userId=test_user, sessionId=1
2025-07-31 14:51:55.232 [http-nio-8080-exec-3] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接建立: service=monitor, userId=test_user, sessionId=1, clientIp=null
2025-07-31 14:51:55.233 [WebSocket-3] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端连接: test_user
2025-07-31 14:51:55.235 [WebSocket-3] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"type":"welcome","message":"欢迎连接线程池监控中心","timestamp":1753944715233}
2025-07-31 14:51:55.239 [WebSocket-3] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:51:55.240 [WebSocket-3] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":30,"samplingRate":2,"lastHealthStatus":"HEALTHY","monitoringExecutions":1,"avgMonitoringCostMs":0.1249},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":10,"completedTaskCount":32,"taskCount":43,"totalThreadCount":55,"peakThreadCount":55,"poolUtilization":0.02,"queueUtilization":0.01,"throughput":3.7269974376892616,"timestamp":1753944715239},"timestamp":1753944715239},"type":"threadpool_metrics"}
2025-07-31 14:51:55.242 [WebSocket-3] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:51:55.245 [WebSocket-3] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:51:55.317 [WebSocket-1] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:51:55.317 [WebSocket-1] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:51:57.709 [http-nio-8080-exec-2] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已添加: service=chatroom, userId=test_user, sessionId=2
2025-07-31 14:51:57.709 [http-nio-8080-exec-2] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接建立: service=chatroom, userId=test_user, sessionId=2, clientIp=null
2025-07-31 14:51:57.729 [WebSocket-7] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=chatroom, 接收用户数=1, message={"type":"system","message":"系统消息: 用户 test_user 加入了聊天室","timestamp":1753944717728}
2025-07-31 14:51:57.731 [WebSocket-7] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=chatroom, userId=test_user, message={"type":"system","message":"系统消息: 当前在线用户数: 1","timestamp":1753944717730}
2025-07-31 14:51:57.731 [WebSocket-7] INFO  c.f.w.e.ChatRoomWebSocketService - 用户加入聊天室: userId=test_user, 当前在线数: 1
2025-07-31 14:51:57.732 [WebSocket-7] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:51:57.733 [WebSocket-7] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:51:57.761 [WebSocket-1] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:51:57.762 [WebSocket-1] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:51:59.430 [ThreadPoolMonitor] INFO  c.f.w.monitor.ThreadPoolMonitor - 调整监控策略: 健康状态=健康, 监控间隔: 30秒->40秒, 采样率: 1:2 -> 1:3
2025-07-31 14:51:59.456 [ThreadPoolMonitor] INFO  c.f.w.monitor.ThreadPoolMonitor - 调整监控策略: 健康状态=健康, 监控间隔: 40秒->50秒, 采样率: 1:3 -> 1:4
2025-07-31 14:51:59.502 [ThreadPoolMonitor] INFO  c.f.w.monitor.ThreadPoolMonitor - 调整监控策略: 健康状态=健康, 监控间隔: 50秒->60秒, 采样率: 1:4 -> 1:5
2025-07-31 14:51:59.568 [ThreadPoolMonitor] INFO  c.f.w.monitor.ThreadPoolMonitor - 调整监控策略: 健康状态=健康, 监控间隔: 60秒->70秒, 采样率: 1:5 -> 1:5
2025-07-31 14:52:00.610 [http-nio-8080-exec-5] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已添加: service=monitor, userId=test_user, sessionId=3
2025-07-31 14:52:00.610 [http-nio-8080-exec-5] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接建立: service=monitor, userId=test_user, sessionId=3, clientIp=null
2025-07-31 14:52:00.610 [WebSocket-10] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端连接: test_user
2025-07-31 14:52:00.610 [WebSocket-10] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"type":"welcome","message":"欢迎连接线程池监控中心","timestamp":1753944720610}
2025-07-31 14:52:00.610 [WebSocket-10] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:52:00.610 [WebSocket-10] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":6,"avgMonitoringCostMs":221.3306},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":12,"completedTaskCount":54,"taskCount":67,"totalThreadCount":59,"peakThreadCount":59,"poolUtilization":0.02,"queueUtilization":0.012,"throughput":4.798464491362764,"timestamp":1753944720610},"timestamp":1753944720610},"type":"threadpool_metrics"}
2025-07-31 14:52:00.623 [WebSocket-10] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:52:00.626 [WebSocket-10] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:52:00.656 [WebSocket-6] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:52:00.661 [WebSocket-6] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:52:00.764 [WebSocket-3] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:52:00.766 [WebSocket-1] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:52:00.770 [WebSocket-1] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 接收用户数=1, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":6,"avgMonitoringCostMs":221.3306},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":2,"queueSize":10,"completedTaskCount":63,"taskCount":75,"totalThreadCount":60,"peakThreadCount":60,"poolUtilization":0.04,"queueUtilization":0.01,"throughput":0.0,"timestamp":1753944720767},"timestamp":1753944720767},"type":"threadpool_metrics"}
2025-07-31 14:52:25.295 [WebSocket-10] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:52:25.296 [WebSocket-10] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:52:27.768 [WebSocket-7] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:52:27.770 [WebSocket-7] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:52:30.660 [WebSocket-1] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:52:30.662 [WebSocket-1] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:52:30.771 [WebSocket-6] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:52:30.772 [WebSocket-9] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:52:30.774 [WebSocket-6] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 接收用户数=1, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":6,"avgMonitoringCostMs":221.3306},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":2,"queueSize":9,"completedTaskCount":92,"taskCount":103,"totalThreadCount":61,"peakThreadCount":61,"poolUtilization":0.04,"queueUtilization":0.009,"throughput":0.9665055824029328,"timestamp":1753944750772},"timestamp":1753944750772},"type":"threadpool_metrics"}
2025-07-31 14:52:55.285 [WebSocket-3] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:52:55.290 [WebSocket-3] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:52:57.774 [WebSocket-5] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:52:57.774 [WebSocket-5] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:53:00.677 [WebSocket-7] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:53:00.677 [WebSocket-7] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:53:00.773 [WebSocket-10] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:53:00.774 [WebSocket-9] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:53:00.778 [WebSocket-10] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 接收用户数=1, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":6,"avgMonitoringCostMs":221.3306},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":2,"queueSize":9,"completedTaskCount":121,"taskCount":132,"totalThreadCount":61,"peakThreadCount":61,"poolUtilization":0.04,"queueUtilization":0.009,"throughput":0.9666666666666667,"timestamp":1753944780774},"timestamp":1753944780774},"type":"threadpool_metrics"}
2025-07-31 14:53:25.309 [WebSocket-1] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:53:25.309 [WebSocket-1] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:53:27.786 [WebSocket-6] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor66.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:53:27.788 [WebSocket-6] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor66.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:53:30.680 [WebSocket-1] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor66.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:53:30.681 [WebSocket-1] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor66.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:53:30.768 [WebSocket-8] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:53:30.768 [WebSocket-2] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:53:30.770 [WebSocket-2] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 接收用户数=1, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":7,"avgMonitoringCostMs":189.7122},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":2,"queueSize":9,"completedTaskCount":149,"taskCount":160,"totalThreadCount":61,"peakThreadCount":61,"poolUtilization":0.04,"queueUtilization":0.009,"throughput":0.0,"timestamp":1753944810769},"timestamp":1753944810769},"type":"threadpool_metrics"}
2025-07-31 14:53:55.316 [WebSocket-9] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor66.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:53:55.317 [WebSocket-9] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor66.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:53:57.796 [WebSocket-1] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor66.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:53:57.797 [WebSocket-1] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor66.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:54:00.692 [WebSocket-4] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor66.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:54:00.694 [WebSocket-4] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor66.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:54:00.777 [WebSocket-8] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:54:00.775 [WebSocket-5] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:54:00.779 [WebSocket-5] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 接收用户数=1, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":7,"avgMonitoringCostMs":189.7122},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":2,"queueSize":9,"completedTaskCount":178,"taskCount":189,"totalThreadCount":61,"peakThreadCount":61,"poolUtilization":0.04,"queueUtilization":0.009,"throughput":0.0,"timestamp":1753944840778},"timestamp":1753944840778},"type":"threadpool_metrics"}
2025-07-31 14:54:25.334 [WebSocket-3] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor66.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:54:25.335 [WebSocket-3] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor66.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:54:27.811 [WebSocket-9] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor66.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:54:27.812 [WebSocket-9] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor66.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:54:30.698 [WebSocket-9] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor66.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:54:30.699 [WebSocket-9] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor66.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:54:30.775 [WebSocket-2] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:54:30.775 [WebSocket-1] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:54:30.776 [WebSocket-2] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 接收用户数=1, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":8,"avgMonitoringCostMs":165.9985},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":2,"queueSize":9,"completedTaskCount":206,"taskCount":217,"totalThreadCount":61,"peakThreadCount":61,"poolUtilization":0.04,"queueUtilization":0.009,"throughput":0.9334266760009334,"timestamp":1753944870775},"timestamp":1753944870775},"type":"threadpool_metrics"}
2025-07-31 14:54:55.342 [WebSocket-6] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor66.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:54:55.343 [WebSocket-6] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor66.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:54:57.820 [WebSocket-4] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor66.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:54:57.821 [WebSocket-4] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor66.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:55:00.712 [WebSocket-4] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor66.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:55:00.713 [WebSocket-4] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor66.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:55:00.771 [WebSocket-3] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:55:00.771 [WebSocket-10] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:55:00.772 [WebSocket-10] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 接收用户数=1, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":8,"avgMonitoringCostMs":165.9985},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":2,"queueSize":9,"completedTaskCount":235,"taskCount":246,"totalThreadCount":61,"peakThreadCount":61,"poolUtilization":0.04,"queueUtilization":0.009,"throughput":0.0,"timestamp":1753944900772},"timestamp":1753944900772},"type":"threadpool_metrics"}
2025-07-31 14:55:00.800 [WebSocket-3] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:55:12.081 [SpringApplicationShutdownHook] WARN  c.f.w.s.WebSocketSessionManager - WebSocket会话移除失败，会话不匹配: service=monitor, userId=test_user
2025-07-31 14:55:12.081 [SpringApplicationShutdownHook] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接关闭: service=monitor, userId=test_user, sessionId=1, code=GOING_AWAY, reason=The web application is stopping
2025-07-31 14:55:12.081 [WebSocket-9] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端断开: test_user
2025-07-31 14:55:12.082 [WebSocket-9] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor66.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:55:12.084 [WebSocket-9] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor66.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:55:12.111 [SpringApplicationShutdownHook] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已移除: service=chatroom, userId=test_user, sessionId=2
2025-07-31 14:55:12.112 [SpringApplicationShutdownHook] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接关闭: service=chatroom, userId=test_user, sessionId=2, code=GOING_AWAY, reason=The web application is stopping
2025-07-31 14:55:12.112 [WebSocket-6] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=chatroom, 接收用户数=0, message={"type":"system","message":"系统消息: 用户 test_user 离开了聊天室","timestamp":1753944912112}
2025-07-31 14:55:12.112 [WebSocket-6] INFO  c.f.w.e.ChatRoomWebSocketService - 用户离开聊天室: userId=test_user, 当前在线数: 0
2025-07-31 14:55:12.115 [WebSocket-6] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor66.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:55:12.116 [WebSocket-6] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor66.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:55:12.148 [SpringApplicationShutdownHook] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已移除: service=monitor, userId=test_user, sessionId=3
2025-07-31 14:55:12.148 [SpringApplicationShutdownHook] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接关闭: service=monitor, userId=test_user, sessionId=3, code=GOING_AWAY, reason=The web application is stopping
2025-07-31 14:55:12.149 [WebSocket-3] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端断开: test_user
2025-07-31 14:55:12.149 [WebSocket-3] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor66.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:55:12.150 [WebSocket-3] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor66.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:55:12.165 [SpringApplicationShutdownHook] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件订阅者取消注册成功: WebSocketMessageHandlerDispatcher
2025-07-31 14:55:12.165 [SpringApplicationShutdownHook] INFO  c.f.w.h.WebSocketMessageHandlerDispatcher - WebSocketMessageHandlerDispatcher已取消EventBus订阅
2025-07-31 14:55:12.166 [SpringApplicationShutdownHook] INFO  c.f.w.monitor.ThreadPoolMonitor - 线程池监控器已关闭
2025-07-31 14:55:12.168 [SpringApplicationShutdownHook] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件总线线程池已关闭
2025-07-31 14:55:22.766 [main] INFO  c.f.w.WebSocketFrameworkApplication - Starting WebSocketFrameworkApplication using Java 1.8.0_202 on DESKTOP-EGK8BP4 with PID 34088 (D:\workTool\IdeaProjects\websocket-framework\target\classes started by admin in D:\workTool\IdeaProjects\websocket-framework)
2025-07-31 14:55:22.769 [main] INFO  c.f.w.WebSocketFrameworkApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-31 14:55:23.990 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2025-07-31 14:55:23.996 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-07-31 14:55:24.043 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 21 ms. Found 0 Redis repository interfaces.
2025-07-31 14:55:24.797 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2025-07-31 14:55:24.816 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-31 14:55:24.816 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.63]
2025-07-31 14:55:25.078 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-31 14:55:25.078 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2176 ms
2025-07-31 14:55:25.846 [main] INFO  c.f.w.c.WebSocketFrameworkConfig - WebSocket线程池已创建: 核心线程=10, 最大线程=50, 队列容量=1000
2025-07-31 14:55:25.900 [main] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件总线初始化完成
2025-07-31 14:55:25.993 [main] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件订阅者注册成功: WebSocketMetricsCollector
2025-07-31 14:55:25.993 [main] INFO  c.f.w.m.WebSocketMetricsCollector - WebSocket指标收集器已启用并注册到事件总线
2025-07-31 14:55:26.013 [main] INFO  c.f.w.p.WebSocketServiceProcessor - WebSocket服务注册成功: serviceId=chatroom, serviceName=聊天室服务, beanName=chatRoomWebSocketService, class=ChatRoomWebSocketService
2025-07-31 14:55:26.015 [main] INFO  c.f.w.p.WebSocketServiceProcessor - WebSocket服务注册成功: serviceId=notification, serviceName=通知推送服务, beanName=notificationWebSocketService, class=NotificationWebSocketService
2025-07-31 14:55:26.032 [main] INFO  c.f.w.monitor.ThreadPoolMonitor - 智能线程池监控器已启动，初始监控间隔: 30秒
2025-07-31 14:55:26.035 [main] INFO  c.f.w.p.WebSocketServiceProcessor - WebSocket服务注册成功: serviceId=monitor, serviceName=monitor, beanName=threadPoolMonitorWebSocketService, class=ThreadPoolMonitorWebSocketService
2025-07-31 14:55:26.043 [main] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件订阅者注册成功: WebSocketMessageHandlerDispatcher
2025-07-31 14:55:26.044 [main] INFO  c.f.w.h.WebSocketMessageHandlerDispatcher - WebSocketMessageHandlerDispatcher初始化完成, 注册了4个消息处理器, 1个拦截器
2025-07-31 14:55:26.077 [main] INFO  c.f.websocket.monitor.MemoryMonitor - 内存监控器已启动 - 初始堆内存使用率: {:.1f}% (0.35574503162217813MB/32MB)
2025-07-31 14:55:26.080 [main] INFO  c.f.w.monitor.ThreadPoolMetricsStore - 线程池监控数据存储服务已启动，数据保留时间: 24小时
2025-07-31 14:55:26.893 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2025-07-31 14:55:26.916 [WebSocket-5] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:55:26.930 [main] INFO  c.f.w.WebSocketFrameworkApplication - Started WebSocketFrameworkApplication in 5.466 seconds (JVM running for 8.556)
2025-07-31 14:55:29.302 [WebSocket-5] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:55:29.573 [http-nio-8080-exec-2] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-07-31 14:55:29.574 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-07-31 14:55:29.575 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-07-31 14:55:29.749 [http-nio-8080-exec-2] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已添加: service=monitor, userId=monitor_1753944929312_khjld0949, sessionId=0
2025-07-31 14:55:29.771 [http-nio-8080-exec-2] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接建立: service=monitor, userId=monitor_1753944929312_khjld0949, sessionId=0, clientIp=null
2025-07-31 14:55:29.775 [WebSocket-7] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端连接: monitor_1753944929312_khjld0949
2025-07-31 14:55:29.791 [WebSocket-7] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753944929312_khjld0949, message={"type":"welcome","message":"欢迎连接线程池监控中心","timestamp":1753944929775}
2025-07-31 14:55:29.791 [WebSocket-7] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:55:29.797 [WebSocket-7] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753944929312_khjld0949, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":30,"samplingRate":2,"lastHealthStatus":"HEALTHY","monitoringExecutions":0,"avgMonitoringCostMs":0.0},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":9,"completedTaskCount":12,"taskCount":22,"totalThreadCount":51,"peakThreadCount":51,"poolUtilization":0.02,"queueUtilization":0.009,"throughput":14.314928425357873,"timestamp":1753944929791},"timestamp":1753944929791},"type":"threadpool_metrics"}
2025-07-31 14:55:29.813 [WebSocket-7] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:55:29.814 [WebSocket-7] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:55:29.848 [WebSocket-3] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:55:29.849 [WebSocket-3] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:55:43.314 [WebSocket-7] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753944929312_khjld0949, sessionId=0, message={"action":"refresh","timestamp":1753944943310}
2025-07-31 14:55:43.370 [WebSocket-4] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:55:43.370 [WebSocket-4] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753944929312_khjld0949, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":30,"samplingRate":2,"lastHealthStatus":"HEALTHY","monitoringExecutions":0,"avgMonitoringCostMs":0.0},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":9,"completedTaskCount":23,"taskCount":33,"totalThreadCount":52,"peakThreadCount":52,"poolUtilization":0.02,"queueUtilization":0.009,"throughput":0.8100743795566684,"timestamp":1753944943370},"timestamp":1753944943370},"type":"threadpool_metrics"}
2025-07-31 14:55:43.371 [WebSocket-4] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:55:43.371 [WebSocket-4] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:55:56.919 [WebSocket-3] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:55:56.921 [WebSocket-9] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:55:56.927 [WebSocket-9] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 接收用户数=1, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":30,"samplingRate":2,"lastHealthStatus":"HEALTHY","monitoringExecutions":1,"avgMonitoringCostMs":0.0151},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":2,"queueSize":7,"completedTaskCount":26,"taskCount":35,"totalThreadCount":52,"peakThreadCount":52,"poolUtilization":0.04,"queueUtilization":0.007,"throughput":0.0,"timestamp":1753944956922},"timestamp":1753944956922},"type":"threadpool_metrics"}
2025-07-31 14:55:59.814 [WebSocket-5] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:55:59.816 [WebSocket-5] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:56:13.318 [WebSocket-2] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753944929312_khjld0949, sessionId=0, message={"action":"refresh","timestamp":1753944973315}
2025-07-31 14:56:13.319 [WebSocket-1] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:56:13.319 [WebSocket-1] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753944929312_khjld0949, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":30,"samplingRate":2,"lastHealthStatus":"HEALTHY","monitoringExecutions":1,"avgMonitoringCostMs":0.0151},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":9,"completedTaskCount":41,"taskCount":51,"totalThreadCount":54,"peakThreadCount":54,"poolUtilization":0.02,"queueUtilization":0.009,"throughput":0.9148014880770874,"timestamp":1753944973319},"timestamp":1753944973319},"type":"threadpool_metrics"}
2025-07-31 14:56:13.320 [WebSocket-1] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:56:13.320 [WebSocket-1] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:56:26.401 [ThreadPoolMonitor] INFO  c.f.w.monitor.ThreadPoolMonitor - 调整监控策略: 健康状态=健康, 监控间隔: 30秒->40秒, 采样率: 1:2 -> 1:3
2025-07-31 14:56:26.427 [ThreadPoolMonitor] INFO  c.f.w.monitor.ThreadPoolMonitor - 调整监控策略: 健康状态=健康, 监控间隔: 40秒->50秒, 采样率: 1:3 -> 1:4
2025-07-31 14:56:26.451 [ThreadPoolMonitor] INFO  c.f.w.monitor.ThreadPoolMonitor - 调整监控策略: 健康状态=健康, 监控间隔: 50秒->60秒, 采样率: 1:4 -> 1:5
2025-07-31 14:56:26.473 [ThreadPoolMonitor] INFO  c.f.w.monitor.ThreadPoolMonitor - 调整监控策略: 健康状态=健康, 监控间隔: 60秒->70秒, 采样率: 1:5 -> 1:5
2025-07-31 14:56:26.918 [WebSocket-2] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:56:26.918 [WebSocket-9] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:56:26.920 [WebSocket-9] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 接收用户数=1, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":6,"avgMonitoringCostMs":70.9621},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":2,"queueSize":7,"completedTaskCount":45,"taskCount":54,"totalThreadCount":54,"peakThreadCount":54,"poolUtilization":0.04,"queueUtilization":0.007,"throughput":0.0,"timestamp":1753944986919},"timestamp":1753944986919},"type":"threadpool_metrics"}
2025-07-31 14:56:29.814 [WebSocket-2] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:56:29.816 [WebSocket-2] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:56:43.321 [WebSocket-3] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753944929312_khjld0949, sessionId=0, message={"action":"refresh","timestamp":1753945003318}
2025-07-31 14:56:43.322 [WebSocket-5] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:56:43.323 [WebSocket-5] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753944929312_khjld0949, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":6,"avgMonitoringCostMs":70.9621},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":9,"completedTaskCount":60,"taskCount":70,"totalThreadCount":55,"peakThreadCount":55,"poolUtilization":0.02,"queueUtilization":0.009,"throughput":0.9144668658172286,"timestamp":1753945003322},"timestamp":1753945003322},"type":"threadpool_metrics"}
2025-07-31 14:56:43.324 [WebSocket-5] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:56:43.325 [WebSocket-5] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:56:56.921 [WebSocket-2] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:56:56.922 [WebSocket-11] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:56:56.927 [WebSocket-11] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 接收用户数=1, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":6,"avgMonitoringCostMs":70.9621},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":2,"queueSize":7,"completedTaskCount":63,"taskCount":72,"totalThreadCount":55,"peakThreadCount":55,"poolUtilization":0.04,"queueUtilization":0.007,"throughput":0.0,"timestamp":1753945016924},"timestamp":1753945016924},"type":"threadpool_metrics"}
2025-07-31 14:56:59.828 [WebSocket-2] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:56:59.830 [WebSocket-2] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:57:13.315 [WebSocket-5] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753944929312_khjld0949, sessionId=0, message={"action":"refresh","timestamp":1753945033312}
2025-07-31 14:57:13.316 [WebSocket-11] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:57:13.318 [WebSocket-11] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753944929312_khjld0949, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":6,"avgMonitoringCostMs":70.9621},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":9,"completedTaskCount":78,"taskCount":88,"totalThreadCount":56,"peakThreadCount":56,"poolUtilization":0.02,"queueUtilization":0.009,"throughput":0.915024705667053,"timestamp":1753945033317},"timestamp":1753945033317},"type":"threadpool_metrics"}
2025-07-31 14:57:13.318 [WebSocket-11] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:57:13.318 [WebSocket-11] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:57:26.930 [WebSocket-7] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:57:26.930 [WebSocket-9] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:57:26.931 [WebSocket-9] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 接收用户数=1, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":6,"avgMonitoringCostMs":70.9621},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":2,"queueSize":7,"completedTaskCount":82,"taskCount":91,"totalThreadCount":56,"peakThreadCount":56,"poolUtilization":0.04,"queueUtilization":0.007,"throughput":0.0,"timestamp":1753945046931},"timestamp":1753945046931},"type":"threadpool_metrics"}
2025-07-31 14:57:29.834 [WebSocket-12] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:57:29.836 [WebSocket-12] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:57:43.321 [WebSocket-2] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753944929312_khjld0949, sessionId=0, message={"action":"refresh","timestamp":1753945063319}
2025-07-31 14:57:43.322 [WebSocket-4] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:57:43.323 [WebSocket-4] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753944929312_khjld0949, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":7,"avgMonitoringCostMs":60.82555714285714},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":9,"completedTaskCount":97,"taskCount":107,"totalThreadCount":58,"peakThreadCount":58,"poolUtilization":0.02,"queueUtilization":0.009,"throughput":0.9151363553169424,"timestamp":1753945063322},"timestamp":1753945063322},"type":"threadpool_metrics"}
2025-07-31 14:57:43.325 [WebSocket-4] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:57:43.326 [WebSocket-4] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:57:56.915 [WebSocket-9] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:57:56.916 [WebSocket-6] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:57:56.919 [WebSocket-6] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 接收用户数=1, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":7,"avgMonitoringCostMs":60.82555714285714},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":2,"queueSize":7,"completedTaskCount":100,"taskCount":109,"totalThreadCount":58,"peakThreadCount":58,"poolUtilization":0.04,"queueUtilization":0.007,"throughput":0.0,"timestamp":1753945076917},"timestamp":1753945076917},"type":"threadpool_metrics"}
2025-07-31 14:57:59.848 [WebSocket-1] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:57:59.849 [WebSocket-1] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:58:13.318 [WebSocket-5] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753944929312_khjld0949, sessionId=0, message={"action":"refresh","timestamp":1753945093316}
2025-07-31 14:58:13.318 [WebSocket-12] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:58:13.320 [WebSocket-12] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753944929312_khjld0949, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":7,"avgMonitoringCostMs":60.82555714285714},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":9,"completedTaskCount":115,"taskCount":125,"totalThreadCount":60,"peakThreadCount":60,"poolUtilization":0.02,"queueUtilization":0.009,"throughput":0.9145226191927813,"timestamp":1753945093319},"timestamp":1753945093319},"type":"threadpool_metrics"}
2025-07-31 14:58:13.321 [WebSocket-12] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:58:13.322 [WebSocket-12] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:58:26.921 [WebSocket-4] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:58:26.921 [WebSocket-7] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:58:26.923 [WebSocket-7] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 接收用户数=1, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":7,"avgMonitoringCostMs":60.82555714285714},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":3,"queueSize":7,"completedTaskCount":119,"taskCount":129,"totalThreadCount":60,"peakThreadCount":60,"poolUtilization":0.06,"queueUtilization":0.007,"throughput":0.0,"timestamp":1753945106922},"timestamp":1753945106922},"type":"threadpool_metrics"}
2025-07-31 14:58:29.858 [WebSocket-2] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:58:29.858 [WebSocket-2] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:58:43.322 [WebSocket-6] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753944929312_khjld0949, sessionId=0, message={"action":"refresh","timestamp":1753945123320}
2025-07-31 14:58:43.322 [WebSocket-13] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:58:43.323 [WebSocket-13] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753944929312_khjld0949, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":7,"avgMonitoringCostMs":60.82555714285714},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":9,"completedTaskCount":134,"taskCount":144,"totalThreadCount":61,"peakThreadCount":61,"poolUtilization":0.02,"queueUtilization":0.009,"throughput":0.9145783793671117,"timestamp":1753945123323},"timestamp":1753945123323},"type":"threadpool_metrics"}
2025-07-31 14:58:43.326 [WebSocket-13] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:58:43.326 [WebSocket-13] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:58:56.927 [WebSocket-7] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:58:56.927 [WebSocket-9] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:58:56.931 [WebSocket-7] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 接收用户数=1, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":8,"avgMonitoringCostMs":53.222825},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":2,"queueSize":7,"completedTaskCount":137,"taskCount":146,"totalThreadCount":61,"peakThreadCount":61,"poolUtilization":0.04,"queueUtilization":0.007,"throughput":0.2205071664829107,"timestamp":1753945136928},"timestamp":1753945136928},"type":"threadpool_metrics"}
2025-07-31 14:58:59.866 [WebSocket-9] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:58:59.867 [WebSocket-9] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:59:26.919 [WebSocket-1] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:59:26.920 [WebSocket-7] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:59:26.922 [WebSocket-7] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 接收用户数=1, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":8,"avgMonitoringCostMs":53.222825},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":3,"queueSize":7,"completedTaskCount":150,"taskCount":160,"totalThreadCount":61,"peakThreadCount":61,"poolUtilization":0.06,"queueUtilization":0.007,"throughput":0.0,"timestamp":1753945166921},"timestamp":1753945166921},"type":"threadpool_metrics"}
2025-07-31 14:59:29.875 [WebSocket-14] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor62.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:59:29.878 [WebSocket-14] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor62.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:59:44.312 [WebSocket-13] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753944929312_khjld0949, sessionId=0, message={"action":"refresh","timestamp":1753945184309}
2025-07-31 14:59:44.312 [WebSocket-2] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:59:44.314 [WebSocket-2] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753944929312_khjld0949, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":8,"avgMonitoringCostMs":53.222825},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":2,"queueSize":9,"completedTaskCount":165,"taskCount":176,"totalThreadCount":61,"peakThreadCount":61,"poolUtilization":0.04,"queueUtilization":0.009,"throughput":0.8624655013799448,"timestamp":1753945184313},"timestamp":1753945184313},"type":"threadpool_metrics"}
2025-07-31 14:59:44.315 [WebSocket-2] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor62.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:59:44.317 [WebSocket-2] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor62.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:59:56.927 [WebSocket-1] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:59:56.927 [WebSocket-4] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:59:56.933 [WebSocket-4] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 接收用户数=1, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":9,"avgMonitoringCostMs":47.309333333333335},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":2,"queueSize":7,"completedTaskCount":168,"taskCount":177,"totalThreadCount":61,"peakThreadCount":61,"poolUtilization":0.04,"queueUtilization":0.007,"throughput":0.0,"timestamp":1753945196929},"timestamp":1753945196929},"type":"threadpool_metrics"}
2025-07-31 14:59:59.875 [WebSocket-1] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor62.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:59:59.878 [WebSocket-1] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor62.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 15:00:26.926 [WebSocket-2] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 15:00:26.926 [WebSocket-16] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 15:00:26.928 [WebSocket-16] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 接收用户数=1, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":9,"avgMonitoringCostMs":47.309333333333335},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":4,"queueSize":5,"completedTaskCount":181,"taskCount":190,"totalThreadCount":61,"peakThreadCount":61,"poolUtilization":0.08,"queueUtilization":0.005,"throughput":0.0,"timestamp":1753945226927},"timestamp":1753945226927},"type":"threadpool_metrics"}
2025-07-31 15:00:26.965 [WebSocket-2] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 15:00:26.968 [WebSocket-9] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 接收用户数=1, message={"payload":{"monitoringStats":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":9,"avgMonitoringCostMs":47.309333333333335},"systemLoad":{"availableProcessors":16,"systemLoadAverage":-1.0,"processCpuLoad":2.801021391345534E-4,"systemCpuLoad":0.044431310500395726},"jvmMemory":{"usedMemory":59877048,"totalMemory":736100352,"freeMemory":676223304,"maxMemory":9481224192},"timestamp":1753945226966},"type":"system_stats"}
2025-07-31 15:01:37.120 [WebSocket-14] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 15:01:37.120 [WebSocket-15] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 15:01:37.121 [WebSocket-4] WARN  c.f.websocket.core.WebSocketServer - WebSocket心跳超时，关闭连接: service=monitor, userId=monitor_1753944929312_khjld0949, sessionId=0
2025-07-31 15:01:37.125 [WebSocket-15] WARN  c.f.w.session.WebSocketSession - 会话已关闭，消息发送失败: sessionId=0, userId=monitor_1753944929312_khjld0949, service=monitor
2025-07-31 15:01:37.126 [http-nio-8080-exec-10] WARN  c.f.w.s.WebSocketSessionManager - WebSocket会话移除失败，会话不匹配: service=monitor, userId=monitor_1753944929312_khjld0949
2025-07-31 15:01:37.127 [WebSocket-3] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753944929312_khjld0949, sessionId=0, message={"action":"refresh","timestamp":1753945245313}
2025-07-31 15:01:37.128 [WebSocket-16] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor62.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 15:01:37.127 [WebSocket-17] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753944929312_khjld0949, sessionId=0, message={"action":"refresh","timestamp":1753945274458}
2025-07-31 15:01:37.130 [http-nio-8080-exec-10] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接关闭: service=monitor, userId=monitor_1753944929312_khjld0949, sessionId=0, code=GOING_AWAY, reason=null
2025-07-31 15:01:37.127 [WebSocket-15] ERROR c.f.w.s.WebSocketSessionManager - 广播消息发送失败: service=monitor, userId=monitor_1753944929312_khjld0949
java.io.IOException: WebSocket会话已关闭
	at com.framework.websocket.session.WebSocketSession.sendMessage(WebSocketSession.java:99)
	at com.framework.websocket.session.WebSocketSessionManager.lambda$broadcast$1(WebSocketSessionManager.java:252)
	at java.util.concurrent.ConcurrentHashMap.forEach(ConcurrentHashMap.java:1597)
	at com.framework.websocket.session.WebSocketSessionManager.broadcast(WebSocketSessionManager.java:250)
	at com.framework.websocket.monitor.ThreadPoolMonitorWebSocketService.broadcastMetrics(ThreadPoolMonitorWebSocketService.java:230)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:308)
	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 15:01:37.132 [WebSocket-15] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 接收用户数=1, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":9,"avgMonitoringCostMs":47.309333333333335},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":4,"queueSize":6,"completedTaskCount":198,"taskCount":208,"totalThreadCount":60,"peakThreadCount":61,"poolUtilization":0.08,"queueUtilization":0.006,"throughput":0.0,"timestamp":1753945297122},"timestamp":1753945297122},"type":"threadpool_metrics"}
2025-07-31 15:01:37.132 [WebSocket-16] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=ON_MESSAGE, service=monitor, userId=monitor_1753944929312_khjld0949, sessionId=0
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor62.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 15:01:37.132 [WebSocket-15] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 15:01:37.133 [WebSocket-19] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端断开: monitor_1753944929312_khjld0949
2025-07-31 15:01:37.134 [WebSocket-19] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor62.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 15:01:37.134 [WebSocket-19] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor62.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 15:01:37.134 [WebSocket-18] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 15:01:37.134 [WebSocket-15] ERROR c.f.websocket.core.WebSocketServer - WebSocket发生错误: service=monitor, userId=monitor_1753945277886_prl4lrxlh, sessionId=1
java.io.IOException: java.io.IOException: 你的主机中的软件中止了一个已建立的连接。
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:327)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:262)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:824)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:711)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:325)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:254)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendString(WsRemoteEndpointImplBase.java:195)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:37)
	at com.framework.websocket.session.WebSocketSession.sendMessage(WebSocketSession.java:92)
	at com.framework.websocket.session.WebSocketSessionManager.lambda$broadcast$1(WebSocketSessionManager.java:252)
	at java.util.concurrent.ConcurrentHashMap.forEach(ConcurrentHashMap.java:1597)
	at com.framework.websocket.session.WebSocketSessionManager.broadcast(WebSocketSessionManager.java:250)
	at com.framework.websocket.monitor.ThreadPoolMonitorWebSocketService.broadcastMetrics(ThreadPoolMonitorWebSocketService.java:230)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:308)
	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
Caused by: java.io.IOException: 你的主机中的软件中止了一个已建立的连接。
	at sun.nio.ch.SocketDispatcher.writev0(Native Method)
	at sun.nio.ch.SocketDispatcher.writev(SocketDispatcher.java:55)
	at sun.nio.ch.IOUtil.write(IOUtil.java:148)
	at sun.nio.ch.SocketChannelImpl.write(SocketChannelImpl.java:504)
	at org.apache.tomcat.util.net.NioChannel.write(NioChannel.java:147)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1635)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1068)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1487)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1413)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1384)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:93)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:512)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:314)
	... 22 common frames omitted
2025-07-31 15:01:37.134 [WebSocket-18] WARN  c.f.w.s.WebSocketSessionManager - 消息发送失败，用户不在线: service=monitor, userId=monitor_1753944929312_khjld0949
2025-07-31 15:01:37.134 [WebSocket-15] WARN  c.f.websocket.core.WebSocketServer - WebSocket异常关闭: service=monitor, userId=monitor_1753945277886_prl4lrxlh, sessionId=1, reason=你的主机中的软件中止了一个已建立的连接。
2025-07-31 15:01:37.134 [WebSocket-15] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接关闭: service=monitor, userId=monitor_1753945277886_prl4lrxlh, sessionId=1, code=CLOSED_ABNORMALLY, reason=你的主机中的软件中止了一个已建立的连接。
2025-07-31 15:01:37.134 [WebSocket-18] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor62.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 15:01:37.134 [WebSocket-15] ERROR c.f.w.s.WebSocketSessionManager - 广播消息发送失败: service=monitor, userId=monitor_1753945277886_prl4lrxlh
java.io.IOException: java.io.IOException: 你的主机中的软件中止了一个已建立的连接。
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:327)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:254)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendString(WsRemoteEndpointImplBase.java:195)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:37)
	at com.framework.websocket.session.WebSocketSession.sendMessage(WebSocketSession.java:92)
	at com.framework.websocket.session.WebSocketSessionManager.lambda$broadcast$1(WebSocketSessionManager.java:252)
	at java.util.concurrent.ConcurrentHashMap.forEach(ConcurrentHashMap.java:1597)
	at com.framework.websocket.session.WebSocketSessionManager.broadcast(WebSocketSessionManager.java:250)
	at com.framework.websocket.monitor.ThreadPoolMonitorWebSocketService.broadcastMetrics(ThreadPoolMonitorWebSocketService.java:230)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:308)
	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
Caused by: java.io.IOException: 你的主机中的软件中止了一个已建立的连接。
	at sun.nio.ch.SocketDispatcher.writev0(Native Method)
	at sun.nio.ch.SocketDispatcher.writev(SocketDispatcher.java:55)
	at sun.nio.ch.IOUtil.write(IOUtil.java:148)
	at sun.nio.ch.SocketChannelImpl.write(SocketChannelImpl.java:504)
	at org.apache.tomcat.util.net.NioChannel.write(NioChannel.java:147)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1635)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1068)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1487)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1413)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1384)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:93)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:512)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:314)
	... 22 common frames omitted
2025-07-31 15:01:37.134 [WebSocket-15] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 接收用户数=2, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":9,"avgMonitoringCostMs":47.309333333333335},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":7,"queueSize":6,"completedTaskCount":218,"taskCount":231,"totalThreadCount":61,"peakThreadCount":62,"poolUtilization":0.14,"queueUtilization":0.006,"throughput":1818.1818181818182,"timestamp":1753945297133},"timestamp":1753945297133},"type":"threadpool_metrics"}
2025-07-31 15:01:37.134 [WebSocket-18] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor62.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 15:01:37.134 [WebSocket-13] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor62.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 15:01:37.134 [WebSocket-13] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor62.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 15:01:37.134 [WebSocket-9] ERROR c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端错误: monitor_1753945277886_prl4lrxlh, error: java.io.IOException: 你的主机中的软件中止了一个已建立的连接。
2025-07-31 15:01:37.134 [WebSocket-9] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor62.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 15:01:37.134 [WebSocket-9] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor62.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 15:01:37.134 [WebSocket-3] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端断开: monitor_1753945277886_prl4lrxlh
2025-07-31 15:01:37.134 [WebSocket-3] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor62.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 15:01:37.142 [WebSocket-3] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor62.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 15:01:37.142 [WebSocket-16] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor62.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 15:01:37.142 [WebSocket-16] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor62.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 15:01:37.152 [WebSocket-14] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 15:01:37.160 [http-nio-8080-exec-2] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已添加: service=monitor, userId=monitor_1753945277886_prl4lrxlh, sessionId=1
2025-07-31 15:01:37.161 [http-nio-8080-exec-2] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接建立: service=monitor, userId=monitor_1753945277886_prl4lrxlh, sessionId=1, clientIp=null
2025-07-31 15:01:37.161 [WebSocket-4] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已移除: service=monitor, userId=monitor_1753944929312_khjld0949, sessionId=0
2025-07-31 15:01:37.161 [WebSocket-3] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端连接: monitor_1753945277886_prl4lrxlh
2025-07-31 15:01:37.161 [http-nio-8080-exec-1] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已添加: service=monitor, userId=monitor_1753945290601_2bzwhwuyk, sessionId=2
2025-07-31 15:01:37.161 [WebSocket-3] WARN  c.f.w.session.WebSocketSession - 会话已关闭，消息发送失败: sessionId=1, userId=monitor_1753945277886_prl4lrxlh, service=monitor
2025-07-31 15:01:37.163 [http-nio-8080-exec-1] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接建立: service=monitor, userId=monitor_1753945290601_2bzwhwuyk, sessionId=2, clientIp=null
2025-07-31 15:01:37.166 [WebSocket-3] ERROR c.f.w.s.WebSocketSessionManager - 消息发送失败: service=monitor, userId=monitor_1753945277886_prl4lrxlh, message={"type":"welcome","message":"欢迎连接线程池监控中心","timestamp":1753945297161}
java.io.IOException: WebSocket会话已关闭
	at com.framework.websocket.session.WebSocketSession.sendMessage(WebSocketSession.java:99)
	at com.framework.websocket.session.WebSocketSessionManager.sendMessage(WebSocketSessionManager.java:268)
	at com.framework.websocket.monitor.ThreadPoolMonitorWebSocketService.sendWelcomeMessage(ThreadPoolMonitorWebSocketService.java:81)
	at com.framework.websocket.monitor.ThreadPoolMonitorWebSocketService.handleEvent(ThreadPoolMonitorWebSocketService.java:47)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor62.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 15:01:37.166 [http-nio-8080-exec-2] ERROR c.f.websocket.core.WebSocketServer - WebSocket发生错误: service=monitor, userId=monitor_1753945277886_prl4lrxlh, sessionId=1
java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper.fillReadBuffer(NioEndpoint.java:1296)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper.read(NioEndpoint.java:1226)
	at org.apache.tomcat.websocket.server.WsFrameServer.onDataAvailable(WsFrameServer.java:75)
	at org.apache.tomcat.websocket.server.WsFrameServer.doOnDataAvailable(WsFrameServer.java:183)
	at org.apache.tomcat.websocket.server.WsFrameServer.notifyDataAvailable(WsFrameServer.java:162)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.upgradeDispatch(WsHttpUpgradeHandler.java:157)
	at org.apache.coyote.http11.upgrade.UpgradeProcessorInternal.dispatch(UpgradeProcessorInternal.java:60)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:59)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 15:01:37.166 [WebSocket-3] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 15:01:37.166 [WebSocket-3] WARN  c.f.w.session.WebSocketSession - 会话已关闭，消息发送失败: sessionId=1, userId=monitor_1753945277886_prl4lrxlh, service=monitor
2025-07-31 15:01:37.170 [WebSocket-3] ERROR c.f.w.s.WebSocketSessionManager - 消息发送失败: service=monitor, userId=monitor_1753945277886_prl4lrxlh, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":9,"avgMonitoringCostMs":47.309333333333335},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":4,"queueSize":10,"completedTaskCount":249,"taskCount":263,"totalThreadCount":62,"peakThreadCount":62,"poolUtilization":0.08,"queueUtilization":0.01,"throughput":1071.4285714285713,"timestamp":1753945297166},"timestamp":1753945297166},"type":"threadpool_metrics"}
java.io.IOException: WebSocket会话已关闭
	at com.framework.websocket.session.WebSocketSession.sendMessage(WebSocketSession.java:99)
	at com.framework.websocket.session.WebSocketSessionManager.sendMessage(WebSocketSessionManager.java:268)
	at com.framework.websocket.monitor.ThreadPoolMonitorWebSocketService.sendCurrentMetrics(ThreadPoolMonitorWebSocketService.java:106)
	at com.framework.websocket.monitor.ThreadPoolMonitorWebSocketService.handleEvent(ThreadPoolMonitorWebSocketService.java:48)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor62.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 15:01:37.172 [WebSocket-3] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor62.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 15:01:37.174 [WebSocket-3] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor62.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 15:01:37.175 [WebSocket-13] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端连接: monitor_1753945290601_2bzwhwuyk
2025-07-31 15:01:37.177 [WebSocket-13] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753945290601_2bzwhwuyk, message={"type":"welcome","message":"欢迎连接线程池监控中心","timestamp":1753945297175}
2025-07-31 15:01:37.177 [WebSocket-13] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 15:01:37.177 [WebSocket-13] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753945290601_2bzwhwuyk, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":9,"avgMonitoringCostMs":47.309333333333335},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":3,"queueSize":10,"completedTaskCount":250,"taskCount":263,"totalThreadCount":62,"peakThreadCount":62,"poolUtilization":0.06,"queueUtilization":0.01,"throughput":90.90909090909092,"timestamp":1753945297177},"timestamp":1753945297177},"type":"threadpool_metrics"}
2025-07-31 15:01:37.177 [WebSocket-13] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor62.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 15:01:37.177 [WebSocket-13] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor62.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 15:01:37.177 [WebSocket-18] ERROR c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端错误: monitor_1753945277886_prl4lrxlh, error: null
2025-07-31 15:01:37.177 [WebSocket-18] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor62.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 15:01:37.177 [WebSocket-18] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor62.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 15:01:37.195 [WebSocket-17] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor62.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 15:01:37.195 [ThreadPoolMonitor] INFO  c.f.w.monitor.ThreadPoolMonitor - 调整监控策略: 健康状态=健康, 监控间隔: 70秒->80秒, 采样率: 1:5 -> 1:5
2025-07-31 15:01:37.195 [WebSocket-17] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor62.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 15:01:37.817 [SpringApplicationShutdownHook] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已移除: service=monitor, userId=monitor_1753945290601_2bzwhwuyk, sessionId=2
2025-07-31 15:01:37.817 [SpringApplicationShutdownHook] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接关闭: service=monitor, userId=monitor_1753945290601_2bzwhwuyk, sessionId=2, code=GOING_AWAY, reason=The web application is stopping
2025-07-31 15:01:37.817 [WebSocket-3] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端断开: monitor_1753945290601_2bzwhwuyk
2025-07-31 15:01:37.817 [WebSocket-3] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor62.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 15:01:37.817 [WebSocket-3] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor62.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 15:01:37.833 [SpringApplicationShutdownHook] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件订阅者取消注册成功: WebSocketMessageHandlerDispatcher
2025-07-31 15:01:37.833 [SpringApplicationShutdownHook] INFO  c.f.w.h.WebSocketMessageHandlerDispatcher - WebSocketMessageHandlerDispatcher已取消EventBus订阅
2025-07-31 15:01:37.833 [SpringApplicationShutdownHook] INFO  c.f.w.monitor.ThreadPoolMonitor - 线程池监控器已关闭
2025-07-31 15:01:37.833 [SpringApplicationShutdownHook] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件总线线程池已关闭
2025-07-31 15:01:42.157 [main] INFO  c.f.w.WebSocketFrameworkApplication - Starting WebSocketFrameworkApplication using Java 1.8.0_202 on DESKTOP-EGK8BP4 with PID 29484 (D:\workTool\IdeaProjects\websocket-framework\target\classes started by admin in D:\workTool\IdeaProjects\websocket-framework)
2025-07-31 15:01:42.158 [main] INFO  c.f.w.WebSocketFrameworkApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-31 15:01:43.002 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2025-07-31 15:01:43.007 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-07-31 15:01:43.057 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 22 ms. Found 0 Redis repository interfaces.
2025-07-31 15:01:43.919 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2025-07-31 15:01:43.941 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-31 15:01:43.942 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.63]
2025-07-31 15:01:44.249 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-31 15:01:44.250 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2033 ms
2025-07-31 15:01:45.282 [main] INFO  c.f.w.c.WebSocketFrameworkConfig - WebSocket线程池已创建: 核心线程=10, 最大线程=50, 队列容量=1000
2025-07-31 15:01:45.357 [main] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件总线初始化完成
2025-07-31 15:01:45.488 [main] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件订阅者注册成功: WebSocketMetricsCollector
2025-07-31 15:01:45.488 [main] INFO  c.f.w.m.WebSocketMetricsCollector - WebSocket指标收集器已启用并注册到事件总线
2025-07-31 15:01:45.517 [main] INFO  c.f.w.p.WebSocketServiceProcessor - WebSocket服务注册成功: serviceId=chatroom, serviceName=聊天室服务, beanName=chatRoomWebSocketService, class=ChatRoomWebSocketService
2025-07-31 15:01:45.520 [main] INFO  c.f.w.p.WebSocketServiceProcessor - WebSocket服务注册成功: serviceId=notification, serviceName=通知推送服务, beanName=notificationWebSocketService, class=NotificationWebSocketService
2025-07-31 15:01:45.543 [main] INFO  c.f.w.monitor.ThreadPoolMonitor - 智能线程池监控器已启动，初始监控间隔: 30秒
2025-07-31 15:01:45.548 [main] INFO  c.f.w.p.WebSocketServiceProcessor - WebSocket服务注册成功: serviceId=monitor, serviceName=monitor, beanName=threadPoolMonitorWebSocketService, class=ThreadPoolMonitorWebSocketService
2025-07-31 15:01:45.558 [main] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件订阅者注册成功: WebSocketMessageHandlerDispatcher
2025-07-31 15:01:45.559 [main] INFO  c.f.w.h.WebSocketMessageHandlerDispatcher - WebSocketMessageHandlerDispatcher初始化完成, 注册了4个消息处理器, 1个拦截器
2025-07-31 15:01:45.599 [main] INFO  c.f.websocket.monitor.MemoryMonitor - 内存监控器已启动 - 初始堆内存使用率: {:.1f}% (0.3557708510728147MB/32MB)
2025-07-31 15:01:45.603 [main] INFO  c.f.w.monitor.ThreadPoolMetricsStore - 线程池监控数据存储服务已启动，数据保留时间: 24小时
2025-07-31 15:01:46.661 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2025-07-31 15:01:46.691 [WebSocket-5] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 15:01:46.704 [main] INFO  c.f.w.WebSocketFrameworkApplication - Started WebSocketFrameworkApplication in 4.983 seconds (JVM running for 5.728)
2025-07-31 15:01:50.900 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-07-31 15:01:50.901 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-07-31 15:01:50.902 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-07-31 15:01:51.086 [http-nio-8080-exec-1] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已添加: service=monitor, userId=monitor_1753945310685_bqudwicwr, sessionId=0
2025-07-31 15:01:51.113 [http-nio-8080-exec-1] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接建立: service=monitor, userId=monitor_1753945310685_bqudwicwr, sessionId=0, clientIp=null
2025-07-31 15:01:51.121 [WebSocket-10] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端连接: monitor_1753945310685_bqudwicwr
2025-07-31 15:01:51.140 [WebSocket-10] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753945310685_bqudwicwr, message={"type":"welcome","message":"欢迎连接线程池监控中心","timestamp":1753945311122}
2025-07-31 15:01:51.141 [WebSocket-10] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 15:01:51.147 [WebSocket-10] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753945310685_bqudwicwr, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":30,"samplingRate":2,"lastHealthStatus":"HEALTHY","monitoringExecutions":0,"avgMonitoringCostMs":0.0},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":9,"completedTaskCount":12,"taskCount":22,"totalThreadCount":51,"peakThreadCount":51,"poolUtilization":0.02,"queueUtilization":0.009,"throughput":1.7981568891885817,"timestamp":1753945311141},"timestamp":1753945311141},"type":"threadpool_metrics"}
2025-07-31 15:01:59.407 [WebSocket-10] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 15:01:59.407 [WebSocket-10] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=ON_HEARTBEAT, service=monitor, userId=monitor_1753945310685_bqudwicwr, sessionId=0
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 15:01:59.422 [WebSocket-5] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 15:01:59.422 [WebSocket-5] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 15:02:01.323 [WebSocket-9] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753945310685_bqudwicwr, sessionId=0, message={"action":"refresh","timestamp":1753945321321}
2025-07-31 15:02:01.381 [WebSocket-7] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 15:02:01.382 [WebSocket-7] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753945310685_bqudwicwr, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":30,"samplingRate":2,"lastHealthStatus":"HEALTHY","monitoringExecutions":0,"avgMonitoringCostMs":0.0},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":9,"completedTaskCount":23,"taskCount":33,"totalThreadCount":52,"peakThreadCount":52,"poolUtilization":0.02,"queueUtilization":0.009,"throughput":1.07421875,"timestamp":1753945321381},"timestamp":1753945321381},"type":"threadpool_metrics"}
2025-07-31 15:02:01.382 [WebSocket-7] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 15:02:01.383 [WebSocket-7] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 15:02:16.699 [WebSocket-2] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 15:02:16.699 [WebSocket-3] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 15:02:16.702 [WebSocket-2] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 接收用户数=1, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":30,"samplingRate":2,"lastHealthStatus":"HEALTHY","monitoringExecutions":1,"avgMonitoringCostMs":0.0053},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":2,"queueSize":7,"completedTaskCount":26,"taskCount":35,"totalThreadCount":52,"peakThreadCount":52,"poolUtilization":0.04,"queueUtilization":0.007,"throughput":0.19583523728702917,"timestamp":1753945336700},"timestamp":1753945336700},"type":"threadpool_metrics"}
2025-07-31 15:02:21.149 [WebSocket-2] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 15:02:21.150 [WebSocket-2] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 15:02:35.690 [SpringApplicationShutdownHook] WARN  c.f.w.s.WebSocketSessionManager - 清除心跳缓存失败: service=monitor, userId=monitor_1753945310685_bqudwicwr
org.springframework.dao.QueryTimeoutException: Redis command timed out; nested exception is io.lettuce.core.RedisCommandTimeoutException: Command timed out after 5 second(s)
	at org.springframework.data.redis.connection.lettuce.LettuceExceptionConverter.convert(LettuceExceptionConverter.java:70)
	at org.springframework.data.redis.connection.lettuce.LettuceExceptionConverter.convert(LettuceExceptionConverter.java:41)
	at org.springframework.data.redis.PassThroughExceptionTranslationStrategy.translate(PassThroughExceptionTranslationStrategy.java:44)
	at org.springframework.data.redis.FallbackExceptionTranslationStrategy.translate(FallbackExceptionTranslationStrategy.java:42)
	at org.springframework.data.redis.connection.lettuce.LettuceConnection.convertLettuceAccessException(LettuceConnection.java:272)
	at org.springframework.data.redis.connection.lettuce.LettuceConnection.await(LettuceConnection.java:1063)
	at org.springframework.data.redis.connection.lettuce.LettuceConnection.lambda$doInvoke$4(LettuceConnection.java:920)
	at org.springframework.data.redis.connection.lettuce.LettuceInvoker$Synchronizer.invoke(LettuceInvoker.java:665)
	at org.springframework.data.redis.connection.lettuce.LettuceInvoker.just(LettuceInvoker.java:94)
	at org.springframework.data.redis.connection.lettuce.LettuceKeyCommands.del(LettuceKeyCommands.java:106)
	at org.springframework.data.redis.connection.DefaultedRedisConnection.del(DefaultedRedisConnection.java:95)
	at org.springframework.data.redis.core.RedisTemplate.lambda$delete$3(RedisTemplate.java:723)
	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:224)
	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:191)
	at org.springframework.data.redis.core.RedisTemplate.delete(RedisTemplate.java:723)
	at com.framework.websocket.session.WebSocketSessionManager.clearHeartbeat(WebSocketSessionManager.java:185)
	at com.framework.websocket.session.WebSocketSessionManager.removeSession(WebSocketSessionManager.java:57)
	at com.framework.websocket.core.WebSocketServer.onClose(WebSocketServer.java:138)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.tomcat.websocket.pojo.PojoEndpointBase.onClose(PojoEndpointBase.java:107)
	at org.apache.tomcat.websocket.WsSession.fireEndpointOnClose(WsSession.java:767)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:715)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:665)
	at org.apache.tomcat.websocket.WsSession.close(WsSession.java:652)
	at org.apache.tomcat.websocket.WsWebSocketContainer.destroy(WsWebSocketContainer.java:1046)
	at org.apache.tomcat.websocket.server.WsContextListener.contextDestroyed(WsContextListener.java:48)
	at org.apache.catalina.core.StandardContext.listenerStop(StandardContext.java:4814)
	at org.apache.catalina.core.StandardContext.stopInternal(StandardContext.java:5477)
	at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:257)
	at org.apache.catalina.core.ContainerBase$StopChild.call(ContainerBase.java:1412)
	at org.apache.catalina.core.ContainerBase$StopChild.call(ContainerBase.java:1401)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:134)
	at org.apache.catalina.core.ContainerBase.stopInternal(ContainerBase.java:986)
	at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:257)
	at org.apache.catalina.core.ContainerBase$StopChild.call(ContainerBase.java:1412)
	at org.apache.catalina.core.ContainerBase$StopChild.call(ContainerBase.java:1401)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:134)
	at org.apache.catalina.core.ContainerBase.stopInternal(ContainerBase.java:986)
	at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:257)
	at org.apache.catalina.core.StandardService.stopInternal(StandardService.java:497)
	at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:257)
	at org.apache.catalina.core.StandardServer.stopInternal(StandardServer.java:979)
	at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:257)
	at org.apache.catalina.startup.Tomcat.stop(Tomcat.java:496)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.stopTomcat(TomcatWebServer.java:273)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.stop(TomcatWebServer.java:331)
	at org.springframework.boot.web.servlet.context.WebServerStartStopLifecycle.stop(WebServerStartStopLifecycle.java:51)
	at org.springframework.context.SmartLifecycle.stop(SmartLifecycle.java:117)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:234)
	at org.springframework.context.support.DefaultLifecycleProcessor.access$300(DefaultLifecycleProcessor.java:54)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:373)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:206)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:129)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1067)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:174)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1021)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:145)
	at java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:114)
	at java.lang.Thread.run(Thread.java:748)
Caused by: io.lettuce.core.RedisCommandTimeoutException: Command timed out after 5 second(s)
	at io.lettuce.core.internal.ExceptionFactory.createTimeoutException(ExceptionFactory.java:59)
	at io.lettuce.core.internal.Futures.awaitOrCancel(Futures.java:246)
	at io.lettuce.core.LettuceFutures.awaitOrCancel(LettuceFutures.java:74)
	at org.springframework.data.redis.connection.lettuce.LettuceConnection.await(LettuceConnection.java:1061)
	... 63 common frames omitted
2025-07-31 15:02:35.691 [SpringApplicationShutdownHook] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已移除: service=monitor, userId=monitor_1753945310685_bqudwicwr, sessionId=0
2025-07-31 15:02:35.692 [SpringApplicationShutdownHook] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接关闭: service=monitor, userId=monitor_1753945310685_bqudwicwr, sessionId=0, code=GOING_AWAY, reason=The web application is stopping
2025-07-31 15:02:35.692 [WebSocket-3] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端断开: monitor_1753945310685_bqudwicwr
2025-07-31 15:02:35.693 [WebSocket-3] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 15:02:35.694 [WebSocket-3] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 15:02:35.705 [SpringApplicationShutdownHook] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件订阅者取消注册成功: WebSocketMessageHandlerDispatcher
2025-07-31 15:02:35.706 [SpringApplicationShutdownHook] INFO  c.f.w.h.WebSocketMessageHandlerDispatcher - WebSocketMessageHandlerDispatcher已取消EventBus订阅
2025-07-31 15:02:35.706 [SpringApplicationShutdownHook] INFO  c.f.w.monitor.ThreadPoolMonitor - 线程池监控器已关闭
2025-07-31 15:02:35.707 [SpringApplicationShutdownHook] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件总线线程池已关闭
2025-07-31 15:15:23.062 [main] INFO  c.f.w.WebSocketFrameworkApplication - Starting WebSocketFrameworkApplication using Java 1.8.0_202 on DESKTOP-EGK8BP4 with PID 22084 (D:\workTool\IdeaProjects\websocket-framework\target\classes started by admin in D:\workTool\IdeaProjects\websocket-framework)
2025-07-31 15:15:23.063 [main] INFO  c.f.w.WebSocketFrameworkApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-31 15:15:23.565 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2025-07-31 15:15:23.568 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-07-31 15:15:23.590 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 10 ms. Found 0 Redis repository interfaces.
2025-07-31 15:15:23.954 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2025-07-31 15:15:23.962 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-31 15:15:23.963 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.63]
2025-07-31 15:15:24.095 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-31 15:15:24.095 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 984 ms
2025-07-31 15:15:24.502 [main] INFO  c.f.w.c.WebSocketFrameworkConfig - WebSocket线程池已创建: 核心线程=10, 最大线程=50, 队列容量=1000
2025-07-31 15:15:24.530 [main] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件总线初始化完成
2025-07-31 15:15:24.580 [main] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件订阅者注册成功: WebSocketMetricsCollector
2025-07-31 15:15:24.580 [main] INFO  c.f.w.m.WebSocketMetricsCollector - WebSocket指标收集器已启用并注册到事件总线
2025-07-31 15:15:24.592 [main] INFO  c.f.w.p.WebSocketServiceProcessor - WebSocket服务注册成功: serviceId=chatroom, serviceName=聊天室服务, beanName=chatRoomWebSocketService, class=ChatRoomWebSocketService
2025-07-31 15:15:24.593 [main] INFO  c.f.w.p.WebSocketServiceProcessor - WebSocket服务注册成功: serviceId=notification, serviceName=通知推送服务, beanName=notificationWebSocketService, class=NotificationWebSocketService
2025-07-31 15:15:24.603 [main] INFO  c.f.w.monitor.ThreadPoolMonitor - 智能线程池监控器已启动，初始监控间隔: 30秒
2025-07-31 15:15:24.605 [main] INFO  c.f.w.p.WebSocketServiceProcessor - WebSocket服务注册成功: serviceId=monitor, serviceName=monitor, beanName=threadPoolMonitorWebSocketService, class=ThreadPoolMonitorWebSocketService
2025-07-31 15:15:24.609 [main] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件订阅者注册成功: WebSocketMessageHandlerDispatcher
2025-07-31 15:15:24.609 [main] INFO  c.f.w.h.WebSocketMessageHandlerDispatcher - WebSocketMessageHandlerDispatcher初始化完成, 注册了4个消息处理器, 1个拦截器
2025-07-31 15:15:24.623 [main] INFO  c.f.websocket.monitor.MemoryMonitor - 内存监控器已启动 - 初始堆内存使用率: {:.1f}% (0.367731585014291MB/33MB)
2025-07-31 15:15:24.624 [main] INFO  c.f.w.monitor.ThreadPoolMetricsStore - 线程池监控数据存储服务已启动，数据保留时间: 24小时
2025-07-31 15:15:25.110 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2025-07-31 15:15:25.121 [WebSocket-8] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 15:15:25.127 [main] INFO  c.f.w.WebSocketFrameworkApplication - Started WebSocketFrameworkApplication in 2.409 seconds (JVM running for 3.113)
2025-07-31 15:15:25.365 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-07-31 15:15:25.365 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-07-31 15:15:25.366 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-07-31 15:15:26.246 [WebSocket-8] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 15:15:26.246 [http-nio-8080-exec-1] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已添加: service=monitor, userId=monitor_1753946123311_jsbb0j0et, sessionId=0
2025-07-31 15:15:26.256 [http-nio-8080-exec-1] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接建立: service=monitor, userId=monitor_1753946123311_jsbb0j0et, sessionId=0, clientIp=null
2025-07-31 15:15:26.257 [WebSocket-9] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端连接: monitor_1753946123311_jsbb0j0et
2025-07-31 15:15:26.264 [WebSocket-9] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753946123311_jsbb0j0et, message={"type":"welcome","message":"欢迎连接线程池监控中心","timestamp":1753946126257}
2025-07-31 15:15:26.264 [WebSocket-9] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 15:15:26.265 [WebSocket-9] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753946123311_jsbb0j0et, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":30,"samplingRate":2,"lastHealthStatus":"HEALTHY","monitoringExecutions":0,"avgMonitoringCostMs":0.0},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":2,"queueSize":8,"completedTaskCount":11,"taskCount":21,"totalThreadCount":51,"peakThreadCount":51,"poolUtilization":0.04,"queueUtilization":0.008,"throughput":277.77777777777777,"timestamp":1753946126264},"timestamp":1753946126264},"type":"threadpool_metrics"}
2025-07-31 15:15:26.265 [WebSocket-9] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 15:15:26.293 [WebSocket-1] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 15:15:28.434 [WebSocket-7] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753946123311_jsbb0j0et, sessionId=0, message={"action":"refresh","timestamp":1753946128431}
2025-07-31 15:15:28.518 [WebSocket-9] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 15:15:28.518 [WebSocket-9] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753946123311_jsbb0j0et, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":30,"samplingRate":2,"lastHealthStatus":"HEALTHY","monitoringExecutions":0,"avgMonitoringCostMs":0.0},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":9,"completedTaskCount":23,"taskCount":33,"totalThreadCount":52,"peakThreadCount":52,"poolUtilization":0.02,"queueUtilization":0.009,"throughput":5.323868677905945,"timestamp":1753946128518},"timestamp":1753946128518},"type":"threadpool_metrics"}
2025-07-31 15:15:28.519 [WebSocket-9] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 15:15:29.727 [http-nio-8080-exec-6] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已移除: service=monitor, userId=monitor_1753946123311_jsbb0j0et, sessionId=0
2025-07-31 15:15:29.728 [http-nio-8080-exec-6] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接关闭: service=monitor, userId=monitor_1753946123311_jsbb0j0et, sessionId=0, code=GOING_AWAY, reason=null
2025-07-31 15:15:29.729 [WebSocket-10] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端断开: monitor_1753946123311_jsbb0j0et
2025-07-31 15:15:29.729 [WebSocket-10] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 15:15:29.775 [http-nio-8080-exec-8] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已添加: service=monitor, userId=monitor_1753946129738_6qcwoxpmp, sessionId=1
2025-07-31 15:15:29.776 [http-nio-8080-exec-8] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接建立: service=monitor, userId=monitor_1753946129738_6qcwoxpmp, sessionId=1, clientIp=null
2025-07-31 15:15:29.776 [WebSocket-1] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端连接: monitor_1753946129738_6qcwoxpmp
2025-07-31 15:15:29.778 [WebSocket-1] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753946129738_6qcwoxpmp, message={"type":"welcome","message":"欢迎连接线程池监控中心","timestamp":1753946129777}
2025-07-31 15:15:29.780 [WebSocket-1] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 15:15:29.782 [WebSocket-1] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753946129738_6qcwoxpmp, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":30,"samplingRate":2,"lastHealthStatus":"HEALTHY","monitoringExecutions":0,"avgMonitoringCostMs":0.0},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":10,"completedTaskCount":34,"taskCount":45,"totalThreadCount":56,"peakThreadCount":56,"poolUtilization":0.02,"queueUtilization":0.01,"throughput":8.709422011084719,"timestamp":1753946129781},"timestamp":1753946129781},"type":"threadpool_metrics"}
2025-07-31 15:15:29.782 [WebSocket-1] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 15:15:29.817 [WebSocket-4] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 15:15:29.939 [http-nio-8080-exec-3] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已移除: service=monitor, userId=monitor_1753946129738_6qcwoxpmp, sessionId=1
2025-07-31 15:15:29.940 [http-nio-8080-exec-3] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接关闭: service=monitor, userId=monitor_1753946129738_6qcwoxpmp, sessionId=1, code=GOING_AWAY, reason=null
2025-07-31 15:15:29.940 [WebSocket-6] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端断开: monitor_1753946129738_6qcwoxpmp
2025-07-31 15:15:29.941 [WebSocket-6] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 15:15:29.980 [http-nio-8080-exec-4] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已添加: service=monitor, userId=monitor_1753946129935_vx3htfz12, sessionId=2
2025-07-31 15:15:29.981 [http-nio-8080-exec-4] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接建立: service=monitor, userId=monitor_1753946129935_vx3htfz12, sessionId=2, clientIp=null
2025-07-31 15:15:29.981 [WebSocket-8] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端连接: monitor_1753946129935_vx3htfz12
2025-07-31 15:15:29.982 [WebSocket-8] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753946129935_vx3htfz12, message={"type":"welcome","message":"欢迎连接线程池监控中心","timestamp":1753946129981}
2025-07-31 15:15:29.982 [WebSocket-8] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 15:15:29.984 [WebSocket-8] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753946129935_vx3htfz12, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":30,"samplingRate":2,"lastHealthStatus":"HEALTHY","monitoringExecutions":0,"avgMonitoringCostMs":0.0},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":11,"completedTaskCount":50,"taskCount":62,"totalThreadCount":60,"peakThreadCount":60,"poolUtilization":0.02,"queueUtilization":0.011,"throughput":79.20792079207921,"timestamp":1753946129983},"timestamp":1753946129983},"type":"threadpool_metrics"}
2025-07-31 15:15:29.984 [WebSocket-8] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 15:15:30.028 [WebSocket-2] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 15:15:37.270 [http-nio-8080-exec-9] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已移除: service=monitor, userId=monitor_1753946129935_vx3htfz12, sessionId=2
2025-07-31 15:15:37.272 [http-nio-8080-exec-9] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接关闭: service=monitor, userId=monitor_1753946129935_vx3htfz12, sessionId=2, code=GOING_AWAY, reason=null
2025-07-31 15:15:37.274 [WebSocket-3] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端断开: monitor_1753946129935_vx3htfz12
2025-07-31 15:15:37.275 [WebSocket-3] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 15:15:37.297 [http-nio-8080-exec-10] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已添加: service=monitor, userId=monitor_1753946137252_bg2g4vvg9, sessionId=3
2025-07-31 15:15:37.297 [http-nio-8080-exec-10] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接建立: service=monitor, userId=monitor_1753946137252_bg2g4vvg9, sessionId=3, clientIp=null
2025-07-31 15:15:37.297 [WebSocket-5] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端连接: monitor_1753946137252_bg2g4vvg9
2025-07-31 15:15:37.297 [WebSocket-5] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753946137252_bg2g4vvg9, message={"type":"welcome","message":"欢迎连接线程池监控中心","timestamp":1753946137297}
2025-07-31 15:15:37.297 [WebSocket-5] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 15:15:37.297 [WebSocket-5] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753946137252_bg2g4vvg9, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":30,"samplingRate":2,"lastHealthStatus":"HEALTHY","monitoringExecutions":0,"avgMonitoringCostMs":0.0},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":12,"completedTaskCount":66,"taskCount":79,"totalThreadCount":62,"peakThreadCount":62,"poolUtilization":0.02,"queueUtilization":0.012,"throughput":2.1875854525567404,"timestamp":1753946137297},"timestamp":1753946137297},"type":"threadpool_metrics"}
2025-07-31 15:15:37.297 [WebSocket-5] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 15:15:37.349 [WebSocket-10] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 15:15:42.806 [http-nio-8080-exec-7] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已移除: service=monitor, userId=monitor_1753946137252_bg2g4vvg9, sessionId=3
2025-07-31 15:15:42.808 [http-nio-8080-exec-7] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接关闭: service=monitor, userId=monitor_1753946137252_bg2g4vvg9, sessionId=3, code=GOING_AWAY, reason=null
2025-07-31 15:15:42.809 [WebSocket-9] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端断开: monitor_1753946137252_bg2g4vvg9
2025-07-31 15:15:42.810 [WebSocket-9] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 15:15:42.853 [http-nio-8080-exec-1] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已添加: service=monitor, userId=monitor_1753946142810_w699qa0fu, sessionId=4
2025-07-31 15:15:42.854 [http-nio-8080-exec-1] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接建立: service=monitor, userId=monitor_1753946142810_w699qa0fu, sessionId=4, clientIp=null
2025-07-31 15:15:42.854 [WebSocket-7] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端连接: monitor_1753946142810_w699qa0fu
2025-07-31 15:15:42.854 [WebSocket-7] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753946142810_w699qa0fu, message={"type":"welcome","message":"欢迎连接线程池监控中心","timestamp":1753946142854}
2025-07-31 15:15:42.854 [WebSocket-7] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 15:15:42.854 [WebSocket-7] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753946142810_w699qa0fu, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":30,"samplingRate":2,"lastHealthStatus":"HEALTHY","monitoringExecutions":0,"avgMonitoringCostMs":0.0},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":13,"completedTaskCount":82,"taskCount":96,"totalThreadCount":64,"peakThreadCount":64,"poolUtilization":0.02,"queueUtilization":0.013,"throughput":2.879251394637394,"timestamp":1753946142854},"timestamp":1753946142854},"type":"threadpool_metrics"}
2025-07-31 15:15:42.854 [WebSocket-7] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 15:15:42.891 [WebSocket-10] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 15:15:55.128 [WebSocket-8] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 15:15:55.132 [WebSocket-9] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 15:15:55.134 [WebSocket-9] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 接收用户数=1, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":30,"samplingRate":2,"lastHealthStatus":"HEALTHY","monitoringExecutions":1,"avgMonitoringCostMs":0.0123},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":2,"queueSize":11,"completedTaskCount":90,"taskCount":103,"totalThreadCount":63,"peakThreadCount":64,"poolUtilization":0.04,"queueUtilization":0.011,"throughput":250.0,"timestamp":1753946155132},"timestamp":1753946155132},"type":"threadpool_metrics"}
2025-07-31 15:16:12.904 [WebSocket-5] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 15:16:13.313 [WebSocket-1] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753946142810_w699qa0fu, sessionId=4, message={"action":"refresh","timestamp":1753946173311}
2025-07-31 15:16:13.313 [WebSocket-8] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 15:16:13.314 [WebSocket-8] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753946142810_w699qa0fu, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":30,"samplingRate":2,"lastHealthStatus":"HEALTHY","monitoringExecutions":1,"avgMonitoringCostMs":0.0123},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":9,"completedTaskCount":109,"taskCount":119,"totalThreadCount":63,"peakThreadCount":64,"poolUtilization":0.02,"queueUtilization":0.009,"throughput":1.0450470271162202,"timestamp":1753946173313},"timestamp":1753946173313},"type":"threadpool_metrics"}
2025-07-31 15:16:13.315 [WebSocket-8] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 15:16:25.122 [WebSocket-7] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 15:16:25.122 [WebSocket-4] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 15:16:25.124 [WebSocket-4] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 接收用户数=1, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":30,"samplingRate":2,"lastHealthStatus":"HEALTHY","monitoringExecutions":1,"avgMonitoringCostMs":0.0123},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":2,"queueSize":7,"completedTaskCount":113,"taskCount":122,"totalThreadCount":63,"peakThreadCount":64,"poolUtilization":0.04,"queueUtilization":0.007,"throughput":0.0,"timestamp":1753946185122},"timestamp":1753946185122},"type":"threadpool_metrics"}
2025-07-31 15:16:25.891 [ThreadPoolMonitor] INFO  c.f.w.monitor.ThreadPoolMonitor - 调整监控策略: 健康状态=健康, 监控间隔: 30秒->40秒, 采样率: 1:2 -> 1:3
2025-07-31 15:16:25.951 [ThreadPoolMonitor] INFO  c.f.w.monitor.ThreadPoolMonitor - 调整监控策略: 健康状态=健康, 监控间隔: 40秒->50秒, 采样率: 1:3 -> 1:4
2025-07-31 15:16:26.005 [ThreadPoolMonitor] INFO  c.f.w.monitor.ThreadPoolMonitor - 调整监控策略: 健康状态=健康, 监控间隔: 50秒->60秒, 采样率: 1:4 -> 1:5
2025-07-31 15:16:26.058 [ThreadPoolMonitor] INFO  c.f.w.monitor.ThreadPoolMonitor - 调整监控策略: 健康状态=健康, 监控间隔: 60秒->70秒, 采样率: 1:5 -> 1:5
2025-07-31 15:16:42.922 [WebSocket-10] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 15:16:43.322 [WebSocket-8] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753946142810_w699qa0fu, sessionId=4, message={"action":"refresh","timestamp":1753946203320}
2025-07-31 15:16:43.323 [WebSocket-8] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 15:16:43.326 [WebSocket-8] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753946142810_w699qa0fu, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":6,"avgMonitoringCostMs":240.20033333333333},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":9,"completedTaskCount":128,"taskCount":138,"totalThreadCount":62,"peakThreadCount":64,"poolUtilization":0.02,"queueUtilization":0.009,"throughput":0.7529248233522531,"timestamp":1753946203324},"timestamp":1753946203324},"type":"threadpool_metrics"}
2025-07-31 15:16:43.326 [WebSocket-8] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 15:16:55.122 [WebSocket-1] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 15:16:55.122 [WebSocket-3] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 15:16:55.123 [WebSocket-1] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 接收用户数=1, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":6,"avgMonitoringCostMs":240.20033333333333},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":2,"queueSize":7,"completedTaskCount":129,"taskCount":138,"totalThreadCount":61,"peakThreadCount":64,"poolUtilization":0.04,"queueUtilization":0.007,"throughput":0.08476012883539583,"timestamp":1753946215122},"timestamp":1753946215122},"type":"threadpool_metrics"}
2025-07-31 15:17:12.925 [WebSocket-3] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 15:17:13.323 [WebSocket-1] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753946142810_w699qa0fu, sessionId=4, message={"action":"refresh","timestamp":1753946233318}
2025-07-31 15:17:13.323 [WebSocket-10] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 15:17:13.324 [WebSocket-10] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753946142810_w699qa0fu, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":6,"avgMonitoringCostMs":240.20033333333333},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":9,"completedTaskCount":146,"taskCount":156,"totalThreadCount":61,"peakThreadCount":64,"poolUtilization":0.02,"queueUtilization":0.009,"throughput":0.8242211110500576,"timestamp":1753946233323},"timestamp":1753946233323},"type":"threadpool_metrics"}
2025-07-31 15:17:13.325 [WebSocket-10] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 15:17:25.129 [WebSocket-4] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 15:17:25.131 [WebSocket-9] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 15:17:25.131 [WebSocket-9] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 接收用户数=1, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":6,"avgMonitoringCostMs":240.20033333333333},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":2,"queueSize":7,"completedTaskCount":150,"taskCount":159,"totalThreadCount":61,"peakThreadCount":64,"poolUtilization":0.04,"queueUtilization":0.007,"throughput":0.0,"timestamp":1753946245131},"timestamp":1753946245131},"type":"threadpool_metrics"}
2025-07-31 15:17:42.940 [WebSocket-1] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 15:17:43.319 [WebSocket-11] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753946142810_w699qa0fu, sessionId=4, message={"action":"refresh","timestamp":1753946263319}
2025-07-31 15:17:43.325 [WebSocket-11] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 15:17:43.325 [WebSocket-11] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753946142810_w699qa0fu, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":7,"avgMonitoringCostMs":205.88657142857141},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":9,"completedTaskCount":165,"taskCount":175,"totalThreadCount":61,"peakThreadCount":64,"poolUtilization":0.02,"queueUtilization":0.009,"throughput":0.8244476200945366,"timestamp":1753946263325},"timestamp":1753946263325},"type":"threadpool_metrics"}
2025-07-31 15:17:43.327 [WebSocket-11] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 15:17:55.127 [WebSocket-10] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 15:17:55.127 [WebSocket-13] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 15:17:55.131 [WebSocket-13] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 接收用户数=1, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":7,"avgMonitoringCostMs":205.88657142857141},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":3,"queueSize":7,"completedTaskCount":168,"taskCount":178,"totalThreadCount":61,"peakThreadCount":64,"poolUtilization":0.06,"queueUtilization":0.007,"throughput":0.0,"timestamp":1753946275128},"timestamp":1753946275128},"type":"threadpool_metrics"}
2025-07-31 15:18:12.926 [WebSocket-6] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 15:18:13.315 [WebSocket-11] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753946142810_w699qa0fu, sessionId=4, message={"action":"refresh","timestamp":1753946293315}
2025-07-31 15:18:13.315 [WebSocket-1] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 15:18:13.315 [WebSocket-1] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753946142810_w699qa0fu, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":7,"avgMonitoringCostMs":205.88657142857141},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":9,"completedTaskCount":183,"taskCount":193,"totalThreadCount":61,"peakThreadCount":64,"poolUtilization":0.02,"queueUtilization":0.009,"throughput":0.8247649419915324,"timestamp":1753946293315},"timestamp":1753946293315},"type":"threadpool_metrics"}
2025-07-31 15:18:13.315 [WebSocket-1] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 15:18:25.122 [WebSocket-9] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 15:18:25.123 [WebSocket-11] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 15:18:25.129 [WebSocket-11] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 接收用户数=1, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":7,"avgMonitoringCostMs":205.88657142857141},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":2,"queueSize":7,"completedTaskCount":187,"taskCount":196,"totalThreadCount":61,"peakThreadCount":64,"poolUtilization":0.04,"queueUtilization":0.007,"throughput":0.0,"timestamp":1753946305128},"timestamp":1753946305128},"type":"threadpool_metrics"}
2025-07-31 15:18:36.726 [SpringApplicationShutdownHook] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已移除: service=monitor, userId=monitor_1753946142810_w699qa0fu, sessionId=4
2025-07-31 15:18:36.728 [WebSocket-6] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端断开: monitor_1753946142810_w699qa0fu
2025-07-31 15:18:36.728 [SpringApplicationShutdownHook] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接关闭: service=monitor, userId=monitor_1753946142810_w699qa0fu, sessionId=4, code=GOING_AWAY, reason=The web application is stopping
2025-07-31 15:18:36.728 [WebSocket-6] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 15:18:36.740 [SpringApplicationShutdownHook] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件订阅者取消注册成功: WebSocketMessageHandlerDispatcher
2025-07-31 15:18:36.740 [SpringApplicationShutdownHook] INFO  c.f.w.h.WebSocketMessageHandlerDispatcher - WebSocketMessageHandlerDispatcher已取消EventBus订阅
2025-07-31 15:18:36.741 [SpringApplicationShutdownHook] INFO  c.f.w.monitor.ThreadPoolMonitor - 线程池监控器已关闭
2025-07-31 15:18:36.742 [SpringApplicationShutdownHook] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件总线线程池已关闭
