2025-07-29 11:54:35.532 [main] INFO  c.f.w.WebSocketFrameworkApplication - Starting WebSocketFrameworkApplication using Java 1.8.0_202 on DESKTOP-EGK8BP4 with PID 17544 (D:\workTool\IdeaProjects\websocket-framework\target\classes started by admin in D:\workTool\IdeaProjects\websocket-framework)
2025-07-29 11:54:35.548 [main] DEBUG c.f.w.WebSocketFrameworkApplication - Running with Spring Boot v2.7.0, Spring v5.3.20
2025-07-29 11:54:35.551 [main] INFO  c.f.w.WebSocketFrameworkApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-29 11:54:37.414 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2025-07-29 11:54:37.423 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-07-29 11:54:37.492 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 29 ms. Found 0 Redis repository interfaces.
2025-07-29 11:54:38.596 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2025-07-29 11:54:38.622 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-29 11:54:38.622 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.63]
2025-07-29 11:54:38.954 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-29 11:54:38.954 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 3202 ms
2025-07-29 11:54:39.995 [main] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件总线初始化完成
2025-07-29 11:54:40.107 [main] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件订阅者注册成功: WebSocketMetricsCollector
2025-07-29 11:54:40.110 [main] INFO  c.f.w.m.WebSocketMetricsCollector - WebSocket指标收集器已启用并注册到事件总线
2025-07-29 11:54:40.137 [main] INFO  c.f.w.p.WebSocketServiceProcessor - WebSocket服务注册成功: serviceId=chatroom, serviceName=聊天室服务, beanName=chatRoomWebSocketService, class=ChatRoomWebSocketService
2025-07-29 11:54:40.139 [main] INFO  c.f.w.p.WebSocketServiceProcessor - WebSocket服务注册成功: serviceId=notification, serviceName=通知推送服务, beanName=notificationWebSocketService, class=NotificationWebSocketService
2025-07-29 11:54:40.142 [main] INFO  c.f.w.e.TimeoutTaskWrapperExample - 开始演示TimeoutTaskWrapper的正确使用方法
2025-07-29 11:54:40.142 [main] INFO  c.f.w.e.TimeoutTaskWrapperExample - === 演示基本超时任务执行 ===
2025-07-29 11:54:40.166 [main] INFO  c.f.w.e.TimeoutTaskWrapperExample - === 演示智能任务提交 ===
2025-07-29 11:54:40.169 [main] INFO  c.f.w.e.TimeoutTaskWrapperExample - === 演示批量任务处理 ===
2025-07-29 11:54:40.185 [main] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件订阅者注册成功: WebSocketMessageHandlerDispatcher
2025-07-29 11:54:40.185 [main] INFO  c.f.w.h.WebSocketMessageHandlerDispatcher - WebSocketMessageHandlerDispatcher初始化完成, 注册了3个消息处理器, 1个拦截器
2025-07-29 11:54:40.675 [WebSocket-4] DEBUG c.f.w.e.TimeoutTaskWrapperExample - 智能任务1执行完成
2025-07-29 11:54:40.675 [WebSocket-3] DEBUG c.f.w.e.TimeoutTaskWrapperExample - 智能任务0执行完成
2025-07-29 11:54:40.675 [WebSocket-7] DEBUG c.f.w.e.TimeoutTaskWrapperExample - 智能任务4执行完成
2025-07-29 11:54:40.675 [WebSocket-5] DEBUG c.f.w.e.TimeoutTaskWrapperExample - 智能任务2执行完成
2025-07-29 11:54:40.675 [WebSocket-4] DEBUG c.f.w.util.TimeoutTaskWrapper - 任务执行完成: task=智能任务-1, duration=508ms
2025-07-29 11:54:40.675 [WebSocket-7] DEBUG c.f.w.util.TimeoutTaskWrapper - 任务执行完成: task=智能任务-4, duration=507ms
2025-07-29 11:54:40.675 [WebSocket-9] DEBUG c.f.w.e.TimeoutTaskWrapperExample - 智能任务6执行完成
2025-07-29 11:54:40.675 [WebSocket-10] DEBUG c.f.w.e.TimeoutTaskWrapperExample - 智能任务7执行完成
2025-07-29 11:54:40.675 [WebSocket-6] DEBUG c.f.w.e.TimeoutTaskWrapperExample - 智能任务3执行完成
2025-07-29 11:54:40.675 [WebSocket-8] DEBUG c.f.w.e.TimeoutTaskWrapperExample - 智能任务5执行完成
2025-07-29 11:54:40.675 [WebSocket-3] DEBUG c.f.w.util.TimeoutTaskWrapper - 任务执行完成: task=智能任务-0, duration=508ms
2025-07-29 11:54:40.675 [WebSocket-10] DEBUG c.f.w.util.TimeoutTaskWrapper - 任务执行完成: task=智能任务-7, duration=506ms
2025-07-29 11:54:40.675 [WebSocket-8] DEBUG c.f.w.util.TimeoutTaskWrapper - 任务执行完成: task=智能任务-5, duration=507ms
2025-07-29 11:54:40.675 [WebSocket-6] DEBUG c.f.w.util.TimeoutTaskWrapper - 任务执行完成: task=智能任务-3, duration=507ms
2025-07-29 11:54:40.675 [WebSocket-5] DEBUG c.f.w.util.TimeoutTaskWrapper - 任务执行完成: task=智能任务-2, duration=507ms
2025-07-29 11:54:40.675 [WebSocket-9] DEBUG c.f.w.util.TimeoutTaskWrapper - 任务执行完成: task=智能任务-6, duration=507ms
2025-07-29 11:54:40.677 [WebSocket-3] INFO  c.f.w.e.TimeoutTaskWrapperExample - 批量任务执行成功
2025-07-29 11:54:40.678 [WebSocket-3] DEBUG c.f.w.util.TimeoutTaskWrapper - 批量任务执行完成: task=批量任务示例, attempt=0, duration=0ms
2025-07-29 11:54:41.125 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2025-07-29 11:54:41.163 [WebSocket-10] DEBUG c.f.w.s.WebSocketSessionCleaner - 开始清理无效WebSocket会话
2025-07-29 11:54:41.171 [main] INFO  c.f.w.WebSocketFrameworkApplication - Started WebSocketFrameworkApplication in 7.504 seconds (JVM running for 10.444)
2025-07-29 11:54:41.174 [WebSocket-1] INFO  c.f.w.e.TimeoutTaskWrapperExample - 正常任务执行完成
2025-07-29 11:54:41.174 [WebSocket-1] DEBUG c.f.w.util.TimeoutTaskWrapper - 任务执行完成: task=正常任务, duration=1031ms
2025-07-29 11:54:41.174 [WebSocket-1] INFO  c.f.w.e.TimeoutTaskWrapperExample - 正常任务执行成功
2025-07-29 11:54:41.190 [WebSocket-7] DEBUG c.f.w.e.TimeoutTaskWrapperExample - 智能任务8执行完成
2025-07-29 11:54:41.190 [WebSocket-4] DEBUG c.f.w.e.TimeoutTaskWrapperExample - 智能任务9执行完成
2025-07-29 11:54:41.190 [WebSocket-7] DEBUG c.f.w.util.TimeoutTaskWrapper - 任务执行完成: task=智能任务-8, duration=1021ms
2025-07-29 11:54:41.190 [WebSocket-4] DEBUG c.f.w.util.TimeoutTaskWrapper - 任务执行完成: task=智能任务-9, duration=1021ms
2025-07-29 11:54:50.165 [WebSocket-2] INFO  c.f.w.e.TimeoutTaskWrapperExample - 超时任务执行完成（不应该看到这条日志）
2025-07-29 11:54:50.167 [WebSocket-2] DEBUG c.f.w.util.TimeoutTaskWrapper - 任务执行完成: task=超时任务, duration=10002ms
2025-07-29 11:54:50.167 [WebSocket-2] INFO  c.f.w.e.TimeoutTaskWrapperExample - 超时任务执行成功
2025-07-29 11:55:09.935 [WebSocket-8] DEBUG c.f.w.c.WebSocketFrameworkConfig - 线程池状态监控: queueSize=2, activeCount=1, completedTaskCount=14
2025-07-29 11:55:39.948 [WebSocket-8] DEBUG c.f.w.c.WebSocketFrameworkConfig - 线程池状态监控: queueSize=2, activeCount=1, completedTaskCount=15
2025-07-29 11:55:40.197 [WebSocket-9] DEBUG c.f.w.health.ThreadPoolHealthChecker - 线程池健康检查: healthy=true, activeCount=1, corePoolSize=10, maxPoolSize=50, queueSize=2, completedTaskCount=16
2025-07-29 11:55:41.179 [WebSocket-9] DEBUG c.f.w.s.WebSocketSessionCleaner - 开始清理无效WebSocket会话
2025-07-29 11:56:09.950 [WebSocket-9] DEBUG c.f.w.c.WebSocketFrameworkConfig - 线程池状态监控: queueSize=2, activeCount=1, completedTaskCount=18
2025-07-29 11:56:39.965 [WebSocket-11] DEBUG c.f.w.c.WebSocketFrameworkConfig - 线程池状态监控: queueSize=2, activeCount=1, completedTaskCount=19
2025-07-29 11:56:40.198 [WebSocket-9] DEBUG c.f.w.health.ThreadPoolHealthChecker - 线程池健康检查: healthy=true, activeCount=1, corePoolSize=10, maxPoolSize=50, queueSize=2, completedTaskCount=20
2025-07-29 11:56:41.178 [WebSocket-12] DEBUG c.f.w.s.WebSocketSessionCleaner - 开始清理无效WebSocket会话
2025-07-29 11:57:09.972 [WebSocket-11] DEBUG c.f.w.c.WebSocketFrameworkConfig - 线程池状态监控: queueSize=2, activeCount=1, completedTaskCount=22
2025-07-29 11:57:39.974 [WebSocket-9] DEBUG c.f.w.c.WebSocketFrameworkConfig - 线程池状态监控: queueSize=2, activeCount=1, completedTaskCount=23
2025-07-29 11:57:40.208 [WebSocket-14] DEBUG c.f.w.health.ThreadPoolHealthChecker - 线程池健康检查: healthy=true, activeCount=1, corePoolSize=10, maxPoolSize=50, queueSize=2, completedTaskCount=24
2025-07-29 11:57:41.173 [WebSocket-15] DEBUG c.f.w.s.WebSocketSessionCleaner - 开始清理无效WebSocket会话
2025-07-29 11:58:09.976 [WebSocket-11] DEBUG c.f.w.c.WebSocketFrameworkConfig - 线程池状态监控: queueSize=2, activeCount=1, completedTaskCount=26
2025-07-29 11:58:38.536 [SpringApplicationShutdownHook] INFO  c.f.w.health.ThreadPoolHealthChecker - 线程池健康检查器正在关闭...
2025-07-29 11:58:38.537 [SpringApplicationShutdownHook] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件订阅者取消注册成功: WebSocketMessageHandlerDispatcher
2025-07-29 11:58:38.537 [SpringApplicationShutdownHook] INFO  c.f.w.h.WebSocketMessageHandlerDispatcher - WebSocketMessageHandlerDispatcher已取消EventBus订阅
2025-07-29 11:58:39.981 [WebSocket-17] DEBUG c.f.w.c.WebSocketFrameworkConfig - 线程池状态监控: queueSize=2, activeCount=1, completedTaskCount=27
2025-07-29 11:58:40.214 [WebSocket-18] DEBUG c.f.w.health.ThreadPoolHealthChecker - 线程池健康检查: healthy=true, activeCount=1, corePoolSize=10, maxPoolSize=50, queueSize=2, completedTaskCount=28
2025-07-29 11:58:43.549 [SpringApplicationShutdownHook] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件总线线程池已关闭
2025-07-29 11:58:46.404 [main] INFO  c.f.w.WebSocketFrameworkApplication - Starting WebSocketFrameworkApplication using Java 1.8.0_202 on DESKTOP-EGK8BP4 with PID 18056 (D:\workTool\IdeaProjects\websocket-framework\target\classes started by admin in D:\workTool\IdeaProjects\websocket-framework)
2025-07-29 11:58:46.405 [main] DEBUG c.f.w.WebSocketFrameworkApplication - Running with Spring Boot v2.7.0, Spring v5.3.20
2025-07-29 11:58:46.405 [main] INFO  c.f.w.WebSocketFrameworkApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-29 11:58:46.925 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2025-07-29 11:58:46.927 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-07-29 11:58:46.947 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 8 ms. Found 0 Redis repository interfaces.
2025-07-29 11:58:47.464 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2025-07-29 11:58:47.480 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-29 11:58:47.481 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.63]
2025-07-29 11:58:47.725 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-29 11:58:47.726 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1275 ms
2025-07-29 11:58:48.657 [main] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件总线初始化完成
2025-07-29 11:58:48.782 [main] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件订阅者注册成功: WebSocketMetricsCollector
2025-07-29 11:58:48.784 [main] INFO  c.f.w.m.WebSocketMetricsCollector - WebSocket指标收集器已启用并注册到事件总线
2025-07-29 11:58:48.810 [main] INFO  c.f.w.p.WebSocketServiceProcessor - WebSocket服务注册成功: serviceId=chatroom, serviceName=聊天室服务, beanName=chatRoomWebSocketService, class=ChatRoomWebSocketService
2025-07-29 11:58:48.814 [main] INFO  c.f.w.p.WebSocketServiceProcessor - WebSocket服务注册成功: serviceId=notification, serviceName=通知推送服务, beanName=notificationWebSocketService, class=NotificationWebSocketService
2025-07-29 11:58:48.816 [main] INFO  c.f.w.e.TimeoutTaskWrapperExample - 开始演示TimeoutTaskWrapper的正确使用方法
2025-07-29 11:58:48.816 [main] INFO  c.f.w.e.TimeoutTaskWrapperExample - === 演示基本超时任务执行 ===
2025-07-29 11:58:48.840 [main] INFO  c.f.w.e.TimeoutTaskWrapperExample - === 演示智能任务提交 ===
2025-07-29 11:58:48.842 [main] INFO  c.f.w.e.TimeoutTaskWrapperExample - === 演示批量任务处理 ===
2025-07-29 11:58:48.859 [main] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件订阅者注册成功: WebSocketMessageHandlerDispatcher
2025-07-29 11:58:48.859 [main] INFO  c.f.w.h.WebSocketMessageHandlerDispatcher - WebSocketMessageHandlerDispatcher初始化完成, 注册了3个消息处理器, 1个拦截器
2025-07-29 11:58:49.348 [WebSocket-10] DEBUG c.f.w.e.TimeoutTaskWrapperExample - 智能任务7执行完成
2025-07-29 11:58:49.348 [WebSocket-7] DEBUG c.f.w.e.TimeoutTaskWrapperExample - 智能任务4执行完成
2025-07-29 11:58:49.348 [WebSocket-6] DEBUG c.f.w.e.TimeoutTaskWrapperExample - 智能任务3执行完成
2025-07-29 11:58:49.348 [WebSocket-10] DEBUG c.f.w.util.TimeoutTaskWrapper - 任务执行完成: task=智能任务-7, duration=506ms
2025-07-29 11:58:49.348 [WebSocket-7] DEBUG c.f.w.util.TimeoutTaskWrapper - 任务执行完成: task=智能任务-4, duration=506ms
2025-07-29 11:58:49.348 [WebSocket-5] DEBUG c.f.w.e.TimeoutTaskWrapperExample - 智能任务2执行完成
2025-07-29 11:58:49.348 [WebSocket-8] DEBUG c.f.w.e.TimeoutTaskWrapperExample - 智能任务5执行完成
2025-07-29 11:58:49.348 [WebSocket-9] DEBUG c.f.w.e.TimeoutTaskWrapperExample - 智能任务6执行完成
2025-07-29 11:58:49.348 [WebSocket-6] DEBUG c.f.w.util.TimeoutTaskWrapper - 任务执行完成: task=智能任务-3, duration=506ms
2025-07-29 11:58:49.349 [WebSocket-5] DEBUG c.f.w.util.TimeoutTaskWrapper - 任务执行完成: task=智能任务-2, duration=508ms
2025-07-29 11:58:49.349 [WebSocket-4] DEBUG c.f.w.e.TimeoutTaskWrapperExample - 智能任务1执行完成
2025-07-29 11:58:49.349 [WebSocket-9] DEBUG c.f.w.util.TimeoutTaskWrapper - 任务执行完成: task=智能任务-6, duration=507ms
2025-07-29 11:58:49.349 [WebSocket-4] DEBUG c.f.w.util.TimeoutTaskWrapper - 任务执行完成: task=智能任务-1, duration=508ms
2025-07-29 11:58:49.349 [WebSocket-3] DEBUG c.f.w.e.TimeoutTaskWrapperExample - 智能任务0执行完成
2025-07-29 11:58:49.349 [WebSocket-8] DEBUG c.f.w.util.TimeoutTaskWrapper - 任务执行完成: task=智能任务-5, duration=507ms
2025-07-29 11:58:49.349 [WebSocket-3] DEBUG c.f.w.util.TimeoutTaskWrapper - 任务执行完成: task=智能任务-0, duration=508ms
2025-07-29 11:58:49.362 [WebSocket-7] WARN  c.f.w.util.TimeoutTaskWrapper - 批量任务执行失败，准备重试: task=批量任务示例, attempt=1/3
java.lang.RuntimeException: 模拟任务失败
	at com.framework.websocket.example.TimeoutTaskWrapperExample.lambda$demonstrateBatchProcessing$5(TimeoutTaskWrapperExample.java:120)
	at com.framework.websocket.util.TimeoutTaskWrapper$1.run(TimeoutTaskWrapper.java:162)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-29 11:58:49.849 [TimeoutMonitor-1] WARN  c.f.w.util.TimeoutTaskWrapper - 任务执行超时: task=正常任务, timeout=1s
2025-07-29 11:58:49.849 [TimeoutMonitor-2] WARN  c.f.w.util.TimeoutTaskWrapper - 任务执行超时: task=超时任务, timeout=1s
2025-07-29 11:58:49.849 [WebSocket-1] INFO  c.f.w.e.TimeoutTaskWrapperExample - 正常任务执行完成
2025-07-29 11:58:49.850 [WebSocket-1] DEBUG c.f.w.util.TimeoutTaskWrapper - 任务在超时后完成，忽略结果: task=正常任务
2025-07-29 11:58:49.850 [WebSocket-1] DEBUG c.f.w.util.TimeoutTaskWrapper - 任务被取消: task=正常任务
2025-07-29 11:58:49.850 [TimeoutMonitor-1] ERROR c.f.w.e.TimeoutTaskWrapperExample - 正常任务执行失败
java.util.concurrent.CancellationException: null
	at java.util.concurrent.CompletableFuture.cancel(CompletableFuture.java:2263)
	at com.framework.websocket.util.TimeoutTaskWrapper.lambda$executeWithTimeout$2(TimeoutTaskWrapper.java:59)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-29 11:58:49.850 [TimeoutMonitor-2] WARN  c.f.w.e.TimeoutTaskWrapperExample - 超时任务被取消或失败: null
2025-07-29 11:58:49.851 [TimeoutMonitor-2] DEBUG c.f.w.util.TimeoutTaskWrapper - 任务被取消: task=超时任务
2025-07-29 11:58:49.851 [TimeoutMonitor-1] WARN  c.f.w.util.TimeoutTaskWrapper - 任务执行超时: task=智能任务-8, timeout=1s
2025-07-29 11:58:49.851 [TimeoutMonitor-2] WARN  c.f.w.util.TimeoutTaskWrapper - 任务执行超时: task=智能任务-9, timeout=1s
2025-07-29 11:58:49.852 [TimeoutMonitor-1] DEBUG c.f.w.util.TimeoutTaskWrapper - 任务被取消: task=智能任务-8
2025-07-29 11:58:49.852 [TimeoutMonitor-2] DEBUG c.f.w.util.TimeoutTaskWrapper - 任务被取消: task=智能任务-9
2025-07-29 11:58:49.864 [WebSocket-10] DEBUG c.f.w.e.TimeoutTaskWrapperExample - 智能任务8执行完成
2025-07-29 11:58:49.864 [WebSocket-6] DEBUG c.f.w.e.TimeoutTaskWrapperExample - 智能任务9执行完成
2025-07-29 11:58:49.864 [WebSocket-10] DEBUG c.f.w.util.TimeoutTaskWrapper - 任务在超时后完成，忽略结果: task=智能任务-8
2025-07-29 11:58:49.864 [WebSocket-6] DEBUG c.f.w.util.TimeoutTaskWrapper - 任务在超时后完成，忽略结果: task=智能任务-9
2025-07-29 11:58:50.011 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2025-07-29 11:58:50.063 [WebSocket-9] DEBUG c.f.w.s.WebSocketSessionCleaner - 开始清理无效WebSocket会话
2025-07-29 11:58:50.076 [main] INFO  c.f.w.WebSocketFrameworkApplication - Started WebSocketFrameworkApplication in 4.049 seconds (JVM running for 4.922)
2025-07-29 11:58:50.376 [WebSocket-4] WARN  c.f.w.util.TimeoutTaskWrapper - 批量任务执行失败，准备重试: task=批量任务示例, attempt=2/3
java.lang.RuntimeException: 模拟任务失败
	at com.framework.websocket.example.TimeoutTaskWrapperExample.lambda$demonstrateBatchProcessing$5(TimeoutTaskWrapperExample.java:120)
	at com.framework.websocket.util.TimeoutTaskWrapper$1.run(TimeoutTaskWrapper.java:162)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-29 11:58:51.388 [WebSocket-4] ERROR c.f.w.util.TimeoutTaskWrapper - 批量任务执行失败，已达最大重试次数: task=批量任务示例, maxRetries=3
java.lang.RuntimeException: 模拟任务失败
	at com.framework.websocket.example.TimeoutTaskWrapperExample.lambda$demonstrateBatchProcessing$5(TimeoutTaskWrapperExample.java:120)
	at com.framework.websocket.util.TimeoutTaskWrapper$1.run(TimeoutTaskWrapper.java:162)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-29 11:58:58.851 [WebSocket-2] INFO  c.f.w.e.TimeoutTaskWrapperExample - 超时任务执行完成（不应该看到这条日志）
2025-07-29 11:58:58.852 [WebSocket-2] DEBUG c.f.w.util.TimeoutTaskWrapper - 任务在超时后完成，忽略结果: task=超时任务
2025-07-29 11:59:18.593 [WebSocket-7] DEBUG c.f.w.c.WebSocketFrameworkConfig - 线程池状态监控: queueSize=2, activeCount=1, completedTaskCount=16
2025-07-29 11:59:48.597 [WebSocket-1] DEBUG c.f.w.c.WebSocketFrameworkConfig - 线程池状态监控: queueSize=2, activeCount=1, completedTaskCount=17
2025-07-29 11:59:48.876 [WebSocket-5] DEBUG c.f.w.health.ThreadPoolHealthChecker - 线程池健康检查: healthy=true, activeCount=1, corePoolSize=10, maxPoolSize=50, queueSize=2, completedTaskCount=18
2025-07-29 11:59:50.079 [WebSocket-9] DEBUG c.f.w.s.WebSocketSessionCleaner - 开始清理无效WebSocket会话
2025-07-29 12:00:18.606 [WebSocket-5] DEBUG c.f.w.c.WebSocketFrameworkConfig - 线程池状态监控: queueSize=2, activeCount=1, completedTaskCount=20
2025-07-29 12:00:48.611 [WebSocket-11] DEBUG c.f.w.c.WebSocketFrameworkConfig - 线程池状态监控: queueSize=2, activeCount=1, completedTaskCount=21
2025-07-29 12:00:48.892 [WebSocket-9] DEBUG c.f.w.health.ThreadPoolHealthChecker - 线程池健康检查: healthy=true, activeCount=1, corePoolSize=10, maxPoolSize=50, queueSize=2, completedTaskCount=22
2025-07-29 12:00:50.076 [WebSocket-5] DEBUG c.f.w.s.WebSocketSessionCleaner - 开始清理无效WebSocket会话
2025-07-29 12:01:18.622 [WebSocket-5] DEBUG c.f.w.c.WebSocketFrameworkConfig - 线程池状态监控: queueSize=2, activeCount=1, completedTaskCount=24
2025-07-29 12:01:34.789 [SpringApplicationShutdownHook] INFO  c.f.w.health.ThreadPoolHealthChecker - 线程池健康检查器正在关闭...
2025-07-29 12:01:34.790 [SpringApplicationShutdownHook] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件订阅者取消注册成功: WebSocketMessageHandlerDispatcher
2025-07-29 12:01:34.790 [SpringApplicationShutdownHook] INFO  c.f.w.h.WebSocketMessageHandlerDispatcher - WebSocketMessageHandlerDispatcher已取消EventBus订阅
2025-07-29 12:01:34.790 [SpringApplicationShutdownHook] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件总线线程池已关闭
