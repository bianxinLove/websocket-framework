2025-07-31 14:28:05.690 [main] INFO  c.f.w.WebSocketFrameworkApplication - Starting WebSocketFrameworkApplication using Java 1.8.0_202 on DESKTOP-EGK8BP4 with PID 4560 (D:\workTool\IdeaProjects\websocket-framework\target\classes started by admin in D:\workTool\IdeaProjects\websocket-framework)
2025-07-31 14:28:05.703 [main] DEBUG c.f.w.WebSocketFrameworkApplication - Running with Spring Boot v2.7.0, Spring v5.3.20
2025-07-31 14:28:05.704 [main] INFO  c.f.w.WebSocketFrameworkApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-31 14:28:07.182 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2025-07-31 14:28:07.197 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-07-31 14:28:07.251 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 25 ms. Found 0 Redis repository interfaces.
2025-07-31 14:28:08.092 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2025-07-31 14:28:08.111 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-31 14:28:08.111 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.63]
2025-07-31 14:28:08.384 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-31 14:28:08.384 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2522 ms
2025-07-31 14:28:09.201 [main] INFO  c.f.w.c.WebSocketFrameworkConfig - WebSocket线程池已创建: 核心线程=10, 最大线程=50, 队列容量=1000
2025-07-31 14:28:09.258 [main] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件总线初始化完成
2025-07-31 14:28:09.357 [main] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件订阅者注册成功: WebSocketMetricsCollector
2025-07-31 14:28:09.357 [main] INFO  c.f.w.m.WebSocketMetricsCollector - WebSocket指标收集器已启用并注册到事件总线
2025-07-31 14:28:09.378 [main] INFO  c.f.w.p.WebSocketServiceProcessor - WebSocket服务注册成功: serviceId=chatroom, serviceName=聊天室服务, beanName=chatRoomWebSocketService, class=ChatRoomWebSocketService
2025-07-31 14:28:09.380 [main] INFO  c.f.w.p.WebSocketServiceProcessor - WebSocket服务注册成功: serviceId=notification, serviceName=通知推送服务, beanName=notificationWebSocketService, class=NotificationWebSocketService
2025-07-31 14:28:09.397 [main] INFO  c.f.w.monitor.ThreadPoolMonitor - 智能线程池监控器已启动，初始监控间隔: 30秒
2025-07-31 14:28:09.401 [main] INFO  c.f.w.p.WebSocketServiceProcessor - WebSocket服务注册成功: serviceId=monitor, serviceName=monitor, beanName=threadPoolMonitorWebSocketService, class=ThreadPoolMonitorWebSocketService
2025-07-31 14:28:09.411 [main] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件订阅者注册成功: WebSocketMessageHandlerDispatcher
2025-07-31 14:28:09.412 [main] INFO  c.f.w.h.WebSocketMessageHandlerDispatcher - WebSocketMessageHandlerDispatcher初始化完成, 注册了4个消息处理器, 1个拦截器
2025-07-31 14:28:09.447 [main] INFO  c.f.websocket.monitor.MemoryMonitor - 内存监控器已启动 - 初始堆内存使用率: {:.1f}% (0.3418209225275537MB/30MB)
2025-07-31 14:28:09.451 [main] INFO  c.f.w.monitor.ThreadPoolMetricsStore - 线程池监控数据存储服务已启动，数据保留时间: 24小时
2025-07-31 14:28:10.340 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2025-07-31 14:28:10.364 [WebSocket-3] DEBUG c.f.w.s.WebSocketSessionCleaner - 开始清理无效WebSocket会话，内存压力: false
2025-07-31 14:28:10.365 [WebSocket-2] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:28:10.368 [WebSocket-2] INFO  c.f.w.monitor.ThreadPoolMonitor - 线程池监控报告: 状态=健康, 核心线程=10, 活跃线程=3, 队列大小=5, 利用率={:.1f}%, 吞吐量={:.2f}task/s
2025-07-31 14:28:10.378 [WebSocket-7] DEBUG c.f.websocket.monitor.MemoryMonitor - 内存详细统计 - 堆内存: {:.1f}% (1.00211531840128MB/90MB), 非堆内存: 9042MB, 会话: 52, 事件池: Services: 0 (Empty: 0), Sessions: 0, Operations: 0
2025-07-31 14:28:10.386 [main] INFO  c.f.w.WebSocketFrameworkApplication - Started WebSocketFrameworkApplication in 6.025 seconds (JVM running for 9.168)
2025-07-31 14:28:14.087 [WebSocket-6] ERROR c.f.w.s.WebSocketSessionManager - 清理过期心跳缓存失败
org.springframework.data.redis.RedisConnectionFailureException: Unable to connect to Redis; nested exception is io.lettuce.core.RedisConnectionException: Unable to connect to localhost:6379
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.translateException(LettuceConnectionFactory.java:1689)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1597)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getNativeConnection(LettuceConnectionFactory.java:1383)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getConnection(LettuceConnectionFactory.java:1366)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getSharedConnection(LettuceConnectionFactory.java:1093)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getConnection(LettuceConnectionFactory.java:421)
	at org.springframework.data.redis.core.RedisConnectionUtils.fetchConnection(RedisConnectionUtils.java:193)
	at org.springframework.data.redis.core.RedisConnectionUtils.doGetConnection(RedisConnectionUtils.java:144)
	at org.springframework.data.redis.core.RedisConnectionUtils.getConnection(RedisConnectionUtils.java:105)
	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:211)
	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:191)
	at org.springframework.data.redis.core.RedisTemplate.keys(RedisTemplate.java:896)
	at com.framework.websocket.session.WebSocketSessionManager.cleanupExpiredHeartbeats(WebSocketSessionManager.java:221)
	at com.framework.websocket.session.WebSocketSessionCleaner.cleanupExpiredHeartbeatCache(WebSocketSessionCleaner.java:270)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:308)
	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
Caused by: io.lettuce.core.RedisConnectionException: Unable to connect to localhost:6379
	at io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:78)
	at io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:56)
	at io.lettuce.core.AbstractRedisClient.getConnection(AbstractRedisClient.java:330)
	at io.lettuce.core.RedisClient.connect(RedisClient.java:216)
	at org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.lambda$getConnection$1(StandaloneConnectionProvider.java:115)
	at java.util.Optional.orElseGet(Optional.java:267)
	at org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.getConnection(StandaloneConnectionProvider.java:115)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1595)
	... 26 common frames omitted
Caused by: io.netty.channel.AbstractChannel$AnnotatedConnectException: Connection refused: no further information: localhost/127.0.0.1:6379
Caused by: java.net.ConnectException: Connection refused: no further information
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:717)
	at io.netty.channel.socket.nio.NioSocketChannel.doFinishConnect(NioSocketChannel.java:337)
	at io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.finishConnect(AbstractNioChannel.java:334)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:710)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:658)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:584)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:496)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:995)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:28:16.130 [WebSocket-2] WARN  c.f.w.monitor.ThreadPoolMetricsStore - 收集监控数据失败
org.springframework.data.redis.RedisConnectionFailureException: Unable to connect to Redis; nested exception is io.lettuce.core.RedisConnectionException: Unable to connect to localhost:6379
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.translateException(LettuceConnectionFactory.java:1689)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1597)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getNativeConnection(LettuceConnectionFactory.java:1383)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getConnection(LettuceConnectionFactory.java:1366)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getSharedConnection(LettuceConnectionFactory.java:1093)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getConnection(LettuceConnectionFactory.java:421)
	at org.springframework.data.redis.core.RedisConnectionUtils.fetchConnection(RedisConnectionUtils.java:193)
	at org.springframework.data.redis.core.RedisConnectionUtils.doGetConnection(RedisConnectionUtils.java:144)
	at org.springframework.data.redis.core.RedisConnectionUtils.getConnection(RedisConnectionUtils.java:105)
	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:211)
	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:191)
	at org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:97)
	at org.springframework.data.redis.core.DefaultValueOperations.set(DefaultValueOperations.java:325)
	at com.framework.websocket.monitor.ThreadPoolMetricsStore.collectAndStoreMetrics(ThreadPoolMetricsStore.java:69)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:308)
	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
Caused by: io.lettuce.core.RedisConnectionException: Unable to connect to localhost:6379
	at io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:78)
	at io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:56)
	at io.lettuce.core.AbstractRedisClient.getConnection(AbstractRedisClient.java:330)
	at io.lettuce.core.RedisClient.connect(RedisClient.java:216)
	at org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.lambda$getConnection$1(StandaloneConnectionProvider.java:115)
	at java.util.Optional.orElseGet(Optional.java:267)
	at org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.getConnection(StandaloneConnectionProvider.java:115)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1595)
	... 26 common frames omitted
Caused by: io.netty.channel.AbstractChannel$AnnotatedConnectException: Connection refused: no further information: localhost/127.0.0.1:6379
Caused by: java.net.ConnectException: Connection refused: no further information
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:717)
	at io.netty.channel.socket.nio.NioSocketChannel.doFinishConnect(NioSocketChannel.java:337)
	at io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.finishConnect(AbstractNioChannel.java:334)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:710)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:658)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:584)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:496)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:995)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:28:27.195 [SpringApplicationShutdownHook] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件订阅者取消注册成功: WebSocketMessageHandlerDispatcher
2025-07-31 14:28:27.196 [SpringApplicationShutdownHook] INFO  c.f.w.h.WebSocketMessageHandlerDispatcher - WebSocketMessageHandlerDispatcher已取消EventBus订阅
2025-07-31 14:28:27.196 [SpringApplicationShutdownHook] INFO  c.f.w.monitor.ThreadPoolMonitor - 线程池监控器已关闭
2025-07-31 14:28:27.196 [SpringApplicationShutdownHook] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件总线线程池已关闭
2025-07-31 14:30:04.048 [main] INFO  c.f.w.WebSocketFrameworkApplication - Starting WebSocketFrameworkApplication using Java 1.8.0_202 on DESKTOP-EGK8BP4 with PID 8312 (D:\workTool\IdeaProjects\websocket-framework\target\classes started by admin in D:\workTool\IdeaProjects\websocket-framework)
2025-07-31 14:30:04.055 [main] DEBUG c.f.w.WebSocketFrameworkApplication - Running with Spring Boot v2.7.0, Spring v5.3.20
2025-07-31 14:30:04.058 [main] INFO  c.f.w.WebSocketFrameworkApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-31 14:30:06.951 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2025-07-31 14:30:06.959 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-07-31 14:30:07.034 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 33 ms. Found 0 Redis repository interfaces.
2025-07-31 14:30:08.159 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2025-07-31 14:30:08.191 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-31 14:30:08.192 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.63]
2025-07-31 14:30:08.611 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-31 14:30:08.611 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 4145 ms
2025-07-31 14:30:11.326 [main] INFO  c.f.w.c.WebSocketFrameworkConfig - WebSocket线程池已创建: 核心线程=10, 最大线程=50, 队列容量=1000
2025-07-31 14:30:11.478 [main] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件总线初始化完成
2025-07-31 14:30:11.779 [main] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件订阅者注册成功: WebSocketMetricsCollector
2025-07-31 14:30:11.779 [main] INFO  c.f.w.m.WebSocketMetricsCollector - WebSocket指标收集器已启用并注册到事件总线
2025-07-31 14:30:11.848 [main] INFO  c.f.w.p.WebSocketServiceProcessor - WebSocket服务注册成功: serviceId=chatroom, serviceName=聊天室服务, beanName=chatRoomWebSocketService, class=ChatRoomWebSocketService
2025-07-31 14:30:11.859 [main] INFO  c.f.w.p.WebSocketServiceProcessor - WebSocket服务注册成功: serviceId=notification, serviceName=通知推送服务, beanName=notificationWebSocketService, class=NotificationWebSocketService
2025-07-31 14:30:11.920 [main] INFO  c.f.w.monitor.ThreadPoolMonitor - 智能线程池监控器已启动，初始监控间隔: 30秒
2025-07-31 14:30:11.938 [main] INFO  c.f.w.p.WebSocketServiceProcessor - WebSocket服务注册成功: serviceId=monitor, serviceName=monitor, beanName=threadPoolMonitorWebSocketService, class=ThreadPoolMonitorWebSocketService
2025-07-31 14:30:11.964 [main] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件订阅者注册成功: WebSocketMessageHandlerDispatcher
2025-07-31 14:30:11.964 [main] INFO  c.f.w.h.WebSocketMessageHandlerDispatcher - WebSocketMessageHandlerDispatcher初始化完成, 注册了4个消息处理器, 1个拦截器
2025-07-31 14:30:12.046 [main] INFO  c.f.websocket.monitor.MemoryMonitor - 内存监控器已启动 - 初始堆内存使用率: {:.1f}% (0.3772753314933954MB/34MB)
2025-07-31 14:30:12.054 [main] INFO  c.f.w.monitor.ThreadPoolMetricsStore - 线程池监控数据存储服务已启动，数据保留时间: 24小时
2025-07-31 14:30:14.772 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2025-07-31 14:30:14.835 [WebSocket-5] DEBUG c.f.w.s.WebSocketSessionCleaner - 开始清理无效WebSocket会话，内存压力: false
2025-07-31 14:30:14.835 [WebSocket-7] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:30:14.835 [WebSocket-7] INFO  c.f.w.monitor.ThreadPoolMonitor - 线程池监控报告: 状态=健康, 核心线程=10, 活跃线程=4, 队列大小=4, 利用率={:.1f}%, 吞吐量={:.2f}task/s
2025-07-31 14:30:14.882 [WebSocket-6] DEBUG c.f.websocket.monitor.MemoryMonitor - 内存详细统计 - 堆内存: {:.1f}% (1.035814764119439MB/93MB), 非堆内存: 9042MB, 会话: 52, 事件池: Services: 0 (Empty: 0), Sessions: 0, Operations: 0
2025-07-31 14:30:14.883 [main] INFO  c.f.w.WebSocketFrameworkApplication - Started WebSocketFrameworkApplication in 12.203 seconds (JVM running for 12.978)
2025-07-31 14:30:16.837 [WebSocket-7] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:30:16.837 [WebSocket-7] INFO  c.f.w.monitor.ThreadPoolMonitor - 线程池监控报告: 状态=健康, 核心线程=10, 活跃线程=2, 队列大小=6, 利用率={:.1f}%, 吞吐量={:.2f}task/s
2025-07-31 14:30:44.852 [WebSocket-8] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:30:44.853 [WebSocket-4] DEBUG c.f.websocket.monitor.MemoryMonitor - 内存详细统计 - 堆内存: {:.1f}% (1.7587651196002856MB/159MB), 非堆内存: 9042MB, 会话: 59, 事件池: Services: 0 (Empty: 0), Sessions: 0, Operations: 0
2025-07-31 14:30:44.854 [WebSocket-8] INFO  c.f.w.monitor.ThreadPoolMonitor - 线程池监控报告: 状态=健康, 核心线程=10, 活跃线程=2, 队列大小=6, 利用率={:.1f}%, 吞吐量={:.2f}task/s
2025-07-31 14:31:11.954 [ThreadPoolMonitor] DEBUG c.f.w.monitor.ThreadPoolMonitor - 无法通过反射获取进程CPU使用率
java.lang.IllegalAccessException: Class com.framework.websocket.monitor.ThreadPoolMonitor can not access a member of class sun.management.OperatingSystemImpl with modifiers "public native"
	at sun.reflect.Reflection.ensureMemberAccess(Reflection.java:102)
	at java.lang.reflect.AccessibleObject.slowCheckMemberAccess(AccessibleObject.java:296)
	at java.lang.reflect.AccessibleObject.checkAccess(AccessibleObject.java:288)
	at java.lang.reflect.Method.invoke(Method.java:491)
	at com.framework.websocket.monitor.ThreadPoolMonitor.getProcessCpuLoad(ThreadPoolMonitor.java:433)
	at com.framework.websocket.monitor.ThreadPoolMonitor.isSystemUnderHighLoad(ThreadPoolMonitor.java:417)
	at com.framework.websocket.monitor.ThreadPoolMonitor.shouldPerformMonitoring(ThreadPoolMonitor.java:186)
	at com.framework.websocket.monitor.ThreadPoolMonitor.performAdaptiveMonitoring(ThreadPoolMonitor.java:136)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:308)
	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:31:11.956 [ThreadPoolMonitor] INFO  c.f.w.monitor.ThreadPoolMonitor - 调整监控策略: 健康状态=健康, 监控间隔: 30秒->40秒, 采样率: 1:2 -> 1:3
2025-07-31 14:31:11.957 [ThreadPoolMonitor] INFO  c.f.w.monitor.ThreadPoolMonitor - 线程池监控报告: 状态=健康, 核心线程=10, 活跃线程=0, 队列大小=8, 利用率={:.1f}%, 吞吐量={:.2f}task/s
2025-07-31 14:31:11.957 [ThreadPoolMonitor] DEBUG c.f.w.monitor.ThreadPoolMonitor - 无法通过反射获取进程CPU使用率
java.lang.IllegalAccessException: Class com.framework.websocket.monitor.ThreadPoolMonitor can not access a member of class sun.management.OperatingSystemImpl with modifiers "public native"
	at sun.reflect.Reflection.ensureMemberAccess(Reflection.java:102)
	at java.lang.reflect.AccessibleObject.slowCheckMemberAccess(AccessibleObject.java:296)
	at java.lang.reflect.AccessibleObject.checkAccess(AccessibleObject.java:288)
	at java.lang.reflect.Method.invoke(Method.java:491)
	at com.framework.websocket.monitor.ThreadPoolMonitor.getProcessCpuLoad(ThreadPoolMonitor.java:433)
	at com.framework.websocket.monitor.ThreadPoolMonitor.isSystemUnderHighLoad(ThreadPoolMonitor.java:417)
	at com.framework.websocket.monitor.ThreadPoolMonitor.shouldPerformMonitoring(ThreadPoolMonitor.java:186)
	at com.framework.websocket.monitor.ThreadPoolMonitor.performAdaptiveMonitoring(ThreadPoolMonitor.java:136)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:308)
	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:31:11.958 [ThreadPoolMonitor] INFO  c.f.w.monitor.ThreadPoolMonitor - 调整监控策略: 健康状态=健康, 监控间隔: 40秒->50秒, 采样率: 1:3 -> 1:4
2025-07-31 14:31:11.958 [ThreadPoolMonitor] INFO  c.f.w.monitor.ThreadPoolMonitor - 线程池监控报告: 状态=健康, 核心线程=10, 活跃线程=0, 队列大小=8, 利用率={:.1f}%, 吞吐量={:.2f}task/s
2025-07-31 14:31:11.958 [ThreadPoolMonitor] DEBUG c.f.w.monitor.ThreadPoolMonitor - 无法通过反射获取进程CPU使用率
java.lang.IllegalAccessException: Class com.framework.websocket.monitor.ThreadPoolMonitor can not access a member of class sun.management.OperatingSystemImpl with modifiers "public native"
	at sun.reflect.Reflection.ensureMemberAccess(Reflection.java:102)
	at java.lang.reflect.AccessibleObject.slowCheckMemberAccess(AccessibleObject.java:296)
	at java.lang.reflect.AccessibleObject.checkAccess(AccessibleObject.java:288)
	at java.lang.reflect.Method.invoke(Method.java:491)
	at com.framework.websocket.monitor.ThreadPoolMonitor.getProcessCpuLoad(ThreadPoolMonitor.java:433)
	at com.framework.websocket.monitor.ThreadPoolMonitor.isSystemUnderHighLoad(ThreadPoolMonitor.java:417)
	at com.framework.websocket.monitor.ThreadPoolMonitor.shouldPerformMonitoring(ThreadPoolMonitor.java:186)
	at com.framework.websocket.monitor.ThreadPoolMonitor.performAdaptiveMonitoring(ThreadPoolMonitor.java:136)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:308)
	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:31:11.958 [ThreadPoolMonitor] INFO  c.f.w.monitor.ThreadPoolMonitor - 调整监控策略: 健康状态=健康, 监控间隔: 50秒->60秒, 采样率: 1:4 -> 1:5
2025-07-31 14:31:11.958 [ThreadPoolMonitor] INFO  c.f.w.monitor.ThreadPoolMonitor - 线程池监控报告: 状态=健康, 核心线程=10, 活跃线程=0, 队列大小=8, 利用率={:.1f}%, 吞吐量={:.2f}task/s
2025-07-31 14:31:11.958 [ThreadPoolMonitor] DEBUG c.f.w.monitor.ThreadPoolMonitor - 无法通过反射获取进程CPU使用率
java.lang.IllegalAccessException: Class com.framework.websocket.monitor.ThreadPoolMonitor can not access a member of class sun.management.OperatingSystemImpl with modifiers "public native"
	at sun.reflect.Reflection.ensureMemberAccess(Reflection.java:102)
	at java.lang.reflect.AccessibleObject.slowCheckMemberAccess(AccessibleObject.java:296)
	at java.lang.reflect.AccessibleObject.checkAccess(AccessibleObject.java:288)
	at java.lang.reflect.Method.invoke(Method.java:491)
	at com.framework.websocket.monitor.ThreadPoolMonitor.getProcessCpuLoad(ThreadPoolMonitor.java:433)
	at com.framework.websocket.monitor.ThreadPoolMonitor.isSystemUnderHighLoad(ThreadPoolMonitor.java:417)
	at com.framework.websocket.monitor.ThreadPoolMonitor.shouldPerformMonitoring(ThreadPoolMonitor.java:186)
	at com.framework.websocket.monitor.ThreadPoolMonitor.performAdaptiveMonitoring(ThreadPoolMonitor.java:136)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:308)
	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:31:11.958 [ThreadPoolMonitor] INFO  c.f.w.monitor.ThreadPoolMonitor - 调整监控策略: 健康状态=健康, 监控间隔: 60秒->70秒, 采样率: 1:5 -> 1:5
2025-07-31 14:31:11.958 [ThreadPoolMonitor] INFO  c.f.w.monitor.ThreadPoolMonitor - 线程池监控报告: 状态=健康, 核心线程=10, 活跃线程=0, 队列大小=8, 利用率={:.1f}%, 吞吐量={:.2f}task/s
2025-07-31 14:31:14.849 [WebSocket-5] DEBUG c.f.w.s.WebSocketSessionCleaner - 开始清理无效WebSocket会话，内存压力: false
2025-07-31 14:31:14.850 [WebSocket-6] DEBUG c.f.websocket.monitor.MemoryMonitor - 内存详细统计 - 堆内存: {:.1f}% (1.768816311099418MB/159MB), 非堆内存: 9042MB, 会话: 59, 事件池: Services: 0 (Empty: 0), Sessions: 0, Operations: 0
2025-07-31 14:31:14.849 [WebSocket-2] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:31:14.852 [WebSocket-2] INFO  c.f.w.monitor.ThreadPoolMonitor - 线程池监控报告: 状态=健康, 核心线程=10, 活跃线程=4, 队列大小=7, 利用率={:.1f}%, 吞吐量={:.2f}task/s
2025-07-31 14:31:44.853 [WebSocket-11] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:31:44.854 [WebSocket-12] DEBUG c.f.websocket.monitor.MemoryMonitor - 内存详细统计 - 堆内存: {:.1f}% (1.7788690213897644MB/160MB), 非堆内存: 9042MB, 会话: 59, 事件池: Services: 0 (Empty: 0), Sessions: 0, Operations: 0
2025-07-31 14:31:44.855 [WebSocket-11] INFO  c.f.w.monitor.ThreadPoolMonitor - 线程池监控报告: 状态=健康, 核心线程=10, 活跃线程=3, 队列大小=6, 利用率={:.1f}%, 吞吐量={:.2f}task/s
2025-07-31 14:32:14.852 [WebSocket-2] DEBUG c.f.websocket.monitor.MemoryMonitor - 内存详细统计 - 堆内存: {:.1f}% (1.809017617627072MB/163MB), 非堆内存: 9042MB, 会话: 59, 事件池: Services: 0 (Empty: 0), Sessions: 0, Operations: 0
2025-07-31 14:32:14.852 [WebSocket-13] DEBUG c.f.w.s.WebSocketSessionCleaner - 开始清理无效WebSocket会话，内存压力: false
2025-07-31 14:32:14.852 [WebSocket-5] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:32:14.853 [WebSocket-5] INFO  c.f.w.monitor.ThreadPoolMonitor - 线程池监控报告: 状态=健康, 核心线程=10, 活跃线程=3, 队列大小=7, 利用率={:.1f}%, 吞吐量={:.2f}task/s
2025-07-31 14:32:41.576 [SpringApplicationShutdownHook] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件订阅者取消注册成功: WebSocketMessageHandlerDispatcher
2025-07-31 14:32:41.576 [SpringApplicationShutdownHook] INFO  c.f.w.h.WebSocketMessageHandlerDispatcher - WebSocketMessageHandlerDispatcher已取消EventBus订阅
2025-07-31 14:32:41.576 [SpringApplicationShutdownHook] INFO  c.f.w.monitor.ThreadPoolMonitor - 线程池监控器已关闭
2025-07-31 14:32:41.577 [SpringApplicationShutdownHook] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件总线线程池已关闭
2025-07-31 14:35:58.787 [main] INFO  c.f.w.WebSocketFrameworkApplication - Starting WebSocketFrameworkApplication using Java 1.8.0_202 on DESKTOP-EGK8BP4 with PID 32992 (D:\workTool\IdeaProjects\websocket-framework\target\classes started by admin in D:\workTool\IdeaProjects\websocket-framework)
2025-07-31 14:35:58.790 [main] INFO  c.f.w.WebSocketFrameworkApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-31 14:36:00.092 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2025-07-31 14:36:00.097 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-07-31 14:36:00.147 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 23 ms. Found 0 Redis repository interfaces.
2025-07-31 14:36:01.006 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2025-07-31 14:36:01.039 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-31 14:36:01.039 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.63]
2025-07-31 14:36:01.385 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-31 14:36:01.385 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2465 ms
2025-07-31 14:36:02.368 [main] INFO  c.f.w.c.WebSocketFrameworkConfig - WebSocket线程池已创建: 核心线程=10, 最大线程=50, 队列容量=1000
2025-07-31 14:36:02.445 [main] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件总线初始化完成
2025-07-31 14:36:02.569 [main] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件订阅者注册成功: WebSocketMetricsCollector
2025-07-31 14:36:02.570 [main] INFO  c.f.w.m.WebSocketMetricsCollector - WebSocket指标收集器已启用并注册到事件总线
2025-07-31 14:36:02.599 [main] INFO  c.f.w.p.WebSocketServiceProcessor - WebSocket服务注册成功: serviceId=chatroom, serviceName=聊天室服务, beanName=chatRoomWebSocketService, class=ChatRoomWebSocketService
2025-07-31 14:36:02.602 [main] INFO  c.f.w.p.WebSocketServiceProcessor - WebSocket服务注册成功: serviceId=notification, serviceName=通知推送服务, beanName=notificationWebSocketService, class=NotificationWebSocketService
2025-07-31 14:36:02.629 [main] INFO  c.f.w.monitor.ThreadPoolMonitor - 智能线程池监控器已启动，初始监控间隔: 30秒
2025-07-31 14:36:02.633 [main] INFO  c.f.w.p.WebSocketServiceProcessor - WebSocket服务注册成功: serviceId=monitor, serviceName=monitor, beanName=threadPoolMonitorWebSocketService, class=ThreadPoolMonitorWebSocketService
2025-07-31 14:36:02.644 [main] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件订阅者注册成功: WebSocketMessageHandlerDispatcher
2025-07-31 14:36:02.645 [main] INFO  c.f.w.h.WebSocketMessageHandlerDispatcher - WebSocketMessageHandlerDispatcher初始化完成, 注册了4个消息处理器, 1个拦截器
2025-07-31 14:36:02.684 [main] INFO  c.f.websocket.monitor.MemoryMonitor - 内存监控器已启动 - 初始堆内存使用率: {:.1f}% (0.35504191566742355MB/32MB)
2025-07-31 14:36:02.688 [main] INFO  c.f.w.monitor.ThreadPoolMetricsStore - 线程池监控数据存储服务已启动，数据保留时间: 24小时
2025-07-31 14:36:03.802 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2025-07-31 14:36:03.830 [WebSocket-9] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:36:03.848 [main] INFO  c.f.w.WebSocketFrameworkApplication - Started WebSocketFrameworkApplication in 6.191 seconds (JVM running for 9.348)
2025-07-31 14:36:11.769 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-07-31 14:36:11.769 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-07-31 14:36:11.770 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-07-31 14:36:33.842 [WebSocket-2] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:37:03.186 [ThreadPoolMonitor] INFO  c.f.w.monitor.ThreadPoolMonitor - 调整监控策略: 健康状态=健康, 监控间隔: 30秒->40秒, 采样率: 1:2 -> 1:3
2025-07-31 14:37:03.226 [ThreadPoolMonitor] INFO  c.f.w.monitor.ThreadPoolMonitor - 调整监控策略: 健康状态=健康, 监控间隔: 40秒->50秒, 采样率: 1:3 -> 1:4
2025-07-31 14:37:03.263 [ThreadPoolMonitor] INFO  c.f.w.monitor.ThreadPoolMonitor - 调整监控策略: 健康状态=健康, 监控间隔: 50秒->60秒, 采样率: 1:4 -> 1:5
2025-07-31 14:37:03.306 [ThreadPoolMonitor] INFO  c.f.w.monitor.ThreadPoolMonitor - 调整监控策略: 健康状态=健康, 监控间隔: 60秒->70秒, 采样率: 1:5 -> 1:5
2025-07-31 14:37:03.833 [WebSocket-2] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:37:33.840 [WebSocket-4] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:38:03.839 [WebSocket-2] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:38:33.841 [WebSocket-13] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:39:03.843 [WebSocket-12] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:39:33.845 [WebSocket-20] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:40:03.831 [WebSocket-12] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:40:03.893 [WebSocket-12] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:40:33.832 [WebSocket-24] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:41:03.830 [WebSocket-13] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:41:33.834 [WebSocket-18] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:41:43.386 [ThreadPoolMonitor] INFO  c.f.w.monitor.ThreadPoolMonitor - 调整监控策略: 健康状态=健康, 监控间隔: 70秒->80秒, 采样率: 1:5 -> 1:5
2025-07-31 14:42:03.830 [WebSocket-28] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:42:33.842 [WebSocket-23] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:43:03.838 [WebSocket-12] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:43:33.842 [WebSocket-21] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:44:03.835 [WebSocket-12] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:44:33.833 [WebSocket-31] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:45:03.841 [WebSocket-12] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:45:03.888 [WebSocket-12] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:45:33.831 [WebSocket-40] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:46:03.844 [WebSocket-42] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:46:33.835 [WebSocket-38] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:47:03.450 [ThreadPoolMonitor] INFO  c.f.w.monitor.ThreadPoolMonitor - 调整监控策略: 健康状态=健康, 监控间隔: 80秒->90秒, 采样率: 1:5 -> 1:5
2025-07-31 14:47:03.839 [WebSocket-44] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:47:33.833 [WebSocket-41] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:48:03.845 [WebSocket-48] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:48:33.831 [WebSocket-51] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:49:03.843 [WebSocket-50] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:49:33.831 [WebSocket-55] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:50:03.838 [WebSocket-54] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:50:03.871 [WebSocket-54] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:50:33.842 [WebSocket-59] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:50:46.117 [SpringApplicationShutdownHook] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件订阅者取消注册成功: WebSocketMessageHandlerDispatcher
2025-07-31 14:50:46.117 [SpringApplicationShutdownHook] INFO  c.f.w.h.WebSocketMessageHandlerDispatcher - WebSocketMessageHandlerDispatcher已取消EventBus订阅
2025-07-31 14:50:46.118 [SpringApplicationShutdownHook] INFO  c.f.w.monitor.ThreadPoolMonitor - 线程池监控器已关闭
2025-07-31 14:50:46.118 [SpringApplicationShutdownHook] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件总线线程池已关闭
2025-07-31 14:50:52.947 [main] INFO  c.f.w.WebSocketFrameworkApplication - Starting WebSocketFrameworkApplication using Java 1.8.0_202 on DESKTOP-EGK8BP4 with PID 27096 (D:\workTool\IdeaProjects\websocket-framework\target\classes started by admin in D:\workTool\IdeaProjects\websocket-framework)
2025-07-31 14:50:52.948 [main] INFO  c.f.w.WebSocketFrameworkApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-31 14:50:53.841 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2025-07-31 14:50:53.846 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-07-31 14:50:53.898 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 23 ms. Found 0 Redis repository interfaces.
2025-07-31 14:50:54.831 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2025-07-31 14:50:54.865 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-31 14:50:54.866 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.63]
2025-07-31 14:50:55.254 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-31 14:50:55.255 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2245 ms
2025-07-31 14:50:57.668 [main] INFO  c.f.w.c.WebSocketFrameworkConfig - WebSocket线程池已创建: 核心线程=10, 最大线程=50, 队列容量=1000
2025-07-31 14:50:57.853 [main] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件总线初始化完成
2025-07-31 14:50:58.078 [main] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件订阅者注册成功: WebSocketMetricsCollector
2025-07-31 14:50:58.079 [main] INFO  c.f.w.m.WebSocketMetricsCollector - WebSocket指标收集器已启用并注册到事件总线
2025-07-31 14:50:58.173 [main] INFO  c.f.w.p.WebSocketServiceProcessor - WebSocket服务注册成功: serviceId=chatroom, serviceName=聊天室服务, beanName=chatRoomWebSocketService, class=ChatRoomWebSocketService
2025-07-31 14:50:58.186 [main] INFO  c.f.w.p.WebSocketServiceProcessor - WebSocket服务注册成功: serviceId=notification, serviceName=通知推送服务, beanName=notificationWebSocketService, class=NotificationWebSocketService
2025-07-31 14:50:58.234 [main] INFO  c.f.w.monitor.ThreadPoolMonitor - 智能线程池监控器已启动，初始监控间隔: 30秒
2025-07-31 14:50:58.247 [main] INFO  c.f.w.p.WebSocketServiceProcessor - WebSocket服务注册成功: serviceId=monitor, serviceName=monitor, beanName=threadPoolMonitorWebSocketService, class=ThreadPoolMonitorWebSocketService
2025-07-31 14:50:58.274 [main] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件订阅者注册成功: WebSocketMessageHandlerDispatcher
2025-07-31 14:50:58.274 [main] INFO  c.f.w.h.WebSocketMessageHandlerDispatcher - WebSocketMessageHandlerDispatcher初始化完成, 注册了4个消息处理器, 1个拦截器
2025-07-31 14:50:58.362 [main] INFO  c.f.websocket.monitor.MemoryMonitor - 内存监控器已启动 - 初始堆内存使用率: {:.1f}% (0.3613615215312483MB/32MB)
2025-07-31 14:50:58.369 [main] INFO  c.f.w.monitor.ThreadPoolMetricsStore - 线程池监控数据存储服务已启动，数据保留时间: 24小时
2025-07-31 14:51:00.723 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2025-07-31 14:51:00.761 [WebSocket-3] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:51:00.780 [main] INFO  c.f.w.WebSocketFrameworkApplication - Started WebSocketFrameworkApplication in 8.223 seconds (JVM running for 8.979)
2025-07-31 14:51:30.764 [WebSocket-10] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:51:50.794 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-07-31 14:51:50.794 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-07-31 14:51:50.794 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 0 ms
2025-07-31 14:51:50.916 [http-nio-8080-exec-1] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已添加: service=monitor, userId=test_user, sessionId=0
2025-07-31 14:51:50.936 [http-nio-8080-exec-1] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接建立: service=monitor, userId=test_user, sessionId=0, clientIp=null
2025-07-31 14:51:50.939 [WebSocket-1] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端连接: test_user
2025-07-31 14:51:50.946 [WebSocket-1] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"type":"welcome","message":"欢迎连接线程池监控中心","timestamp":1753944710939}
2025-07-31 14:51:50.946 [WebSocket-1] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:51:50.949 [WebSocket-1] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":30,"samplingRate":2,"lastHealthStatus":"HEALTHY","monitoringExecutions":1,"avgMonitoringCostMs":0.1249},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":9,"completedTaskCount":16,"taskCount":26,"totalThreadCount":51,"peakThreadCount":51,"poolUtilization":0.02,"queueUtilization":0.009,"throughput":0.29732408325074333,"timestamp":1753944710946},"timestamp":1753944710946},"type":"threadpool_metrics"}
2025-07-31 14:51:50.956 [WebSocket-1] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:51:50.957 [WebSocket-1] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:51:50.976 [WebSocket-7] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:51:50.976 [WebSocket-7] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:51:52.570 [http-nio-8080-exec-4] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已移除: service=monitor, userId=test_user, sessionId=0
2025-07-31 14:51:52.571 [http-nio-8080-exec-4] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接关闭: service=monitor, userId=test_user, sessionId=0, code=NORMAL_CLOSURE, reason=null
2025-07-31 14:51:52.572 [WebSocket-1] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端断开: test_user
2025-07-31 14:51:52.574 [WebSocket-1] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:51:52.576 [WebSocket-1] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:51:55.229 [http-nio-8080-exec-3] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已添加: service=monitor, userId=test_user, sessionId=1
2025-07-31 14:51:55.232 [http-nio-8080-exec-3] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接建立: service=monitor, userId=test_user, sessionId=1, clientIp=null
2025-07-31 14:51:55.233 [WebSocket-3] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端连接: test_user
2025-07-31 14:51:55.235 [WebSocket-3] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"type":"welcome","message":"欢迎连接线程池监控中心","timestamp":1753944715233}
2025-07-31 14:51:55.239 [WebSocket-3] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:51:55.240 [WebSocket-3] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":30,"samplingRate":2,"lastHealthStatus":"HEALTHY","monitoringExecutions":1,"avgMonitoringCostMs":0.1249},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":10,"completedTaskCount":32,"taskCount":43,"totalThreadCount":55,"peakThreadCount":55,"poolUtilization":0.02,"queueUtilization":0.01,"throughput":3.7269974376892616,"timestamp":1753944715239},"timestamp":1753944715239},"type":"threadpool_metrics"}
2025-07-31 14:51:55.242 [WebSocket-3] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:51:55.245 [WebSocket-3] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:51:55.317 [WebSocket-1] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:51:55.317 [WebSocket-1] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:51:57.709 [http-nio-8080-exec-2] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已添加: service=chatroom, userId=test_user, sessionId=2
2025-07-31 14:51:57.709 [http-nio-8080-exec-2] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接建立: service=chatroom, userId=test_user, sessionId=2, clientIp=null
2025-07-31 14:51:57.729 [WebSocket-7] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=chatroom, 接收用户数=1, message={"type":"system","message":"系统消息: 用户 test_user 加入了聊天室","timestamp":1753944717728}
2025-07-31 14:51:57.731 [WebSocket-7] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=chatroom, userId=test_user, message={"type":"system","message":"系统消息: 当前在线用户数: 1","timestamp":1753944717730}
2025-07-31 14:51:57.731 [WebSocket-7] INFO  c.f.w.e.ChatRoomWebSocketService - 用户加入聊天室: userId=test_user, 当前在线数: 1
2025-07-31 14:51:57.732 [WebSocket-7] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:51:57.733 [WebSocket-7] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:51:57.761 [WebSocket-1] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:51:57.762 [WebSocket-1] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:51:59.430 [ThreadPoolMonitor] INFO  c.f.w.monitor.ThreadPoolMonitor - 调整监控策略: 健康状态=健康, 监控间隔: 30秒->40秒, 采样率: 1:2 -> 1:3
2025-07-31 14:51:59.456 [ThreadPoolMonitor] INFO  c.f.w.monitor.ThreadPoolMonitor - 调整监控策略: 健康状态=健康, 监控间隔: 40秒->50秒, 采样率: 1:3 -> 1:4
2025-07-31 14:51:59.502 [ThreadPoolMonitor] INFO  c.f.w.monitor.ThreadPoolMonitor - 调整监控策略: 健康状态=健康, 监控间隔: 50秒->60秒, 采样率: 1:4 -> 1:5
2025-07-31 14:51:59.568 [ThreadPoolMonitor] INFO  c.f.w.monitor.ThreadPoolMonitor - 调整监控策略: 健康状态=健康, 监控间隔: 60秒->70秒, 采样率: 1:5 -> 1:5
2025-07-31 14:52:00.610 [http-nio-8080-exec-5] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已添加: service=monitor, userId=test_user, sessionId=3
2025-07-31 14:52:00.610 [http-nio-8080-exec-5] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接建立: service=monitor, userId=test_user, sessionId=3, clientIp=null
2025-07-31 14:52:00.610 [WebSocket-10] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端连接: test_user
2025-07-31 14:52:00.610 [WebSocket-10] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"type":"welcome","message":"欢迎连接线程池监控中心","timestamp":1753944720610}
2025-07-31 14:52:00.610 [WebSocket-10] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:52:00.610 [WebSocket-10] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":6,"avgMonitoringCostMs":221.3306},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":12,"completedTaskCount":54,"taskCount":67,"totalThreadCount":59,"peakThreadCount":59,"poolUtilization":0.02,"queueUtilization":0.012,"throughput":4.798464491362764,"timestamp":1753944720610},"timestamp":1753944720610},"type":"threadpool_metrics"}
2025-07-31 14:52:00.623 [WebSocket-10] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:52:00.626 [WebSocket-10] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:52:00.656 [WebSocket-6] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:52:00.661 [WebSocket-6] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:52:00.764 [WebSocket-3] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:52:00.766 [WebSocket-1] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:52:00.770 [WebSocket-1] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 接收用户数=1, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":6,"avgMonitoringCostMs":221.3306},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":2,"queueSize":10,"completedTaskCount":63,"taskCount":75,"totalThreadCount":60,"peakThreadCount":60,"poolUtilization":0.04,"queueUtilization":0.01,"throughput":0.0,"timestamp":1753944720767},"timestamp":1753944720767},"type":"threadpool_metrics"}
2025-07-31 14:52:25.295 [WebSocket-10] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:52:25.296 [WebSocket-10] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:52:27.768 [WebSocket-7] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:52:27.770 [WebSocket-7] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:52:30.660 [WebSocket-1] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:52:30.662 [WebSocket-1] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:52:30.771 [WebSocket-6] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:52:30.772 [WebSocket-9] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:52:30.774 [WebSocket-6] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 接收用户数=1, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":6,"avgMonitoringCostMs":221.3306},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":2,"queueSize":9,"completedTaskCount":92,"taskCount":103,"totalThreadCount":61,"peakThreadCount":61,"poolUtilization":0.04,"queueUtilization":0.009,"throughput":0.9665055824029328,"timestamp":1753944750772},"timestamp":1753944750772},"type":"threadpool_metrics"}
2025-07-31 14:52:55.285 [WebSocket-3] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:52:55.290 [WebSocket-3] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:52:57.774 [WebSocket-5] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:52:57.774 [WebSocket-5] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:53:00.677 [WebSocket-7] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:53:00.677 [WebSocket-7] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:53:00.773 [WebSocket-10] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:53:00.774 [WebSocket-9] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:53:00.778 [WebSocket-10] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 接收用户数=1, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":6,"avgMonitoringCostMs":221.3306},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":2,"queueSize":9,"completedTaskCount":121,"taskCount":132,"totalThreadCount":61,"peakThreadCount":61,"poolUtilization":0.04,"queueUtilization":0.009,"throughput":0.9666666666666667,"timestamp":1753944780774},"timestamp":1753944780774},"type":"threadpool_metrics"}
2025-07-31 14:53:25.309 [WebSocket-1] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:53:25.309 [WebSocket-1] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:53:27.786 [WebSocket-6] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor66.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:53:27.788 [WebSocket-6] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor66.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:53:30.680 [WebSocket-1] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor66.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:53:30.681 [WebSocket-1] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor66.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:53:30.768 [WebSocket-8] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:53:30.768 [WebSocket-2] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:53:30.770 [WebSocket-2] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 接收用户数=1, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":7,"avgMonitoringCostMs":189.7122},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":2,"queueSize":9,"completedTaskCount":149,"taskCount":160,"totalThreadCount":61,"peakThreadCount":61,"poolUtilization":0.04,"queueUtilization":0.009,"throughput":0.0,"timestamp":1753944810769},"timestamp":1753944810769},"type":"threadpool_metrics"}
2025-07-31 14:53:55.316 [WebSocket-9] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor66.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:53:55.317 [WebSocket-9] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor66.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:53:57.796 [WebSocket-1] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor66.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:53:57.797 [WebSocket-1] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor66.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:54:00.692 [WebSocket-4] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor66.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:54:00.694 [WebSocket-4] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor66.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:54:00.777 [WebSocket-8] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:54:00.775 [WebSocket-5] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:54:00.779 [WebSocket-5] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 接收用户数=1, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":7,"avgMonitoringCostMs":189.7122},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":2,"queueSize":9,"completedTaskCount":178,"taskCount":189,"totalThreadCount":61,"peakThreadCount":61,"poolUtilization":0.04,"queueUtilization":0.009,"throughput":0.0,"timestamp":1753944840778},"timestamp":1753944840778},"type":"threadpool_metrics"}
2025-07-31 14:54:25.334 [WebSocket-3] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor66.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:54:25.335 [WebSocket-3] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor66.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:54:27.811 [WebSocket-9] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor66.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:54:27.812 [WebSocket-9] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor66.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:54:30.698 [WebSocket-9] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor66.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:54:30.699 [WebSocket-9] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor66.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:54:30.775 [WebSocket-2] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:54:30.775 [WebSocket-1] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:54:30.776 [WebSocket-2] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 接收用户数=1, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":8,"avgMonitoringCostMs":165.9985},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":2,"queueSize":9,"completedTaskCount":206,"taskCount":217,"totalThreadCount":61,"peakThreadCount":61,"poolUtilization":0.04,"queueUtilization":0.009,"throughput":0.9334266760009334,"timestamp":1753944870775},"timestamp":1753944870775},"type":"threadpool_metrics"}
2025-07-31 14:54:55.342 [WebSocket-6] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor66.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:54:55.343 [WebSocket-6] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor66.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:54:57.820 [WebSocket-4] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor66.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:54:57.821 [WebSocket-4] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor66.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:55:00.712 [WebSocket-4] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor66.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:55:00.713 [WebSocket-4] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor66.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:55:00.771 [WebSocket-3] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:55:00.771 [WebSocket-10] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:55:00.772 [WebSocket-10] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 接收用户数=1, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":8,"avgMonitoringCostMs":165.9985},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":2,"queueSize":9,"completedTaskCount":235,"taskCount":246,"totalThreadCount":61,"peakThreadCount":61,"poolUtilization":0.04,"queueUtilization":0.009,"throughput":0.0,"timestamp":1753944900772},"timestamp":1753944900772},"type":"threadpool_metrics"}
2025-07-31 14:55:00.800 [WebSocket-3] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:55:12.081 [SpringApplicationShutdownHook] WARN  c.f.w.s.WebSocketSessionManager - WebSocket会话移除失败，会话不匹配: service=monitor, userId=test_user
2025-07-31 14:55:12.081 [SpringApplicationShutdownHook] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接关闭: service=monitor, userId=test_user, sessionId=1, code=GOING_AWAY, reason=The web application is stopping
2025-07-31 14:55:12.081 [WebSocket-9] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端断开: test_user
2025-07-31 14:55:12.082 [WebSocket-9] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor66.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:55:12.084 [WebSocket-9] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor66.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:55:12.111 [SpringApplicationShutdownHook] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已移除: service=chatroom, userId=test_user, sessionId=2
2025-07-31 14:55:12.112 [SpringApplicationShutdownHook] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接关闭: service=chatroom, userId=test_user, sessionId=2, code=GOING_AWAY, reason=The web application is stopping
2025-07-31 14:55:12.112 [WebSocket-6] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=chatroom, 接收用户数=0, message={"type":"system","message":"系统消息: 用户 test_user 离开了聊天室","timestamp":1753944912112}
2025-07-31 14:55:12.112 [WebSocket-6] INFO  c.f.w.e.ChatRoomWebSocketService - 用户离开聊天室: userId=test_user, 当前在线数: 0
2025-07-31 14:55:12.115 [WebSocket-6] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor66.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:55:12.116 [WebSocket-6] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor66.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:55:12.148 [SpringApplicationShutdownHook] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已移除: service=monitor, userId=test_user, sessionId=3
2025-07-31 14:55:12.148 [SpringApplicationShutdownHook] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接关闭: service=monitor, userId=test_user, sessionId=3, code=GOING_AWAY, reason=The web application is stopping
2025-07-31 14:55:12.149 [WebSocket-3] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端断开: test_user
2025-07-31 14:55:12.149 [WebSocket-3] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor66.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:55:12.150 [WebSocket-3] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor66.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:55:12.165 [SpringApplicationShutdownHook] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件订阅者取消注册成功: WebSocketMessageHandlerDispatcher
2025-07-31 14:55:12.165 [SpringApplicationShutdownHook] INFO  c.f.w.h.WebSocketMessageHandlerDispatcher - WebSocketMessageHandlerDispatcher已取消EventBus订阅
2025-07-31 14:55:12.166 [SpringApplicationShutdownHook] INFO  c.f.w.monitor.ThreadPoolMonitor - 线程池监控器已关闭
2025-07-31 14:55:12.168 [SpringApplicationShutdownHook] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件总线线程池已关闭
2025-07-31 14:55:22.766 [main] INFO  c.f.w.WebSocketFrameworkApplication - Starting WebSocketFrameworkApplication using Java 1.8.0_202 on DESKTOP-EGK8BP4 with PID 34088 (D:\workTool\IdeaProjects\websocket-framework\target\classes started by admin in D:\workTool\IdeaProjects\websocket-framework)
2025-07-31 14:55:22.769 [main] INFO  c.f.w.WebSocketFrameworkApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-31 14:55:23.990 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2025-07-31 14:55:23.996 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-07-31 14:55:24.043 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 21 ms. Found 0 Redis repository interfaces.
2025-07-31 14:55:24.797 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2025-07-31 14:55:24.816 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-31 14:55:24.816 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.63]
2025-07-31 14:55:25.078 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-31 14:55:25.078 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2176 ms
2025-07-31 14:55:25.846 [main] INFO  c.f.w.c.WebSocketFrameworkConfig - WebSocket线程池已创建: 核心线程=10, 最大线程=50, 队列容量=1000
2025-07-31 14:55:25.900 [main] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件总线初始化完成
2025-07-31 14:55:25.993 [main] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件订阅者注册成功: WebSocketMetricsCollector
2025-07-31 14:55:25.993 [main] INFO  c.f.w.m.WebSocketMetricsCollector - WebSocket指标收集器已启用并注册到事件总线
2025-07-31 14:55:26.013 [main] INFO  c.f.w.p.WebSocketServiceProcessor - WebSocket服务注册成功: serviceId=chatroom, serviceName=聊天室服务, beanName=chatRoomWebSocketService, class=ChatRoomWebSocketService
2025-07-31 14:55:26.015 [main] INFO  c.f.w.p.WebSocketServiceProcessor - WebSocket服务注册成功: serviceId=notification, serviceName=通知推送服务, beanName=notificationWebSocketService, class=NotificationWebSocketService
2025-07-31 14:55:26.032 [main] INFO  c.f.w.monitor.ThreadPoolMonitor - 智能线程池监控器已启动，初始监控间隔: 30秒
2025-07-31 14:55:26.035 [main] INFO  c.f.w.p.WebSocketServiceProcessor - WebSocket服务注册成功: serviceId=monitor, serviceName=monitor, beanName=threadPoolMonitorWebSocketService, class=ThreadPoolMonitorWebSocketService
2025-07-31 14:55:26.043 [main] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件订阅者注册成功: WebSocketMessageHandlerDispatcher
2025-07-31 14:55:26.044 [main] INFO  c.f.w.h.WebSocketMessageHandlerDispatcher - WebSocketMessageHandlerDispatcher初始化完成, 注册了4个消息处理器, 1个拦截器
2025-07-31 14:55:26.077 [main] INFO  c.f.websocket.monitor.MemoryMonitor - 内存监控器已启动 - 初始堆内存使用率: {:.1f}% (0.35574503162217813MB/32MB)
2025-07-31 14:55:26.080 [main] INFO  c.f.w.monitor.ThreadPoolMetricsStore - 线程池监控数据存储服务已启动，数据保留时间: 24小时
2025-07-31 14:55:26.893 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2025-07-31 14:55:26.916 [WebSocket-5] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:55:26.930 [main] INFO  c.f.w.WebSocketFrameworkApplication - Started WebSocketFrameworkApplication in 5.466 seconds (JVM running for 8.556)
2025-07-31 14:55:29.302 [WebSocket-5] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:55:29.573 [http-nio-8080-exec-2] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-07-31 14:55:29.574 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-07-31 14:55:29.575 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-07-31 14:55:29.749 [http-nio-8080-exec-2] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已添加: service=monitor, userId=monitor_1753944929312_khjld0949, sessionId=0
2025-07-31 14:55:29.771 [http-nio-8080-exec-2] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接建立: service=monitor, userId=monitor_1753944929312_khjld0949, sessionId=0, clientIp=null
2025-07-31 14:55:29.775 [WebSocket-7] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端连接: monitor_1753944929312_khjld0949
2025-07-31 14:55:29.791 [WebSocket-7] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753944929312_khjld0949, message={"type":"welcome","message":"欢迎连接线程池监控中心","timestamp":1753944929775}
2025-07-31 14:55:29.791 [WebSocket-7] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:55:29.797 [WebSocket-7] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753944929312_khjld0949, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":30,"samplingRate":2,"lastHealthStatus":"HEALTHY","monitoringExecutions":0,"avgMonitoringCostMs":0.0},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":9,"completedTaskCount":12,"taskCount":22,"totalThreadCount":51,"peakThreadCount":51,"poolUtilization":0.02,"queueUtilization":0.009,"throughput":14.314928425357873,"timestamp":1753944929791},"timestamp":1753944929791},"type":"threadpool_metrics"}
2025-07-31 14:55:29.813 [WebSocket-7] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:55:29.814 [WebSocket-7] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:55:29.848 [WebSocket-3] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:55:29.849 [WebSocket-3] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:55:43.314 [WebSocket-7] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753944929312_khjld0949, sessionId=0, message={"action":"refresh","timestamp":1753944943310}
2025-07-31 14:55:43.370 [WebSocket-4] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:55:43.370 [WebSocket-4] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753944929312_khjld0949, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":30,"samplingRate":2,"lastHealthStatus":"HEALTHY","monitoringExecutions":0,"avgMonitoringCostMs":0.0},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":9,"completedTaskCount":23,"taskCount":33,"totalThreadCount":52,"peakThreadCount":52,"poolUtilization":0.02,"queueUtilization":0.009,"throughput":0.8100743795566684,"timestamp":1753944943370},"timestamp":1753944943370},"type":"threadpool_metrics"}
2025-07-31 14:55:43.371 [WebSocket-4] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:55:43.371 [WebSocket-4] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:55:56.919 [WebSocket-3] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:55:56.921 [WebSocket-9] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:55:56.927 [WebSocket-9] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 接收用户数=1, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":30,"samplingRate":2,"lastHealthStatus":"HEALTHY","monitoringExecutions":1,"avgMonitoringCostMs":0.0151},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":2,"queueSize":7,"completedTaskCount":26,"taskCount":35,"totalThreadCount":52,"peakThreadCount":52,"poolUtilization":0.04,"queueUtilization":0.007,"throughput":0.0,"timestamp":1753944956922},"timestamp":1753944956922},"type":"threadpool_metrics"}
2025-07-31 14:55:59.814 [WebSocket-5] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:55:59.816 [WebSocket-5] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:56:13.318 [WebSocket-2] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753944929312_khjld0949, sessionId=0, message={"action":"refresh","timestamp":1753944973315}
2025-07-31 14:56:13.319 [WebSocket-1] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:56:13.319 [WebSocket-1] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753944929312_khjld0949, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":30,"samplingRate":2,"lastHealthStatus":"HEALTHY","monitoringExecutions":1,"avgMonitoringCostMs":0.0151},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":9,"completedTaskCount":41,"taskCount":51,"totalThreadCount":54,"peakThreadCount":54,"poolUtilization":0.02,"queueUtilization":0.009,"throughput":0.9148014880770874,"timestamp":1753944973319},"timestamp":1753944973319},"type":"threadpool_metrics"}
2025-07-31 14:56:13.320 [WebSocket-1] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:56:13.320 [WebSocket-1] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:56:26.401 [ThreadPoolMonitor] INFO  c.f.w.monitor.ThreadPoolMonitor - 调整监控策略: 健康状态=健康, 监控间隔: 30秒->40秒, 采样率: 1:2 -> 1:3
2025-07-31 14:56:26.427 [ThreadPoolMonitor] INFO  c.f.w.monitor.ThreadPoolMonitor - 调整监控策略: 健康状态=健康, 监控间隔: 40秒->50秒, 采样率: 1:3 -> 1:4
2025-07-31 14:56:26.451 [ThreadPoolMonitor] INFO  c.f.w.monitor.ThreadPoolMonitor - 调整监控策略: 健康状态=健康, 监控间隔: 50秒->60秒, 采样率: 1:4 -> 1:5
2025-07-31 14:56:26.473 [ThreadPoolMonitor] INFO  c.f.w.monitor.ThreadPoolMonitor - 调整监控策略: 健康状态=健康, 监控间隔: 60秒->70秒, 采样率: 1:5 -> 1:5
2025-07-31 14:56:26.918 [WebSocket-2] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:56:26.918 [WebSocket-9] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:56:26.920 [WebSocket-9] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 接收用户数=1, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":6,"avgMonitoringCostMs":70.9621},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":2,"queueSize":7,"completedTaskCount":45,"taskCount":54,"totalThreadCount":54,"peakThreadCount":54,"poolUtilization":0.04,"queueUtilization":0.007,"throughput":0.0,"timestamp":1753944986919},"timestamp":1753944986919},"type":"threadpool_metrics"}
2025-07-31 14:56:29.814 [WebSocket-2] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:56:29.816 [WebSocket-2] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:56:43.321 [WebSocket-3] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753944929312_khjld0949, sessionId=0, message={"action":"refresh","timestamp":1753945003318}
2025-07-31 14:56:43.322 [WebSocket-5] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:56:43.323 [WebSocket-5] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753944929312_khjld0949, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":6,"avgMonitoringCostMs":70.9621},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":9,"completedTaskCount":60,"taskCount":70,"totalThreadCount":55,"peakThreadCount":55,"poolUtilization":0.02,"queueUtilization":0.009,"throughput":0.9144668658172286,"timestamp":1753945003322},"timestamp":1753945003322},"type":"threadpool_metrics"}
2025-07-31 14:56:43.324 [WebSocket-5] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:56:43.325 [WebSocket-5] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:56:56.921 [WebSocket-2] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:56:56.922 [WebSocket-11] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:56:56.927 [WebSocket-11] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 接收用户数=1, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":6,"avgMonitoringCostMs":70.9621},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":2,"queueSize":7,"completedTaskCount":63,"taskCount":72,"totalThreadCount":55,"peakThreadCount":55,"poolUtilization":0.04,"queueUtilization":0.007,"throughput":0.0,"timestamp":1753945016924},"timestamp":1753945016924},"type":"threadpool_metrics"}
2025-07-31 14:56:59.828 [WebSocket-2] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:56:59.830 [WebSocket-2] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:57:13.315 [WebSocket-5] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753944929312_khjld0949, sessionId=0, message={"action":"refresh","timestamp":1753945033312}
2025-07-31 14:57:13.316 [WebSocket-11] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:57:13.318 [WebSocket-11] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753944929312_khjld0949, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":6,"avgMonitoringCostMs":70.9621},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":9,"completedTaskCount":78,"taskCount":88,"totalThreadCount":56,"peakThreadCount":56,"poolUtilization":0.02,"queueUtilization":0.009,"throughput":0.915024705667053,"timestamp":1753945033317},"timestamp":1753945033317},"type":"threadpool_metrics"}
2025-07-31 14:57:13.318 [WebSocket-11] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:57:13.318 [WebSocket-11] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:57:26.930 [WebSocket-7] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:57:26.930 [WebSocket-9] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:57:26.931 [WebSocket-9] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 接收用户数=1, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":6,"avgMonitoringCostMs":70.9621},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":2,"queueSize":7,"completedTaskCount":82,"taskCount":91,"totalThreadCount":56,"peakThreadCount":56,"poolUtilization":0.04,"queueUtilization":0.007,"throughput":0.0,"timestamp":1753945046931},"timestamp":1753945046931},"type":"threadpool_metrics"}
2025-07-31 14:57:29.834 [WebSocket-12] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:57:29.836 [WebSocket-12] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:57:43.321 [WebSocket-2] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753944929312_khjld0949, sessionId=0, message={"action":"refresh","timestamp":1753945063319}
2025-07-31 14:57:43.322 [WebSocket-4] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:57:43.323 [WebSocket-4] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753944929312_khjld0949, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":7,"avgMonitoringCostMs":60.82555714285714},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":9,"completedTaskCount":97,"taskCount":107,"totalThreadCount":58,"peakThreadCount":58,"poolUtilization":0.02,"queueUtilization":0.009,"throughput":0.9151363553169424,"timestamp":1753945063322},"timestamp":1753945063322},"type":"threadpool_metrics"}
2025-07-31 14:57:43.325 [WebSocket-4] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:57:43.326 [WebSocket-4] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:57:56.915 [WebSocket-9] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:57:56.916 [WebSocket-6] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:57:56.919 [WebSocket-6] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 接收用户数=1, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":7,"avgMonitoringCostMs":60.82555714285714},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":2,"queueSize":7,"completedTaskCount":100,"taskCount":109,"totalThreadCount":58,"peakThreadCount":58,"poolUtilization":0.04,"queueUtilization":0.007,"throughput":0.0,"timestamp":1753945076917},"timestamp":1753945076917},"type":"threadpool_metrics"}
2025-07-31 14:57:59.848 [WebSocket-1] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:57:59.849 [WebSocket-1] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:58:13.318 [WebSocket-5] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753944929312_khjld0949, sessionId=0, message={"action":"refresh","timestamp":1753945093316}
2025-07-31 14:58:13.318 [WebSocket-12] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:58:13.320 [WebSocket-12] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753944929312_khjld0949, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":7,"avgMonitoringCostMs":60.82555714285714},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":9,"completedTaskCount":115,"taskCount":125,"totalThreadCount":60,"peakThreadCount":60,"poolUtilization":0.02,"queueUtilization":0.009,"throughput":0.9145226191927813,"timestamp":1753945093319},"timestamp":1753945093319},"type":"threadpool_metrics"}
2025-07-31 14:58:13.321 [WebSocket-12] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:58:13.322 [WebSocket-12] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:58:26.921 [WebSocket-4] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:58:26.921 [WebSocket-7] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:58:26.923 [WebSocket-7] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 接收用户数=1, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":7,"avgMonitoringCostMs":60.82555714285714},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":3,"queueSize":7,"completedTaskCount":119,"taskCount":129,"totalThreadCount":60,"peakThreadCount":60,"poolUtilization":0.06,"queueUtilization":0.007,"throughput":0.0,"timestamp":1753945106922},"timestamp":1753945106922},"type":"threadpool_metrics"}
2025-07-31 14:58:29.858 [WebSocket-2] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:58:29.858 [WebSocket-2] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:58:43.322 [WebSocket-6] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753944929312_khjld0949, sessionId=0, message={"action":"refresh","timestamp":1753945123320}
2025-07-31 14:58:43.322 [WebSocket-13] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:58:43.323 [WebSocket-13] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753944929312_khjld0949, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":7,"avgMonitoringCostMs":60.82555714285714},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":9,"completedTaskCount":134,"taskCount":144,"totalThreadCount":61,"peakThreadCount":61,"poolUtilization":0.02,"queueUtilization":0.009,"throughput":0.9145783793671117,"timestamp":1753945123323},"timestamp":1753945123323},"type":"threadpool_metrics"}
2025-07-31 14:58:43.326 [WebSocket-13] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:58:43.326 [WebSocket-13] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:58:56.927 [WebSocket-7] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:58:56.927 [WebSocket-9] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:58:56.931 [WebSocket-7] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 接收用户数=1, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":8,"avgMonitoringCostMs":53.222825},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":2,"queueSize":7,"completedTaskCount":137,"taskCount":146,"totalThreadCount":61,"peakThreadCount":61,"poolUtilization":0.04,"queueUtilization":0.007,"throughput":0.2205071664829107,"timestamp":1753945136928},"timestamp":1753945136928},"type":"threadpool_metrics"}
2025-07-31 14:58:59.866 [WebSocket-9] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:58:59.867 [WebSocket-9] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:59:26.919 [WebSocket-1] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:59:26.920 [WebSocket-7] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:59:26.922 [WebSocket-7] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 接收用户数=1, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":8,"avgMonitoringCostMs":53.222825},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":3,"queueSize":7,"completedTaskCount":150,"taskCount":160,"totalThreadCount":61,"peakThreadCount":61,"poolUtilization":0.06,"queueUtilization":0.007,"throughput":0.0,"timestamp":1753945166921},"timestamp":1753945166921},"type":"threadpool_metrics"}
2025-07-31 14:59:29.875 [WebSocket-14] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor62.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:59:29.878 [WebSocket-14] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor62.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:59:44.312 [WebSocket-13] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753944929312_khjld0949, sessionId=0, message={"action":"refresh","timestamp":1753945184309}
2025-07-31 14:59:44.312 [WebSocket-2] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:59:44.314 [WebSocket-2] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753944929312_khjld0949, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":8,"avgMonitoringCostMs":53.222825},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":2,"queueSize":9,"completedTaskCount":165,"taskCount":176,"totalThreadCount":61,"peakThreadCount":61,"poolUtilization":0.04,"queueUtilization":0.009,"throughput":0.8624655013799448,"timestamp":1753945184313},"timestamp":1753945184313},"type":"threadpool_metrics"}
2025-07-31 14:59:44.315 [WebSocket-2] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor62.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:59:44.317 [WebSocket-2] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor62.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:59:56.927 [WebSocket-1] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:59:56.927 [WebSocket-4] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 14:59:56.933 [WebSocket-4] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 接收用户数=1, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":9,"avgMonitoringCostMs":47.309333333333335},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":2,"queueSize":7,"completedTaskCount":168,"taskCount":177,"totalThreadCount":61,"peakThreadCount":61,"poolUtilization":0.04,"queueUtilization":0.007,"throughput":0.0,"timestamp":1753945196929},"timestamp":1753945196929},"type":"threadpool_metrics"}
2025-07-31 14:59:59.875 [WebSocket-1] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor62.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 14:59:59.878 [WebSocket-1] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor62.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 15:00:26.926 [WebSocket-2] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 15:00:26.926 [WebSocket-16] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 15:00:26.928 [WebSocket-16] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 接收用户数=1, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":9,"avgMonitoringCostMs":47.309333333333335},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":4,"queueSize":5,"completedTaskCount":181,"taskCount":190,"totalThreadCount":61,"peakThreadCount":61,"poolUtilization":0.08,"queueUtilization":0.005,"throughput":0.0,"timestamp":1753945226927},"timestamp":1753945226927},"type":"threadpool_metrics"}
2025-07-31 15:00:26.965 [WebSocket-2] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 15:00:26.968 [WebSocket-9] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 接收用户数=1, message={"payload":{"monitoringStats":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":9,"avgMonitoringCostMs":47.309333333333335},"systemLoad":{"availableProcessors":16,"systemLoadAverage":-1.0,"processCpuLoad":2.801021391345534E-4,"systemCpuLoad":0.044431310500395726},"jvmMemory":{"usedMemory":59877048,"totalMemory":736100352,"freeMemory":676223304,"maxMemory":9481224192},"timestamp":1753945226966},"type":"system_stats"}
2025-07-31 15:01:37.120 [WebSocket-14] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 15:01:37.120 [WebSocket-15] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 15:01:37.121 [WebSocket-4] WARN  c.f.websocket.core.WebSocketServer - WebSocket心跳超时，关闭连接: service=monitor, userId=monitor_1753944929312_khjld0949, sessionId=0
2025-07-31 15:01:37.125 [WebSocket-15] WARN  c.f.w.session.WebSocketSession - 会话已关闭，消息发送失败: sessionId=0, userId=monitor_1753944929312_khjld0949, service=monitor
2025-07-31 15:01:37.126 [http-nio-8080-exec-10] WARN  c.f.w.s.WebSocketSessionManager - WebSocket会话移除失败，会话不匹配: service=monitor, userId=monitor_1753944929312_khjld0949
2025-07-31 15:01:37.127 [WebSocket-3] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753944929312_khjld0949, sessionId=0, message={"action":"refresh","timestamp":1753945245313}
2025-07-31 15:01:37.128 [WebSocket-16] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor62.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 15:01:37.127 [WebSocket-17] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753944929312_khjld0949, sessionId=0, message={"action":"refresh","timestamp":1753945274458}
2025-07-31 15:01:37.130 [http-nio-8080-exec-10] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接关闭: service=monitor, userId=monitor_1753944929312_khjld0949, sessionId=0, code=GOING_AWAY, reason=null
2025-07-31 15:01:37.127 [WebSocket-15] ERROR c.f.w.s.WebSocketSessionManager - 广播消息发送失败: service=monitor, userId=monitor_1753944929312_khjld0949
java.io.IOException: WebSocket会话已关闭
	at com.framework.websocket.session.WebSocketSession.sendMessage(WebSocketSession.java:99)
	at com.framework.websocket.session.WebSocketSessionManager.lambda$broadcast$1(WebSocketSessionManager.java:252)
	at java.util.concurrent.ConcurrentHashMap.forEach(ConcurrentHashMap.java:1597)
	at com.framework.websocket.session.WebSocketSessionManager.broadcast(WebSocketSessionManager.java:250)
	at com.framework.websocket.monitor.ThreadPoolMonitorWebSocketService.broadcastMetrics(ThreadPoolMonitorWebSocketService.java:230)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:308)
	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 15:01:37.132 [WebSocket-15] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 接收用户数=1, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":9,"avgMonitoringCostMs":47.309333333333335},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":4,"queueSize":6,"completedTaskCount":198,"taskCount":208,"totalThreadCount":60,"peakThreadCount":61,"poolUtilization":0.08,"queueUtilization":0.006,"throughput":0.0,"timestamp":1753945297122},"timestamp":1753945297122},"type":"threadpool_metrics"}
2025-07-31 15:01:37.132 [WebSocket-16] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=ON_MESSAGE, service=monitor, userId=monitor_1753944929312_khjld0949, sessionId=0
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor62.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 15:01:37.132 [WebSocket-15] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 15:01:37.133 [WebSocket-19] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端断开: monitor_1753944929312_khjld0949
2025-07-31 15:01:37.134 [WebSocket-19] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor62.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 15:01:37.134 [WebSocket-19] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor62.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 15:01:37.134 [WebSocket-18] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 15:01:37.134 [WebSocket-15] ERROR c.f.websocket.core.WebSocketServer - WebSocket发生错误: service=monitor, userId=monitor_1753945277886_prl4lrxlh, sessionId=1
java.io.IOException: java.io.IOException: 你的主机中的软件中止了一个已建立的连接。
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:327)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:262)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:824)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:711)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:325)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:254)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendString(WsRemoteEndpointImplBase.java:195)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:37)
	at com.framework.websocket.session.WebSocketSession.sendMessage(WebSocketSession.java:92)
	at com.framework.websocket.session.WebSocketSessionManager.lambda$broadcast$1(WebSocketSessionManager.java:252)
	at java.util.concurrent.ConcurrentHashMap.forEach(ConcurrentHashMap.java:1597)
	at com.framework.websocket.session.WebSocketSessionManager.broadcast(WebSocketSessionManager.java:250)
	at com.framework.websocket.monitor.ThreadPoolMonitorWebSocketService.broadcastMetrics(ThreadPoolMonitorWebSocketService.java:230)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:308)
	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
Caused by: java.io.IOException: 你的主机中的软件中止了一个已建立的连接。
	at sun.nio.ch.SocketDispatcher.writev0(Native Method)
	at sun.nio.ch.SocketDispatcher.writev(SocketDispatcher.java:55)
	at sun.nio.ch.IOUtil.write(IOUtil.java:148)
	at sun.nio.ch.SocketChannelImpl.write(SocketChannelImpl.java:504)
	at org.apache.tomcat.util.net.NioChannel.write(NioChannel.java:147)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1635)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1068)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1487)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1413)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1384)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:93)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:512)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:314)
	... 22 common frames omitted
2025-07-31 15:01:37.134 [WebSocket-18] WARN  c.f.w.s.WebSocketSessionManager - 消息发送失败，用户不在线: service=monitor, userId=monitor_1753944929312_khjld0949
2025-07-31 15:01:37.134 [WebSocket-15] WARN  c.f.websocket.core.WebSocketServer - WebSocket异常关闭: service=monitor, userId=monitor_1753945277886_prl4lrxlh, sessionId=1, reason=你的主机中的软件中止了一个已建立的连接。
2025-07-31 15:01:37.134 [WebSocket-15] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接关闭: service=monitor, userId=monitor_1753945277886_prl4lrxlh, sessionId=1, code=CLOSED_ABNORMALLY, reason=你的主机中的软件中止了一个已建立的连接。
2025-07-31 15:01:37.134 [WebSocket-18] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor62.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 15:01:37.134 [WebSocket-15] ERROR c.f.w.s.WebSocketSessionManager - 广播消息发送失败: service=monitor, userId=monitor_1753945277886_prl4lrxlh
java.io.IOException: java.io.IOException: 你的主机中的软件中止了一个已建立的连接。
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:327)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:254)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendString(WsRemoteEndpointImplBase.java:195)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:37)
	at com.framework.websocket.session.WebSocketSession.sendMessage(WebSocketSession.java:92)
	at com.framework.websocket.session.WebSocketSessionManager.lambda$broadcast$1(WebSocketSessionManager.java:252)
	at java.util.concurrent.ConcurrentHashMap.forEach(ConcurrentHashMap.java:1597)
	at com.framework.websocket.session.WebSocketSessionManager.broadcast(WebSocketSessionManager.java:250)
	at com.framework.websocket.monitor.ThreadPoolMonitorWebSocketService.broadcastMetrics(ThreadPoolMonitorWebSocketService.java:230)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:308)
	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
Caused by: java.io.IOException: 你的主机中的软件中止了一个已建立的连接。
	at sun.nio.ch.SocketDispatcher.writev0(Native Method)
	at sun.nio.ch.SocketDispatcher.writev(SocketDispatcher.java:55)
	at sun.nio.ch.IOUtil.write(IOUtil.java:148)
	at sun.nio.ch.SocketChannelImpl.write(SocketChannelImpl.java:504)
	at org.apache.tomcat.util.net.NioChannel.write(NioChannel.java:147)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1635)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1068)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1487)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1413)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1384)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:93)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:512)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:314)
	... 22 common frames omitted
2025-07-31 15:01:37.134 [WebSocket-15] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 接收用户数=2, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":9,"avgMonitoringCostMs":47.309333333333335},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":7,"queueSize":6,"completedTaskCount":218,"taskCount":231,"totalThreadCount":61,"peakThreadCount":62,"poolUtilization":0.14,"queueUtilization":0.006,"throughput":1818.1818181818182,"timestamp":1753945297133},"timestamp":1753945297133},"type":"threadpool_metrics"}
2025-07-31 15:01:37.134 [WebSocket-18] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor62.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 15:01:37.134 [WebSocket-13] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor62.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 15:01:37.134 [WebSocket-13] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor62.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 15:01:37.134 [WebSocket-9] ERROR c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端错误: monitor_1753945277886_prl4lrxlh, error: java.io.IOException: 你的主机中的软件中止了一个已建立的连接。
2025-07-31 15:01:37.134 [WebSocket-9] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor62.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 15:01:37.134 [WebSocket-9] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor62.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 15:01:37.134 [WebSocket-3] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端断开: monitor_1753945277886_prl4lrxlh
2025-07-31 15:01:37.134 [WebSocket-3] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor62.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 15:01:37.142 [WebSocket-3] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor62.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 15:01:37.142 [WebSocket-16] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor62.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 15:01:37.142 [WebSocket-16] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor62.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 15:01:37.152 [WebSocket-14] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 15:01:37.160 [http-nio-8080-exec-2] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已添加: service=monitor, userId=monitor_1753945277886_prl4lrxlh, sessionId=1
2025-07-31 15:01:37.161 [http-nio-8080-exec-2] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接建立: service=monitor, userId=monitor_1753945277886_prl4lrxlh, sessionId=1, clientIp=null
2025-07-31 15:01:37.161 [WebSocket-4] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已移除: service=monitor, userId=monitor_1753944929312_khjld0949, sessionId=0
2025-07-31 15:01:37.161 [WebSocket-3] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端连接: monitor_1753945277886_prl4lrxlh
2025-07-31 15:01:37.161 [http-nio-8080-exec-1] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已添加: service=monitor, userId=monitor_1753945290601_2bzwhwuyk, sessionId=2
2025-07-31 15:01:37.161 [WebSocket-3] WARN  c.f.w.session.WebSocketSession - 会话已关闭，消息发送失败: sessionId=1, userId=monitor_1753945277886_prl4lrxlh, service=monitor
2025-07-31 15:01:37.163 [http-nio-8080-exec-1] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接建立: service=monitor, userId=monitor_1753945290601_2bzwhwuyk, sessionId=2, clientIp=null
2025-07-31 15:01:37.166 [WebSocket-3] ERROR c.f.w.s.WebSocketSessionManager - 消息发送失败: service=monitor, userId=monitor_1753945277886_prl4lrxlh, message={"type":"welcome","message":"欢迎连接线程池监控中心","timestamp":1753945297161}
java.io.IOException: WebSocket会话已关闭
	at com.framework.websocket.session.WebSocketSession.sendMessage(WebSocketSession.java:99)
	at com.framework.websocket.session.WebSocketSessionManager.sendMessage(WebSocketSessionManager.java:268)
	at com.framework.websocket.monitor.ThreadPoolMonitorWebSocketService.sendWelcomeMessage(ThreadPoolMonitorWebSocketService.java:81)
	at com.framework.websocket.monitor.ThreadPoolMonitorWebSocketService.handleEvent(ThreadPoolMonitorWebSocketService.java:47)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor62.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 15:01:37.166 [http-nio-8080-exec-2] ERROR c.f.websocket.core.WebSocketServer - WebSocket发生错误: service=monitor, userId=monitor_1753945277886_prl4lrxlh, sessionId=1
java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper.fillReadBuffer(NioEndpoint.java:1296)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper.read(NioEndpoint.java:1226)
	at org.apache.tomcat.websocket.server.WsFrameServer.onDataAvailable(WsFrameServer.java:75)
	at org.apache.tomcat.websocket.server.WsFrameServer.doOnDataAvailable(WsFrameServer.java:183)
	at org.apache.tomcat.websocket.server.WsFrameServer.notifyDataAvailable(WsFrameServer.java:162)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.upgradeDispatch(WsHttpUpgradeHandler.java:157)
	at org.apache.coyote.http11.upgrade.UpgradeProcessorInternal.dispatch(UpgradeProcessorInternal.java:60)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:59)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 15:01:37.166 [WebSocket-3] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 15:01:37.166 [WebSocket-3] WARN  c.f.w.session.WebSocketSession - 会话已关闭，消息发送失败: sessionId=1, userId=monitor_1753945277886_prl4lrxlh, service=monitor
2025-07-31 15:01:37.170 [WebSocket-3] ERROR c.f.w.s.WebSocketSessionManager - 消息发送失败: service=monitor, userId=monitor_1753945277886_prl4lrxlh, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":9,"avgMonitoringCostMs":47.309333333333335},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":4,"queueSize":10,"completedTaskCount":249,"taskCount":263,"totalThreadCount":62,"peakThreadCount":62,"poolUtilization":0.08,"queueUtilization":0.01,"throughput":1071.4285714285713,"timestamp":1753945297166},"timestamp":1753945297166},"type":"threadpool_metrics"}
java.io.IOException: WebSocket会话已关闭
	at com.framework.websocket.session.WebSocketSession.sendMessage(WebSocketSession.java:99)
	at com.framework.websocket.session.WebSocketSessionManager.sendMessage(WebSocketSessionManager.java:268)
	at com.framework.websocket.monitor.ThreadPoolMonitorWebSocketService.sendCurrentMetrics(ThreadPoolMonitorWebSocketService.java:106)
	at com.framework.websocket.monitor.ThreadPoolMonitorWebSocketService.handleEvent(ThreadPoolMonitorWebSocketService.java:48)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor62.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 15:01:37.172 [WebSocket-3] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor62.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 15:01:37.174 [WebSocket-3] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor62.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 15:01:37.175 [WebSocket-13] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端连接: monitor_1753945290601_2bzwhwuyk
2025-07-31 15:01:37.177 [WebSocket-13] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753945290601_2bzwhwuyk, message={"type":"welcome","message":"欢迎连接线程池监控中心","timestamp":1753945297175}
2025-07-31 15:01:37.177 [WebSocket-13] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 15:01:37.177 [WebSocket-13] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753945290601_2bzwhwuyk, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":9,"avgMonitoringCostMs":47.309333333333335},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":3,"queueSize":10,"completedTaskCount":250,"taskCount":263,"totalThreadCount":62,"peakThreadCount":62,"poolUtilization":0.06,"queueUtilization":0.01,"throughput":90.90909090909092,"timestamp":1753945297177},"timestamp":1753945297177},"type":"threadpool_metrics"}
2025-07-31 15:01:37.177 [WebSocket-13] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor62.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 15:01:37.177 [WebSocket-13] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor62.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 15:01:37.177 [WebSocket-18] ERROR c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端错误: monitor_1753945277886_prl4lrxlh, error: null
2025-07-31 15:01:37.177 [WebSocket-18] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor62.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 15:01:37.177 [WebSocket-18] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor62.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 15:01:37.195 [WebSocket-17] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor62.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 15:01:37.195 [ThreadPoolMonitor] INFO  c.f.w.monitor.ThreadPoolMonitor - 调整监控策略: 健康状态=健康, 监控间隔: 70秒->80秒, 采样率: 1:5 -> 1:5
2025-07-31 15:01:37.195 [WebSocket-17] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor62.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 15:01:37.817 [SpringApplicationShutdownHook] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已移除: service=monitor, userId=monitor_1753945290601_2bzwhwuyk, sessionId=2
2025-07-31 15:01:37.817 [SpringApplicationShutdownHook] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接关闭: service=monitor, userId=monitor_1753945290601_2bzwhwuyk, sessionId=2, code=GOING_AWAY, reason=The web application is stopping
2025-07-31 15:01:37.817 [WebSocket-3] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端断开: monitor_1753945290601_2bzwhwuyk
2025-07-31 15:01:37.817 [WebSocket-3] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor62.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 15:01:37.817 [WebSocket-3] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor62.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 15:01:37.833 [SpringApplicationShutdownHook] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件订阅者取消注册成功: WebSocketMessageHandlerDispatcher
2025-07-31 15:01:37.833 [SpringApplicationShutdownHook] INFO  c.f.w.h.WebSocketMessageHandlerDispatcher - WebSocketMessageHandlerDispatcher已取消EventBus订阅
2025-07-31 15:01:37.833 [SpringApplicationShutdownHook] INFO  c.f.w.monitor.ThreadPoolMonitor - 线程池监控器已关闭
2025-07-31 15:01:37.833 [SpringApplicationShutdownHook] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件总线线程池已关闭
2025-07-31 15:01:42.157 [main] INFO  c.f.w.WebSocketFrameworkApplication - Starting WebSocketFrameworkApplication using Java 1.8.0_202 on DESKTOP-EGK8BP4 with PID 29484 (D:\workTool\IdeaProjects\websocket-framework\target\classes started by admin in D:\workTool\IdeaProjects\websocket-framework)
2025-07-31 15:01:42.158 [main] INFO  c.f.w.WebSocketFrameworkApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-31 15:01:43.002 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2025-07-31 15:01:43.007 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-07-31 15:01:43.057 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 22 ms. Found 0 Redis repository interfaces.
2025-07-31 15:01:43.919 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2025-07-31 15:01:43.941 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-31 15:01:43.942 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.63]
2025-07-31 15:01:44.249 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-31 15:01:44.250 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2033 ms
2025-07-31 15:01:45.282 [main] INFO  c.f.w.c.WebSocketFrameworkConfig - WebSocket线程池已创建: 核心线程=10, 最大线程=50, 队列容量=1000
2025-07-31 15:01:45.357 [main] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件总线初始化完成
2025-07-31 15:01:45.488 [main] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件订阅者注册成功: WebSocketMetricsCollector
2025-07-31 15:01:45.488 [main] INFO  c.f.w.m.WebSocketMetricsCollector - WebSocket指标收集器已启用并注册到事件总线
2025-07-31 15:01:45.517 [main] INFO  c.f.w.p.WebSocketServiceProcessor - WebSocket服务注册成功: serviceId=chatroom, serviceName=聊天室服务, beanName=chatRoomWebSocketService, class=ChatRoomWebSocketService
2025-07-31 15:01:45.520 [main] INFO  c.f.w.p.WebSocketServiceProcessor - WebSocket服务注册成功: serviceId=notification, serviceName=通知推送服务, beanName=notificationWebSocketService, class=NotificationWebSocketService
2025-07-31 15:01:45.543 [main] INFO  c.f.w.monitor.ThreadPoolMonitor - 智能线程池监控器已启动，初始监控间隔: 30秒
2025-07-31 15:01:45.548 [main] INFO  c.f.w.p.WebSocketServiceProcessor - WebSocket服务注册成功: serviceId=monitor, serviceName=monitor, beanName=threadPoolMonitorWebSocketService, class=ThreadPoolMonitorWebSocketService
2025-07-31 15:01:45.558 [main] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件订阅者注册成功: WebSocketMessageHandlerDispatcher
2025-07-31 15:01:45.559 [main] INFO  c.f.w.h.WebSocketMessageHandlerDispatcher - WebSocketMessageHandlerDispatcher初始化完成, 注册了4个消息处理器, 1个拦截器
2025-07-31 15:01:45.599 [main] INFO  c.f.websocket.monitor.MemoryMonitor - 内存监控器已启动 - 初始堆内存使用率: {:.1f}% (0.3557708510728147MB/32MB)
2025-07-31 15:01:45.603 [main] INFO  c.f.w.monitor.ThreadPoolMetricsStore - 线程池监控数据存储服务已启动，数据保留时间: 24小时
2025-07-31 15:01:46.661 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2025-07-31 15:01:46.691 [WebSocket-5] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 15:01:46.704 [main] INFO  c.f.w.WebSocketFrameworkApplication - Started WebSocketFrameworkApplication in 4.983 seconds (JVM running for 5.728)
2025-07-31 15:01:50.900 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-07-31 15:01:50.901 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-07-31 15:01:50.902 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-07-31 15:01:51.086 [http-nio-8080-exec-1] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已添加: service=monitor, userId=monitor_1753945310685_bqudwicwr, sessionId=0
2025-07-31 15:01:51.113 [http-nio-8080-exec-1] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接建立: service=monitor, userId=monitor_1753945310685_bqudwicwr, sessionId=0, clientIp=null
2025-07-31 15:01:51.121 [WebSocket-10] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端连接: monitor_1753945310685_bqudwicwr
2025-07-31 15:01:51.140 [WebSocket-10] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753945310685_bqudwicwr, message={"type":"welcome","message":"欢迎连接线程池监控中心","timestamp":1753945311122}
2025-07-31 15:01:51.141 [WebSocket-10] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 15:01:51.147 [WebSocket-10] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753945310685_bqudwicwr, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":30,"samplingRate":2,"lastHealthStatus":"HEALTHY","monitoringExecutions":0,"avgMonitoringCostMs":0.0},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":9,"completedTaskCount":12,"taskCount":22,"totalThreadCount":51,"peakThreadCount":51,"poolUtilization":0.02,"queueUtilization":0.009,"throughput":1.7981568891885817,"timestamp":1753945311141},"timestamp":1753945311141},"type":"threadpool_metrics"}
2025-07-31 15:01:59.407 [WebSocket-10] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 15:01:59.407 [WebSocket-10] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=ON_HEARTBEAT, service=monitor, userId=monitor_1753945310685_bqudwicwr, sessionId=0
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 15:01:59.422 [WebSocket-5] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 15:01:59.422 [WebSocket-5] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 15:02:01.323 [WebSocket-9] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753945310685_bqudwicwr, sessionId=0, message={"action":"refresh","timestamp":1753945321321}
2025-07-31 15:02:01.381 [WebSocket-7] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 15:02:01.382 [WebSocket-7] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753945310685_bqudwicwr, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":30,"samplingRate":2,"lastHealthStatus":"HEALTHY","monitoringExecutions":0,"avgMonitoringCostMs":0.0},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":9,"completedTaskCount":23,"taskCount":33,"totalThreadCount":52,"peakThreadCount":52,"poolUtilization":0.02,"queueUtilization":0.009,"throughput":1.07421875,"timestamp":1753945321381},"timestamp":1753945321381},"type":"threadpool_metrics"}
2025-07-31 15:02:01.382 [WebSocket-7] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 15:02:01.383 [WebSocket-7] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 15:02:16.699 [WebSocket-2] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 15:02:16.699 [WebSocket-3] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 15:02:16.702 [WebSocket-2] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 接收用户数=1, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":30,"samplingRate":2,"lastHealthStatus":"HEALTHY","monitoringExecutions":1,"avgMonitoringCostMs":0.0053},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":2,"queueSize":7,"completedTaskCount":26,"taskCount":35,"totalThreadCount":52,"peakThreadCount":52,"poolUtilization":0.04,"queueUtilization":0.007,"throughput":0.19583523728702917,"timestamp":1753945336700},"timestamp":1753945336700},"type":"threadpool_metrics"}
2025-07-31 15:02:21.149 [WebSocket-2] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 15:02:21.150 [WebSocket-2] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 15:02:35.690 [SpringApplicationShutdownHook] WARN  c.f.w.s.WebSocketSessionManager - 清除心跳缓存失败: service=monitor, userId=monitor_1753945310685_bqudwicwr
org.springframework.dao.QueryTimeoutException: Redis command timed out; nested exception is io.lettuce.core.RedisCommandTimeoutException: Command timed out after 5 second(s)
	at org.springframework.data.redis.connection.lettuce.LettuceExceptionConverter.convert(LettuceExceptionConverter.java:70)
	at org.springframework.data.redis.connection.lettuce.LettuceExceptionConverter.convert(LettuceExceptionConverter.java:41)
	at org.springframework.data.redis.PassThroughExceptionTranslationStrategy.translate(PassThroughExceptionTranslationStrategy.java:44)
	at org.springframework.data.redis.FallbackExceptionTranslationStrategy.translate(FallbackExceptionTranslationStrategy.java:42)
	at org.springframework.data.redis.connection.lettuce.LettuceConnection.convertLettuceAccessException(LettuceConnection.java:272)
	at org.springframework.data.redis.connection.lettuce.LettuceConnection.await(LettuceConnection.java:1063)
	at org.springframework.data.redis.connection.lettuce.LettuceConnection.lambda$doInvoke$4(LettuceConnection.java:920)
	at org.springframework.data.redis.connection.lettuce.LettuceInvoker$Synchronizer.invoke(LettuceInvoker.java:665)
	at org.springframework.data.redis.connection.lettuce.LettuceInvoker.just(LettuceInvoker.java:94)
	at org.springframework.data.redis.connection.lettuce.LettuceKeyCommands.del(LettuceKeyCommands.java:106)
	at org.springframework.data.redis.connection.DefaultedRedisConnection.del(DefaultedRedisConnection.java:95)
	at org.springframework.data.redis.core.RedisTemplate.lambda$delete$3(RedisTemplate.java:723)
	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:224)
	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:191)
	at org.springframework.data.redis.core.RedisTemplate.delete(RedisTemplate.java:723)
	at com.framework.websocket.session.WebSocketSessionManager.clearHeartbeat(WebSocketSessionManager.java:185)
	at com.framework.websocket.session.WebSocketSessionManager.removeSession(WebSocketSessionManager.java:57)
	at com.framework.websocket.core.WebSocketServer.onClose(WebSocketServer.java:138)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.tomcat.websocket.pojo.PojoEndpointBase.onClose(PojoEndpointBase.java:107)
	at org.apache.tomcat.websocket.WsSession.fireEndpointOnClose(WsSession.java:767)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:715)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:665)
	at org.apache.tomcat.websocket.WsSession.close(WsSession.java:652)
	at org.apache.tomcat.websocket.WsWebSocketContainer.destroy(WsWebSocketContainer.java:1046)
	at org.apache.tomcat.websocket.server.WsContextListener.contextDestroyed(WsContextListener.java:48)
	at org.apache.catalina.core.StandardContext.listenerStop(StandardContext.java:4814)
	at org.apache.catalina.core.StandardContext.stopInternal(StandardContext.java:5477)
	at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:257)
	at org.apache.catalina.core.ContainerBase$StopChild.call(ContainerBase.java:1412)
	at org.apache.catalina.core.ContainerBase$StopChild.call(ContainerBase.java:1401)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:134)
	at org.apache.catalina.core.ContainerBase.stopInternal(ContainerBase.java:986)
	at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:257)
	at org.apache.catalina.core.ContainerBase$StopChild.call(ContainerBase.java:1412)
	at org.apache.catalina.core.ContainerBase$StopChild.call(ContainerBase.java:1401)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:134)
	at org.apache.catalina.core.ContainerBase.stopInternal(ContainerBase.java:986)
	at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:257)
	at org.apache.catalina.core.StandardService.stopInternal(StandardService.java:497)
	at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:257)
	at org.apache.catalina.core.StandardServer.stopInternal(StandardServer.java:979)
	at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:257)
	at org.apache.catalina.startup.Tomcat.stop(Tomcat.java:496)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.stopTomcat(TomcatWebServer.java:273)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.stop(TomcatWebServer.java:331)
	at org.springframework.boot.web.servlet.context.WebServerStartStopLifecycle.stop(WebServerStartStopLifecycle.java:51)
	at org.springframework.context.SmartLifecycle.stop(SmartLifecycle.java:117)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:234)
	at org.springframework.context.support.DefaultLifecycleProcessor.access$300(DefaultLifecycleProcessor.java:54)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:373)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:206)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:129)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1067)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:174)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1021)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:145)
	at java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:114)
	at java.lang.Thread.run(Thread.java:748)
Caused by: io.lettuce.core.RedisCommandTimeoutException: Command timed out after 5 second(s)
	at io.lettuce.core.internal.ExceptionFactory.createTimeoutException(ExceptionFactory.java:59)
	at io.lettuce.core.internal.Futures.awaitOrCancel(Futures.java:246)
	at io.lettuce.core.LettuceFutures.awaitOrCancel(LettuceFutures.java:74)
	at org.springframework.data.redis.connection.lettuce.LettuceConnection.await(LettuceConnection.java:1061)
	... 63 common frames omitted
2025-07-31 15:02:35.691 [SpringApplicationShutdownHook] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已移除: service=monitor, userId=monitor_1753945310685_bqudwicwr, sessionId=0
2025-07-31 15:02:35.692 [SpringApplicationShutdownHook] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接关闭: service=monitor, userId=monitor_1753945310685_bqudwicwr, sessionId=0, code=GOING_AWAY, reason=The web application is stopping
2025-07-31 15:02:35.692 [WebSocket-3] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端断开: monitor_1753945310685_bqudwicwr
2025-07-31 15:02:35.693 [WebSocket-3] ERROR c.f.w.h.WebSocketMessageHandlerDispatcher - 事件处理异常: handler=DefaultWebSocketMessageHandler, eventType=null, service=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 15:02:35.694 [WebSocket-3] ERROR c.f.w.i.LoggingWebSocketEventInterceptor - WebSocket事件处理异常: eventType=null, service=null, userId=null, sessionId=null
java.lang.NullPointerException: null
	at com.framework.websocket.handler.DefaultWebSocketMessageHandler.handleEvent(DefaultWebSocketMessageHandler.java:20)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 15:02:35.705 [SpringApplicationShutdownHook] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件订阅者取消注册成功: WebSocketMessageHandlerDispatcher
2025-07-31 15:02:35.706 [SpringApplicationShutdownHook] INFO  c.f.w.h.WebSocketMessageHandlerDispatcher - WebSocketMessageHandlerDispatcher已取消EventBus订阅
2025-07-31 15:02:35.706 [SpringApplicationShutdownHook] INFO  c.f.w.monitor.ThreadPoolMonitor - 线程池监控器已关闭
2025-07-31 15:02:35.707 [SpringApplicationShutdownHook] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件总线线程池已关闭
2025-07-31 15:15:23.062 [main] INFO  c.f.w.WebSocketFrameworkApplication - Starting WebSocketFrameworkApplication using Java 1.8.0_202 on DESKTOP-EGK8BP4 with PID 22084 (D:\workTool\IdeaProjects\websocket-framework\target\classes started by admin in D:\workTool\IdeaProjects\websocket-framework)
2025-07-31 15:15:23.063 [main] INFO  c.f.w.WebSocketFrameworkApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-31 15:15:23.565 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2025-07-31 15:15:23.568 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-07-31 15:15:23.590 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 10 ms. Found 0 Redis repository interfaces.
2025-07-31 15:15:23.954 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2025-07-31 15:15:23.962 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-31 15:15:23.963 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.63]
2025-07-31 15:15:24.095 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-31 15:15:24.095 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 984 ms
2025-07-31 15:15:24.502 [main] INFO  c.f.w.c.WebSocketFrameworkConfig - WebSocket线程池已创建: 核心线程=10, 最大线程=50, 队列容量=1000
2025-07-31 15:15:24.530 [main] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件总线初始化完成
2025-07-31 15:15:24.580 [main] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件订阅者注册成功: WebSocketMetricsCollector
2025-07-31 15:15:24.580 [main] INFO  c.f.w.m.WebSocketMetricsCollector - WebSocket指标收集器已启用并注册到事件总线
2025-07-31 15:15:24.592 [main] INFO  c.f.w.p.WebSocketServiceProcessor - WebSocket服务注册成功: serviceId=chatroom, serviceName=聊天室服务, beanName=chatRoomWebSocketService, class=ChatRoomWebSocketService
2025-07-31 15:15:24.593 [main] INFO  c.f.w.p.WebSocketServiceProcessor - WebSocket服务注册成功: serviceId=notification, serviceName=通知推送服务, beanName=notificationWebSocketService, class=NotificationWebSocketService
2025-07-31 15:15:24.603 [main] INFO  c.f.w.monitor.ThreadPoolMonitor - 智能线程池监控器已启动，初始监控间隔: 30秒
2025-07-31 15:15:24.605 [main] INFO  c.f.w.p.WebSocketServiceProcessor - WebSocket服务注册成功: serviceId=monitor, serviceName=monitor, beanName=threadPoolMonitorWebSocketService, class=ThreadPoolMonitorWebSocketService
2025-07-31 15:15:24.609 [main] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件订阅者注册成功: WebSocketMessageHandlerDispatcher
2025-07-31 15:15:24.609 [main] INFO  c.f.w.h.WebSocketMessageHandlerDispatcher - WebSocketMessageHandlerDispatcher初始化完成, 注册了4个消息处理器, 1个拦截器
2025-07-31 15:15:24.623 [main] INFO  c.f.websocket.monitor.MemoryMonitor - 内存监控器已启动 - 初始堆内存使用率: {:.1f}% (0.367731585014291MB/33MB)
2025-07-31 15:15:24.624 [main] INFO  c.f.w.monitor.ThreadPoolMetricsStore - 线程池监控数据存储服务已启动，数据保留时间: 24小时
2025-07-31 15:15:25.110 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2025-07-31 15:15:25.121 [WebSocket-8] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 15:15:25.127 [main] INFO  c.f.w.WebSocketFrameworkApplication - Started WebSocketFrameworkApplication in 2.409 seconds (JVM running for 3.113)
2025-07-31 15:15:25.365 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-07-31 15:15:25.365 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-07-31 15:15:25.366 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-07-31 15:15:26.246 [WebSocket-8] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 15:15:26.246 [http-nio-8080-exec-1] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已添加: service=monitor, userId=monitor_1753946123311_jsbb0j0et, sessionId=0
2025-07-31 15:15:26.256 [http-nio-8080-exec-1] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接建立: service=monitor, userId=monitor_1753946123311_jsbb0j0et, sessionId=0, clientIp=null
2025-07-31 15:15:26.257 [WebSocket-9] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端连接: monitor_1753946123311_jsbb0j0et
2025-07-31 15:15:26.264 [WebSocket-9] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753946123311_jsbb0j0et, message={"type":"welcome","message":"欢迎连接线程池监控中心","timestamp":1753946126257}
2025-07-31 15:15:26.264 [WebSocket-9] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 15:15:26.265 [WebSocket-9] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753946123311_jsbb0j0et, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":30,"samplingRate":2,"lastHealthStatus":"HEALTHY","monitoringExecutions":0,"avgMonitoringCostMs":0.0},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":2,"queueSize":8,"completedTaskCount":11,"taskCount":21,"totalThreadCount":51,"peakThreadCount":51,"poolUtilization":0.04,"queueUtilization":0.008,"throughput":277.77777777777777,"timestamp":1753946126264},"timestamp":1753946126264},"type":"threadpool_metrics"}
2025-07-31 15:15:26.265 [WebSocket-9] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 15:15:26.293 [WebSocket-1] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 15:15:28.434 [WebSocket-7] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753946123311_jsbb0j0et, sessionId=0, message={"action":"refresh","timestamp":1753946128431}
2025-07-31 15:15:28.518 [WebSocket-9] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 15:15:28.518 [WebSocket-9] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753946123311_jsbb0j0et, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":30,"samplingRate":2,"lastHealthStatus":"HEALTHY","monitoringExecutions":0,"avgMonitoringCostMs":0.0},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":9,"completedTaskCount":23,"taskCount":33,"totalThreadCount":52,"peakThreadCount":52,"poolUtilization":0.02,"queueUtilization":0.009,"throughput":5.323868677905945,"timestamp":1753946128518},"timestamp":1753946128518},"type":"threadpool_metrics"}
2025-07-31 15:15:28.519 [WebSocket-9] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 15:15:29.727 [http-nio-8080-exec-6] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已移除: service=monitor, userId=monitor_1753946123311_jsbb0j0et, sessionId=0
2025-07-31 15:15:29.728 [http-nio-8080-exec-6] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接关闭: service=monitor, userId=monitor_1753946123311_jsbb0j0et, sessionId=0, code=GOING_AWAY, reason=null
2025-07-31 15:15:29.729 [WebSocket-10] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端断开: monitor_1753946123311_jsbb0j0et
2025-07-31 15:15:29.729 [WebSocket-10] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 15:15:29.775 [http-nio-8080-exec-8] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已添加: service=monitor, userId=monitor_1753946129738_6qcwoxpmp, sessionId=1
2025-07-31 15:15:29.776 [http-nio-8080-exec-8] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接建立: service=monitor, userId=monitor_1753946129738_6qcwoxpmp, sessionId=1, clientIp=null
2025-07-31 15:15:29.776 [WebSocket-1] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端连接: monitor_1753946129738_6qcwoxpmp
2025-07-31 15:15:29.778 [WebSocket-1] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753946129738_6qcwoxpmp, message={"type":"welcome","message":"欢迎连接线程池监控中心","timestamp":1753946129777}
2025-07-31 15:15:29.780 [WebSocket-1] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 15:15:29.782 [WebSocket-1] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753946129738_6qcwoxpmp, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":30,"samplingRate":2,"lastHealthStatus":"HEALTHY","monitoringExecutions":0,"avgMonitoringCostMs":0.0},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":10,"completedTaskCount":34,"taskCount":45,"totalThreadCount":56,"peakThreadCount":56,"poolUtilization":0.02,"queueUtilization":0.01,"throughput":8.709422011084719,"timestamp":1753946129781},"timestamp":1753946129781},"type":"threadpool_metrics"}
2025-07-31 15:15:29.782 [WebSocket-1] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 15:15:29.817 [WebSocket-4] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 15:15:29.939 [http-nio-8080-exec-3] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已移除: service=monitor, userId=monitor_1753946129738_6qcwoxpmp, sessionId=1
2025-07-31 15:15:29.940 [http-nio-8080-exec-3] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接关闭: service=monitor, userId=monitor_1753946129738_6qcwoxpmp, sessionId=1, code=GOING_AWAY, reason=null
2025-07-31 15:15:29.940 [WebSocket-6] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端断开: monitor_1753946129738_6qcwoxpmp
2025-07-31 15:15:29.941 [WebSocket-6] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 15:15:29.980 [http-nio-8080-exec-4] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已添加: service=monitor, userId=monitor_1753946129935_vx3htfz12, sessionId=2
2025-07-31 15:15:29.981 [http-nio-8080-exec-4] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接建立: service=monitor, userId=monitor_1753946129935_vx3htfz12, sessionId=2, clientIp=null
2025-07-31 15:15:29.981 [WebSocket-8] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端连接: monitor_1753946129935_vx3htfz12
2025-07-31 15:15:29.982 [WebSocket-8] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753946129935_vx3htfz12, message={"type":"welcome","message":"欢迎连接线程池监控中心","timestamp":1753946129981}
2025-07-31 15:15:29.982 [WebSocket-8] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 15:15:29.984 [WebSocket-8] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753946129935_vx3htfz12, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":30,"samplingRate":2,"lastHealthStatus":"HEALTHY","monitoringExecutions":0,"avgMonitoringCostMs":0.0},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":11,"completedTaskCount":50,"taskCount":62,"totalThreadCount":60,"peakThreadCount":60,"poolUtilization":0.02,"queueUtilization":0.011,"throughput":79.20792079207921,"timestamp":1753946129983},"timestamp":1753946129983},"type":"threadpool_metrics"}
2025-07-31 15:15:29.984 [WebSocket-8] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 15:15:30.028 [WebSocket-2] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 15:15:37.270 [http-nio-8080-exec-9] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已移除: service=monitor, userId=monitor_1753946129935_vx3htfz12, sessionId=2
2025-07-31 15:15:37.272 [http-nio-8080-exec-9] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接关闭: service=monitor, userId=monitor_1753946129935_vx3htfz12, sessionId=2, code=GOING_AWAY, reason=null
2025-07-31 15:15:37.274 [WebSocket-3] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端断开: monitor_1753946129935_vx3htfz12
2025-07-31 15:15:37.275 [WebSocket-3] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 15:15:37.297 [http-nio-8080-exec-10] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已添加: service=monitor, userId=monitor_1753946137252_bg2g4vvg9, sessionId=3
2025-07-31 15:15:37.297 [http-nio-8080-exec-10] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接建立: service=monitor, userId=monitor_1753946137252_bg2g4vvg9, sessionId=3, clientIp=null
2025-07-31 15:15:37.297 [WebSocket-5] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端连接: monitor_1753946137252_bg2g4vvg9
2025-07-31 15:15:37.297 [WebSocket-5] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753946137252_bg2g4vvg9, message={"type":"welcome","message":"欢迎连接线程池监控中心","timestamp":1753946137297}
2025-07-31 15:15:37.297 [WebSocket-5] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 15:15:37.297 [WebSocket-5] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753946137252_bg2g4vvg9, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":30,"samplingRate":2,"lastHealthStatus":"HEALTHY","monitoringExecutions":0,"avgMonitoringCostMs":0.0},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":12,"completedTaskCount":66,"taskCount":79,"totalThreadCount":62,"peakThreadCount":62,"poolUtilization":0.02,"queueUtilization":0.012,"throughput":2.1875854525567404,"timestamp":1753946137297},"timestamp":1753946137297},"type":"threadpool_metrics"}
2025-07-31 15:15:37.297 [WebSocket-5] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 15:15:37.349 [WebSocket-10] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 15:15:42.806 [http-nio-8080-exec-7] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已移除: service=monitor, userId=monitor_1753946137252_bg2g4vvg9, sessionId=3
2025-07-31 15:15:42.808 [http-nio-8080-exec-7] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接关闭: service=monitor, userId=monitor_1753946137252_bg2g4vvg9, sessionId=3, code=GOING_AWAY, reason=null
2025-07-31 15:15:42.809 [WebSocket-9] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端断开: monitor_1753946137252_bg2g4vvg9
2025-07-31 15:15:42.810 [WebSocket-9] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 15:15:42.853 [http-nio-8080-exec-1] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已添加: service=monitor, userId=monitor_1753946142810_w699qa0fu, sessionId=4
2025-07-31 15:15:42.854 [http-nio-8080-exec-1] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接建立: service=monitor, userId=monitor_1753946142810_w699qa0fu, sessionId=4, clientIp=null
2025-07-31 15:15:42.854 [WebSocket-7] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端连接: monitor_1753946142810_w699qa0fu
2025-07-31 15:15:42.854 [WebSocket-7] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753946142810_w699qa0fu, message={"type":"welcome","message":"欢迎连接线程池监控中心","timestamp":1753946142854}
2025-07-31 15:15:42.854 [WebSocket-7] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 15:15:42.854 [WebSocket-7] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753946142810_w699qa0fu, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":30,"samplingRate":2,"lastHealthStatus":"HEALTHY","monitoringExecutions":0,"avgMonitoringCostMs":0.0},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":13,"completedTaskCount":82,"taskCount":96,"totalThreadCount":64,"peakThreadCount":64,"poolUtilization":0.02,"queueUtilization":0.013,"throughput":2.879251394637394,"timestamp":1753946142854},"timestamp":1753946142854},"type":"threadpool_metrics"}
2025-07-31 15:15:42.854 [WebSocket-7] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 15:15:42.891 [WebSocket-10] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 15:15:55.128 [WebSocket-8] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 15:15:55.132 [WebSocket-9] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 15:15:55.134 [WebSocket-9] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 接收用户数=1, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":30,"samplingRate":2,"lastHealthStatus":"HEALTHY","monitoringExecutions":1,"avgMonitoringCostMs":0.0123},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":2,"queueSize":11,"completedTaskCount":90,"taskCount":103,"totalThreadCount":63,"peakThreadCount":64,"poolUtilization":0.04,"queueUtilization":0.011,"throughput":250.0,"timestamp":1753946155132},"timestamp":1753946155132},"type":"threadpool_metrics"}
2025-07-31 15:16:12.904 [WebSocket-5] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 15:16:13.313 [WebSocket-1] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753946142810_w699qa0fu, sessionId=4, message={"action":"refresh","timestamp":1753946173311}
2025-07-31 15:16:13.313 [WebSocket-8] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 15:16:13.314 [WebSocket-8] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753946142810_w699qa0fu, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":30,"samplingRate":2,"lastHealthStatus":"HEALTHY","monitoringExecutions":1,"avgMonitoringCostMs":0.0123},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":9,"completedTaskCount":109,"taskCount":119,"totalThreadCount":63,"peakThreadCount":64,"poolUtilization":0.02,"queueUtilization":0.009,"throughput":1.0450470271162202,"timestamp":1753946173313},"timestamp":1753946173313},"type":"threadpool_metrics"}
2025-07-31 15:16:13.315 [WebSocket-8] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 15:16:25.122 [WebSocket-7] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 15:16:25.122 [WebSocket-4] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 15:16:25.124 [WebSocket-4] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 接收用户数=1, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":30,"samplingRate":2,"lastHealthStatus":"HEALTHY","monitoringExecutions":1,"avgMonitoringCostMs":0.0123},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":2,"queueSize":7,"completedTaskCount":113,"taskCount":122,"totalThreadCount":63,"peakThreadCount":64,"poolUtilization":0.04,"queueUtilization":0.007,"throughput":0.0,"timestamp":1753946185122},"timestamp":1753946185122},"type":"threadpool_metrics"}
2025-07-31 15:16:25.891 [ThreadPoolMonitor] INFO  c.f.w.monitor.ThreadPoolMonitor - 调整监控策略: 健康状态=健康, 监控间隔: 30秒->40秒, 采样率: 1:2 -> 1:3
2025-07-31 15:16:25.951 [ThreadPoolMonitor] INFO  c.f.w.monitor.ThreadPoolMonitor - 调整监控策略: 健康状态=健康, 监控间隔: 40秒->50秒, 采样率: 1:3 -> 1:4
2025-07-31 15:16:26.005 [ThreadPoolMonitor] INFO  c.f.w.monitor.ThreadPoolMonitor - 调整监控策略: 健康状态=健康, 监控间隔: 50秒->60秒, 采样率: 1:4 -> 1:5
2025-07-31 15:16:26.058 [ThreadPoolMonitor] INFO  c.f.w.monitor.ThreadPoolMonitor - 调整监控策略: 健康状态=健康, 监控间隔: 60秒->70秒, 采样率: 1:5 -> 1:5
2025-07-31 15:16:42.922 [WebSocket-10] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 15:16:43.322 [WebSocket-8] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753946142810_w699qa0fu, sessionId=4, message={"action":"refresh","timestamp":1753946203320}
2025-07-31 15:16:43.323 [WebSocket-8] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 15:16:43.326 [WebSocket-8] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753946142810_w699qa0fu, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":6,"avgMonitoringCostMs":240.20033333333333},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":9,"completedTaskCount":128,"taskCount":138,"totalThreadCount":62,"peakThreadCount":64,"poolUtilization":0.02,"queueUtilization":0.009,"throughput":0.7529248233522531,"timestamp":1753946203324},"timestamp":1753946203324},"type":"threadpool_metrics"}
2025-07-31 15:16:43.326 [WebSocket-8] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 15:16:55.122 [WebSocket-1] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 15:16:55.122 [WebSocket-3] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 15:16:55.123 [WebSocket-1] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 接收用户数=1, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":6,"avgMonitoringCostMs":240.20033333333333},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":2,"queueSize":7,"completedTaskCount":129,"taskCount":138,"totalThreadCount":61,"peakThreadCount":64,"poolUtilization":0.04,"queueUtilization":0.007,"throughput":0.08476012883539583,"timestamp":1753946215122},"timestamp":1753946215122},"type":"threadpool_metrics"}
2025-07-31 15:17:12.925 [WebSocket-3] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 15:17:13.323 [WebSocket-1] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753946142810_w699qa0fu, sessionId=4, message={"action":"refresh","timestamp":1753946233318}
2025-07-31 15:17:13.323 [WebSocket-10] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 15:17:13.324 [WebSocket-10] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753946142810_w699qa0fu, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":6,"avgMonitoringCostMs":240.20033333333333},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":9,"completedTaskCount":146,"taskCount":156,"totalThreadCount":61,"peakThreadCount":64,"poolUtilization":0.02,"queueUtilization":0.009,"throughput":0.8242211110500576,"timestamp":1753946233323},"timestamp":1753946233323},"type":"threadpool_metrics"}
2025-07-31 15:17:13.325 [WebSocket-10] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 15:17:25.129 [WebSocket-4] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 15:17:25.131 [WebSocket-9] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 15:17:25.131 [WebSocket-9] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 接收用户数=1, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":6,"avgMonitoringCostMs":240.20033333333333},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":2,"queueSize":7,"completedTaskCount":150,"taskCount":159,"totalThreadCount":61,"peakThreadCount":64,"poolUtilization":0.04,"queueUtilization":0.007,"throughput":0.0,"timestamp":1753946245131},"timestamp":1753946245131},"type":"threadpool_metrics"}
2025-07-31 15:17:42.940 [WebSocket-1] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 15:17:43.319 [WebSocket-11] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753946142810_w699qa0fu, sessionId=4, message={"action":"refresh","timestamp":1753946263319}
2025-07-31 15:17:43.325 [WebSocket-11] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 15:17:43.325 [WebSocket-11] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753946142810_w699qa0fu, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":7,"avgMonitoringCostMs":205.88657142857141},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":9,"completedTaskCount":165,"taskCount":175,"totalThreadCount":61,"peakThreadCount":64,"poolUtilization":0.02,"queueUtilization":0.009,"throughput":0.8244476200945366,"timestamp":1753946263325},"timestamp":1753946263325},"type":"threadpool_metrics"}
2025-07-31 15:17:43.327 [WebSocket-11] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 15:17:55.127 [WebSocket-10] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 15:17:55.127 [WebSocket-13] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 15:17:55.131 [WebSocket-13] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 接收用户数=1, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":7,"avgMonitoringCostMs":205.88657142857141},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":3,"queueSize":7,"completedTaskCount":168,"taskCount":178,"totalThreadCount":61,"peakThreadCount":64,"poolUtilization":0.06,"queueUtilization":0.007,"throughput":0.0,"timestamp":1753946275128},"timestamp":1753946275128},"type":"threadpool_metrics"}
2025-07-31 15:18:12.926 [WebSocket-6] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 15:18:13.315 [WebSocket-11] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753946142810_w699qa0fu, sessionId=4, message={"action":"refresh","timestamp":1753946293315}
2025-07-31 15:18:13.315 [WebSocket-1] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 15:18:13.315 [WebSocket-1] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753946142810_w699qa0fu, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":7,"avgMonitoringCostMs":205.88657142857141},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":9,"completedTaskCount":183,"taskCount":193,"totalThreadCount":61,"peakThreadCount":64,"poolUtilization":0.02,"queueUtilization":0.009,"throughput":0.8247649419915324,"timestamp":1753946293315},"timestamp":1753946293315},"type":"threadpool_metrics"}
2025-07-31 15:18:13.315 [WebSocket-1] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 15:18:25.122 [WebSocket-9] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 15:18:25.123 [WebSocket-11] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 15:18:25.129 [WebSocket-11] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 接收用户数=1, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":7,"avgMonitoringCostMs":205.88657142857141},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":2,"queueSize":7,"completedTaskCount":187,"taskCount":196,"totalThreadCount":61,"peakThreadCount":64,"poolUtilization":0.04,"queueUtilization":0.007,"throughput":0.0,"timestamp":1753946305128},"timestamp":1753946305128},"type":"threadpool_metrics"}
2025-07-31 15:18:36.726 [SpringApplicationShutdownHook] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已移除: service=monitor, userId=monitor_1753946142810_w699qa0fu, sessionId=4
2025-07-31 15:18:36.728 [WebSocket-6] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端断开: monitor_1753946142810_w699qa0fu
2025-07-31 15:18:36.728 [SpringApplicationShutdownHook] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接关闭: service=monitor, userId=monitor_1753946142810_w699qa0fu, sessionId=4, code=GOING_AWAY, reason=The web application is stopping
2025-07-31 15:18:36.728 [WebSocket-6] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 15:18:36.740 [SpringApplicationShutdownHook] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件订阅者取消注册成功: WebSocketMessageHandlerDispatcher
2025-07-31 15:18:36.740 [SpringApplicationShutdownHook] INFO  c.f.w.h.WebSocketMessageHandlerDispatcher - WebSocketMessageHandlerDispatcher已取消EventBus订阅
2025-07-31 15:18:36.741 [SpringApplicationShutdownHook] INFO  c.f.w.monitor.ThreadPoolMonitor - 线程池监控器已关闭
2025-07-31 15:18:36.742 [SpringApplicationShutdownHook] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件总线线程池已关闭
2025-07-31 16:24:28.944 [main] INFO  c.f.w.WebSocketFrameworkApplication - Starting WebSocketFrameworkApplication using Java 1.8.0_202 on DESKTOP-EGK8BP4 with PID 21224 (D:\workTool\IdeaProjects\websocket-framework\target\classes started by admin in D:\workTool\IdeaProjects\websocket-framework)
2025-07-31 16:24:28.950 [main] INFO  c.f.w.WebSocketFrameworkApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-31 16:24:30.507 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2025-07-31 16:24:30.514 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-07-31 16:24:30.573 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 26 ms. Found 0 Redis repository interfaces.
2025-07-31 16:24:31.495 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2025-07-31 16:24:31.521 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-31 16:24:31.522 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.63]
2025-07-31 16:24:31.851 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-31 16:24:31.852 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2721 ms
2025-07-31 16:24:32.794 [main] INFO  c.f.w.c.WebSocketFrameworkConfig - WebSocket线程池已创建: 核心线程=10, 最大线程=50, 队列容量=1000
2025-07-31 16:24:32.840 [main] INFO  c.f.w.monitor.ThreadPoolMonitor - 智能线程池监控器已启动，初始监控间隔: 30秒
2025-07-31 16:24:32.906 [main] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件总线初始化完成
2025-07-31 16:24:33.015 [main] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件订阅者注册成功: ThreadPoolHealthChecker
2025-07-31 16:24:33.016 [main] INFO  c.f.w.health.ThreadPoolHealthChecker - WebSocket指标收集已启用并注册到健康检查器
2025-07-31 16:24:33.042 [main] INFO  c.f.w.p.WebSocketServiceProcessor - WebSocket服务注册成功: serviceId=chatroom, serviceName=聊天室服务, beanName=chatRoomWebSocketService, class=ChatRoomWebSocketService
2025-07-31 16:24:33.045 [main] INFO  c.f.w.p.WebSocketServiceProcessor - WebSocket服务注册成功: serviceId=notification, serviceName=通知推送服务, beanName=notificationWebSocketService, class=NotificationWebSocketService
2025-07-31 16:24:33.057 [main] INFO  c.f.w.p.WebSocketServiceProcessor - WebSocket服务注册成功: serviceId=monitor, serviceName=monitor, beanName=threadPoolMonitorWebSocketService, class=ThreadPoolMonitorWebSocketService
2025-07-31 16:24:33.063 [main] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件订阅者注册成功: WebSocketMessageHandlerDispatcher
2025-07-31 16:24:33.063 [main] INFO  c.f.w.h.WebSocketMessageHandlerDispatcher - WebSocketMessageHandlerDispatcher初始化完成, 注册了4个消息处理器, 1个拦截器
2025-07-31 16:24:33.066 [main] INFO  c.f.w.monitor.ThreadPoolMetricsStore - 线程池监控数据存储服务已启动，数据保留时间: 24小时
2025-07-31 16:24:33.969 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2025-07-31 16:24:33.994 [WebSocket-2] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:24:34.010 [main] INFO  c.f.w.WebSocketFrameworkApplication - Started WebSocketFrameworkApplication in 6.839 seconds (JVM running for 12.373)
2025-07-31 16:24:36.751 [http-nio-8080-exec-2] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-07-31 16:24:36.751 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-07-31 16:24:36.752 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-07-31 16:24:38.010 [WebSocket-5] ERROR c.f.w.s.WebSocketSessionManager - 清理过期心跳缓存失败
org.springframework.data.redis.RedisConnectionFailureException: Unable to connect to Redis; nested exception is io.lettuce.core.RedisConnectionException: Unable to connect to localhost:6379
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.translateException(LettuceConnectionFactory.java:1689)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1597)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getNativeConnection(LettuceConnectionFactory.java:1383)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getConnection(LettuceConnectionFactory.java:1366)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getSharedConnection(LettuceConnectionFactory.java:1093)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getConnection(LettuceConnectionFactory.java:421)
	at org.springframework.data.redis.core.RedisConnectionUtils.fetchConnection(RedisConnectionUtils.java:193)
	at org.springframework.data.redis.core.RedisConnectionUtils.doGetConnection(RedisConnectionUtils.java:144)
	at org.springframework.data.redis.core.RedisConnectionUtils.getConnection(RedisConnectionUtils.java:105)
	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:211)
	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:191)
	at org.springframework.data.redis.core.RedisTemplate.keys(RedisTemplate.java:896)
	at com.framework.websocket.session.WebSocketSessionManager.cleanupExpiredHeartbeats(WebSocketSessionManager.java:221)
	at com.framework.websocket.session.WebSocketSessionCleaner.cleanupExpiredHeartbeatCache(WebSocketSessionCleaner.java:270)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:308)
	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
Caused by: io.lettuce.core.RedisConnectionException: Unable to connect to localhost:6379
	at io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:78)
	at io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:56)
	at io.lettuce.core.AbstractRedisClient.getConnection(AbstractRedisClient.java:330)
	at io.lettuce.core.RedisClient.connect(RedisClient.java:216)
	at org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.lambda$getConnection$1(StandaloneConnectionProvider.java:115)
	at java.util.Optional.orElseGet(Optional.java:267)
	at org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.getConnection(StandaloneConnectionProvider.java:115)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1595)
	... 26 common frames omitted
Caused by: io.netty.channel.AbstractChannel$AnnotatedConnectException: Connection refused: no further information: localhost/127.0.0.1:6379
Caused by: java.net.ConnectException: Connection refused: no further information
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:717)
	at io.netty.channel.socket.nio.NioSocketChannel.doFinishConnect(NioSocketChannel.java:337)
	at io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.finishConnect(AbstractNioChannel.java:334)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:710)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:658)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:584)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:496)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:995)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 16:24:40.065 [http-nio-8080-exec-2] WARN  c.f.w.s.WebSocketSessionManager - 更新心跳缓存失败: service=monitor, userId=monitor_1753950272310_q79vdw9iy
org.springframework.data.redis.RedisConnectionFailureException: Unable to connect to Redis; nested exception is io.lettuce.core.RedisConnectionException: Unable to connect to localhost:6379
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.translateException(LettuceConnectionFactory.java:1689)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1597)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getNativeConnection(LettuceConnectionFactory.java:1383)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getConnection(LettuceConnectionFactory.java:1366)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getSharedConnection(LettuceConnectionFactory.java:1093)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getConnection(LettuceConnectionFactory.java:421)
	at org.springframework.data.redis.core.RedisConnectionUtils.fetchConnection(RedisConnectionUtils.java:193)
	at org.springframework.data.redis.core.RedisConnectionUtils.doGetConnection(RedisConnectionUtils.java:144)
	at org.springframework.data.redis.core.RedisConnectionUtils.getConnection(RedisConnectionUtils.java:105)
	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:211)
	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:191)
	at org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:97)
	at org.springframework.data.redis.core.DefaultValueOperations.set(DefaultValueOperations.java:325)
	at com.framework.websocket.session.WebSocketSessionManager.updateHeartbeat(WebSocketSessionManager.java:133)
	at com.framework.websocket.session.WebSocketSessionManager.updateHeartbeat(WebSocketSessionManager.java:120)
	at com.framework.websocket.session.WebSocketSessionManager.addSession(WebSocketSessionManager.java:45)
	at com.framework.websocket.core.WebSocketServer.onOpen(WebSocketServer.java:92)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.tomcat.websocket.pojo.PojoEndpointBase.doOnOpen(PojoEndpointBase.java:69)
	at org.apache.tomcat.websocket.pojo.PojoEndpointServer.onOpen(PojoEndpointServer.java:48)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.init(WsHttpUpgradeHandler.java:136)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:933)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
Caused by: io.lettuce.core.RedisConnectionException: Unable to connect to localhost:6379
	at io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:78)
	at io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:56)
	at io.lettuce.core.AbstractRedisClient.getConnection(AbstractRedisClient.java:330)
	at io.lettuce.core.RedisClient.connect(RedisClient.java:216)
	at org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.lambda$getConnection$1(StandaloneConnectionProvider.java:115)
	at java.util.Optional.orElseGet(Optional.java:267)
	at org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.getConnection(StandaloneConnectionProvider.java:115)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1595)
	... 29 common frames omitted
Caused by: io.netty.channel.AbstractChannel$AnnotatedConnectException: Connection refused: no further information: localhost/127.0.0.1:6379
Caused by: java.net.ConnectException: Connection refused: no further information
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:717)
	at io.netty.channel.socket.nio.NioSocketChannel.doFinishConnect(NioSocketChannel.java:337)
	at io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.finishConnect(AbstractNioChannel.java:334)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:710)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:658)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:584)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:496)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:995)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 16:24:40.067 [http-nio-8080-exec-2] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已添加: service=monitor, userId=monitor_1753950272310_q79vdw9iy, sessionId=0
2025-07-31 16:24:40.081 [http-nio-8080-exec-2] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接建立: service=monitor, userId=monitor_1753950272310_q79vdw9iy, sessionId=0, clientIp=null
2025-07-31 16:24:40.085 [WebSocket-1] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端连接: monitor_1753950272310_q79vdw9iy
2025-07-31 16:24:40.091 [WebSocket-1] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753950272310_q79vdw9iy, message={"type":"welcome","message":"欢迎连接线程池监控中心","timestamp":1753950280085}
2025-07-31 16:24:40.091 [WebSocket-1] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:24:40.094 [WebSocket-1] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753950272310_q79vdw9iy, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":30,"samplingRate":2,"lastHealthStatus":"HEALTHY","monitoringExecutions":0,"avgMonitoringCostMs":0.0},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":2,"queueSize":9,"completedTaskCount":12,"taskCount":23,"totalThreadCount":49,"peakThreadCount":49,"poolUtilization":0.04,"queueUtilization":0.009,"throughput":1.3125512715340444,"timestamp":1753950280091},"timestamp":1753950280091},"type":"threadpool_metrics"}
2025-07-31 16:24:40.094 [WebSocket-1] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:24:42.122 [WebSocket-2] WARN  c.f.w.monitor.ThreadPoolMetricsStore - 收集监控数据失败
org.springframework.data.redis.RedisConnectionFailureException: Unable to connect to Redis; nested exception is io.lettuce.core.RedisConnectionException: Unable to connect to localhost:6379
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.translateException(LettuceConnectionFactory.java:1689)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1597)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getNativeConnection(LettuceConnectionFactory.java:1383)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getConnection(LettuceConnectionFactory.java:1366)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getSharedConnection(LettuceConnectionFactory.java:1093)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getConnection(LettuceConnectionFactory.java:421)
	at org.springframework.data.redis.core.RedisConnectionUtils.fetchConnection(RedisConnectionUtils.java:193)
	at org.springframework.data.redis.core.RedisConnectionUtils.doGetConnection(RedisConnectionUtils.java:144)
	at org.springframework.data.redis.core.RedisConnectionUtils.getConnection(RedisConnectionUtils.java:105)
	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:211)
	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:191)
	at org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:97)
	at org.springframework.data.redis.core.DefaultValueOperations.set(DefaultValueOperations.java:325)
	at com.framework.websocket.monitor.ThreadPoolMetricsStore.collectAndStoreMetrics(ThreadPoolMetricsStore.java:69)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:308)
	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
Caused by: io.lettuce.core.RedisConnectionException: Unable to connect to localhost:6379
	at io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:78)
	at io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:56)
	at io.lettuce.core.AbstractRedisClient.getConnection(AbstractRedisClient.java:330)
	at io.lettuce.core.RedisClient.connect(RedisClient.java:216)
	at org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.lambda$getConnection$1(StandaloneConnectionProvider.java:115)
	at java.util.Optional.orElseGet(Optional.java:267)
	at org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.getConnection(StandaloneConnectionProvider.java:115)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1595)
	... 26 common frames omitted
Caused by: io.netty.channel.AbstractChannel$AnnotatedConnectException: Connection refused: no further information: localhost/127.0.0.1:6379
Caused by: java.net.ConnectException: Connection refused: no further information
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:717)
	at io.netty.channel.socket.nio.NioSocketChannel.doFinishConnect(NioSocketChannel.java:337)
	at io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.finishConnect(AbstractNioChannel.java:334)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:710)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:658)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:584)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:496)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:995)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 16:24:44.172 [SpringApplicationShutdownHook] WARN  c.f.w.s.WebSocketSessionManager - 清除心跳缓存失败: service=monitor, userId=monitor_1753950272310_q79vdw9iy
org.springframework.data.redis.RedisConnectionFailureException: Unable to connect to Redis; nested exception is io.lettuce.core.RedisConnectionException: Unable to connect to localhost:6379
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.translateException(LettuceConnectionFactory.java:1689)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1597)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getNativeConnection(LettuceConnectionFactory.java:1383)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getConnection(LettuceConnectionFactory.java:1366)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getSharedConnection(LettuceConnectionFactory.java:1093)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getConnection(LettuceConnectionFactory.java:421)
	at org.springframework.data.redis.core.RedisConnectionUtils.fetchConnection(RedisConnectionUtils.java:193)
	at org.springframework.data.redis.core.RedisConnectionUtils.doGetConnection(RedisConnectionUtils.java:144)
	at org.springframework.data.redis.core.RedisConnectionUtils.getConnection(RedisConnectionUtils.java:105)
	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:211)
	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:191)
	at org.springframework.data.redis.core.RedisTemplate.delete(RedisTemplate.java:723)
	at com.framework.websocket.session.WebSocketSessionManager.clearHeartbeat(WebSocketSessionManager.java:185)
	at com.framework.websocket.session.WebSocketSessionManager.removeSession(WebSocketSessionManager.java:57)
	at com.framework.websocket.core.WebSocketServer.onClose(WebSocketServer.java:138)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.tomcat.websocket.pojo.PojoEndpointBase.onClose(PojoEndpointBase.java:107)
	at org.apache.tomcat.websocket.WsSession.fireEndpointOnClose(WsSession.java:767)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:715)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:665)
	at org.apache.tomcat.websocket.WsSession.close(WsSession.java:652)
	at org.apache.tomcat.websocket.WsWebSocketContainer.destroy(WsWebSocketContainer.java:1046)
	at org.apache.tomcat.websocket.server.WsContextListener.contextDestroyed(WsContextListener.java:48)
	at org.apache.catalina.core.StandardContext.listenerStop(StandardContext.java:4814)
	at org.apache.catalina.core.StandardContext.stopInternal(StandardContext.java:5477)
	at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:257)
	at org.apache.catalina.core.ContainerBase$StopChild.call(ContainerBase.java:1412)
	at org.apache.catalina.core.ContainerBase$StopChild.call(ContainerBase.java:1401)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:134)
	at org.apache.catalina.core.ContainerBase.stopInternal(ContainerBase.java:986)
	at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:257)
	at org.apache.catalina.core.ContainerBase$StopChild.call(ContainerBase.java:1412)
	at org.apache.catalina.core.ContainerBase$StopChild.call(ContainerBase.java:1401)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:134)
	at org.apache.catalina.core.ContainerBase.stopInternal(ContainerBase.java:986)
	at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:257)
	at org.apache.catalina.core.StandardService.stopInternal(StandardService.java:497)
	at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:257)
	at org.apache.catalina.core.StandardServer.stopInternal(StandardServer.java:979)
	at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:257)
	at org.apache.catalina.startup.Tomcat.stop(Tomcat.java:496)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.stopTomcat(TomcatWebServer.java:273)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.stop(TomcatWebServer.java:331)
	at org.springframework.boot.web.servlet.context.WebServerStartStopLifecycle.stop(WebServerStartStopLifecycle.java:51)
	at org.springframework.context.SmartLifecycle.stop(SmartLifecycle.java:117)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:234)
	at org.springframework.context.support.DefaultLifecycleProcessor.access$300(DefaultLifecycleProcessor.java:54)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:373)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:206)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:129)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1067)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:174)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1021)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:145)
	at java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:114)
	at java.lang.Thread.run(Thread.java:748)
Caused by: io.lettuce.core.RedisConnectionException: Unable to connect to localhost:6379
	at io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:78)
	at io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:56)
	at io.lettuce.core.AbstractRedisClient.getConnection(AbstractRedisClient.java:330)
	at io.lettuce.core.RedisClient.connect(RedisClient.java:216)
	at org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.lambda$getConnection$1(StandaloneConnectionProvider.java:115)
	at java.util.Optional.orElseGet(Optional.java:267)
	at org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.getConnection(StandaloneConnectionProvider.java:115)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1595)
	... 64 common frames omitted
Caused by: io.netty.channel.AbstractChannel$AnnotatedConnectException: Connection refused: no further information: localhost/127.0.0.1:6379
Caused by: java.net.ConnectException: Connection refused: no further information
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:717)
	at io.netty.channel.socket.nio.NioSocketChannel.doFinishConnect(NioSocketChannel.java:337)
	at io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.finishConnect(AbstractNioChannel.java:334)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:710)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:658)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:584)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:496)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:995)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 16:24:44.173 [SpringApplicationShutdownHook] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已移除: service=monitor, userId=monitor_1753950272310_q79vdw9iy, sessionId=0
2025-07-31 16:24:44.174 [SpringApplicationShutdownHook] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接关闭: service=monitor, userId=monitor_1753950272310_q79vdw9iy, sessionId=0, code=GOING_AWAY, reason=The web application is stopping
2025-07-31 16:24:44.174 [WebSocket-4] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端断开: monitor_1753950272310_q79vdw9iy
2025-07-31 16:24:44.174 [WebSocket-4] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:24:44.182 [http-nio-8080-exec-2] WARN  c.f.w.s.WebSocketSessionManager - 更新心跳缓存失败: service=monitor, userId=monitor_1753950272310_q79vdw9iy
org.springframework.data.redis.RedisConnectionFailureException: Unable to connect to Redis; nested exception is io.lettuce.core.RedisConnectionException: Unable to connect to localhost:6379
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.translateException(LettuceConnectionFactory.java:1689)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1597)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getNativeConnection(LettuceConnectionFactory.java:1383)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getConnection(LettuceConnectionFactory.java:1366)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getSharedConnection(LettuceConnectionFactory.java:1093)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getConnection(LettuceConnectionFactory.java:421)
	at org.springframework.data.redis.core.RedisConnectionUtils.fetchConnection(RedisConnectionUtils.java:193)
	at org.springframework.data.redis.core.RedisConnectionUtils.doGetConnection(RedisConnectionUtils.java:144)
	at org.springframework.data.redis.core.RedisConnectionUtils.getConnection(RedisConnectionUtils.java:105)
	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:211)
	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:191)
	at org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:97)
	at org.springframework.data.redis.core.DefaultValueOperations.set(DefaultValueOperations.java:325)
	at com.framework.websocket.session.WebSocketSessionManager.updateHeartbeat(WebSocketSessionManager.java:133)
	at com.framework.websocket.core.WebSocketServer.onPong(WebSocketServer.java:223)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.tomcat.websocket.pojo.PojoMessageHandlerWholeBase.onMessage(PojoMessageHandlerWholeBase.java:104)
	at org.apache.tomcat.websocket.WsFrameBase.processDataControl(WsFrameBase.java:376)
	at org.apache.tomcat.websocket.WsFrameBase.processData(WsFrameBase.java:296)
	at org.apache.tomcat.websocket.WsFrameBase.processInputBuffer(WsFrameBase.java:133)
	at org.apache.tomcat.websocket.server.WsFrameServer.onDataAvailable(WsFrameServer.java:85)
	at org.apache.tomcat.websocket.server.WsFrameServer.doOnDataAvailable(WsFrameServer.java:183)
	at org.apache.tomcat.websocket.server.WsFrameServer.notifyDataAvailable(WsFrameServer.java:162)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.upgradeDispatch(WsHttpUpgradeHandler.java:157)
	at org.apache.coyote.http11.upgrade.UpgradeProcessorInternal.dispatch(UpgradeProcessorInternal.java:60)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:59)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
Caused by: io.lettuce.core.RedisConnectionException: Unable to connect to localhost:6379
	at io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:78)
	at io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:56)
	at io.lettuce.core.AbstractRedisClient.getConnection(AbstractRedisClient.java:328)
	at io.lettuce.core.RedisClient.connect(RedisClient.java:216)
	at org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.lambda$getConnection$1(StandaloneConnectionProvider.java:115)
	at java.util.Optional.orElseGet(Optional.java:267)
	at org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.getConnection(StandaloneConnectionProvider.java:115)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1595)
	... 34 common frames omitted
Caused by: java.lang.InterruptedException: null
	at java.util.concurrent.CompletableFuture.reportGet(CompletableFuture.java:347)
	at java.util.concurrent.CompletableFuture.get(CompletableFuture.java:1895)
	at io.lettuce.core.DefaultConnectionFuture.get(DefaultConnectionFuture.java:69)
	at io.lettuce.core.AbstractRedisClient.getConnection(AbstractRedisClient.java:325)
	... 39 common frames omitted
2025-07-31 16:24:44.182 [WebSocket-2] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:24:44.183 [WebSocket-1] ERROR c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端错误: monitor_1753950272310_q79vdw9iy, error: null
2025-07-31 16:24:44.183 [WebSocket-1] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:24:44.183 [http-nio-8080-exec-2] ERROR c.f.websocket.core.WebSocketServer - WebSocket发生错误: service=monitor, userId=monitor_1753950272310_q79vdw9iy, sessionId=0
java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper.fillReadBuffer(NioEndpoint.java:1296)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper.read(NioEndpoint.java:1226)
	at org.apache.tomcat.websocket.server.WsFrameServer.onDataAvailable(WsFrameServer.java:75)
	at org.apache.tomcat.websocket.server.WsFrameServer.doOnDataAvailable(WsFrameServer.java:183)
	at org.apache.tomcat.websocket.server.WsFrameServer.notifyDataAvailable(WsFrameServer.java:162)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.upgradeDispatch(WsHttpUpgradeHandler.java:157)
	at org.apache.coyote.http11.upgrade.UpgradeProcessorInternal.dispatch(UpgradeProcessorInternal.java:60)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:59)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 16:24:44.185 [SpringApplicationShutdownHook] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件订阅者取消注册成功: WebSocketMessageHandlerDispatcher
2025-07-31 16:24:44.186 [SpringApplicationShutdownHook] INFO  c.f.w.h.WebSocketMessageHandlerDispatcher - WebSocketMessageHandlerDispatcher已取消EventBus订阅
2025-07-31 16:24:44.186 [SpringApplicationShutdownHook] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件总线线程池已关闭
2025-07-31 16:24:44.187 [SpringApplicationShutdownHook] INFO  c.f.w.monitor.ThreadPoolMonitor - 线程池监控器已关闭
2025-07-31 16:25:02.797 [main] INFO  c.f.w.WebSocketFrameworkApplication - Starting WebSocketFrameworkApplication using Java 1.8.0_202 on DESKTOP-EGK8BP4 with PID 30136 (D:\workTool\IdeaProjects\websocket-framework\target\classes started by admin in D:\workTool\IdeaProjects\websocket-framework)
2025-07-31 16:25:02.800 [main] INFO  c.f.w.WebSocketFrameworkApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-31 16:25:04.030 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2025-07-31 16:25:04.036 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-07-31 16:25:04.085 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 23 ms. Found 0 Redis repository interfaces.
2025-07-31 16:25:04.937 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2025-07-31 16:25:04.958 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-31 16:25:04.958 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.63]
2025-07-31 16:25:05.244 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-31 16:25:05.245 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2313 ms
2025-07-31 16:25:06.229 [main] INFO  c.f.w.c.WebSocketFrameworkConfig - WebSocket线程池已创建: 核心线程=10, 最大线程=50, 队列容量=1000
2025-07-31 16:25:06.281 [main] INFO  c.f.w.monitor.ThreadPoolMonitor - 智能线程池监控器已启动，初始监控间隔: 30秒
2025-07-31 16:25:06.352 [main] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件总线初始化完成
2025-07-31 16:25:06.477 [main] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件订阅者注册成功: ThreadPoolHealthChecker
2025-07-31 16:25:06.479 [main] INFO  c.f.w.health.ThreadPoolHealthChecker - WebSocket指标收集已启用并注册到健康检查器
2025-07-31 16:25:06.507 [main] INFO  c.f.w.p.WebSocketServiceProcessor - WebSocket服务注册成功: serviceId=chatroom, serviceName=聊天室服务, beanName=chatRoomWebSocketService, class=ChatRoomWebSocketService
2025-07-31 16:25:06.510 [main] INFO  c.f.w.p.WebSocketServiceProcessor - WebSocket服务注册成功: serviceId=notification, serviceName=通知推送服务, beanName=notificationWebSocketService, class=NotificationWebSocketService
2025-07-31 16:25:06.523 [main] INFO  c.f.w.p.WebSocketServiceProcessor - WebSocket服务注册成功: serviceId=monitor, serviceName=monitor, beanName=threadPoolMonitorWebSocketService, class=ThreadPoolMonitorWebSocketService
2025-07-31 16:25:06.529 [main] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件订阅者注册成功: WebSocketMessageHandlerDispatcher
2025-07-31 16:25:06.529 [main] INFO  c.f.w.h.WebSocketMessageHandlerDispatcher - WebSocketMessageHandlerDispatcher初始化完成, 注册了4个消息处理器, 1个拦截器
2025-07-31 16:25:06.534 [main] INFO  c.f.w.monitor.ThreadPoolMetricsStore - 线程池监控数据存储服务已启动，数据保留时间: 24小时
2025-07-31 16:25:07.624 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2025-07-31 16:25:07.652 [WebSocket-8] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:25:07.685 [main] INFO  c.f.w.WebSocketFrameworkApplication - Started WebSocketFrameworkApplication in 6.004 seconds (JVM running for 8.43)
2025-07-31 16:25:08.243 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-07-31 16:25:08.243 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-07-31 16:25:08.248 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 4 ms
2025-07-31 16:25:09.924 [http-nio-8080-exec-1] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已添加: service=monitor, userId=monitor_1753950305312_sw12gejmu, sessionId=0
2025-07-31 16:25:09.941 [WebSocket-8] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:25:09.944 [http-nio-8080-exec-1] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接建立: service=monitor, userId=monitor_1753950305312_sw12gejmu, sessionId=0, clientIp=null
2025-07-31 16:25:09.949 [WebSocket-7] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端连接: monitor_1753950305312_sw12gejmu
2025-07-31 16:25:09.962 [WebSocket-7] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753950305312_sw12gejmu, message={"type":"welcome","message":"欢迎连接线程池监控中心","timestamp":1753950309949}
2025-07-31 16:25:09.963 [WebSocket-7] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:25:09.968 [WebSocket-7] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753950305312_sw12gejmu, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":30,"samplingRate":2,"lastHealthStatus":"HEALTHY","monitoringExecutions":0,"avgMonitoringCostMs":0.0},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":3,"queueSize":8,"completedTaskCount":11,"taskCount":22,"totalThreadCount":52,"peakThreadCount":52,"poolUtilization":0.06,"queueUtilization":0.008,"throughput":238.09523809523807,"timestamp":1753950309963},"timestamp":1753950309963},"type":"threadpool_metrics"}
2025-07-31 16:25:09.968 [WebSocket-7] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:25:10.000 [WebSocket-3] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:25:13.141 [http-nio-8080-exec-2] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已移除: service=monitor, userId=monitor_1753950305312_sw12gejmu, sessionId=0
2025-07-31 16:25:13.142 [http-nio-8080-exec-2] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接关闭: service=monitor, userId=monitor_1753950305312_sw12gejmu, sessionId=0, code=GOING_AWAY, reason=null
2025-07-31 16:25:13.143 [WebSocket-9] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端断开: monitor_1753950305312_sw12gejmu
2025-07-31 16:25:13.143 [WebSocket-9] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:25:13.256 [http-nio-8080-exec-3] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已添加: service=monitor, userId=monitor_1753950313200_y40i1zf26, sessionId=1
2025-07-31 16:25:13.258 [http-nio-8080-exec-3] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接建立: service=monitor, userId=monitor_1753950313200_y40i1zf26, sessionId=1, clientIp=null
2025-07-31 16:25:13.259 [WebSocket-5] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端连接: monitor_1753950313200_y40i1zf26
2025-07-31 16:25:13.260 [WebSocket-5] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753950313200_y40i1zf26, message={"type":"welcome","message":"欢迎连接线程池监控中心","timestamp":1753950313259}
2025-07-31 16:25:13.261 [WebSocket-5] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:25:13.262 [WebSocket-5] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753950313200_y40i1zf26, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":30,"samplingRate":2,"lastHealthStatus":"HEALTHY","monitoringExecutions":0,"avgMonitoringCostMs":0.0},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":11,"completedTaskCount":29,"taskCount":41,"totalThreadCount":57,"peakThreadCount":57,"poolUtilization":0.02,"queueUtilization":0.011,"throughput":5.45785324439054,"timestamp":1753950313261},"timestamp":1753950313261},"type":"threadpool_metrics"}
2025-07-31 16:25:13.262 [WebSocket-5] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:25:13.308 [WebSocket-9] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:25:13.390 [http-nio-8080-exec-3] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已移除: service=monitor, userId=monitor_1753950313200_y40i1zf26, sessionId=1
2025-07-31 16:25:13.391 [http-nio-8080-exec-3] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接关闭: service=monitor, userId=monitor_1753950313200_y40i1zf26, sessionId=1, code=GOING_AWAY, reason=null
2025-07-31 16:25:13.392 [WebSocket-1] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端断开: monitor_1753950313200_y40i1zf26
2025-07-31 16:25:13.392 [WebSocket-1] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:25:13.421 [http-nio-8080-exec-4] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已添加: service=monitor, userId=monitor_1753950313367_iqyawg5u7, sessionId=2
2025-07-31 16:25:13.422 [http-nio-8080-exec-4] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接建立: service=monitor, userId=monitor_1753950313367_iqyawg5u7, sessionId=2, clientIp=null
2025-07-31 16:25:13.423 [WebSocket-3] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端连接: monitor_1753950313367_iqyawg5u7
2025-07-31 16:25:13.424 [WebSocket-3] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753950313367_iqyawg5u7, message={"type":"welcome","message":"欢迎连接线程池监控中心","timestamp":1753950313423}
2025-07-31 16:25:13.425 [WebSocket-3] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:25:13.427 [WebSocket-3] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753950313367_iqyawg5u7, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":30,"samplingRate":2,"lastHealthStatus":"HEALTHY","monitoringExecutions":0,"avgMonitoringCostMs":0.0},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":12,"completedTaskCount":45,"taskCount":58,"totalThreadCount":60,"peakThreadCount":60,"poolUtilization":0.02,"queueUtilization":0.012,"throughput":97.5609756097561,"timestamp":1753950313425},"timestamp":1753950313425},"type":"threadpool_metrics"}
2025-07-31 16:25:13.428 [WebSocket-3] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:25:13.471 [WebSocket-7] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:25:13.512 [http-nio-8080-exec-4] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已移除: service=monitor, userId=monitor_1753950313367_iqyawg5u7, sessionId=2
2025-07-31 16:25:13.513 [http-nio-8080-exec-4] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接关闭: service=monitor, userId=monitor_1753950313367_iqyawg5u7, sessionId=2, code=GOING_AWAY, reason=null
2025-07-31 16:25:13.513 [WebSocket-2] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端断开: monitor_1753950313367_iqyawg5u7
2025-07-31 16:25:13.513 [WebSocket-2] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:25:13.573 [http-nio-8080-exec-5] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已添加: service=monitor, userId=monitor_1753950313528_5kbyw7gy8, sessionId=3
2025-07-31 16:25:13.574 [http-nio-8080-exec-5] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接建立: service=monitor, userId=monitor_1753950313528_5kbyw7gy8, sessionId=3, clientIp=null
2025-07-31 16:25:13.575 [WebSocket-7] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端连接: monitor_1753950313528_5kbyw7gy8
2025-07-31 16:25:13.576 [WebSocket-7] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753950313528_5kbyw7gy8, message={"type":"welcome","message":"欢迎连接线程池监控中心","timestamp":1753950313575}
2025-07-31 16:25:13.576 [WebSocket-7] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:25:13.578 [WebSocket-7] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753950313528_5kbyw7gy8, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":30,"samplingRate":2,"lastHealthStatus":"HEALTHY","monitoringExecutions":0,"avgMonitoringCostMs":0.0},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":13,"completedTaskCount":61,"taskCount":75,"totalThreadCount":64,"peakThreadCount":64,"poolUtilization":0.02,"queueUtilization":0.013,"throughput":105.96026490066225,"timestamp":1753950313576},"timestamp":1753950313576},"type":"threadpool_metrics"}
2025-07-31 16:25:13.578 [WebSocket-7] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:25:13.621 [WebSocket-3] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:25:13.664 [http-nio-8080-exec-6] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已移除: service=monitor, userId=monitor_1753950313528_5kbyw7gy8, sessionId=3
2025-07-31 16:25:13.665 [http-nio-8080-exec-6] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接关闭: service=monitor, userId=monitor_1753950313528_5kbyw7gy8, sessionId=3, code=GOING_AWAY, reason=null
2025-07-31 16:25:13.665 [WebSocket-8] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端断开: monitor_1753950313528_5kbyw7gy8
2025-07-31 16:25:13.666 [WebSocket-8] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:25:13.745 [http-nio-8080-exec-7] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已添加: service=monitor, userId=monitor_1753950313698_sja7hzg52, sessionId=4
2025-07-31 16:25:13.746 [http-nio-8080-exec-7] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接建立: service=monitor, userId=monitor_1753950313698_sja7hzg52, sessionId=4, clientIp=null
2025-07-31 16:25:13.747 [WebSocket-7] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端连接: monitor_1753950313698_sja7hzg52
2025-07-31 16:25:13.748 [WebSocket-7] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753950313698_sja7hzg52, message={"type":"welcome","message":"欢迎连接线程池监控中心","timestamp":1753950313747}
2025-07-31 16:25:13.748 [WebSocket-7] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:25:13.750 [WebSocket-7] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753950313698_sja7hzg52, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":30,"samplingRate":2,"lastHealthStatus":"HEALTHY","monitoringExecutions":0,"avgMonitoringCostMs":0.0},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":14,"completedTaskCount":77,"taskCount":92,"totalThreadCount":67,"peakThreadCount":67,"poolUtilization":0.02,"queueUtilization":0.014,"throughput":92.48554913294798,"timestamp":1753950313749},"timestamp":1753950313749},"type":"threadpool_metrics"}
2025-07-31 16:25:13.750 [WebSocket-7] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:25:13.783 [WebSocket-8] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:25:14.667 [http-nio-8080-exec-10] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已移除: service=monitor, userId=monitor_1753950313698_sja7hzg52, sessionId=4
2025-07-31 16:25:14.667 [http-nio-8080-exec-10] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接关闭: service=monitor, userId=monitor_1753950313698_sja7hzg52, sessionId=4, code=GOING_AWAY, reason=null
2025-07-31 16:25:14.668 [WebSocket-2] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端断开: monitor_1753950313698_sja7hzg52
2025-07-31 16:25:14.668 [WebSocket-2] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:25:14.722 [http-nio-8080-exec-9] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已添加: service=monitor, userId=monitor_1753950314675_uz5kgk0sr, sessionId=5
2025-07-31 16:25:14.724 [http-nio-8080-exec-9] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接建立: service=monitor, userId=monitor_1753950314675_uz5kgk0sr, sessionId=5, clientIp=null
2025-07-31 16:25:14.725 [WebSocket-1] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端连接: monitor_1753950314675_uz5kgk0sr
2025-07-31 16:25:14.726 [WebSocket-1] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753950314675_uz5kgk0sr, message={"type":"welcome","message":"欢迎连接线程池监控中心","timestamp":1753950314725}
2025-07-31 16:25:14.726 [WebSocket-1] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:25:14.728 [WebSocket-1] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753950314675_uz5kgk0sr, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":30,"samplingRate":2,"lastHealthStatus":"HEALTHY","monitoringExecutions":0,"avgMonitoringCostMs":0.0},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":15,"completedTaskCount":93,"taskCount":109,"totalThreadCount":64,"peakThreadCount":67,"poolUtilization":0.02,"queueUtilization":0.015,"throughput":16.37666325486182,"timestamp":1753950314726},"timestamp":1753950314726},"type":"threadpool_metrics"}
2025-07-31 16:25:14.728 [WebSocket-1] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:25:14.761 [WebSocket-2] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:25:14.842 [http-nio-8080-exec-8] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已移除: service=monitor, userId=monitor_1753950314675_uz5kgk0sr, sessionId=5
2025-07-31 16:25:14.843 [http-nio-8080-exec-8] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接关闭: service=monitor, userId=monitor_1753950314675_uz5kgk0sr, sessionId=5, code=GOING_AWAY, reason=null
2025-07-31 16:25:14.844 [WebSocket-3] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端断开: monitor_1753950314675_uz5kgk0sr
2025-07-31 16:25:14.845 [WebSocket-3] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:25:14.902 [http-nio-8080-exec-1] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已添加: service=monitor, userId=monitor_1753950314855_c5n3xlvq7, sessionId=6
2025-07-31 16:25:14.904 [http-nio-8080-exec-1] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接建立: service=monitor, userId=monitor_1753950314855_c5n3xlvq7, sessionId=6, clientIp=null
2025-07-31 16:25:14.904 [WebSocket-4] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端连接: monitor_1753950314855_c5n3xlvq7
2025-07-31 16:25:14.906 [WebSocket-4] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753950314855_c5n3xlvq7, message={"type":"welcome","message":"欢迎连接线程池监控中心","timestamp":1753950314905}
2025-07-31 16:25:14.907 [WebSocket-4] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:25:14.909 [WebSocket-4] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753950314855_c5n3xlvq7, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":30,"samplingRate":2,"lastHealthStatus":"HEALTHY","monitoringExecutions":0,"avgMonitoringCostMs":0.0},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":16,"completedTaskCount":109,"taskCount":126,"totalThreadCount":64,"peakThreadCount":67,"poolUtilization":0.02,"queueUtilization":0.016,"throughput":88.39779005524862,"timestamp":1753950314907},"timestamp":1753950314907},"type":"threadpool_metrics"}
2025-07-31 16:25:14.910 [WebSocket-4] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:25:14.943 [WebSocket-2] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:25:15.029 [http-nio-8080-exec-2] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已移除: service=monitor, userId=monitor_1753950314855_c5n3xlvq7, sessionId=6
2025-07-31 16:25:15.030 [http-nio-8080-exec-2] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接关闭: service=monitor, userId=monitor_1753950314855_c5n3xlvq7, sessionId=6, code=GOING_AWAY, reason=null
2025-07-31 16:25:15.031 [WebSocket-4] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端断开: monitor_1753950314855_c5n3xlvq7
2025-07-31 16:25:15.031 [WebSocket-4] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:25:15.091 [http-nio-8080-exec-3] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已添加: service=monitor, userId=monitor_1753950315047_k8yib4hic, sessionId=7
2025-07-31 16:25:15.092 [http-nio-8080-exec-3] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接建立: service=monitor, userId=monitor_1753950315047_k8yib4hic, sessionId=7, clientIp=null
2025-07-31 16:25:15.093 [WebSocket-7] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端连接: monitor_1753950315047_k8yib4hic
2025-07-31 16:25:15.094 [WebSocket-7] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753950315047_k8yib4hic, message={"type":"welcome","message":"欢迎连接线程池监控中心","timestamp":1753950315093}
2025-07-31 16:25:15.094 [WebSocket-7] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:25:15.096 [WebSocket-7] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753950315047_k8yib4hic, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":30,"samplingRate":2,"lastHealthStatus":"HEALTHY","monitoringExecutions":0,"avgMonitoringCostMs":0.0},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":17,"completedTaskCount":125,"taskCount":143,"totalThreadCount":65,"peakThreadCount":67,"poolUtilization":0.02,"queueUtilization":0.017,"throughput":85.56149732620321,"timestamp":1753950315094},"timestamp":1753950315094},"type":"threadpool_metrics"}
2025-07-31 16:25:15.096 [WebSocket-7] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:25:15.135 [WebSocket-4] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:25:20.294 [http-nio-8080-exec-4] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已移除: service=monitor, userId=monitor_1753950315047_k8yib4hic, sessionId=7
2025-07-31 16:25:20.311 [WebSocket-9] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端断开: monitor_1753950315047_k8yib4hic
2025-07-31 16:25:20.312 [WebSocket-9] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:25:20.313 [http-nio-8080-exec-4] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接关闭: service=monitor, userId=monitor_1753950315047_k8yib4hic, sessionId=7, code=GOING_AWAY, reason=null
2025-07-31 16:25:20.367 [http-nio-8080-exec-5] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已添加: service=monitor, userId=monitor_1753950320317_8bpbnc44o, sessionId=8
2025-07-31 16:25:20.370 [http-nio-8080-exec-5] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接建立: service=monitor, userId=monitor_1753950320317_8bpbnc44o, sessionId=8, clientIp=null
2025-07-31 16:25:20.371 [WebSocket-3] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端连接: monitor_1753950320317_8bpbnc44o
2025-07-31 16:25:20.379 [WebSocket-3] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753950320317_8bpbnc44o, message={"type":"welcome","message":"欢迎连接线程池监控中心","timestamp":1753950320379}
2025-07-31 16:25:20.383 [WebSocket-3] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:25:20.389 [WebSocket-3] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753950320317_8bpbnc44o, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":30,"samplingRate":2,"lastHealthStatus":"HEALTHY","monitoringExecutions":0,"avgMonitoringCostMs":0.0},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":18,"completedTaskCount":141,"taskCount":160,"totalThreadCount":64,"peakThreadCount":67,"poolUtilization":0.02,"queueUtilization":0.018,"throughput":3.0217186024551466,"timestamp":1753950320389},"timestamp":1753950320389},"type":"threadpool_metrics"}
2025-07-31 16:25:20.389 [WebSocket-3] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:25:20.423 [WebSocket-10] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:25:22.183 [http-nio-8080-exec-6] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已移除: service=monitor, userId=monitor_1753950320317_8bpbnc44o, sessionId=8
2025-07-31 16:25:22.185 [http-nio-8080-exec-6] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接关闭: service=monitor, userId=monitor_1753950320317_8bpbnc44o, sessionId=8, code=GOING_AWAY, reason=null
2025-07-31 16:25:22.186 [WebSocket-2] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端断开: monitor_1753950320317_8bpbnc44o
2025-07-31 16:25:22.186 [WebSocket-2] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:25:22.209 [http-nio-8080-exec-7] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已添加: service=monitor, userId=monitor_1753950322177_eqkawst84, sessionId=9
2025-07-31 16:25:22.209 [http-nio-8080-exec-7] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接建立: service=monitor, userId=monitor_1753950322177_eqkawst84, sessionId=9, clientIp=null
2025-07-31 16:25:22.209 [WebSocket-5] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端连接: monitor_1753950322177_eqkawst84
2025-07-31 16:25:22.223 [WebSocket-5] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753950322177_eqkawst84, message={"type":"welcome","message":"欢迎连接线程池监控中心","timestamp":1753950322209}
2025-07-31 16:25:22.224 [WebSocket-5] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:25:22.227 [WebSocket-5] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753950322177_eqkawst84, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":30,"samplingRate":2,"lastHealthStatus":"HEALTHY","monitoringExecutions":0,"avgMonitoringCostMs":0.0},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":19,"completedTaskCount":157,"taskCount":177,"totalThreadCount":64,"peakThreadCount":67,"poolUtilization":0.02,"queueUtilization":0.019,"throughput":8.719346049046322,"timestamp":1753950322224},"timestamp":1753950322224},"type":"threadpool_metrics"}
2025-07-31 16:25:22.228 [WebSocket-5] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:25:22.264 [WebSocket-2] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:25:24.472 [http-nio-8080-exec-10] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已移除: service=monitor, userId=monitor_1753950322177_eqkawst84, sessionId=9
2025-07-31 16:25:24.473 [http-nio-8080-exec-10] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接关闭: service=monitor, userId=monitor_1753950322177_eqkawst84, sessionId=9, code=GOING_AWAY, reason=null
2025-07-31 16:25:24.473 [WebSocket-9] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端断开: monitor_1753950322177_eqkawst84
2025-07-31 16:25:24.473 [WebSocket-9] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:25:24.506 [http-nio-8080-exec-9] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已添加: service=monitor, userId=monitor_1753950324465_vw1vfmyc0, sessionId=a
2025-07-31 16:25:24.506 [http-nio-8080-exec-9] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接建立: service=monitor, userId=monitor_1753950324465_vw1vfmyc0, sessionId=a, clientIp=null
2025-07-31 16:25:24.506 [WebSocket-6] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端连接: monitor_1753950324465_vw1vfmyc0
2025-07-31 16:25:24.506 [WebSocket-6] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753950324465_vw1vfmyc0, message={"type":"welcome","message":"欢迎连接线程池监控中心","timestamp":1753950324506}
2025-07-31 16:25:24.506 [WebSocket-6] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:25:24.506 [WebSocket-6] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753950324465_vw1vfmyc0, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":30,"samplingRate":2,"lastHealthStatus":"HEALTHY","monitoringExecutions":0,"avgMonitoringCostMs":0.0},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":20,"completedTaskCount":173,"taskCount":194,"totalThreadCount":64,"peakThreadCount":67,"poolUtilization":0.02,"queueUtilization":0.02,"throughput":7.011393514460999,"timestamp":1753950324506},"timestamp":1753950324506},"type":"threadpool_metrics"}
2025-07-31 16:25:24.506 [WebSocket-6] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:25:24.542 [WebSocket-10] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:25:27.541 [http-nio-8080-exec-8] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已移除: service=monitor, userId=monitor_1753950324465_vw1vfmyc0, sessionId=a
2025-07-31 16:25:27.543 [http-nio-8080-exec-8] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接关闭: service=monitor, userId=monitor_1753950324465_vw1vfmyc0, sessionId=a, code=GOING_AWAY, reason=null
2025-07-31 16:25:27.543 [WebSocket-2] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端断开: monitor_1753950324465_vw1vfmyc0
2025-07-31 16:25:27.543 [WebSocket-2] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:25:29.091 [http-nio-8080-exec-1] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已添加: service=monitor, userId=monitor_1753950328901_8k3bcc9ka, sessionId=b
2025-07-31 16:25:29.092 [http-nio-8080-exec-1] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接建立: service=monitor, userId=monitor_1753950328901_8k3bcc9ka, sessionId=b, clientIp=null
2025-07-31 16:25:29.143 [WebSocket-5] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端连接: monitor_1753950328901_8k3bcc9ka
2025-07-31 16:25:29.177 [http-nio-8080-exec-2] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已添加: service=monitor, userId=monitor_1753950329083_be2zunm9t, sessionId=c
2025-07-31 16:25:29.161 [WebSocket-5] WARN  c.f.w.session.WebSocketSession - 会话已关闭，消息发送失败: sessionId=b, userId=monitor_1753950328901_8k3bcc9ka, service=monitor
2025-07-31 16:25:29.193 [http-nio-8080-exec-2] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接建立: service=monitor, userId=monitor_1753950329083_be2zunm9t, sessionId=c, clientIp=null
2025-07-31 16:25:29.324 [http-nio-8080-exec-1] ERROR c.f.websocket.core.WebSocketServer - WebSocket发生错误: service=monitor, userId=monitor_1753950328901_8k3bcc9ka, sessionId=b
java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper.fillReadBuffer(NioEndpoint.java:1296)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper.read(NioEndpoint.java:1226)
	at org.apache.tomcat.websocket.server.WsFrameServer.onDataAvailable(WsFrameServer.java:75)
	at org.apache.tomcat.websocket.server.WsFrameServer.doOnDataAvailable(WsFrameServer.java:183)
	at org.apache.tomcat.websocket.server.WsFrameServer.notifyDataAvailable(WsFrameServer.java:162)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.upgradeDispatch(WsHttpUpgradeHandler.java:157)
	at org.apache.coyote.http11.upgrade.UpgradeProcessorInternal.dispatch(UpgradeProcessorInternal.java:60)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:59)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 16:25:29.344 [WebSocket-10] ERROR c.f.websocket.core.WebSocketServer - WebSocket发生错误: service=monitor, userId=monitor_1753950328901_8k3bcc9ka, sessionId=b
java.io.IOException: java.io.IOException: 你的主机中的软件中止了一个已建立的连接。
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:327)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:262)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:824)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:711)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:325)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:262)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPing(WsRemoteEndpointImplBase.java:176)
	at org.apache.tomcat.websocket.WsRemoteEndpointBase.sendPing(WsRemoteEndpointBase.java:55)
	at com.framework.websocket.session.WebSocketSession.sendPing(WebSocketSession.java:131)
	at com.framework.websocket.session.WebSocketSession.sendPing(WebSocketSession.java:123)
	at com.framework.websocket.core.WebSocketServer.sendHeartbeat(WebSocketServer.java:385)
	at com.framework.websocket.util.TimeoutTaskWrapper$InterruptibleTaskWrapper.run(TimeoutTaskWrapper.java:112)
	at java.util.concurrent.CompletableFuture$AsyncRun.run$$$capture(CompletableFuture.java:1626)
	at java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
Caused by: java.io.IOException: 你的主机中的软件中止了一个已建立的连接。
	at sun.nio.ch.SocketDispatcher.writev0(Native Method)
	at sun.nio.ch.SocketDispatcher.writev(SocketDispatcher.java:55)
	at sun.nio.ch.IOUtil.write(IOUtil.java:148)
	at sun.nio.ch.SocketChannelImpl.write(SocketChannelImpl.java:504)
	at org.apache.tomcat.util.net.NioChannel.write(NioChannel.java:147)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1635)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1068)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1487)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1413)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1384)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:93)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:512)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:314)
	... 17 common frames omitted
2025-07-31 16:25:29.373 [WebSocket-10] WARN  c.f.websocket.core.WebSocketServer - WebSocket异常关闭: service=monitor, userId=monitor_1753950328901_8k3bcc9ka, sessionId=b, reason=你的主机中的软件中止了一个已建立的连接。
2025-07-31 16:25:29.373 [WebSocket-10] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接关闭: service=monitor, userId=monitor_1753950328901_8k3bcc9ka, sessionId=b, code=CLOSED_ABNORMALLY, reason=你的主机中的软件中止了一个已建立的连接。
2025-07-31 16:25:29.373 [WebSocket-5] ERROR c.f.w.s.WebSocketSessionManager - 消息发送失败: service=monitor, userId=monitor_1753950328901_8k3bcc9ka, message={"type":"welcome","message":"欢迎连接线程池监控中心","timestamp":1753950329161}
java.io.IOException: WebSocket会话已关闭
	at com.framework.websocket.session.WebSocketSession.sendMessage(WebSocketSession.java:99)
	at com.framework.websocket.session.WebSocketSessionManager.sendMessage(WebSocketSessionManager.java:268)
	at com.framework.websocket.monitor.ThreadPoolMonitorWebSocketService.sendWelcomeMessage(ThreadPoolMonitorWebSocketService.java:81)
	at com.framework.websocket.monitor.ThreadPoolMonitorWebSocketService.handleEvent(ThreadPoolMonitorWebSocketService.java:47)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor64.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 16:25:29.400 [WebSocket-5] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:25:29.398 [WebSocket-10] ERROR c.f.websocket.core.WebSocketServer - WebSocket心跳发送失败: service=monitor, userId=monitor_1753950328901_8k3bcc9ka
java.io.IOException: java.io.IOException: 你的主机中的软件中止了一个已建立的连接。
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:327)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:262)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPing(WsRemoteEndpointImplBase.java:176)
	at org.apache.tomcat.websocket.WsRemoteEndpointBase.sendPing(WsRemoteEndpointBase.java:55)
	at com.framework.websocket.session.WebSocketSession.sendPing(WebSocketSession.java:131)
	at com.framework.websocket.session.WebSocketSession.sendPing(WebSocketSession.java:123)
	at com.framework.websocket.core.WebSocketServer.sendHeartbeat(WebSocketServer.java:385)
	at com.framework.websocket.util.TimeoutTaskWrapper$InterruptibleTaskWrapper.run(TimeoutTaskWrapper.java:112)
	at java.util.concurrent.CompletableFuture$AsyncRun.run$$$capture(CompletableFuture.java:1626)
	at java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
Caused by: java.io.IOException: 你的主机中的软件中止了一个已建立的连接。
	at sun.nio.ch.SocketDispatcher.writev0(Native Method)
	at sun.nio.ch.SocketDispatcher.writev(SocketDispatcher.java:55)
	at sun.nio.ch.IOUtil.write(IOUtil.java:148)
	at sun.nio.ch.SocketChannelImpl.write(SocketChannelImpl.java:504)
	at org.apache.tomcat.util.net.NioChannel.write(NioChannel.java:147)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1635)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1068)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1487)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1413)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1384)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:93)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:512)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:314)
	... 17 common frames omitted
2025-07-31 16:25:29.424 [WebSocket-5] WARN  c.f.w.session.WebSocketSession - 会话已关闭，消息发送失败: sessionId=b, userId=monitor_1753950328901_8k3bcc9ka, service=monitor
2025-07-31 16:25:29.433 [WebSocket-5] ERROR c.f.w.s.WebSocketSessionManager - 消息发送失败: service=monitor, userId=monitor_1753950328901_8k3bcc9ka, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":30,"samplingRate":2,"lastHealthStatus":"HEALTHY","monitoringExecutions":0,"avgMonitoringCostMs":0.0},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":7,"queueSize":22,"completedTaskCount":209,"taskCount":238,"totalThreadCount":63,"peakThreadCount":67,"poolUtilization":0.14,"queueUtilization":0.022,"throughput":7.35444330949949,"timestamp":1753950329401},"timestamp":1753950329401},"type":"threadpool_metrics"}
java.io.IOException: WebSocket会话已关闭
	at com.framework.websocket.session.WebSocketSession.sendMessage(WebSocketSession.java:99)
	at com.framework.websocket.session.WebSocketSessionManager.sendMessage(WebSocketSessionManager.java:268)
	at com.framework.websocket.monitor.ThreadPoolMonitorWebSocketService.sendCurrentMetrics(ThreadPoolMonitorWebSocketService.java:106)
	at com.framework.websocket.monitor.ThreadPoolMonitorWebSocketService.handleEvent(ThreadPoolMonitorWebSocketService.java:48)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.processWithHandler(WebSocketMessageHandlerDispatcher.java:112)
	at com.framework.websocket.handler.WebSocketMessageHandlerDispatcher.handleWebSocketEvent(WebSocketMessageHandlerDispatcher.java:90)
	at sun.reflect.GeneratedMethodAccessor64.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:142)
	at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 16:25:29.433 [WebSocket-5] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:25:29.433 [WebSocket-8] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端断开: monitor_1753950328901_8k3bcc9ka
2025-07-31 16:25:29.433 [WebSocket-8] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:25:29.433 [WebSocket-9] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:25:29.433 [WebSocket-2] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端连接: monitor_1753950329083_be2zunm9t
2025-07-31 16:25:29.433 [WebSocket-2] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753950329083_be2zunm9t, message={"type":"welcome","message":"欢迎连接线程池监控中心","timestamp":1753950329433}
2025-07-31 16:25:29.433 [WebSocket-2] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:25:29.433 [WebSocket-2] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753950329083_be2zunm9t, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":30,"samplingRate":2,"lastHealthStatus":"HEALTHY","monitoringExecutions":0,"avgMonitoringCostMs":0.0},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":3,"queueSize":22,"completedTaskCount":213,"taskCount":238,"totalThreadCount":63,"peakThreadCount":67,"poolUtilization":0.06,"queueUtilization":0.022,"throughput":125.0,"timestamp":1753950329433},"timestamp":1753950329433},"type":"threadpool_metrics"}
2025-07-31 16:25:29.445 [WebSocket-2] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:25:29.445 [WebSocket-1] ERROR c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端错误: monitor_1753950328901_8k3bcc9ka, error: null
2025-07-31 16:25:29.445 [WebSocket-1] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:25:29.446 [WebSocket-6] ERROR c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端错误: monitor_1753950328901_8k3bcc9ka, error: java.io.IOException: 你的主机中的软件中止了一个已建立的连接。
2025-07-31 16:25:29.446 [WebSocket-6] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:25:37.657 [WebSocket-4] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:25:37.657 [WebSocket-3] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:25:37.662 [WebSocket-4] WARN  c.f.w.session.WebSocketSession - 会话已关闭，消息发送失败: sessionId=b, userId=monitor_1753950328901_8k3bcc9ka, service=monitor
2025-07-31 16:25:37.664 [WebSocket-4] ERROR c.f.w.s.WebSocketSessionManager - 广播消息发送失败: service=monitor, userId=monitor_1753950328901_8k3bcc9ka
java.io.IOException: WebSocket会话已关闭
	at com.framework.websocket.session.WebSocketSession.sendMessage(WebSocketSession.java:99)
	at com.framework.websocket.session.WebSocketSessionManager.lambda$broadcast$1(WebSocketSessionManager.java:252)
	at java.util.concurrent.ConcurrentHashMap.forEach(ConcurrentHashMap.java:1597)
	at com.framework.websocket.session.WebSocketSessionManager.broadcast(WebSocketSessionManager.java:250)
	at com.framework.websocket.monitor.ThreadPoolMonitorWebSocketService.broadcastMetrics(ThreadPoolMonitorWebSocketService.java:230)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:308)
	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 16:25:37.666 [WebSocket-4] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 接收用户数=2, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":30,"samplingRate":2,"lastHealthStatus":"HEALTHY","monitoringExecutions":1,"avgMonitoringCostMs":0.0052},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":3,"queueSize":19,"completedTaskCount":217,"taskCount":239,"totalThreadCount":63,"peakThreadCount":67,"poolUtilization":0.06,"queueUtilization":0.019,"throughput":0.48632218844984804,"timestamp":1753950337658},"timestamp":1753950337658},"type":"threadpool_metrics"}
2025-07-31 16:25:37.687 [WebSocket-7] WARN  c.f.w.session.WebSocketSession - 会话已关闭，消息发送失败: sessionId=b, userId=monitor_1753950328901_8k3bcc9ka, service=monitor
2025-07-31 16:25:37.688 [WebSocket-7] ERROR c.f.w.s.WebSocketSessionManager - 广播消息发送失败: service=monitor, userId=monitor_1753950328901_8k3bcc9ka
java.io.IOException: WebSocket会话已关闭
	at com.framework.websocket.session.WebSocketSession.sendMessage(WebSocketSession.java:99)
	at com.framework.websocket.session.WebSocketSessionManager.lambda$broadcast$1(WebSocketSessionManager.java:252)
	at java.util.concurrent.ConcurrentHashMap.forEach(ConcurrentHashMap.java:1597)
	at com.framework.websocket.session.WebSocketSessionManager.broadcast(WebSocketSessionManager.java:250)
	at com.framework.websocket.monitor.ThreadPoolMonitorWebSocketService.broadcastMemoryStatus(ThreadPoolMonitorWebSocketService.java:362)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:308)
	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 16:25:37.692 [WebSocket-7] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 接收用户数=2, message={"payload":{"heapUsed":62111296,"heapMax":9481224192,"heapUsageRatio":0.0065509785173530465,"nonHeapUsed":64239248,"isWarningMode":false,"isCriticalMode":false,"totalWarningCount":0,"sessionStats":"Services: 1 (Empty: 0), Sessions: 2, Operations: 24","eventPoolStats":"EventPool{当前池大小: 6, 总创建: 6, 总复用: 33, 复用率: 84.6%}"},"type":"memory_status","timestamp":1753950337678}
2025-07-31 16:25:54.074 [http-nio-8080-exec-3] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已移除: service=monitor, userId=monitor_1753950329083_be2zunm9t, sessionId=c
2025-07-31 16:25:54.074 [http-nio-8080-exec-3] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接关闭: service=monitor, userId=monitor_1753950329083_be2zunm9t, sessionId=c, code=GOING_AWAY, reason=null
2025-07-31 16:25:54.074 [WebSocket-2] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端断开: monitor_1753950329083_be2zunm9t
2025-07-31 16:25:54.074 [WebSocket-2] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:25:54.108 [http-nio-8080-exec-4] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已添加: service=monitor, userId=monitor_1753950354037_90rs7mp7v, sessionId=d
2025-07-31 16:25:54.109 [http-nio-8080-exec-4] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接建立: service=monitor, userId=monitor_1753950354037_90rs7mp7v, sessionId=d, clientIp=null
2025-07-31 16:25:54.110 [WebSocket-10] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端连接: monitor_1753950354037_90rs7mp7v
2025-07-31 16:25:54.111 [WebSocket-10] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753950354037_90rs7mp7v, message={"type":"welcome","message":"欢迎连接线程池监控中心","timestamp":1753950354110}
2025-07-31 16:25:54.111 [WebSocket-10] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:25:54.111 [WebSocket-10] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753950354037_90rs7mp7v, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":30,"samplingRate":2,"lastHealthStatus":"HEALTHY","monitoringExecutions":1,"avgMonitoringCostMs":0.0052},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":13,"completedTaskCount":240,"taskCount":254,"totalThreadCount":64,"peakThreadCount":67,"poolUtilization":0.02,"queueUtilization":0.013,"throughput":1.397921351729168,"timestamp":1753950354111},"timestamp":1753950354111},"type":"threadpool_metrics"}
2025-07-31 16:25:54.112 [WebSocket-10] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:25:54.157 [WebSocket-6] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:26:07.659 [WebSocket-7] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:26:07.659 [WebSocket-4] WARN  c.f.w.session.WebSocketSession - 会话已关闭，消息发送失败: sessionId=b, userId=monitor_1753950328901_8k3bcc9ka, service=monitor
2025-07-31 16:26:07.659 [WebSocket-8] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:26:07.659 [WebSocket-3] WARN  c.f.w.session.WebSocketSession - 会话已关闭，消息发送失败: sessionId=b, userId=monitor_1753950328901_8k3bcc9ka, service=monitor
2025-07-31 16:26:07.659 [WebSocket-7] WARN  c.f.w.session.WebSocketSession - 会话已关闭，消息发送失败: sessionId=b, userId=monitor_1753950328901_8k3bcc9ka, service=monitor
2025-07-31 16:26:07.659 [WebSocket-3] ERROR c.f.w.s.WebSocketSessionManager - 广播消息发送失败: service=monitor, userId=monitor_1753950328901_8k3bcc9ka
java.io.IOException: WebSocket会话已关闭
	at com.framework.websocket.session.WebSocketSession.sendMessage(WebSocketSession.java:99)
	at com.framework.websocket.session.WebSocketSessionManager.lambda$broadcast$1(WebSocketSessionManager.java:252)
	at java.util.concurrent.ConcurrentHashMap.forEach(ConcurrentHashMap.java:1597)
	at com.framework.websocket.session.WebSocketSessionManager.broadcast(WebSocketSessionManager.java:250)
	at com.framework.websocket.monitor.ThreadPoolMonitorWebSocketService.broadcastWebSocketMetrics(ThreadPoolMonitorWebSocketService.java:336)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:308)
	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 16:26:07.659 [WebSocket-7] ERROR c.f.w.s.WebSocketSessionManager - 广播消息发送失败: service=monitor, userId=monitor_1753950328901_8k3bcc9ka
java.io.IOException: WebSocket会话已关闭
	at com.framework.websocket.session.WebSocketSession.sendMessage(WebSocketSession.java:99)
	at com.framework.websocket.session.WebSocketSessionManager.lambda$broadcast$1(WebSocketSessionManager.java:252)
	at java.util.concurrent.ConcurrentHashMap.forEach(ConcurrentHashMap.java:1597)
	at com.framework.websocket.session.WebSocketSessionManager.broadcast(WebSocketSessionManager.java:250)
	at com.framework.websocket.monitor.ThreadPoolMonitorWebSocketService.broadcastMetrics(ThreadPoolMonitorWebSocketService.java:230)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:308)
	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 16:26:07.659 [WebSocket-4] ERROR c.f.w.s.WebSocketSessionManager - 广播消息发送失败: service=monitor, userId=monitor_1753950328901_8k3bcc9ka
java.io.IOException: WebSocket会话已关闭
	at com.framework.websocket.session.WebSocketSession.sendMessage(WebSocketSession.java:99)
	at com.framework.websocket.session.WebSocketSessionManager.lambda$broadcast$1(WebSocketSessionManager.java:252)
	at java.util.concurrent.ConcurrentHashMap.forEach(ConcurrentHashMap.java:1597)
	at com.framework.websocket.session.WebSocketSessionManager.broadcast(WebSocketSessionManager.java:250)
	at com.framework.websocket.monitor.ThreadPoolMonitorWebSocketService.broadcastMemoryStatus(ThreadPoolMonitorWebSocketService.java:362)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:308)
	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 16:26:07.673 [WebSocket-3] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 接收用户数=2, message={"payload":{"currentConnections":2,"totalConnections":14,"totalDisconnections":13,"totalMessagesReceived":0,"totalMessagesSent":0,"totalErrors":2,"totalHeartbeatTimeouts":0},"type":"websocket_metrics","timestamp":1753950367659}
2025-07-31 16:26:07.674 [WebSocket-4] ERROR c.f.w.s.WebSocketSessionManager - 广播消息发送失败: service=monitor, userId=monitor_1753950354037_90rs7mp7v
java.lang.IllegalStateException: The remote endpoint was in state [TEXT_FULL_WRITING] which is an invalid state for called method
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase$StateMachine.checkState(WsRemoteEndpointImplBase.java:1274)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase$StateMachine.textStart(WsRemoteEndpointImplBase.java:1236)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendString(WsRemoteEndpointImplBase.java:194)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:37)
	at com.framework.websocket.session.WebSocketSession.sendMessage(WebSocketSession.java:92)
	at com.framework.websocket.session.WebSocketSessionManager.lambda$broadcast$1(WebSocketSessionManager.java:252)
	at java.util.concurrent.ConcurrentHashMap.forEach(ConcurrentHashMap.java:1597)
	at com.framework.websocket.session.WebSocketSessionManager.broadcast(WebSocketSessionManager.java:250)
	at com.framework.websocket.monitor.ThreadPoolMonitorWebSocketService.broadcastMemoryStatus(ThreadPoolMonitorWebSocketService.java:362)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:308)
	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 16:26:07.675 [WebSocket-4] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 接收用户数=2, message={"payload":{"heapUsed":62715696,"heapMax":9481224192,"heapUsageRatio":0.006614725559692788,"nonHeapUsed":64374568,"isWarningMode":false,"isCriticalMode":false,"totalWarningCount":0,"sessionStats":"Services: 1 (Empty: 0), Sessions: 2, Operations: 26","eventPoolStats":"EventPool{当前池大小: 6, 总创建: 6, 总复用: 36, 复用率: 85.7%}"},"type":"memory_status","timestamp":1753950367659}
2025-07-31 16:26:07.659 [WebSocket-7] ERROR c.f.w.s.WebSocketSessionManager - 广播消息发送失败: service=monitor, userId=monitor_1753950354037_90rs7mp7v
java.lang.IllegalStateException: The remote endpoint was in state [TEXT_FULL_WRITING] which is an invalid state for called method
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase$StateMachine.checkState(WsRemoteEndpointImplBase.java:1274)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase$StateMachine.textStart(WsRemoteEndpointImplBase.java:1236)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendString(WsRemoteEndpointImplBase.java:194)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:37)
	at com.framework.websocket.session.WebSocketSession.sendMessage(WebSocketSession.java:92)
	at com.framework.websocket.session.WebSocketSessionManager.lambda$broadcast$1(WebSocketSessionManager.java:252)
	at java.util.concurrent.ConcurrentHashMap.forEach(ConcurrentHashMap.java:1597)
	at com.framework.websocket.session.WebSocketSessionManager.broadcast(WebSocketSessionManager.java:250)
	at com.framework.websocket.monitor.ThreadPoolMonitorWebSocketService.broadcastMetrics(ThreadPoolMonitorWebSocketService.java:230)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:308)
	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 16:26:07.676 [WebSocket-7] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 接收用户数=2, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":30,"samplingRate":2,"lastHealthStatus":"HEALTHY","monitoringExecutions":1,"avgMonitoringCostMs":0.0052},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":5,"queueSize":5,"completedTaskCount":250,"taskCount":260,"totalThreadCount":63,"peakThreadCount":67,"poolUtilization":0.1,"queueUtilization":0.005,"throughput":0.7381163271331562,"timestamp":1753950367659},"timestamp":1753950367659},"type":"threadpool_metrics"}
2025-07-31 16:26:07.707 [WebSocket-10] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已移除: service=monitor, userId=monitor_1753950328901_8k3bcc9ka, sessionId=b
2025-07-31 16:26:07.707 [WebSocket-10] INFO  c.f.w.s.WebSocketSessionCleaner - 会话清理完成: 清理会话=1, 强制清理Map=0, 耗时=51ms, 内存状态=正常
2025-07-31 16:26:08.390 [ThreadPoolMonitor] INFO  c.f.w.monitor.ThreadPoolMonitor - 调整监控策略: 健康状态=健康, 监控间隔: 30秒->40秒, 采样率: 1:2 -> 1:3
2025-07-31 16:26:08.598 [ThreadPoolMonitor] INFO  c.f.w.monitor.ThreadPoolMonitor - 调整监控策略: 健康状态=健康, 监控间隔: 40秒->50秒, 采样率: 1:3 -> 1:4
2025-07-31 16:26:08.799 [ThreadPoolMonitor] INFO  c.f.w.monitor.ThreadPoolMonitor - 调整监控策略: 健康状态=健康, 监控间隔: 50秒->60秒, 采样率: 1:4 -> 1:5
2025-07-31 16:26:09.042 [ThreadPoolMonitor] INFO  c.f.w.monitor.ThreadPoolMonitor - 调整监控策略: 健康状态=健康, 监控间隔: 60秒->70秒, 采样率: 1:5 -> 1:5
2025-07-31 16:26:24.151 [WebSocket-4] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:26:24.321 [WebSocket-9] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753950354037_90rs7mp7v, sessionId=d, message={"action":"refresh","timestamp":1753950384316}
2025-07-31 16:26:24.368 [WebSocket-2] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:26:24.368 [WebSocket-2] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753950354037_90rs7mp7v, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":6,"avgMonitoringCostMs":474.9105},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":10,"completedTaskCount":268,"taskCount":279,"totalThreadCount":62,"peakThreadCount":67,"poolUtilization":0.02,"queueUtilization":0.01,"throughput":0.8482317630170951,"timestamp":1753950384368},"timestamp":1753950384368},"type":"threadpool_metrics"}
2025-07-31 16:26:24.368 [WebSocket-2] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:26:37.668 [WebSocket-4] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:26:37.668 [WebSocket-6] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:26:37.669 [WebSocket-1] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 接收用户数=1, message={"payload":{"heapUsed":65410656,"heapMax":9481224192,"heapUsageRatio":0.006898967335377613,"nonHeapUsed":64785016,"isWarningMode":false,"isCriticalMode":false,"totalWarningCount":0,"sessionStats":"Services: 1 (Empty: 0), Sessions: 1, Operations: 27","eventPoolStats":"EventPool{当前池大小: 6, 总创建: 6, 总复用: 38, 复用率: 86.4%}"},"type":"memory_status","timestamp":1753950397668}
2025-07-31 16:26:37.669 [WebSocket-4] ERROR c.f.w.s.WebSocketSessionManager - 广播消息发送失败: service=monitor, userId=monitor_1753950354037_90rs7mp7v
java.lang.IllegalStateException: The remote endpoint was in state [TEXT_FULL_WRITING] which is an invalid state for called method
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase$StateMachine.checkState(WsRemoteEndpointImplBase.java:1274)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase$StateMachine.textStart(WsRemoteEndpointImplBase.java:1236)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendString(WsRemoteEndpointImplBase.java:194)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:37)
	at com.framework.websocket.session.WebSocketSession.sendMessage(WebSocketSession.java:92)
	at com.framework.websocket.session.WebSocketSessionManager.lambda$broadcast$1(WebSocketSessionManager.java:252)
	at java.util.concurrent.ConcurrentHashMap.forEach(ConcurrentHashMap.java:1597)
	at com.framework.websocket.session.WebSocketSessionManager.broadcast(WebSocketSessionManager.java:250)
	at com.framework.websocket.monitor.ThreadPoolMonitorWebSocketService.broadcastMetrics(ThreadPoolMonitorWebSocketService.java:230)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:308)
	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 16:26:37.670 [WebSocket-4] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 接收用户数=1, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":6,"avgMonitoringCostMs":474.9105},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":3,"queueSize":7,"completedTaskCount":270,"taskCount":280,"totalThreadCount":62,"peakThreadCount":67,"poolUtilization":0.06,"queueUtilization":0.007,"throughput":0.15037593984962405,"timestamp":1753950397668},"timestamp":1753950397668},"type":"threadpool_metrics"}
2025-07-31 16:26:54.163 [WebSocket-7] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:26:54.316 [WebSocket-5] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753950354037_90rs7mp7v, sessionId=d, message={"action":"refresh","timestamp":1753950414314}
2025-07-31 16:26:54.316 [WebSocket-1] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:26:54.316 [WebSocket-1] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753950354037_90rs7mp7v, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":6,"avgMonitoringCostMs":474.9105},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":10,"completedTaskCount":286,"taskCount":297,"totalThreadCount":61,"peakThreadCount":67,"poolUtilization":0.02,"queueUtilization":0.01,"throughput":0.9611341382831743,"timestamp":1753950414316},"timestamp":1753950414316},"type":"threadpool_metrics"}
2025-07-31 16:26:54.316 [WebSocket-1] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:27:07.666 [WebSocket-8] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:27:07.666 [WebSocket-9] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:27:07.667 [WebSocket-2] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 接收用户数=1, message={"payload":{"heapUsed":65410656,"heapMax":9481224192,"heapUsageRatio":0.006898967335377613,"nonHeapUsed":64851320,"isWarningMode":false,"isCriticalMode":false,"totalWarningCount":0,"sessionStats":"Services: 1 (Empty: 0), Sessions: 1, Operations: 27","eventPoolStats":"EventPool{当前池大小: 6, 总创建: 6, 总复用: 40, 复用率: 87.0%}"},"type":"memory_status","timestamp":1753950427666}
2025-07-31 16:27:07.666 [WebSocket-6] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 接收用户数=1, message={"payload":{"currentConnections":1,"totalConnections":14,"totalDisconnections":13,"totalMessagesReceived":2,"totalMessagesSent":0,"totalErrors":2,"totalHeartbeatTimeouts":0},"type":"websocket_metrics","timestamp":1753950427665}
2025-07-31 16:27:07.669 [WebSocket-9] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 接收用户数=1, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":6,"avgMonitoringCostMs":474.9105},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":4,"queueSize":6,"completedTaskCount":289,"taskCount":299,"totalThreadCount":61,"peakThreadCount":67,"poolUtilization":0.08,"queueUtilization":0.006,"throughput":0.0,"timestamp":1753950427668},"timestamp":1753950427668},"type":"threadpool_metrics"}
2025-07-31 16:27:24.166 [WebSocket-1] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:27:24.318 [WebSocket-4] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753950354037_90rs7mp7v, sessionId=d, message={"action":"refresh","timestamp":1753950444316}
2025-07-31 16:27:24.318 [WebSocket-6] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:27:24.321 [WebSocket-6] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753950354037_90rs7mp7v, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":7,"avgMonitoringCostMs":407.0666},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":10,"completedTaskCount":306,"taskCount":317,"totalThreadCount":61,"peakThreadCount":67,"poolUtilization":0.02,"queueUtilization":0.01,"throughput":1.0209597021199928,"timestamp":1753950444319},"timestamp":1753950444319},"type":"threadpool_metrics"}
2025-07-31 16:27:24.321 [WebSocket-6] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:27:37.667 [WebSocket-2] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:27:37.667 [WebSocket-10] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:27:37.668 [WebSocket-8] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 接收用户数=1, message={"payload":{"heapUsed":65410656,"heapMax":9481224192,"heapUsageRatio":0.006898967335377613,"nonHeapUsed":64893304,"isWarningMode":false,"isCriticalMode":false,"totalWarningCount":0,"sessionStats":"Services: 1 (Empty: 0), Sessions: 1, Operations: 27","eventPoolStats":"EventPool{当前池大小: 6, 总创建: 6, 总复用: 42, 复用率: 87.5%}"},"type":"memory_status","timestamp":1753950457667}
2025-07-31 16:27:37.669 [WebSocket-10] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 接收用户数=1, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":7,"avgMonitoringCostMs":407.0666},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":3,"queueSize":7,"completedTaskCount":308,"taskCount":318,"totalThreadCount":61,"peakThreadCount":67,"poolUtilization":0.06,"queueUtilization":0.007,"throughput":0.0,"timestamp":1753950457668},"timestamp":1753950457668},"type":"threadpool_metrics"}
2025-07-31 16:27:48.862 [SpringApplicationShutdownHook] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已移除: service=monitor, userId=monitor_1753950354037_90rs7mp7v, sessionId=d
2025-07-31 16:27:48.862 [SpringApplicationShutdownHook] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接关闭: service=monitor, userId=monitor_1753950354037_90rs7mp7v, sessionId=d, code=GOING_AWAY, reason=The web application is stopping
2025-07-31 16:27:48.862 [WebSocket-9] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端断开: monitor_1753950354037_90rs7mp7v
2025-07-31 16:27:48.863 [WebSocket-9] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:27:48.879 [SpringApplicationShutdownHook] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件订阅者取消注册成功: WebSocketMessageHandlerDispatcher
2025-07-31 16:27:48.879 [SpringApplicationShutdownHook] INFO  c.f.w.h.WebSocketMessageHandlerDispatcher - WebSocketMessageHandlerDispatcher已取消EventBus订阅
2025-07-31 16:27:48.880 [SpringApplicationShutdownHook] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件总线线程池已关闭
2025-07-31 16:27:48.880 [SpringApplicationShutdownHook] INFO  c.f.w.monitor.ThreadPoolMonitor - 线程池监控器已关闭
2025-07-31 16:35:20.880 [main] INFO  c.f.w.WebSocketFrameworkApplication - Starting WebSocketFrameworkApplication using Java 1.8.0_202 on DESKTOP-EGK8BP4 with PID 24756 (D:\workTool\IdeaProjects\websocket-framework\target\classes started by admin in D:\workTool\IdeaProjects\websocket-framework)
2025-07-31 16:35:20.884 [main] INFO  c.f.w.WebSocketFrameworkApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-31 16:35:22.161 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2025-07-31 16:35:22.167 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-07-31 16:35:22.221 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 24 ms. Found 0 Redis repository interfaces.
2025-07-31 16:35:23.038 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2025-07-31 16:35:23.059 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-31 16:35:23.060 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.63]
2025-07-31 16:35:23.334 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-31 16:35:23.335 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2328 ms
2025-07-31 16:35:24.174 [main] INFO  c.f.w.c.WebSocketFrameworkConfig - WebSocket线程池已创建: 核心线程=10, 最大线程=50, 队列容量=1000
2025-07-31 16:35:24.216 [main] INFO  c.f.w.monitor.ThreadPoolMonitor - 智能线程池监控器已启动，初始监控间隔: 30秒
2025-07-31 16:35:24.279 [main] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件总线初始化完成
2025-07-31 16:35:24.380 [main] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件订阅者注册成功: ThreadPoolHealthChecker
2025-07-31 16:35:24.381 [main] INFO  c.f.w.health.ThreadPoolHealthChecker - WebSocket指标收集已启用并注册到健康检查器
2025-07-31 16:35:24.407 [main] INFO  c.f.w.p.WebSocketServiceProcessor - WebSocket服务注册成功: serviceId=chatroom, serviceName=聊天室服务, beanName=chatRoomWebSocketService, class=ChatRoomWebSocketService
2025-07-31 16:35:24.410 [main] INFO  c.f.w.p.WebSocketServiceProcessor - WebSocket服务注册成功: serviceId=notification, serviceName=通知推送服务, beanName=notificationWebSocketService, class=NotificationWebSocketService
2025-07-31 16:35:24.423 [main] INFO  c.f.w.p.WebSocketServiceProcessor - WebSocket服务注册成功: serviceId=monitor, serviceName=monitor, beanName=threadPoolMonitorWebSocketService, class=ThreadPoolMonitorWebSocketService
2025-07-31 16:35:24.428 [main] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件订阅者注册成功: WebSocketMessageHandlerDispatcher
2025-07-31 16:35:24.428 [main] INFO  c.f.w.h.WebSocketMessageHandlerDispatcher - WebSocketMessageHandlerDispatcher初始化完成, 注册了4个消息处理器, 1个拦截器
2025-07-31 16:35:24.431 [main] INFO  c.f.w.monitor.ThreadPoolMetricsStore - 线程池监控数据存储服务已启动，数据保留时间: 24小时
2025-07-31 16:35:25.307 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2025-07-31 16:35:25.331 [WebSocket-9] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:35:25.346 [main] INFO  c.f.w.WebSocketFrameworkApplication - Started WebSocketFrameworkApplication in 5.557 seconds (JVM running for 7.619)
2025-07-31 16:35:25.931 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-07-31 16:35:25.932 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-07-31 16:35:25.935 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2025-07-31 16:35:28.321 [http-nio-8080-exec-1] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已添加: service=monitor, userId=monitor_1753950923319_ttd584eiw, sessionId=0
2025-07-31 16:35:28.321 [WebSocket-9] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:35:28.349 [http-nio-8080-exec-1] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接建立: service=monitor, userId=monitor_1753950923319_ttd584eiw, sessionId=0, clientIp=null
2025-07-31 16:35:28.354 [WebSocket-6] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端连接: monitor_1753950923319_ttd584eiw
2025-07-31 16:35:28.374 [WebSocket-6] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753950923319_ttd584eiw, message={"type":"welcome","message":"欢迎连接线程池监控中心","timestamp":1753950928354}
2025-07-31 16:35:28.374 [WebSocket-6] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:35:28.381 [WebSocket-6] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753950923319_ttd584eiw, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":30,"samplingRate":2,"lastHealthStatus":"HEALTHY","monitoringExecutions":0,"avgMonitoringCostMs":0.0},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":2,"queueSize":9,"completedTaskCount":12,"taskCount":23,"totalThreadCount":52,"peakThreadCount":52,"poolUtilization":0.04,"queueUtilization":0.009,"throughput":92.5925925925926,"timestamp":1753950928375},"timestamp":1753950928375},"type":"threadpool_metrics"}
2025-07-31 16:35:28.382 [WebSocket-6] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:35:28.404 [WebSocket-8] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:35:30.859 [WebSocket-10] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753950923319_ttd584eiw, sessionId=0, message={"action":"refresh","timestamp":1753950930855}
2025-07-31 16:35:30.951 [WebSocket-9] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:35:30.952 [WebSocket-9] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753950923319_ttd584eiw, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":30,"samplingRate":2,"lastHealthStatus":"HEALTHY","monitoringExecutions":0,"avgMonitoringCostMs":0.0},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":10,"completedTaskCount":24,"taskCount":35,"totalThreadCount":53,"peakThreadCount":53,"poolUtilization":0.02,"queueUtilization":0.01,"throughput":4.656577415599535,"timestamp":1753950930952},"timestamp":1753950930952},"type":"threadpool_metrics"}
2025-07-31 16:35:30.953 [WebSocket-9] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:35:34.064 [http-nio-8080-exec-4] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已移除: service=monitor, userId=monitor_1753950923319_ttd584eiw, sessionId=0
2025-07-31 16:35:34.064 [http-nio-8080-exec-3] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已添加: service=monitor, userId=monitor_1753950933995_pr31ufuxs, sessionId=1
2025-07-31 16:35:34.065 [http-nio-8080-exec-3] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接建立: service=monitor, userId=monitor_1753950933995_pr31ufuxs, sessionId=1, clientIp=null
2025-07-31 16:35:34.065 [http-nio-8080-exec-4] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接关闭: service=monitor, userId=monitor_1753950923319_ttd584eiw, sessionId=0, code=GOING_AWAY, reason=null
2025-07-31 16:35:34.065 [WebSocket-6] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端断开: monitor_1753950923319_ttd584eiw
2025-07-31 16:35:34.065 [WebSocket-6] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:35:34.067 [WebSocket-1] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端连接: monitor_1753950933995_pr31ufuxs
2025-07-31 16:35:34.067 [WebSocket-1] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753950933995_pr31ufuxs, message={"type":"welcome","message":"欢迎连接线程池监控中心","timestamp":1753950934067}
2025-07-31 16:35:34.067 [WebSocket-1] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:35:34.067 [WebSocket-1] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753950933995_pr31ufuxs, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":30,"samplingRate":2,"lastHealthStatus":"HEALTHY","monitoringExecutions":0,"avgMonitoringCostMs":0.0},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":11,"completedTaskCount":35,"taskCount":47,"totalThreadCount":57,"peakThreadCount":57,"poolUtilization":0.02,"queueUtilization":0.011,"throughput":3.5313001605136436,"timestamp":1753950934067},"timestamp":1753950934067},"type":"threadpool_metrics"}
2025-07-31 16:35:34.067 [WebSocket-1] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:35:34.122 [WebSocket-5] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:35:55.343 [WebSocket-4] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:35:55.343 [WebSocket-9] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:35:55.349 [WebSocket-4] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 16:35:55.354 [WebSocket-2] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 16:36:04.119 [WebSocket-2] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:36:04.319 [WebSocket-10] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753950933995_pr31ufuxs, sessionId=1, message={"action":"refresh","timestamp":1753950964307}
2025-07-31 16:36:04.320 [WebSocket-6] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:36:04.323 [WebSocket-6] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753950933995_pr31ufuxs, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":30,"samplingRate":2,"lastHealthStatus":"HEALTHY","monitoringExecutions":1,"avgMonitoringCostMs":0.0146},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":10,"completedTaskCount":59,"taskCount":70,"totalThreadCount":58,"peakThreadCount":58,"poolUtilization":0.02,"queueUtilization":0.01,"throughput":1.8937284170658348,"timestamp":1753950964321},"timestamp":1753950964321},"type":"threadpool_metrics"}
2025-07-31 16:36:04.324 [WebSocket-6] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:36:24.602 [ThreadPoolMonitor] INFO  c.f.w.monitor.ThreadPoolMonitor - 调整监控策略: 健康状态=健康, 监控间隔: 30秒->40秒, 采样率: 1:2 -> 1:3
2025-07-31 16:36:24.753 [ThreadPoolMonitor] INFO  c.f.w.monitor.ThreadPoolMonitor - 调整监控策略: 健康状态=健康, 监控间隔: 40秒->50秒, 采样率: 1:3 -> 1:4
2025-07-31 16:36:24.901 [ThreadPoolMonitor] INFO  c.f.w.monitor.ThreadPoolMonitor - 调整监控策略: 健康状态=健康, 监控间隔: 50秒->60秒, 采样率: 1:4 -> 1:5
2025-07-31 16:36:25.052 [ThreadPoolMonitor] INFO  c.f.w.monitor.ThreadPoolMonitor - 调整监控策略: 健康状态=健康, 监控间隔: 60秒->70秒, 采样率: 1:5 -> 1:5
2025-07-31 16:36:25.332 [WebSocket-1] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:36:25.332 [WebSocket-7] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:36:25.332 [WebSocket-1] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 16:36:25.333 [WebSocket-9] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 16:36:25.345 [WebSocket-3] ERROR c.f.w.s.WebSocketSessionManager - 广播消息发送失败: service=monitor, userId=monitor_1753950933995_pr31ufuxs
java.lang.IllegalStateException: The remote endpoint was in state [TEXT_FULL_WRITING] which is an invalid state for called method
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase$StateMachine.checkState(WsRemoteEndpointImplBase.java:1274)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase$StateMachine.textStart(WsRemoteEndpointImplBase.java:1236)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendString(WsRemoteEndpointImplBase.java:194)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:37)
	at com.framework.websocket.session.WebSocketSession.sendMessage(WebSocketSession.java:92)
	at com.framework.websocket.session.WebSocketSessionManager.lambda$broadcast$1(WebSocketSessionManager.java:256)
	at java.util.concurrent.ConcurrentHashMap.forEach(ConcurrentHashMap.java:1597)
	at com.framework.websocket.session.WebSocketSessionManager.broadcast(WebSocketSessionManager.java:252)
	at com.framework.websocket.monitor.ThreadPoolMonitorWebSocketService.broadcastWebSocketMetrics(ThreadPoolMonitorWebSocketService.java:339)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:308)
	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 16:36:25.380 [WebSocket-3] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已移除: service=monitor, userId=monitor_1753950933995_pr31ufuxs, sessionId=1
2025-07-31 16:36:25.381 [WebSocket-3] INFO  c.f.w.s.WebSocketSessionManager - 清理失效会话: service=monitor, userId=monitor_1753950933995_pr31ufuxs
2025-07-31 16:36:25.381 [WebSocket-3] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=0, 失败用户数=1
2025-07-31 16:36:34.129 [WebSocket-10] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:36:34.321 [WebSocket-8] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753950933995_pr31ufuxs, sessionId=1, message={"action":"refresh","timestamp":1753950994318}
2025-07-31 16:36:34.322 [WebSocket-3] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:36:34.324 [WebSocket-3] WARN  c.f.w.s.WebSocketSessionManager - 消息发送失败，用户不在线: service=monitor, userId=monitor_1753950933995_pr31ufuxs
2025-07-31 16:36:34.324 [WebSocket-3] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:36:55.341 [WebSocket-7] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:37:04.138 [WebSocket-2] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:37:04.307 [WebSocket-7] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753950933995_pr31ufuxs, sessionId=1, message={"action":"refresh","timestamp":1753951024307}
2025-07-31 16:37:04.308 [WebSocket-10] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:37:04.309 [WebSocket-10] WARN  c.f.w.s.WebSocketSessionManager - 消息发送失败，用户不在线: service=monitor, userId=monitor_1753950933995_pr31ufuxs
2025-07-31 16:37:04.310 [WebSocket-10] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:37:25.342 [WebSocket-8] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:37:34.153 [WebSocket-3] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:37:34.320 [WebSocket-11] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753950933995_pr31ufuxs, sessionId=1, message={"action":"refresh","timestamp":1753951054318}
2025-07-31 16:37:34.321 [WebSocket-10] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:37:34.322 [WebSocket-10] WARN  c.f.w.s.WebSocketSessionManager - 消息发送失败，用户不在线: service=monitor, userId=monitor_1753950933995_pr31ufuxs
2025-07-31 16:37:34.322 [WebSocket-10] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:37:55.333 [WebSocket-3] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:38:04.167 [WebSocket-7] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:38:04.561 [WebSocket-11] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753950933995_pr31ufuxs, sessionId=1, message={"action":"refresh","timestamp":1753951084557}
2025-07-31 16:38:04.562 [WebSocket-7] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:38:04.563 [WebSocket-7] WARN  c.f.w.s.WebSocketSessionManager - 消息发送失败，用户不在线: service=monitor, userId=monitor_1753950933995_pr31ufuxs
2025-07-31 16:38:04.564 [WebSocket-7] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:38:25.334 [WebSocket-1] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:38:34.186 [WebSocket-11] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:38:34.317 [WebSocket-6] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753950933995_pr31ufuxs, sessionId=1, message={"action":"refresh","timestamp":1753951114315}
2025-07-31 16:38:34.317 [WebSocket-8] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:38:34.318 [WebSocket-8] WARN  c.f.w.s.WebSocketSessionManager - 消息发送失败，用户不在线: service=monitor, userId=monitor_1753950933995_pr31ufuxs
2025-07-31 16:38:34.319 [WebSocket-8] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:38:55.335 [WebSocket-4] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:39:04.184 [WebSocket-3] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:39:04.315 [WebSocket-7] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753950933995_pr31ufuxs, sessionId=1, message={"action":"refresh","timestamp":1753951144313}
2025-07-31 16:39:04.315 [WebSocket-6] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:39:04.316 [WebSocket-6] WARN  c.f.w.s.WebSocketSessionManager - 消息发送失败，用户不在线: service=monitor, userId=monitor_1753950933995_pr31ufuxs
2025-07-31 16:39:04.317 [WebSocket-6] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:39:25.341 [WebSocket-12] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:39:34.185 [WebSocket-3] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:39:55.341 [WebSocket-11] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:39:58.320 [WebSocket-12] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753950933995_pr31ufuxs, sessionId=1, message={"action":"refresh","timestamp":1753951198311}
2025-07-31 16:39:58.320 [WebSocket-11] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:39:58.320 [WebSocket-11] WARN  c.f.w.s.WebSocketSessionManager - 消息发送失败，用户不在线: service=monitor, userId=monitor_1753950933995_pr31ufuxs
2025-07-31 16:39:58.320 [WebSocket-11] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:40:04.195 [WebSocket-12] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:40:25.337 [WebSocket-1] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:40:25.398 [WebSocket-1] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:40:34.203 [WebSocket-2] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:40:55.331 [WebSocket-8] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:40:58.309 [WebSocket-14] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753950933995_pr31ufuxs, sessionId=1, message={"action":"refresh","timestamp":1753951258307}
2025-07-31 16:40:58.310 [WebSocket-10] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:40:58.311 [WebSocket-10] WARN  c.f.w.s.WebSocketSessionManager - 消息发送失败，用户不在线: service=monitor, userId=monitor_1753950933995_pr31ufuxs
2025-07-31 16:40:58.312 [WebSocket-10] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:41:04.214 [WebSocket-11] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:41:05.213 [ThreadPoolMonitor] INFO  c.f.w.monitor.ThreadPoolMonitor - 调整监控策略: 健康状态=健康, 监控间隔: 70秒->80秒, 采样率: 1:5 -> 1:5
2025-07-31 16:41:25.340 [WebSocket-14] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:41:34.225 [WebSocket-3] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:41:55.335 [WebSocket-12] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:41:58.308 [WebSocket-14] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753950933995_pr31ufuxs, sessionId=1, message={"action":"refresh","timestamp":1753951318307}
2025-07-31 16:41:58.309 [WebSocket-1] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:41:58.310 [WebSocket-1] WARN  c.f.w.s.WebSocketSessionManager - 消息发送失败，用户不在线: service=monitor, userId=monitor_1753950933995_pr31ufuxs
2025-07-31 16:41:58.310 [WebSocket-1] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:42:04.225 [WebSocket-13] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:42:25.342 [WebSocket-14] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:42:34.247 [WebSocket-15] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:42:55.347 [WebSocket-13] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:42:58.321 [WebSocket-16] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753950933995_pr31ufuxs, sessionId=1, message={"action":"refresh","timestamp":1753951378318}
2025-07-31 16:42:58.321 [WebSocket-14] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:42:58.322 [WebSocket-14] WARN  c.f.w.s.WebSocketSessionManager - 消息发送失败，用户不在线: service=monitor, userId=monitor_1753950933995_pr31ufuxs
2025-07-31 16:42:58.323 [WebSocket-14] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:43:04.253 [WebSocket-12] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:43:25.337 [WebSocket-11] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:43:34.279 [WebSocket-14] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:43:43.341 [SpringApplicationShutdownHook] WARN  c.f.w.s.WebSocketSessionManager - WebSocket会话移除失败，会话不匹配: service=monitor, userId=monitor_1753950933995_pr31ufuxs
2025-07-31 16:43:43.342 [SpringApplicationShutdownHook] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接关闭: service=monitor, userId=monitor_1753950933995_pr31ufuxs, sessionId=1, code=GOING_AWAY, reason=The web application is stopping
2025-07-31 16:43:43.342 [WebSocket-11] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端断开: monitor_1753950933995_pr31ufuxs
2025-07-31 16:43:43.342 [WebSocket-11] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:43:43.359 [SpringApplicationShutdownHook] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件订阅者取消注册成功: WebSocketMessageHandlerDispatcher
2025-07-31 16:43:43.359 [SpringApplicationShutdownHook] INFO  c.f.w.h.WebSocketMessageHandlerDispatcher - WebSocketMessageHandlerDispatcher已取消EventBus订阅
2025-07-31 16:43:43.361 [SpringApplicationShutdownHook] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件总线线程池已关闭
2025-07-31 16:43:43.362 [SpringApplicationShutdownHook] INFO  c.f.w.monitor.ThreadPoolMonitor - 线程池监控器已关闭
2025-07-31 16:43:50.698 [main] INFO  c.f.w.WebSocketFrameworkApplication - Starting WebSocketFrameworkApplication using Java 1.8.0_202 on DESKTOP-EGK8BP4 with PID 2400 (D:\workTool\IdeaProjects\websocket-framework\target\classes started by admin in D:\workTool\IdeaProjects\websocket-framework)
2025-07-31 16:43:50.699 [main] INFO  c.f.w.WebSocketFrameworkApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-31 16:43:51.261 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2025-07-31 16:43:51.264 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-07-31 16:43:51.290 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 11 ms. Found 0 Redis repository interfaces.
2025-07-31 16:43:51.769 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2025-07-31 16:43:51.784 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-31 16:43:51.784 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.63]
2025-07-31 16:43:52.027 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-31 16:43:52.028 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1277 ms
2025-07-31 16:43:52.865 [main] INFO  c.f.w.c.WebSocketFrameworkConfig - WebSocket线程池已创建: 核心线程=10, 最大线程=50, 队列容量=1000
2025-07-31 16:43:52.917 [main] INFO  c.f.w.monitor.ThreadPoolMonitor - 智能线程池监控器已启动，初始监控间隔: 30秒
2025-07-31 16:43:52.988 [main] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件总线初始化完成
2025-07-31 16:43:53.114 [main] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件订阅者注册成功: ThreadPoolHealthChecker
2025-07-31 16:43:53.114 [main] INFO  c.f.w.health.ThreadPoolHealthChecker - WebSocket指标收集已启用并注册到健康检查器
2025-07-31 16:43:53.140 [main] INFO  c.f.w.p.WebSocketServiceProcessor - WebSocket服务注册成功: serviceId=chatroom, serviceName=聊天室服务, beanName=chatRoomWebSocketService, class=ChatRoomWebSocketService
2025-07-31 16:43:53.143 [main] INFO  c.f.w.p.WebSocketServiceProcessor - WebSocket服务注册成功: serviceId=notification, serviceName=通知推送服务, beanName=notificationWebSocketService, class=NotificationWebSocketService
2025-07-31 16:43:53.156 [main] INFO  c.f.w.p.WebSocketServiceProcessor - WebSocket服务注册成功: serviceId=monitor, serviceName=monitor, beanName=threadPoolMonitorWebSocketService, class=ThreadPoolMonitorWebSocketService
2025-07-31 16:43:53.161 [main] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件订阅者注册成功: WebSocketMessageHandlerDispatcher
2025-07-31 16:43:53.162 [main] INFO  c.f.w.h.WebSocketMessageHandlerDispatcher - WebSocketMessageHandlerDispatcher初始化完成, 注册了4个消息处理器, 1个拦截器
2025-07-31 16:43:53.166 [main] INFO  c.f.w.monitor.ThreadPoolMetricsStore - 线程池监控数据存储服务已启动，数据保留时间: 24小时
2025-07-31 16:43:54.993 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2025-07-31 16:43:55.055 [WebSocket-9] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:43:55.095 [main] INFO  c.f.w.WebSocketFrameworkApplication - Started WebSocketFrameworkApplication in 4.811 seconds (JVM running for 5.657)
2025-07-31 16:43:58.179 [http-nio-8080-exec-2] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-07-31 16:43:58.181 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-07-31 16:43:58.183 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-07-31 16:43:59.753 [http-nio-8080-exec-2] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已添加: service=monitor, userId=monitor_1753951437334_b4jcdcqm4, sessionId=0
2025-07-31 16:43:59.781 [http-nio-8080-exec-2] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接建立: service=monitor, userId=monitor_1753951437334_b4jcdcqm4, sessionId=0, clientIp=null
2025-07-31 16:43:59.786 [WebSocket-10] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端连接: monitor_1753951437334_b4jcdcqm4
2025-07-31 16:43:59.807 [WebSocket-10] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753951437334_b4jcdcqm4, message={"type":"welcome","message":"欢迎连接线程池监控中心","timestamp":1753951439786}
2025-07-31 16:43:59.808 [WebSocket-10] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:43:59.818 [WebSocket-10] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753951437334_b4jcdcqm4, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":30,"samplingRate":2,"lastHealthStatus":"HEALTHY","monitoringExecutions":0,"avgMonitoringCostMs":0.0},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":2,"queueSize":9,"completedTaskCount":8,"taskCount":19,"totalThreadCount":52,"peakThreadCount":52,"poolUtilization":0.04,"queueUtilization":0.009,"throughput":1.2628920227320564,"timestamp":1753951439808},"timestamp":1753951439808},"type":"threadpool_metrics"}
2025-07-31 16:43:59.818 [WebSocket-10] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:43:59.838 [WebSocket-7] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:44:00.063 [WebSocket-4] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:44:00.066 [WebSocket-4] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 16:44:04.844 [http-nio-8080-exec-1] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:44:10.069 [WebSocket-8] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 16:44:10.146 [WebSocket-10] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753951437334_b4jcdcqm4, sessionId=0, message={"action":"refresh","timestamp":1753951450142}
2025-07-31 16:44:10.203 [WebSocket-1] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:44:10.205 [WebSocket-1] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753951437334_b4jcdcqm4, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":30,"samplingRate":2,"lastHealthStatus":"HEALTHY","monitoringExecutions":0,"avgMonitoringCostMs":0.0},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":10,"completedTaskCount":22,"taskCount":33,"totalThreadCount":54,"peakThreadCount":54,"poolUtilization":0.02,"queueUtilization":0.01,"throughput":1.1196118678857996,"timestamp":1753951450204},"timestamp":1753951450204},"type":"threadpool_metrics"}
2025-07-31 16:44:10.205 [WebSocket-1] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:44:13.121 [http-nio-8080-exec-4] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已移除: service=monitor, userId=monitor_1753951437334_b4jcdcqm4, sessionId=0
2025-07-31 16:44:13.121 [http-nio-8080-exec-4] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接关闭: service=monitor, userId=monitor_1753951437334_b4jcdcqm4, sessionId=0, code=GOING_AWAY, reason=null
2025-07-31 16:44:13.121 [WebSocket-9] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端断开: monitor_1753951437334_b4jcdcqm4
2025-07-31 16:44:13.122 [WebSocket-9] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:44:13.209 [http-nio-8080-exec-5] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已添加: service=monitor, userId=monitor_1753951453154_3pmq4f45z, sessionId=1
2025-07-31 16:44:13.212 [http-nio-8080-exec-5] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接建立: service=monitor, userId=monitor_1753951453154_3pmq4f45z, sessionId=1, clientIp=null
2025-07-31 16:44:13.212 [WebSocket-5] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端连接: monitor_1753951453154_3pmq4f45z
2025-07-31 16:44:13.213 [WebSocket-5] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753951453154_3pmq4f45z, message={"type":"welcome","message":"欢迎连接线程池监控中心","timestamp":1753951453212}
2025-07-31 16:44:13.213 [WebSocket-5] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:44:13.215 [WebSocket-5] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753951453154_3pmq4f45z, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":30,"samplingRate":2,"lastHealthStatus":"HEALTHY","monitoringExecutions":0,"avgMonitoringCostMs":0.0},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":11,"completedTaskCount":33,"taskCount":45,"totalThreadCount":57,"peakThreadCount":57,"poolUtilization":0.02,"queueUtilization":0.011,"throughput":3.6556995679627784,"timestamp":1753951453213},"timestamp":1753951453213},"type":"threadpool_metrics"}
2025-07-31 16:44:13.216 [WebSocket-5] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:44:13.263 [WebSocket-9] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:44:25.069 [WebSocket-6] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:44:25.072 [WebSocket-3] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 16:44:25.720 [http-nio-8080-exec-7] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已添加: service=chatroom, userId=user1, sessionId=2
2025-07-31 16:44:25.722 [http-nio-8080-exec-7] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接建立: service=chatroom, userId=user1, sessionId=2, clientIp=null
2025-07-31 16:44:25.726 [WebSocket-3] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=chatroom, 成功用户数=1, 失败用户数=0
2025-07-31 16:44:25.726 [WebSocket-3] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=chatroom, userId=user1, message={"type":"system","message":"系统消息: 当前在线用户数: 1","timestamp":1753951465726}
2025-07-31 16:44:25.726 [WebSocket-3] INFO  c.f.w.e.ChatRoomWebSocketService - 用户加入聊天室: userId=user1, 当前在线数: 1
2025-07-31 16:44:25.726 [WebSocket-3] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:44:25.768 [WebSocket-10] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:44:29.080 [http-nio-8080-exec-8] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已添加: service=notification, userId=user2, sessionId=3
2025-07-31 16:44:29.082 [http-nio-8080-exec-8] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接建立: service=notification, userId=user2, sessionId=3, clientIp=null
2025-07-31 16:44:29.086 [WebSocket-4] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=notification, userId=user2, message={"type":"notification","title":"系统通知","content":"欢迎使用通知推送服务","level":"info","timestamp":1753951469086}
2025-07-31 16:44:29.088 [WebSocket-4] INFO  c.f.w.e.NotificationWebSocketService - 用户连接通知服务: userId=user2
2025-07-31 16:44:29.089 [WebSocket-4] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:44:29.126 [WebSocket-2] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:44:30.074 [WebSocket-10] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:44:30.074 [WebSocket-10] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 16:44:30.374 [WebSocket-8] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=notification, userId=user2, sessionId=3, message=ping
2025-07-31 16:44:30.376 [WebSocket-8] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=notification, userId=user2, message={"type":"notification","title":"系统响应","content":"pong","level":"success","timestamp":1753951470375}
2025-07-31 16:44:30.377 [WebSocket-8] INFO  c.f.w.e.NotificationWebSocketService - 收到通知服务消息: userId=user2, message=ping
2025-07-31 16:44:30.378 [WebSocket-8] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:44:33.015 [WebSocket-10] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=notification, userId=user2, sessionId=3, message=ping
2025-07-31 16:44:33.016 [WebSocket-4] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=notification, userId=user2, message={"type":"notification","title":"系统响应","content":"pong","level":"success","timestamp":1753951473015}
2025-07-31 16:44:33.016 [WebSocket-4] INFO  c.f.w.e.NotificationWebSocketService - 收到通知服务消息: userId=user2, message=ping
2025-07-31 16:44:33.016 [WebSocket-4] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:44:36.013 [WebSocket-9] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=notification, userId=user2, sessionId=3, message=status
2025-07-31 16:44:36.014 [WebSocket-3] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=notification, userId=user2, message={"type":"notification","title":"状态信息","content":"通知服务运行正常，当前在线用户数: 1","level":"info","timestamp":1753951476014}
2025-07-31 16:44:36.015 [WebSocket-3] INFO  c.f.w.e.NotificationWebSocketService - 收到通知服务消息: userId=user2, message=status
2025-07-31 16:44:36.015 [WebSocket-3] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:44:40.060 [WebSocket-8] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 16:44:43.257 [WebSocket-3] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:44:43.269 [WebSocket-5] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=chatroom, userId=user1, sessionId=2, message=111
2025-07-31 16:44:43.270 [WebSocket-6] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=chatroom, 成功用户数=1, 失败用户数=0
2025-07-31 16:44:43.271 [WebSocket-6] INFO  c.f.w.e.ChatRoomWebSocketService - 收到聊天消息: userId=user1, message=111
2025-07-31 16:44:43.271 [WebSocket-6] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:44:43.313 [WebSocket-3] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753951453154_3pmq4f45z, sessionId=1, message={"action":"refresh","timestamp":1753951483311}
2025-07-31 16:44:43.315 [WebSocket-2] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:44:43.318 [WebSocket-2] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753951453154_3pmq4f45z, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":30,"samplingRate":2,"lastHealthStatus":"HEALTHY","monitoringExecutions":1,"avgMonitoringCostMs":0.0081},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":12,"completedTaskCount":104,"taskCount":117,"totalThreadCount":64,"peakThreadCount":64,"poolUtilization":0.02,"queueUtilization":0.012,"throughput":2.945174444947893,"timestamp":1753951483316},"timestamp":1753951483316},"type":"threadpool_metrics"}
2025-07-31 16:44:43.318 [WebSocket-2] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:44:45.637 [WebSocket-6] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=chatroom, userId=user1, sessionId=2, message=222
2025-07-31 16:44:45.637 [WebSocket-3] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=chatroom, 成功用户数=1, 失败用户数=0
2025-07-31 16:44:45.638 [WebSocket-3] INFO  c.f.w.e.ChatRoomWebSocketService - 收到聊天消息: userId=user1, message=222
2025-07-31 16:44:45.638 [WebSocket-3] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:44:46.950 [WebSocket-10] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=chatroom, userId=user1, sessionId=2, message=333
2025-07-31 16:44:46.951 [WebSocket-1] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=chatroom, 成功用户数=1, 失败用户数=0
2025-07-31 16:44:46.951 [WebSocket-1] INFO  c.f.w.e.ChatRoomWebSocketService - 收到聊天消息: userId=user1, message=333
2025-07-31 16:44:46.951 [WebSocket-1] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:44:48.718 [WebSocket-9] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=notification, userId=user2, sessionId=3, message=status
2025-07-31 16:44:48.719 [WebSocket-4] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=notification, userId=user2, message={"type":"notification","title":"状态信息","content":"通知服务运行正常，当前在线用户数: 1","level":"info","timestamp":1753951488718}
2025-07-31 16:44:48.720 [WebSocket-4] INFO  c.f.w.e.NotificationWebSocketService - 收到通知服务消息: userId=user2, message=status
2025-07-31 16:44:48.720 [WebSocket-4] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:44:50.572 [WebSocket-2] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=notification, userId=user2, sessionId=3, message=ping
2025-07-31 16:44:50.573 [WebSocket-5] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=notification, userId=user2, message={"type":"notification","title":"系统响应","content":"pong","level":"success","timestamp":1753951490573}
2025-07-31 16:44:50.574 [WebSocket-5] INFO  c.f.w.e.NotificationWebSocketService - 收到通知服务消息: userId=user2, message=ping
2025-07-31 16:44:50.574 [WebSocket-5] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:44:51.478 [WebSocket-3] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=notification, userId=user2, sessionId=3, message=ping
2025-07-31 16:44:51.479 [WebSocket-1] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=notification, userId=user2, message={"type":"notification","title":"系统响应","content":"pong","level":"success","timestamp":1753951491479}
2025-07-31 16:44:51.480 [WebSocket-1] INFO  c.f.w.e.NotificationWebSocketService - 收到通知服务消息: userId=user2, message=ping
2025-07-31 16:44:51.481 [WebSocket-1] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:44:54.433 [ThreadPoolMonitor] INFO  c.f.w.monitor.ThreadPoolMonitor - 调整监控策略: 健康状态=健康, 监控间隔: 30秒->40秒, 采样率: 1:2 -> 1:3
2025-07-31 16:44:54.610 [ThreadPoolMonitor] INFO  c.f.w.monitor.ThreadPoolMonitor - 调整监控策略: 健康状态=健康, 监控间隔: 40秒->50秒, 采样率: 1:3 -> 1:4
2025-07-31 16:44:54.784 [ThreadPoolMonitor] INFO  c.f.w.monitor.ThreadPoolMonitor - 调整监控策略: 健康状态=健康, 监控间隔: 50秒->60秒, 采样率: 1:4 -> 1:5
2025-07-31 16:44:54.949 [ThreadPoolMonitor] INFO  c.f.w.monitor.ThreadPoolMonitor - 调整监控策略: 健康状态=健康, 监控间隔: 60秒->70秒, 采样率: 1:5 -> 1:5
2025-07-31 16:44:55.066 [WebSocket-5] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:44:55.128 [WebSocket-6] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 16:44:55.787 [WebSocket-3] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:44:59.099 [pool-1-thread-1] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=notification, userId=user2, message={"type":"notification","title":"定时推送","content":"这是一个定时推送消息: 1753951499098","level":"info","timestamp":1753951499098}
2025-07-31 16:44:59.152 [WebSocket-1] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:45:00.062 [WebSocket-6] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:45:00.063 [WebSocket-6] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 16:45:10.065 [WebSocket-9] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 16:45:13.294 [WebSocket-1] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:45:13.313 [WebSocket-5] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:45:13.313 [WebSocket-3] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753951453154_3pmq4f45z, sessionId=1, message={"action":"refresh","timestamp":1753951513312}
2025-07-31 16:45:13.314 [WebSocket-5] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753951453154_3pmq4f45z, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":6,"avgMonitoringCostMs":354.58116666666666},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":2,"queueSize":12,"completedTaskCount":169,"taskCount":183,"totalThreadCount":66,"peakThreadCount":66,"poolUtilization":0.04,"queueUtilization":0.012,"throughput":1.0564443102927858,"timestamp":1753951513314},"timestamp":1753951513314},"type":"threadpool_metrics"}
2025-07-31 16:45:13.314 [WebSocket-5] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:45:25.058 [WebSocket-10] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:45:25.059 [WebSocket-4] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 16:45:25.096 [WebSocket-10] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:45:25.765 [WebSocket-10] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:45:29.098 [pool-1-thread-1] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=notification, userId=user2, message={"type":"notification","title":"定时推送","content":"这是一个定时推送消息: 1753951529097","level":"info","timestamp":1753951529097}
2025-07-31 16:45:29.148 [WebSocket-2] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:45:30.069 [WebSocket-5] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:45:30.070 [WebSocket-5] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 16:45:40.058 [WebSocket-7] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 16:45:43.671 [WebSocket-6] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:45:43.672 [WebSocket-8] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753951453154_3pmq4f45z, sessionId=1, message={"action":"refresh","timestamp":1753951543314}
2025-07-31 16:45:43.672 [WebSocket-1] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:45:55.148 [WebSocket-4] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:45:55.821 [WebSocket-2] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:45:59.098 [pool-1-thread-1] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=notification, userId=user2, message={"type":"notification","title":"定时推送","content":"这是一个定时推送消息: 1753951559098","level":"info","timestamp":1753951559098}
2025-07-31 16:45:59.160 [WebSocket-2] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:46:00.067 [WebSocket-2] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:46:00.068 [WebSocket-2] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 16:46:10.069 [WebSocket-9] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 16:46:13.293 [WebSocket-6] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:46:13.318 [WebSocket-8] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753951453154_3pmq4f45z, sessionId=1, message={"action":"refresh","timestamp":1753951573316}
2025-07-31 16:46:13.319 [WebSocket-3] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:46:13.320 [WebSocket-3] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753951453154_3pmq4f45z, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":7,"avgMonitoringCostMs":303.927},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":12,"completedTaskCount":240,"taskCount":253,"totalThreadCount":63,"peakThreadCount":66,"poolUtilization":0.02,"queueUtilization":0.012,"throughput":1.1318192107447371,"timestamp":1753951573320},"timestamp":1753951573320},"type":"threadpool_metrics"}
2025-07-31 16:46:13.321 [WebSocket-3] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:46:25.069 [WebSocket-6] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:46:25.069 [WebSocket-7] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 16:46:25.781 [WebSocket-10] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:46:29.088 [pool-1-thread-1] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=notification, userId=user2, message={"type":"notification","title":"定时推送","content":"这是一个定时推送消息: 1753951589088","level":"info","timestamp":1753951589088}
2025-07-31 16:46:29.154 [WebSocket-8] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:46:30.062 [WebSocket-10] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:46:30.062 [WebSocket-10] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 16:46:40.065 [WebSocket-9] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 16:46:43.299 [WebSocket-6] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:46:43.311 [WebSocket-2] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753951453154_3pmq4f45z, sessionId=1, message={"action":"refresh","timestamp":1753951603309}
2025-07-31 16:46:43.311 [WebSocket-4] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:46:43.312 [WebSocket-4] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753951453154_3pmq4f45z, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":7,"avgMonitoringCostMs":303.927},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":12,"completedTaskCount":275,"taskCount":288,"totalThreadCount":63,"peakThreadCount":66,"poolUtilization":0.02,"queueUtilization":0.012,"throughput":1.1320754716981132,"timestamp":1753951603312},"timestamp":1753951603312},"type":"threadpool_metrics"}
2025-07-31 16:46:43.312 [WebSocket-4] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:46:55.060 [WebSocket-5] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:46:55.793 [WebSocket-8] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:46:59.097 [pool-1-thread-1] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=notification, userId=user2, message={"type":"notification","title":"定时推送","content":"这是一个定时推送消息: 1753951619097","level":"info","timestamp":1753951619097}
2025-07-31 16:46:59.197 [WebSocket-1] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:47:00.062 [WebSocket-4] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:47:00.062 [WebSocket-4] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 16:47:11.025 [WebSocket-2] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 16:47:13.156 [WebSocket-5] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753951453154_3pmq4f45z, sessionId=1, message={"action":"refresh","timestamp":1753951633156}
2025-07-31 16:47:13.156 [WebSocket-3] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:47:13.156 [WebSocket-3] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753951453154_3pmq4f45z, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":7,"avgMonitoringCostMs":303.927},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":12,"completedTaskCount":302,"taskCount":315,"totalThreadCount":63,"peakThreadCount":66,"poolUtilization":0.02,"queueUtilization":0.012,"throughput":0.5345959981670995,"timestamp":1753951633156},"timestamp":1753951633156},"type":"threadpool_metrics"}
2025-07-31 16:47:13.156 [WebSocket-3] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:47:13.794 [WebSocket-9] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:47:25.068 [WebSocket-7] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:47:25.068 [WebSocket-2] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 16:47:25.801 [WebSocket-9] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:47:29.099 [pool-1-thread-2] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=notification, userId=user2, message={"type":"notification","title":"定时推送","content":"这是一个定时推送消息: 1753951649099","level":"info","timestamp":1753951649099}
2025-07-31 16:47:29.229 [WebSocket-10] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:47:30.057 [WebSocket-7] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:47:30.057 [WebSocket-7] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 16:47:40.063 [WebSocket-4] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 16:47:43.310 [WebSocket-10] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:47:43.321 [WebSocket-8] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753951453154_3pmq4f45z, sessionId=1, message={"action":"refresh","timestamp":1753951663318}
2025-07-31 16:47:43.321 [WebSocket-6] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:47:43.322 [WebSocket-6] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753951453154_3pmq4f45z, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":8,"avgMonitoringCostMs":265.9365},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":12,"completedTaskCount":345,"taskCount":358,"totalThreadCount":63,"peakThreadCount":66,"poolUtilization":0.02,"queueUtilization":0.012,"throughput":1.1307953260459855,"timestamp":1753951663322},"timestamp":1753951663322},"type":"threadpool_metrics"}
2025-07-31 16:47:43.323 [WebSocket-6] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:47:55.055 [WebSocket-1] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:47:55.808 [WebSocket-3] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:47:59.102 [pool-1-thread-2] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=notification, userId=user2, message={"type":"notification","title":"定时推送","content":"这是一个定时推送消息: 1753951679101","level":"info","timestamp":1753951679101}
2025-07-31 16:47:59.177 [WebSocket-3] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:48:00.068 [WebSocket-8] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:48:00.068 [WebSocket-8] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 16:48:10.061 [WebSocket-6] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 16:48:13.314 [WebSocket-3] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:48:13.314 [WebSocket-9] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753951453154_3pmq4f45z, sessionId=1, message={"action":"refresh","timestamp":1753951693307}
2025-07-31 16:48:13.314 [WebSocket-4] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:48:25.061 [WebSocket-5] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:48:25.062 [WebSocket-7] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 16:48:25.819 [WebSocket-5] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:48:29.103 [pool-1-thread-2] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=notification, userId=user2, message={"type":"notification","title":"定时推送","content":"这是一个定时推送消息: 1753951709100","level":"info","timestamp":1753951709100}
2025-07-31 16:48:29.189 [WebSocket-7] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:48:30.066 [WebSocket-5] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:48:30.068 [WebSocket-5] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 16:48:40.066 [WebSocket-8] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 16:48:43.323 [WebSocket-5] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:48:55.055 [WebSocket-4] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:48:55.837 [WebSocket-6] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:48:58.321 [WebSocket-1] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753951453154_3pmq4f45z, sessionId=1, message={"action":"refresh","timestamp":1753951738320}
2025-07-31 16:48:58.322 [WebSocket-5] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:48:58.324 [WebSocket-5] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753951453154_3pmq4f45z, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":9,"avgMonitoringCostMs":236.38842222222223},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":12,"completedTaskCount":427,"taskCount":440,"totalThreadCount":63,"peakThreadCount":66,"poolUtilization":0.02,"queueUtilization":0.012,"throughput":4.898958971218616,"timestamp":1753951738322},"timestamp":1753951738322},"type":"threadpool_metrics"}
2025-07-31 16:48:58.324 [WebSocket-5] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:48:59.103 [pool-1-thread-2] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=notification, userId=user2, message={"type":"notification","title":"定时推送","content":"这是一个定时推送消息: 1753951739103","level":"info","timestamp":1753951739103}
2025-07-31 16:48:59.192 [WebSocket-4] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:49:00.056 [WebSocket-8] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:49:00.057 [WebSocket-8] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 16:49:10.057 [WebSocket-3] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 16:49:13.338 [WebSocket-8] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:49:13.338 [WebSocket-7] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753951453154_3pmq4f45z, sessionId=1, message={"action":"refresh","timestamp":1753951753315}
2025-07-31 16:49:13.339 [WebSocket-4] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:49:25.060 [WebSocket-1] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:49:25.060 [WebSocket-10] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 16:49:25.834 [WebSocket-7] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:49:29.098 [pool-1-thread-2] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=notification, userId=user2, message={"type":"notification","title":"定时推送","content":"这是一个定时推送消息: 1753951769098","level":"info","timestamp":1753951769098}
2025-07-31 16:49:29.194 [WebSocket-1] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:49:30.054 [WebSocket-5] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:49:30.054 [WebSocket-5] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 16:49:35.136 [ThreadPoolMonitor] INFO  c.f.w.monitor.ThreadPoolMonitor - 调整监控策略: 健康状态=健康, 监控间隔: 70秒->80秒, 采样率: 1:5 -> 1:5
2025-07-31 16:49:40.065 [WebSocket-3] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 16:49:43.368 [WebSocket-9] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:49:43.369 [WebSocket-5] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753951453154_3pmq4f45z, sessionId=1, message={"action":"refresh","timestamp":1753951783323}
2025-07-31 16:49:43.369 [WebSocket-3] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:49:55.057 [WebSocket-7] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:49:55.147 [WebSocket-10] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 16:49:55.843 [WebSocket-8] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:49:59.093 [pool-1-thread-2] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=notification, userId=user2, message={"type":"notification","title":"定时推送","content":"这是一个定时推送消息: 1753951799093","level":"info","timestamp":1753951799093}
2025-07-31 16:49:59.207 [WebSocket-10] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:00.060 [WebSocket-4] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:50:00.062 [WebSocket-4] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 16:50:07.033 [http-nio-8080-exec-10] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已添加: service=monitor, userId=test_user, sessionId=4
2025-07-31 16:50:07.035 [http-nio-8080-exec-10] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接建立: service=monitor, userId=test_user, sessionId=4, clientIp=null
2025-07-31 16:50:07.036 [WebSocket-3] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端连接: test_user
2025-07-31 16:50:07.037 [WebSocket-3] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"type":"welcome","message":"欢迎连接线程池监控中心","timestamp":1753951807036}
2025-07-31 16:50:07.038 [WebSocket-3] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:50:07.041 [WebSocket-3] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":80,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":11,"avgMonitoringCostMs":207.48873636363635},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":13,"completedTaskCount":513,"taskCount":527,"totalThreadCount":63,"peakThreadCount":66,"poolUtilization":0.02,"queueUtilization":0.013,"throughput":0.8598452278589854,"timestamp":1753951807038},"timestamp":1753951807038},"type":"threadpool_metrics"}
2025-07-31 16:50:07.041 [WebSocket-3] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:07.075 [WebSocket-2] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:10.059 [WebSocket-4] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=2, 失败用户数=0
2025-07-31 16:50:13.308 [WebSocket-9] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753951453154_3pmq4f45z, sessionId=1, message={"action":"refresh","timestamp":1753951813307}
2025-07-31 16:50:13.311 [WebSocket-9] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:50:13.314 [WebSocket-9] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753951453154_3pmq4f45z, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":80,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":11,"avgMonitoringCostMs":207.48873636363635},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":13,"completedTaskCount":528,"taskCount":542,"totalThreadCount":63,"peakThreadCount":66,"poolUtilization":0.02,"queueUtilization":0.013,"throughput":2.3908192540643927,"timestamp":1753951813312},"timestamp":1753951813312},"type":"threadpool_metrics"}
2025-07-31 16:50:13.315 [WebSocket-9] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:13.349 [WebSocket-10] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:14.213 [WebSocket-1] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=4, message={"action":"refresh"}
2025-07-31 16:50:14.213 [WebSocket-3] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:50:14.214 [WebSocket-3] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":80,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":11,"avgMonitoringCostMs":207.48873636363635},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":13,"completedTaskCount":539,"taskCount":553,"totalThreadCount":63,"peakThreadCount":66,"poolUtilization":0.02,"queueUtilization":0.013,"throughput":12.20865704772475,"timestamp":1753951814213},"timestamp":1753951814213},"type":"threadpool_metrics"}
2025-07-31 16:50:14.214 [WebSocket-3] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:14.854 [WebSocket-10] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=4, message={"action":"refresh"}
2025-07-31 16:50:14.854 [WebSocket-1] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:50:14.854 [WebSocket-1] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":80,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":11,"avgMonitoringCostMs":207.48873636363635},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":13,"completedTaskCount":545,"taskCount":559,"totalThreadCount":63,"peakThreadCount":66,"poolUtilization":0.02,"queueUtilization":0.013,"throughput":9.360374414976599,"timestamp":1753951814854},"timestamp":1753951814854},"type":"threadpool_metrics"}
2025-07-31 16:50:14.855 [WebSocket-1] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:15.141 [WebSocket-5] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=4, message={"action":"refresh"}
2025-07-31 16:50:15.143 [WebSocket-10] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:50:15.143 [WebSocket-10] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":80,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":11,"avgMonitoringCostMs":207.48873636363635},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":13,"completedTaskCount":551,"taskCount":565,"totalThreadCount":63,"peakThreadCount":66,"poolUtilization":0.02,"queueUtilization":0.013,"throughput":20.761245674740486,"timestamp":1753951815143},"timestamp":1753951815143},"type":"threadpool_metrics"}
2025-07-31 16:50:15.143 [WebSocket-10] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:15.822 [WebSocket-4] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=4, message={"action":"refresh"}
2025-07-31 16:50:15.822 [WebSocket-1] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:50:15.822 [WebSocket-1] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":80,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":11,"avgMonitoringCostMs":207.48873636363635},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":13,"completedTaskCount":557,"taskCount":571,"totalThreadCount":63,"peakThreadCount":66,"poolUtilization":0.02,"queueUtilization":0.013,"throughput":8.836524300441825,"timestamp":1753951815822},"timestamp":1753951815822},"type":"threadpool_metrics"}
2025-07-31 16:50:15.822 [WebSocket-1] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:15.995 [WebSocket-2] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=4, message={"action":"refresh"}
2025-07-31 16:50:15.997 [WebSocket-10] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:50:15.997 [WebSocket-10] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":80,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":11,"avgMonitoringCostMs":207.48873636363635},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":13,"completedTaskCount":563,"taskCount":577,"totalThreadCount":63,"peakThreadCount":66,"poolUtilization":0.02,"queueUtilization":0.013,"throughput":34.285714285714285,"timestamp":1753951815997},"timestamp":1753951815997},"type":"threadpool_metrics"}
2025-07-31 16:50:15.997 [WebSocket-10] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:16.157 [WebSocket-4] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:50:16.157 [WebSocket-1] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=4, message={"action":"refresh"}
2025-07-31 16:50:16.158 [WebSocket-4] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":80,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":11,"avgMonitoringCostMs":207.48873636363635},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":2,"queueSize":13,"completedTaskCount":568,"taskCount":583,"totalThreadCount":63,"peakThreadCount":66,"poolUtilization":0.04,"queueUtilization":0.013,"throughput":31.25,"timestamp":1753951816157},"timestamp":1753951816157},"type":"threadpool_metrics"}
2025-07-31 16:50:16.158 [WebSocket-4] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:16.332 [WebSocket-10] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:50:16.332 [WebSocket-6] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=4, message={"action":"refresh"}
2025-07-31 16:50:16.333 [WebSocket-10] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":80,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":11,"avgMonitoringCostMs":207.48873636363635},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":2,"queueSize":13,"completedTaskCount":574,"taskCount":589,"totalThreadCount":63,"peakThreadCount":66,"poolUtilization":0.04,"queueUtilization":0.013,"throughput":34.285714285714285,"timestamp":1753951816332},"timestamp":1753951816332},"type":"threadpool_metrics"}
2025-07-31 16:50:16.333 [WebSocket-10] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:16.485 [WebSocket-1] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=4, message={"action":"refresh"}
2025-07-31 16:50:16.486 [WebSocket-4] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:50:16.487 [WebSocket-4] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":80,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":11,"avgMonitoringCostMs":207.48873636363635},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":13,"completedTaskCount":581,"taskCount":595,"totalThreadCount":63,"peakThreadCount":66,"poolUtilization":0.02,"queueUtilization":0.013,"throughput":45.45454545454545,"timestamp":1753951816486},"timestamp":1753951816486},"type":"threadpool_metrics"}
2025-07-31 16:50:16.487 [WebSocket-4] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:16.631 [WebSocket-6] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=4, message={"action":"refresh"}
2025-07-31 16:50:16.631 [WebSocket-10] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:50:16.632 [WebSocket-10] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":80,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":11,"avgMonitoringCostMs":207.48873636363635},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":13,"completedTaskCount":587,"taskCount":601,"totalThreadCount":63,"peakThreadCount":66,"poolUtilization":0.02,"queueUtilization":0.013,"throughput":41.37931034482759,"timestamp":1753951816631},"timestamp":1753951816631},"type":"threadpool_metrics"}
2025-07-31 16:50:16.632 [WebSocket-10] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:16.814 [WebSocket-1] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=4, message={"action":"refresh"}
2025-07-31 16:50:16.815 [WebSocket-6] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:50:16.816 [WebSocket-6] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":80,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":11,"avgMonitoringCostMs":207.48873636363635},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":13,"completedTaskCount":593,"taskCount":607,"totalThreadCount":63,"peakThreadCount":66,"poolUtilization":0.02,"queueUtilization":0.013,"throughput":32.608695652173914,"timestamp":1753951816815},"timestamp":1753951816815},"type":"threadpool_metrics"}
2025-07-31 16:50:16.816 [WebSocket-6] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:17.045 [WebSocket-8] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=4, message={"action":"refresh"}
2025-07-31 16:50:17.045 [WebSocket-4] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:50:17.047 [WebSocket-4] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":80,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":11,"avgMonitoringCostMs":207.48873636363635},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":13,"completedTaskCount":599,"taskCount":613,"totalThreadCount":63,"peakThreadCount":66,"poolUtilization":0.02,"queueUtilization":0.013,"throughput":26.08695652173913,"timestamp":1753951817045},"timestamp":1753951817045},"type":"threadpool_metrics"}
2025-07-31 16:50:17.047 [WebSocket-4] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:17.204 [WebSocket-9] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=4, message={"action":"refresh"}
2025-07-31 16:50:17.206 [WebSocket-6] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:50:17.213 [WebSocket-6] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":80,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":11,"avgMonitoringCostMs":207.48873636363635},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":13,"completedTaskCount":605,"taskCount":619,"totalThreadCount":63,"peakThreadCount":66,"poolUtilization":0.02,"queueUtilization":0.013,"throughput":37.267080745341616,"timestamp":1753951817206},"timestamp":1753951817206},"type":"threadpool_metrics"}
2025-07-31 16:50:17.214 [WebSocket-6] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:17.389 [WebSocket-8] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:50:17.389 [WebSocket-7] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=4, message={"action":"refresh"}
2025-07-31 16:50:17.390 [WebSocket-8] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":80,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":11,"avgMonitoringCostMs":207.48873636363635},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":2,"queueSize":13,"completedTaskCount":610,"taskCount":625,"totalThreadCount":63,"peakThreadCount":66,"poolUtilization":0.04,"queueUtilization":0.013,"throughput":27.3224043715847,"timestamp":1753951817389},"timestamp":1753951817390},"type":"threadpool_metrics"}
2025-07-31 16:50:17.390 [WebSocket-8] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:17.555 [WebSocket-6] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=4, message={"action":"refresh"}
2025-07-31 16:50:17.556 [WebSocket-4] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:50:17.556 [WebSocket-4] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":80,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":11,"avgMonitoringCostMs":207.48873636363635},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":13,"completedTaskCount":617,"taskCount":631,"totalThreadCount":63,"peakThreadCount":66,"poolUtilization":0.02,"queueUtilization":0.013,"throughput":41.91616766467066,"timestamp":1753951817556},"timestamp":1753951817556},"type":"threadpool_metrics"}
2025-07-31 16:50:17.556 [WebSocket-4] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:17.748 [WebSocket-7] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=4, message={"action":"refresh"}
2025-07-31 16:50:17.749 [WebSocket-8] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:50:17.750 [WebSocket-8] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":80,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":11,"avgMonitoringCostMs":207.48873636363635},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":13,"completedTaskCount":623,"taskCount":637,"totalThreadCount":63,"peakThreadCount":66,"poolUtilization":0.02,"queueUtilization":0.013,"throughput":31.088082901554404,"timestamp":1753951817749},"timestamp":1753951817749},"type":"threadpool_metrics"}
2025-07-31 16:50:17.750 [WebSocket-8] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:18.132 [WebSocket-5] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=4, message={"action":"refresh"}
2025-07-31 16:50:18.132 [WebSocket-6] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:50:18.133 [WebSocket-6] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":80,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":11,"avgMonitoringCostMs":207.48873636363635},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":13,"completedTaskCount":629,"taskCount":643,"totalThreadCount":63,"peakThreadCount":66,"poolUtilization":0.02,"queueUtilization":0.013,"throughput":15.66579634464752,"timestamp":1753951818132},"timestamp":1753951818132},"type":"threadpool_metrics"}
2025-07-31 16:50:18.133 [WebSocket-6] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:18.332 [WebSocket-7] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=4, message={"action":"refresh"}
2025-07-31 16:50:18.332 [WebSocket-7] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:50:18.334 [WebSocket-7] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":80,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":11,"avgMonitoringCostMs":207.48873636363635},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":13,"completedTaskCount":635,"taskCount":649,"totalThreadCount":63,"peakThreadCount":66,"poolUtilization":0.02,"queueUtilization":0.013,"throughput":30.0,"timestamp":1753951818332},"timestamp":1753951818332},"type":"threadpool_metrics"}
2025-07-31 16:50:18.334 [WebSocket-7] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:18.508 [WebSocket-1] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=4, message={"action":"refresh"}
2025-07-31 16:50:18.508 [WebSocket-8] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:50:18.509 [WebSocket-8] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":80,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":11,"avgMonitoringCostMs":207.48873636363635},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":13,"completedTaskCount":641,"taskCount":655,"totalThreadCount":63,"peakThreadCount":66,"poolUtilization":0.02,"queueUtilization":0.013,"throughput":33.898305084745765,"timestamp":1753951818509},"timestamp":1753951818509},"type":"threadpool_metrics"}
2025-07-31 16:50:18.510 [WebSocket-8] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:18.685 [WebSocket-2] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=4, message={"action":"refresh"}
2025-07-31 16:50:18.685 [WebSocket-7] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:50:18.686 [WebSocket-7] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":80,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":11,"avgMonitoringCostMs":207.48873636363635},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":13,"completedTaskCount":647,"taskCount":661,"totalThreadCount":63,"peakThreadCount":66,"poolUtilization":0.02,"queueUtilization":0.013,"throughput":33.898305084745765,"timestamp":1753951818686},"timestamp":1753951818686},"type":"threadpool_metrics"}
2025-07-31 16:50:18.686 [WebSocket-7] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:18.845 [WebSocket-9] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=4, message={"action":"refresh"}
2025-07-31 16:50:18.845 [WebSocket-8] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:50:18.847 [WebSocket-8] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":80,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":11,"avgMonitoringCostMs":207.48873636363635},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":13,"completedTaskCount":653,"taskCount":667,"totalThreadCount":63,"peakThreadCount":66,"poolUtilization":0.02,"queueUtilization":0.013,"throughput":37.735849056603776,"timestamp":1753951818845},"timestamp":1753951818845},"type":"threadpool_metrics"}
2025-07-31 16:50:18.847 [WebSocket-8] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:19.019 [WebSocket-10] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=4, message={"action":"refresh"}
2025-07-31 16:50:19.020 [WebSocket-9] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:50:19.020 [WebSocket-9] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":80,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":11,"avgMonitoringCostMs":207.48873636363635},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":13,"completedTaskCount":659,"taskCount":673,"totalThreadCount":63,"peakThreadCount":66,"poolUtilization":0.02,"queueUtilization":0.013,"throughput":34.285714285714285,"timestamp":1753951819020},"timestamp":1753951819020},"type":"threadpool_metrics"}
2025-07-31 16:50:19.021 [WebSocket-9] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:19.180 [WebSocket-1] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=4, message={"action":"refresh"}
2025-07-31 16:50:19.181 [WebSocket-2] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:50:19.181 [WebSocket-2] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":80,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":11,"avgMonitoringCostMs":207.48873636363635},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":13,"completedTaskCount":665,"taskCount":679,"totalThreadCount":63,"peakThreadCount":66,"poolUtilization":0.02,"queueUtilization":0.013,"throughput":37.267080745341616,"timestamp":1753951819181},"timestamp":1753951819181},"type":"threadpool_metrics"}
2025-07-31 16:50:19.182 [WebSocket-2] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:19.548 [WebSocket-9] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=4, message={"action":"refresh"}
2025-07-31 16:50:19.549 [WebSocket-3] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:50:19.549 [WebSocket-3] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":80,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":11,"avgMonitoringCostMs":207.48873636363635},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":13,"completedTaskCount":671,"taskCount":685,"totalThreadCount":63,"peakThreadCount":66,"poolUtilization":0.02,"queueUtilization":0.013,"throughput":16.304347826086957,"timestamp":1753951819549},"timestamp":1753951819549},"type":"threadpool_metrics"}
2025-07-31 16:50:19.549 [WebSocket-3] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:19.708 [WebSocket-2] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:50:19.708 [WebSocket-5] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=4, message={"action":"refresh"}
2025-07-31 16:50:19.709 [WebSocket-2] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":80,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":11,"avgMonitoringCostMs":207.48873636363635},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":2,"queueSize":13,"completedTaskCount":676,"taskCount":691,"totalThreadCount":63,"peakThreadCount":66,"poolUtilization":0.04,"queueUtilization":0.013,"throughput":31.446540880503143,"timestamp":1753951819708},"timestamp":1753951819708},"type":"threadpool_metrics"}
2025-07-31 16:50:19.709 [WebSocket-2] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:19.885 [WebSocket-4] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=4, message={"action":"refresh"}
2025-07-31 16:50:19.885 [WebSocket-4] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:50:19.886 [WebSocket-4] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":80,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":11,"avgMonitoringCostMs":207.48873636363635},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":13,"completedTaskCount":683,"taskCount":697,"totalThreadCount":63,"peakThreadCount":66,"poolUtilization":0.02,"queueUtilization":0.013,"throughput":39.548022598870055,"timestamp":1753951819885},"timestamp":1753951819885},"type":"threadpool_metrics"}
2025-07-31 16:50:19.886 [WebSocket-4] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:20.077 [WebSocket-5] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=4, message={"action":"refresh"}
2025-07-31 16:50:20.077 [WebSocket-2] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:50:20.078 [WebSocket-2] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":80,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":11,"avgMonitoringCostMs":207.48873636363635},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":13,"completedTaskCount":689,"taskCount":703,"totalThreadCount":63,"peakThreadCount":66,"poolUtilization":0.02,"queueUtilization":0.013,"throughput":31.25,"timestamp":1753951820077},"timestamp":1753951820077},"type":"threadpool_metrics"}
2025-07-31 16:50:20.078 [WebSocket-2] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:20.249 [WebSocket-7] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=4, message={"action":"refresh"}
2025-07-31 16:50:20.249 [WebSocket-4] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:50:20.250 [WebSocket-4] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":80,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":11,"avgMonitoringCostMs":207.48873636363635},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":13,"completedTaskCount":695,"taskCount":709,"totalThreadCount":63,"peakThreadCount":66,"poolUtilization":0.02,"queueUtilization":0.013,"throughput":34.88372093023256,"timestamp":1753951820249},"timestamp":1753951820249},"type":"threadpool_metrics"}
2025-07-31 16:50:20.250 [WebSocket-4] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:20.421 [WebSocket-6] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=4, message={"action":"refresh"}
2025-07-31 16:50:20.422 [WebSocket-2] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:50:20.422 [WebSocket-2] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":80,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":11,"avgMonitoringCostMs":207.48873636363635},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":13,"completedTaskCount":701,"taskCount":715,"totalThreadCount":63,"peakThreadCount":66,"poolUtilization":0.02,"queueUtilization":0.013,"throughput":34.68208092485549,"timestamp":1753951820422},"timestamp":1753951820422},"type":"threadpool_metrics"}
2025-07-31 16:50:20.422 [WebSocket-2] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:20.565 [WebSocket-9] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=4, message={"action":"refresh"}
2025-07-31 16:50:20.565 [WebSocket-5] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:50:20.566 [WebSocket-5] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":80,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":11,"avgMonitoringCostMs":207.48873636363635},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":13,"completedTaskCount":707,"taskCount":721,"totalThreadCount":63,"peakThreadCount":66,"poolUtilization":0.02,"queueUtilization":0.013,"throughput":41.95804195804196,"timestamp":1753951820565},"timestamp":1753951820565},"type":"threadpool_metrics"}
2025-07-31 16:50:20.566 [WebSocket-5] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:20.716 [WebSocket-1] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=4, message={"action":"refresh"}
2025-07-31 16:50:20.717 [WebSocket-2] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:50:20.718 [WebSocket-2] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":80,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":11,"avgMonitoringCostMs":207.48873636363635},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":13,"completedTaskCount":713,"taskCount":727,"totalThreadCount":63,"peakThreadCount":66,"poolUtilization":0.02,"queueUtilization":0.013,"throughput":39.473684210526315,"timestamp":1753951820717},"timestamp":1753951820717},"type":"threadpool_metrics"}
2025-07-31 16:50:20.718 [WebSocket-2] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:20.884 [WebSocket-8] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=4, message={"action":"refresh"}
2025-07-31 16:50:20.884 [WebSocket-1] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:50:20.885 [WebSocket-1] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":80,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":11,"avgMonitoringCostMs":207.48873636363635},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":13,"completedTaskCount":719,"taskCount":733,"totalThreadCount":63,"peakThreadCount":66,"poolUtilization":0.02,"queueUtilization":0.013,"throughput":35.92814371257485,"timestamp":1753951820884},"timestamp":1753951820884},"type":"threadpool_metrics"}
2025-07-31 16:50:20.885 [WebSocket-1] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:21.053 [WebSocket-6] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=4, message={"action":"refresh"}
2025-07-31 16:50:21.054 [WebSocket-2] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:50:21.054 [WebSocket-2] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":80,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":11,"avgMonitoringCostMs":207.48873636363635},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":13,"completedTaskCount":725,"taskCount":739,"totalThreadCount":63,"peakThreadCount":66,"poolUtilization":0.02,"queueUtilization":0.013,"throughput":35.29411764705882,"timestamp":1753951821054},"timestamp":1753951821054},"type":"threadpool_metrics"}
2025-07-31 16:50:21.054 [WebSocket-2] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:21.220 [WebSocket-5] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=4, message={"action":"refresh"}
2025-07-31 16:50:21.220 [WebSocket-7] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:50:21.221 [WebSocket-7] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":80,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":11,"avgMonitoringCostMs":207.48873636363635},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":13,"completedTaskCount":731,"taskCount":745,"totalThreadCount":63,"peakThreadCount":66,"poolUtilization":0.02,"queueUtilization":0.013,"throughput":35.92814371257485,"timestamp":1753951821221},"timestamp":1753951821221},"type":"threadpool_metrics"}
2025-07-31 16:50:21.221 [WebSocket-7] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:21.390 [WebSocket-6] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=4, message={"action":"refresh"}
2025-07-31 16:50:21.390 [WebSocket-5] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:50:21.390 [WebSocket-5] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":80,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":11,"avgMonitoringCostMs":207.48873636363635},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":13,"completedTaskCount":737,"taskCount":751,"totalThreadCount":63,"peakThreadCount":66,"poolUtilization":0.02,"queueUtilization":0.013,"throughput":35.50295857988166,"timestamp":1753951821390},"timestamp":1753951821390},"type":"threadpool_metrics"}
2025-07-31 16:50:21.390 [WebSocket-5] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:21.565 [WebSocket-3] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=4, message={"action":"refresh"}
2025-07-31 16:50:21.565 [WebSocket-10] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:50:21.566 [WebSocket-10] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":80,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":11,"avgMonitoringCostMs":207.48873636363635},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":13,"completedTaskCount":743,"taskCount":757,"totalThreadCount":63,"peakThreadCount":66,"poolUtilization":0.02,"queueUtilization":0.013,"throughput":34.285714285714285,"timestamp":1753951821565},"timestamp":1753951821565},"type":"threadpool_metrics"}
2025-07-31 16:50:21.566 [WebSocket-10] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:21.751 [WebSocket-5] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=4, message={"action":"refresh"}
2025-07-31 16:50:21.751 [WebSocket-8] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:50:21.752 [WebSocket-8] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":80,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":11,"avgMonitoringCostMs":207.48873636363635},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":13,"completedTaskCount":749,"taskCount":763,"totalThreadCount":63,"peakThreadCount":66,"poolUtilization":0.02,"queueUtilization":0.013,"throughput":32.25806451612903,"timestamp":1753951821751},"timestamp":1753951821751},"type":"threadpool_metrics"}
2025-07-31 16:50:21.752 [WebSocket-8] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:21.956 [WebSocket-10] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=4, message={"action":"refresh"}
2025-07-31 16:50:21.956 [WebSocket-5] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:50:21.957 [WebSocket-5] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":80,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":11,"avgMonitoringCostMs":207.48873636363635},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":13,"completedTaskCount":755,"taskCount":769,"totalThreadCount":63,"peakThreadCount":66,"poolUtilization":0.02,"queueUtilization":0.013,"throughput":29.26829268292683,"timestamp":1753951821956},"timestamp":1753951821956},"type":"threadpool_metrics"}
2025-07-31 16:50:21.957 [WebSocket-5] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:22.150 [WebSocket-8] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=4, message={"action":"refresh"}
2025-07-31 16:50:22.150 [WebSocket-6] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:50:22.150 [WebSocket-6] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":80,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":11,"avgMonitoringCostMs":207.48873636363635},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":13,"completedTaskCount":761,"taskCount":775,"totalThreadCount":63,"peakThreadCount":66,"poolUtilization":0.02,"queueUtilization":0.013,"throughput":30.927835051546392,"timestamp":1753951822150},"timestamp":1753951822150},"type":"threadpool_metrics"}
2025-07-31 16:50:22.151 [WebSocket-6] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:22.357 [WebSocket-9] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=4, message={"action":"refresh"}
2025-07-31 16:50:22.358 [WebSocket-5] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:50:22.358 [WebSocket-5] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":80,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":11,"avgMonitoringCostMs":207.48873636363635},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":13,"completedTaskCount":767,"taskCount":781,"totalThreadCount":63,"peakThreadCount":66,"poolUtilization":0.02,"queueUtilization":0.013,"throughput":28.846153846153847,"timestamp":1753951822358},"timestamp":1753951822358},"type":"threadpool_metrics"}
2025-07-31 16:50:22.358 [WebSocket-5] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:23.087 [http-nio-8080-exec-1] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已添加: service=chatroom, userId=test_user, sessionId=5
2025-07-31 16:50:23.087 [http-nio-8080-exec-1] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接建立: service=chatroom, userId=test_user, sessionId=5, clientIp=null
2025-07-31 16:50:23.092 [WebSocket-6] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=chatroom, 成功用户数=2, 失败用户数=0
2025-07-31 16:50:23.093 [WebSocket-6] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=chatroom, userId=test_user, message={"type":"system","message":"系统消息: 当前在线用户数: 2","timestamp":1753951823093}
2025-07-31 16:50:23.093 [WebSocket-6] INFO  c.f.w.e.ChatRoomWebSocketService - 用户加入聊天室: userId=test_user, 当前在线数: 2
2025-07-31 16:50:23.093 [WebSocket-6] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:23.133 [WebSocket-3] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:24.033 [http-nio-8080-exec-4] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已添加: service=chatroom, userId=test_user, sessionId=6
2025-07-31 16:50:24.036 [http-nio-8080-exec-4] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接建立: service=chatroom, userId=test_user, sessionId=6, clientIp=null
2025-07-31 16:50:24.039 [WebSocket-2] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=chatroom, 成功用户数=2, 失败用户数=0
2025-07-31 16:50:24.040 [WebSocket-2] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=chatroom, userId=test_user, message={"type":"system","message":"系统消息: 当前在线用户数: 2","timestamp":1753951824039}
2025-07-31 16:50:24.040 [WebSocket-2] INFO  c.f.w.e.ChatRoomWebSocketService - 用户加入聊天室: userId=test_user, 当前在线数: 2
2025-07-31 16:50:24.040 [WebSocket-2] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:24.073 [WebSocket-1] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:24.438 [WebSocket-9] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=chatroom, userId=test_user, sessionId=6, message={"action":"refresh"}
2025-07-31 16:50:24.440 [WebSocket-9] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=chatroom, 成功用户数=2, 失败用户数=0
2025-07-31 16:50:24.440 [WebSocket-9] INFO  c.f.w.e.ChatRoomWebSocketService - 收到聊天消息: userId=test_user, message={"action":"refresh"}
2025-07-31 16:50:24.440 [WebSocket-9] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:24.615 [WebSocket-5] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=chatroom, userId=test_user, sessionId=6, message={"action":"refresh"}
2025-07-31 16:50:24.616 [WebSocket-5] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=chatroom, 成功用户数=2, 失败用户数=0
2025-07-31 16:50:24.616 [WebSocket-5] INFO  c.f.w.e.ChatRoomWebSocketService - 收到聊天消息: userId=test_user, message={"action":"refresh"}
2025-07-31 16:50:24.616 [WebSocket-5] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:24.780 [WebSocket-6] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=chatroom, userId=test_user, sessionId=6, message={"action":"refresh"}
2025-07-31 16:50:24.782 [WebSocket-6] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=chatroom, 成功用户数=2, 失败用户数=0
2025-07-31 16:50:24.782 [WebSocket-6] INFO  c.f.w.e.ChatRoomWebSocketService - 收到聊天消息: userId=test_user, message={"action":"refresh"}
2025-07-31 16:50:24.783 [WebSocket-6] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:24.951 [WebSocket-4] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=chatroom, userId=test_user, sessionId=6, message={"action":"refresh"}
2025-07-31 16:50:24.952 [WebSocket-4] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=chatroom, 成功用户数=2, 失败用户数=0
2025-07-31 16:50:24.952 [WebSocket-4] INFO  c.f.w.e.ChatRoomWebSocketService - 收到聊天消息: userId=test_user, message={"action":"refresh"}
2025-07-31 16:50:24.952 [WebSocket-4] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:25.060 [WebSocket-9] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:50:25.065 [WebSocket-10] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=2, 失败用户数=0
2025-07-31 16:50:25.098 [WebSocket-9] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:50:25.116 [WebSocket-1] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=chatroom, userId=test_user, sessionId=6, message={"action":"refresh"}
2025-07-31 16:50:25.117 [WebSocket-8] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=chatroom, 成功用户数=2, 失败用户数=0
2025-07-31 16:50:25.117 [WebSocket-8] INFO  c.f.w.e.ChatRoomWebSocketService - 收到聊天消息: userId=test_user, message={"action":"refresh"}
2025-07-31 16:50:25.117 [WebSocket-8] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:25.438 [WebSocket-10] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=chatroom, userId=test_user, sessionId=6, message={"action":"refresh"}
2025-07-31 16:50:25.440 [WebSocket-1] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=chatroom, 成功用户数=2, 失败用户数=0
2025-07-31 16:50:25.440 [WebSocket-1] INFO  c.f.w.e.ChatRoomWebSocketService - 收到聊天消息: userId=test_user, message={"action":"refresh"}
2025-07-31 16:50:25.440 [WebSocket-1] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:25.605 [WebSocket-8] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=chatroom, userId=test_user, sessionId=6, message={"action":"refresh"}
2025-07-31 16:50:25.606 [WebSocket-9] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=chatroom, 成功用户数=2, 失败用户数=0
2025-07-31 16:50:25.606 [WebSocket-9] INFO  c.f.w.e.ChatRoomWebSocketService - 收到聊天消息: userId=test_user, message={"action":"refresh"}
2025-07-31 16:50:25.606 [WebSocket-9] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:25.789 [WebSocket-6] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=chatroom, userId=test_user, sessionId=6, message={"action":"refresh"}
2025-07-31 16:50:25.790 [WebSocket-6] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=chatroom, 成功用户数=2, 失败用户数=0
2025-07-31 16:50:25.790 [WebSocket-6] INFO  c.f.w.e.ChatRoomWebSocketService - 收到聊天消息: userId=test_user, message={"action":"refresh"}
2025-07-31 16:50:25.790 [WebSocket-6] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:25.856 [WebSocket-5] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:25.964 [WebSocket-10] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=chatroom, userId=test_user, sessionId=6, message={"action":"refresh"}
2025-07-31 16:50:25.964 [WebSocket-8] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=chatroom, 成功用户数=2, 失败用户数=0
2025-07-31 16:50:25.964 [WebSocket-8] INFO  c.f.w.e.ChatRoomWebSocketService - 收到聊天消息: userId=test_user, message={"action":"refresh"}
2025-07-31 16:50:25.964 [WebSocket-8] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:26.125 [WebSocket-9] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=chatroom, userId=test_user, sessionId=6, message={"action":"refresh"}
2025-07-31 16:50:26.127 [WebSocket-1] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=chatroom, 成功用户数=2, 失败用户数=0
2025-07-31 16:50:26.127 [WebSocket-1] INFO  c.f.w.e.ChatRoomWebSocketService - 收到聊天消息: userId=test_user, message={"action":"refresh"}
2025-07-31 16:50:26.127 [WebSocket-1] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:26.300 [WebSocket-7] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=chatroom, userId=test_user, sessionId=6, message={"action":"refresh"}
2025-07-31 16:50:26.302 [WebSocket-7] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=chatroom, 成功用户数=2, 失败用户数=0
2025-07-31 16:50:26.302 [WebSocket-7] INFO  c.f.w.e.ChatRoomWebSocketService - 收到聊天消息: userId=test_user, message={"action":"refresh"}
2025-07-31 16:50:26.302 [WebSocket-7] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:26.464 [WebSocket-8] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=chatroom, userId=test_user, sessionId=6, message={"action":"refresh"}
2025-07-31 16:50:26.465 [WebSocket-3] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=chatroom, 成功用户数=2, 失败用户数=0
2025-07-31 16:50:26.465 [WebSocket-3] INFO  c.f.w.e.ChatRoomWebSocketService - 收到聊天消息: userId=test_user, message={"action":"refresh"}
2025-07-31 16:50:26.465 [WebSocket-3] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:26.765 [WebSocket-7] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=chatroom, userId=test_user, sessionId=6, message={"action":"refresh"}
2025-07-31 16:50:26.766 [WebSocket-7] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=chatroom, 成功用户数=2, 失败用户数=0
2025-07-31 16:50:26.766 [WebSocket-7] INFO  c.f.w.e.ChatRoomWebSocketService - 收到聊天消息: userId=test_user, message={"action":"refresh"}
2025-07-31 16:50:26.766 [WebSocket-7] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:27.277 [WebSocket-9] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=chatroom, userId=test_user, sessionId=6, message={"action":"refresh"}
2025-07-31 16:50:27.278 [WebSocket-1] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=chatroom, 成功用户数=2, 失败用户数=0
2025-07-31 16:50:27.278 [WebSocket-1] INFO  c.f.w.e.ChatRoomWebSocketService - 收到聊天消息: userId=test_user, message={"action":"refresh"}
2025-07-31 16:50:27.279 [WebSocket-1] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:27.588 [WebSocket-3] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=chatroom, userId=test_user, sessionId=6, message={"action":"refresh"}
2025-07-31 16:50:27.589 [WebSocket-3] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=chatroom, 成功用户数=2, 失败用户数=0
2025-07-31 16:50:27.590 [WebSocket-3] INFO  c.f.w.e.ChatRoomWebSocketService - 收到聊天消息: userId=test_user, message={"action":"refresh"}
2025-07-31 16:50:27.590 [WebSocket-3] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:27.767 [WebSocket-4] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=chatroom, userId=test_user, sessionId=6, message={"action":"refresh"}
2025-07-31 16:50:27.767 [WebSocket-9] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=chatroom, 成功用户数=2, 失败用户数=0
2025-07-31 16:50:27.768 [WebSocket-9] INFO  c.f.w.e.ChatRoomWebSocketService - 收到聊天消息: userId=test_user, message={"action":"refresh"}
2025-07-31 16:50:27.768 [WebSocket-9] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:28.013 [WebSocket-2] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=chatroom, userId=test_user, sessionId=6, message={"action":"refresh"}
2025-07-31 16:50:28.014 [WebSocket-3] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=chatroom, 成功用户数=2, 失败用户数=0
2025-07-31 16:50:28.014 [WebSocket-3] INFO  c.f.w.e.ChatRoomWebSocketService - 收到聊天消息: userId=test_user, message={"action":"refresh"}
2025-07-31 16:50:28.015 [WebSocket-3] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:28.181 [WebSocket-5] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=chatroom, userId=test_user, sessionId=6, message={"action":"refresh"}
2025-07-31 16:50:28.182 [WebSocket-5] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=chatroom, 成功用户数=2, 失败用户数=0
2025-07-31 16:50:28.182 [WebSocket-5] INFO  c.f.w.e.ChatRoomWebSocketService - 收到聊天消息: userId=test_user, message={"action":"refresh"}
2025-07-31 16:50:28.183 [WebSocket-5] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:28.350 [WebSocket-7] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=chatroom, userId=test_user, sessionId=6, message={"action":"refresh"}
2025-07-31 16:50:28.350 [WebSocket-9] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=chatroom, 成功用户数=2, 失败用户数=0
2025-07-31 16:50:28.350 [WebSocket-9] INFO  c.f.w.e.ChatRoomWebSocketService - 收到聊天消息: userId=test_user, message={"action":"refresh"}
2025-07-31 16:50:28.350 [WebSocket-9] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:28.500 [WebSocket-8] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=chatroom, userId=test_user, sessionId=6, message={"action":"refresh"}
2025-07-31 16:50:28.501 [WebSocket-5] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=chatroom, 成功用户数=2, 失败用户数=0
2025-07-31 16:50:28.501 [WebSocket-5] INFO  c.f.w.e.ChatRoomWebSocketService - 收到聊天消息: userId=test_user, message={"action":"refresh"}
2025-07-31 16:50:28.501 [WebSocket-5] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:28.687 [WebSocket-1] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=chatroom, userId=test_user, sessionId=6, message={"action":"refresh"}
2025-07-31 16:50:28.688 [WebSocket-1] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=chatroom, 成功用户数=2, 失败用户数=0
2025-07-31 16:50:28.688 [WebSocket-1] INFO  c.f.w.e.ChatRoomWebSocketService - 收到聊天消息: userId=test_user, message={"action":"refresh"}
2025-07-31 16:50:28.688 [WebSocket-1] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:28.845 [WebSocket-10] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=chatroom, userId=test_user, sessionId=6, message={"action":"refresh"}
2025-07-31 16:50:28.845 [WebSocket-10] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=chatroom, 成功用户数=2, 失败用户数=0
2025-07-31 16:50:28.846 [WebSocket-10] INFO  c.f.w.e.ChatRoomWebSocketService - 收到聊天消息: userId=test_user, message={"action":"refresh"}
2025-07-31 16:50:28.846 [WebSocket-10] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:29.096 [pool-1-thread-1] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=notification, userId=user2, message={"type":"notification","title":"定时推送","content":"这是一个定时推送消息: 1753951829093","level":"info","timestamp":1753951829093}
2025-07-31 16:50:29.225 [WebSocket-6] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:30.060 [WebSocket-3] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:50:30.062 [WebSocket-3] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=2, 失败用户数=0
2025-07-31 16:50:30.757 [http-nio-8080-exec-9] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已添加: service=monitor, userId=test_user, sessionId=7
2025-07-31 16:50:30.758 [http-nio-8080-exec-9] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接建立: service=monitor, userId=test_user, sessionId=7, clientIp=null
2025-07-31 16:50:30.760 [WebSocket-1] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端连接: test_user
2025-07-31 16:50:30.763 [WebSocket-1] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"type":"welcome","message":"欢迎连接线程池监控中心","timestamp":1753951830763}
2025-07-31 16:50:30.764 [WebSocket-1] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:50:30.764 [WebSocket-1] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":80,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":11,"avgMonitoringCostMs":207.48873636363635},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":16,"completedTaskCount":947,"taskCount":964,"totalThreadCount":63,"peakThreadCount":66,"poolUtilization":0.02,"queueUtilization":0.016,"throughput":8.534850640113799,"timestamp":1753951830764},"timestamp":1753951830764},"type":"threadpool_metrics"}
2025-07-31 16:50:30.765 [WebSocket-1] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:30.802 [WebSocket-4] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:31.975 [WebSocket-9] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=7, message={"action":"refresh"}
2025-07-31 16:50:31.975 [WebSocket-5] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:50:31.977 [WebSocket-5] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":80,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":11,"avgMonitoringCostMs":207.48873636363635},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":16,"completedTaskCount":958,"taskCount":975,"totalThreadCount":63,"peakThreadCount":66,"poolUtilization":0.02,"queueUtilization":0.016,"throughput":9.08340214698596,"timestamp":1753951831975},"timestamp":1753951831975},"type":"threadpool_metrics"}
2025-07-31 16:50:31.978 [WebSocket-5] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:32.187 [WebSocket-8] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=7, message={"action":"refresh"}
2025-07-31 16:50:32.188 [WebSocket-8] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:50:32.188 [WebSocket-8] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":80,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":11,"avgMonitoringCostMs":207.48873636363635},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":16,"completedTaskCount":964,"taskCount":981,"totalThreadCount":63,"peakThreadCount":66,"poolUtilization":0.02,"queueUtilization":0.016,"throughput":28.169014084507044,"timestamp":1753951832188},"timestamp":1753951832188},"type":"threadpool_metrics"}
2025-07-31 16:50:32.189 [WebSocket-8] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:32.469 [WebSocket-5] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=7, message={"action":"refresh"}
2025-07-31 16:50:32.469 [WebSocket-7] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:50:32.470 [WebSocket-7] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":80,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":11,"avgMonitoringCostMs":207.48873636363635},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":16,"completedTaskCount":970,"taskCount":987,"totalThreadCount":63,"peakThreadCount":66,"poolUtilization":0.02,"queueUtilization":0.016,"throughput":21.352313167259783,"timestamp":1753951832469},"timestamp":1753951832469},"type":"threadpool_metrics"}
2025-07-31 16:50:32.470 [WebSocket-7] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:32.636 [WebSocket-4] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=7, message={"action":"refresh"}
2025-07-31 16:50:32.637 [WebSocket-4] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:50:32.637 [WebSocket-4] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":80,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":11,"avgMonitoringCostMs":207.48873636363635},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":16,"completedTaskCount":976,"taskCount":993,"totalThreadCount":63,"peakThreadCount":66,"poolUtilization":0.02,"queueUtilization":0.016,"throughput":35.714285714285715,"timestamp":1753951832637},"timestamp":1753951832637},"type":"threadpool_metrics"}
2025-07-31 16:50:32.638 [WebSocket-4] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:32.788 [WebSocket-7] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=7, message={"action":"refresh"}
2025-07-31 16:50:32.788 [WebSocket-8] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:50:32.789 [WebSocket-8] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":80,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":11,"avgMonitoringCostMs":207.48873636363635},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":16,"completedTaskCount":982,"taskCount":999,"totalThreadCount":63,"peakThreadCount":66,"poolUtilization":0.02,"queueUtilization":0.016,"throughput":39.473684210526315,"timestamp":1753951832789},"timestamp":1753951832789},"type":"threadpool_metrics"}
2025-07-31 16:50:32.789 [WebSocket-8] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:32.988 [WebSocket-6] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=7, message={"action":"refresh"}
2025-07-31 16:50:32.988 [WebSocket-7] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:50:32.989 [WebSocket-7] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":80,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":11,"avgMonitoringCostMs":207.48873636363635},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":16,"completedTaskCount":988,"taskCount":1005,"totalThreadCount":63,"peakThreadCount":66,"poolUtilization":0.02,"queueUtilization":0.016,"throughput":30.15075376884422,"timestamp":1753951832988},"timestamp":1753951832988},"type":"threadpool_metrics"}
2025-07-31 16:50:32.989 [WebSocket-7] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:33.483 [http-nio-8080-exec-7] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已移除: service=monitor, userId=test_user, sessionId=7
2025-07-31 16:50:33.483 [http-nio-8080-exec-7] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接关闭: service=monitor, userId=test_user, sessionId=7, code=NORMAL_CLOSURE, reason=null
2025-07-31 16:50:33.484 [WebSocket-8] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端断开: test_user
2025-07-31 16:50:33.484 [WebSocket-8] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:35.262 [http-nio-8080-exec-8] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已添加: service=monitor, userId=test_user, sessionId=8
2025-07-31 16:50:35.263 [http-nio-8080-exec-8] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接建立: service=monitor, userId=test_user, sessionId=8, clientIp=null
2025-07-31 16:50:35.264 [WebSocket-1] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端连接: test_user
2025-07-31 16:50:35.265 [WebSocket-1] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"type":"welcome","message":"欢迎连接线程池监控中心","timestamp":1753951835264}
2025-07-31 16:50:35.266 [WebSocket-1] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:50:35.267 [WebSocket-1] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":80,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":11,"avgMonitoringCostMs":207.48873636363635},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":17,"completedTaskCount":999,"taskCount":1017,"totalThreadCount":63,"peakThreadCount":66,"poolUtilization":0.02,"queueUtilization":0.017,"throughput":4.8287971905179985,"timestamp":1753951835266},"timestamp":1753951835266},"type":"threadpool_metrics"}
2025-07-31 16:50:35.267 [WebSocket-1] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:35.300 [WebSocket-10] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:35.927 [WebSocket-5] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=8, message={"action":"refresh"}
2025-07-31 16:50:35.927 [WebSocket-9] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:50:35.928 [WebSocket-9] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":80,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":11,"avgMonitoringCostMs":207.48873636363635},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":17,"completedTaskCount":1010,"taskCount":1028,"totalThreadCount":63,"peakThreadCount":66,"poolUtilization":0.02,"queueUtilization":0.017,"throughput":16.64145234493192,"timestamp":1753951835927},"timestamp":1753951835927},"type":"threadpool_metrics"}
2025-07-31 16:50:35.928 [WebSocket-9] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:36.102 [WebSocket-4] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=8, message={"action":"refresh"}
2025-07-31 16:50:36.103 [WebSocket-3] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:50:36.103 [WebSocket-3] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":80,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":11,"avgMonitoringCostMs":207.48873636363635},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":17,"completedTaskCount":1016,"taskCount":1034,"totalThreadCount":63,"peakThreadCount":66,"poolUtilization":0.02,"queueUtilization":0.017,"throughput":34.09090909090909,"timestamp":1753951836103},"timestamp":1753951836103},"type":"threadpool_metrics"}
2025-07-31 16:50:36.104 [WebSocket-3] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:36.268 [WebSocket-7] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=8, message={"action":"refresh"}
2025-07-31 16:50:36.268 [WebSocket-7] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:50:36.269 [WebSocket-7] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":80,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":11,"avgMonitoringCostMs":207.48873636363635},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":17,"completedTaskCount":1022,"taskCount":1040,"totalThreadCount":63,"peakThreadCount":66,"poolUtilization":0.02,"queueUtilization":0.017,"throughput":36.36363636363636,"timestamp":1753951836268},"timestamp":1753951836268},"type":"threadpool_metrics"}
2025-07-31 16:50:36.269 [WebSocket-7] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:36.480 [WebSocket-6] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=8, message={"action":"refresh"}
2025-07-31 16:50:36.480 [WebSocket-6] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:50:36.481 [WebSocket-6] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":80,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":11,"avgMonitoringCostMs":207.48873636363635},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":17,"completedTaskCount":1028,"taskCount":1046,"totalThreadCount":63,"peakThreadCount":66,"poolUtilization":0.02,"queueUtilization":0.017,"throughput":28.30188679245283,"timestamp":1753951836480},"timestamp":1753951836480},"type":"threadpool_metrics"}
2025-07-31 16:50:36.481 [WebSocket-6] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:36.636 [WebSocket-2] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=8, message={"action":"refresh"}
2025-07-31 16:50:36.636 [WebSocket-7] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:50:36.637 [WebSocket-7] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":80,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":11,"avgMonitoringCostMs":207.48873636363635},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":17,"completedTaskCount":1034,"taskCount":1052,"totalThreadCount":63,"peakThreadCount":66,"poolUtilization":0.02,"queueUtilization":0.017,"throughput":38.21656050955414,"timestamp":1753951836637},"timestamp":1753951836637},"type":"threadpool_metrics"}
2025-07-31 16:50:36.637 [WebSocket-7] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:36.839 [WebSocket-8] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=8, message={"action":"refresh"}
2025-07-31 16:50:36.839 [WebSocket-2] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:50:36.840 [WebSocket-2] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":80,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":11,"avgMonitoringCostMs":207.48873636363635},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":17,"completedTaskCount":1040,"taskCount":1058,"totalThreadCount":63,"peakThreadCount":66,"poolUtilization":0.02,"queueUtilization":0.017,"throughput":29.7029702970297,"timestamp":1753951836839},"timestamp":1753951836839},"type":"threadpool_metrics"}
2025-07-31 16:50:36.840 [WebSocket-2] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:37.069 [WebSocket-10] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=8, message={"action":"refresh"}
2025-07-31 16:50:37.070 [WebSocket-10] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:50:37.070 [WebSocket-10] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":80,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":11,"avgMonitoringCostMs":207.48873636363635},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":17,"completedTaskCount":1049,"taskCount":1067,"totalThreadCount":63,"peakThreadCount":66,"poolUtilization":0.02,"queueUtilization":0.017,"throughput":38.96103896103896,"timestamp":1753951837070},"timestamp":1753951837070},"type":"threadpool_metrics"}
2025-07-31 16:50:37.071 [WebSocket-10] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:37.085 [WebSocket-9] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:37.245 [WebSocket-8] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=8, message={"action":"refresh"}
2025-07-31 16:50:37.245 [WebSocket-8] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:50:37.246 [WebSocket-8] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":80,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":11,"avgMonitoringCostMs":207.48873636363635},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":17,"completedTaskCount":1060,"taskCount":1078,"totalThreadCount":63,"peakThreadCount":66,"poolUtilization":0.02,"queueUtilization":0.017,"throughput":62.50000000000001,"timestamp":1753951837246},"timestamp":1753951837246},"type":"threadpool_metrics"}
2025-07-31 16:50:37.246 [WebSocket-8] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:37.429 [WebSocket-1] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=8, message={"action":"refresh"}
2025-07-31 16:50:37.430 [WebSocket-7] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:50:37.430 [WebSocket-7] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":80,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":11,"avgMonitoringCostMs":207.48873636363635},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":17,"completedTaskCount":1066,"taskCount":1084,"totalThreadCount":63,"peakThreadCount":66,"poolUtilization":0.02,"queueUtilization":0.017,"throughput":32.608695652173914,"timestamp":1753951837430},"timestamp":1753951837430},"type":"threadpool_metrics"}
2025-07-31 16:50:37.430 [WebSocket-7] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:37.572 [WebSocket-2] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=8, message={"action":"refresh"}
2025-07-31 16:50:37.573 [WebSocket-8] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:50:37.574 [WebSocket-8] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":80,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":11,"avgMonitoringCostMs":207.48873636363635},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":17,"completedTaskCount":1072,"taskCount":1090,"totalThreadCount":63,"peakThreadCount":66,"poolUtilization":0.02,"queueUtilization":0.017,"throughput":41.95804195804196,"timestamp":1753951837573},"timestamp":1753951837573},"type":"threadpool_metrics"}
2025-07-31 16:50:37.574 [WebSocket-8] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:37.741 [WebSocket-1] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=8, message={"action":"refresh"}
2025-07-31 16:50:37.742 [WebSocket-1] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:50:37.743 [WebSocket-1] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":80,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":11,"avgMonitoringCostMs":207.48873636363635},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":17,"completedTaskCount":1078,"taskCount":1096,"totalThreadCount":63,"peakThreadCount":66,"poolUtilization":0.02,"queueUtilization":0.017,"throughput":35.50295857988166,"timestamp":1753951837742},"timestamp":1753951837742},"type":"threadpool_metrics"}
2025-07-31 16:50:37.743 [WebSocket-1] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:38.662 [http-nio-8080-exec-2] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已添加: service=chatroom, userId=test_user, sessionId=9
2025-07-31 16:50:38.663 [http-nio-8080-exec-2] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接建立: service=chatroom, userId=test_user, sessionId=9, clientIp=null
2025-07-31 16:50:38.664 [WebSocket-8] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=chatroom, 成功用户数=2, 失败用户数=0
2025-07-31 16:50:38.665 [WebSocket-8] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=chatroom, userId=test_user, message={"type":"system","message":"系统消息: 当前在线用户数: 2","timestamp":1753951838664}
2025-07-31 16:50:38.665 [WebSocket-8] INFO  c.f.w.e.ChatRoomWebSocketService - 用户加入聊天室: userId=test_user, 当前在线数: 2
2025-07-31 16:50:38.665 [WebSocket-8] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:38.696 [WebSocket-4] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:39.253 [WebSocket-3] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=chatroom, userId=test_user, sessionId=9, message={"action":"refresh"}
2025-07-31 16:50:39.255 [WebSocket-10] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=chatroom, 成功用户数=2, 失败用户数=0
2025-07-31 16:50:39.255 [WebSocket-10] INFO  c.f.w.e.ChatRoomWebSocketService - 收到聊天消息: userId=test_user, message={"action":"refresh"}
2025-07-31 16:50:39.255 [WebSocket-10] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:39.431 [WebSocket-9] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=chatroom, userId=test_user, sessionId=9, message={"action":"refresh"}
2025-07-31 16:50:39.431 [WebSocket-5] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=chatroom, 成功用户数=2, 失败用户数=0
2025-07-31 16:50:39.431 [WebSocket-5] INFO  c.f.w.e.ChatRoomWebSocketService - 收到聊天消息: userId=test_user, message={"action":"refresh"}
2025-07-31 16:50:39.431 [WebSocket-5] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:39.590 [WebSocket-10] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=chatroom, userId=test_user, sessionId=9, message={"action":"refresh"}
2025-07-31 16:50:39.592 [WebSocket-10] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=chatroom, 成功用户数=2, 失败用户数=0
2025-07-31 16:50:39.592 [WebSocket-10] INFO  c.f.w.e.ChatRoomWebSocketService - 收到聊天消息: userId=test_user, message={"action":"refresh"}
2025-07-31 16:50:39.592 [WebSocket-10] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:39.772 [WebSocket-7] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=chatroom, userId=test_user, sessionId=9, message={"action":"refresh"}
2025-07-31 16:50:39.773 [WebSocket-7] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=chatroom, 成功用户数=2, 失败用户数=0
2025-07-31 16:50:39.773 [WebSocket-7] INFO  c.f.w.e.ChatRoomWebSocketService - 收到聊天消息: userId=test_user, message={"action":"refresh"}
2025-07-31 16:50:39.773 [WebSocket-7] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:39.972 [WebSocket-2] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=chatroom, userId=test_user, sessionId=9, message={"action":"refresh"}
2025-07-31 16:50:39.973 [WebSocket-2] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=chatroom, 成功用户数=2, 失败用户数=0
2025-07-31 16:50:39.973 [WebSocket-2] INFO  c.f.w.e.ChatRoomWebSocketService - 收到聊天消息: userId=test_user, message={"action":"refresh"}
2025-07-31 16:50:39.973 [WebSocket-2] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:40.057 [WebSocket-5] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=2, 失败用户数=0
2025-07-31 16:50:40.149 [WebSocket-7] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=chatroom, userId=test_user, sessionId=9, message={"action":"refresh"}
2025-07-31 16:50:40.150 [WebSocket-2] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=chatroom, 成功用户数=2, 失败用户数=0
2025-07-31 16:50:40.151 [WebSocket-2] INFO  c.f.w.e.ChatRoomWebSocketService - 收到聊天消息: userId=test_user, message={"action":"refresh"}
2025-07-31 16:50:40.151 [WebSocket-2] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:40.660 [http-nio-8080-exec-8] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已移除: service=chatroom, userId=test_user, sessionId=9
2025-07-31 16:50:40.661 [http-nio-8080-exec-8] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接关闭: service=chatroom, userId=test_user, sessionId=9, code=NORMAL_CLOSURE, reason=null
2025-07-31 16:50:40.663 [WebSocket-6] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=chatroom, 成功用户数=1, 失败用户数=0
2025-07-31 16:50:40.665 [WebSocket-6] INFO  c.f.w.e.ChatRoomWebSocketService - 用户离开聊天室: userId=test_user, 当前在线数: 1
2025-07-31 16:50:40.665 [WebSocket-6] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:40.997 [http-nio-8080-exec-9] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已添加: service=chatroom, userId=test_user, sessionId=a
2025-07-31 16:50:40.997 [http-nio-8080-exec-9] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接建立: service=chatroom, userId=test_user, sessionId=a, clientIp=null
2025-07-31 16:50:40.999 [WebSocket-2] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=chatroom, 成功用户数=2, 失败用户数=0
2025-07-31 16:50:41.000 [WebSocket-2] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=chatroom, userId=test_user, message={"type":"system","message":"系统消息: 当前在线用户数: 2","timestamp":1753951840999}
2025-07-31 16:50:41.000 [WebSocket-2] INFO  c.f.w.e.ChatRoomWebSocketService - 用户加入聊天室: userId=test_user, 当前在线数: 2
2025-07-31 16:50:41.000 [WebSocket-2] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:41.042 [WebSocket-1] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:41.516 [WebSocket-8] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=chatroom, userId=test_user, sessionId=a, message={"action":"refresh"}
2025-07-31 16:50:41.518 [WebSocket-3] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=chatroom, 成功用户数=2, 失败用户数=0
2025-07-31 16:50:41.518 [WebSocket-3] INFO  c.f.w.e.ChatRoomWebSocketService - 收到聊天消息: userId=test_user, message={"action":"refresh"}
2025-07-31 16:50:41.518 [WebSocket-3] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:41.686 [WebSocket-5] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=chatroom, userId=test_user, sessionId=a, message={"action":"refresh"}
2025-07-31 16:50:41.687 [WebSocket-10] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=chatroom, 成功用户数=2, 失败用户数=0
2025-07-31 16:50:41.687 [WebSocket-10] INFO  c.f.w.e.ChatRoomWebSocketService - 收到聊天消息: userId=test_user, message={"action":"refresh"}
2025-07-31 16:50:41.687 [WebSocket-10] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:41.837 [WebSocket-4] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=chatroom, userId=test_user, sessionId=a, message={"action":"refresh"}
2025-07-31 16:50:41.838 [WebSocket-7] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=chatroom, 成功用户数=2, 失败用户数=0
2025-07-31 16:50:41.838 [WebSocket-7] INFO  c.f.w.e.ChatRoomWebSocketService - 收到聊天消息: userId=test_user, message={"action":"refresh"}
2025-07-31 16:50:41.838 [WebSocket-7] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:41.988 [WebSocket-9] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=chatroom, userId=test_user, sessionId=a, message={"action":"refresh"}
2025-07-31 16:50:41.989 [WebSocket-10] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=chatroom, 成功用户数=2, 失败用户数=0
2025-07-31 16:50:41.989 [WebSocket-10] INFO  c.f.w.e.ChatRoomWebSocketService - 收到聊天消息: userId=test_user, message={"action":"refresh"}
2025-07-31 16:50:41.989 [WebSocket-10] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:42.166 [WebSocket-5] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=chatroom, userId=test_user, sessionId=a, message={"action":"refresh"}
2025-07-31 16:50:42.166 [WebSocket-8] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=chatroom, 成功用户数=2, 失败用户数=0
2025-07-31 16:50:42.166 [WebSocket-8] INFO  c.f.w.e.ChatRoomWebSocketService - 收到聊天消息: userId=test_user, message={"action":"refresh"}
2025-07-31 16:50:42.166 [WebSocket-8] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:42.341 [WebSocket-6] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=chatroom, userId=test_user, sessionId=a, message={"action":"refresh"}
2025-07-31 16:50:42.341 [WebSocket-3] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=chatroom, 成功用户数=2, 失败用户数=0
2025-07-31 16:50:42.341 [WebSocket-3] INFO  c.f.w.e.ChatRoomWebSocketService - 收到聊天消息: userId=test_user, message={"action":"refresh"}
2025-07-31 16:50:42.341 [WebSocket-3] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:43.358 [WebSocket-6] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:43.649 [WebSocket-1] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753951453154_3pmq4f45z, sessionId=1, message={"action":"refresh","timestamp":1753951843648}
2025-07-31 16:50:43.649 [WebSocket-1] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:50:43.651 [WebSocket-1] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753951453154_3pmq4f45z, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":80,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":11,"avgMonitoringCostMs":207.48873636363635},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":19,"completedTaskCount":1192,"taskCount":1212,"totalThreadCount":63,"peakThreadCount":66,"poolUtilization":0.02,"queueUtilization":0.019,"throughput":19.299136617572373,"timestamp":1753951843650},"timestamp":1753951843650},"type":"threadpool_metrics"}
2025-07-31 16:50:43.652 [WebSocket-1] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:53.123 [WebSocket-6] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:54.076 [WebSocket-1] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:55.061 [WebSocket-7] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:50:55.863 [WebSocket-9] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:50:59.094 [pool-1-thread-2] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=notification, userId=user2, message={"type":"notification","title":"定时推送","content":"这是一个定时推送消息: 1753951859093","level":"info","timestamp":1753951859093}
2025-07-31 16:50:59.213 [WebSocket-2] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:51:00.062 [WebSocket-3] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:51:00.064 [WebSocket-3] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=2, 失败用户数=0
2025-07-31 16:51:05.322 [WebSocket-8] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:51:07.090 [WebSocket-6] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:51:10.064 [WebSocket-1] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=2, 失败用户数=0
2025-07-31 16:51:11.053 [WebSocket-7] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:51:13.162 [WebSocket-9] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753951453154_3pmq4f45z, sessionId=1, message={"action":"refresh","timestamp":1753951873162}
2025-07-31 16:51:13.162 [WebSocket-8] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:51:13.162 [WebSocket-8] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753951453154_3pmq4f45z, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":80,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":12,"avgMonitoringCostMs":190.198225},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":17,"completedTaskCount":1261,"taskCount":1279,"totalThreadCount":63,"peakThreadCount":66,"poolUtilization":0.02,"queueUtilization":0.017,"throughput":2.519276280632109,"timestamp":1753951873162},"timestamp":1753951873162},"type":"threadpool_metrics"}
2025-07-31 16:51:13.162 [WebSocket-8] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:51:13.351 [WebSocket-2] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:51:23.134 [WebSocket-6] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:51:24.181 [WebSocket-3] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:51:25.054 [WebSocket-9] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=2, 失败用户数=0
2025-07-31 16:51:25.054 [WebSocket-9] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:51:25.978 [WebSocket-10] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:51:29.093 [pool-1-thread-2] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=notification, userId=user2, message={"type":"notification","title":"定时推送","content":"这是一个定时推送消息: 1753951889093","level":"info","timestamp":1753951889093}
2025-07-31 16:51:29.244 [WebSocket-6] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:51:30.060 [WebSocket-8] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:51:30.060 [WebSocket-8] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=2, 失败用户数=0
2025-07-31 16:51:35.361 [WebSocket-1] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:51:37.138 [WebSocket-2] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:51:40.067 [WebSocket-4] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=2, 失败用户数=0
2025-07-31 16:51:41.050 [WebSocket-5] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:51:43.163 [WebSocket-7] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753951453154_3pmq4f45z, sessionId=1, message={"action":"refresh","timestamp":1753951903161}
2025-07-31 16:51:43.163 [WebSocket-8] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:51:43.163 [WebSocket-8] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753951453154_3pmq4f45z, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":80,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":12,"avgMonitoringCostMs":190.198225},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":17,"completedTaskCount":1336,"taskCount":1354,"totalThreadCount":63,"peakThreadCount":66,"poolUtilization":0.02,"queueUtilization":0.017,"throughput":2.365870411356178,"timestamp":1753951903163},"timestamp":1753951903163},"type":"threadpool_metrics"}
2025-07-31 16:51:43.163 [WebSocket-8] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:51:43.362 [WebSocket-6] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:51:53.149 [WebSocket-9] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:51:54.095 [WebSocket-3] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:51:55.061 [WebSocket-7] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:51:55.880 [WebSocket-6] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:51:59.090 [pool-1-thread-1] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=notification, userId=user2, message={"type":"notification","title":"定时推送","content":"这是一个定时推送消息: 1753951919090","level":"info","timestamp":1753951919090}
2025-07-31 16:51:59.241 [WebSocket-2] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:52:00.058 [WebSocket-7] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:52:00.058 [WebSocket-7] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=2, 失败用户数=0
2025-07-31 16:52:05.334 [WebSocket-4] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:52:07.116 [WebSocket-8] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:52:10.060 [WebSocket-10] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=2, 失败用户数=0
2025-07-31 16:52:11.061 [WebSocket-8] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:52:13.321 [WebSocket-3] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753951453154_3pmq4f45z, sessionId=1, message={"action":"refresh","timestamp":1753951933319}
2025-07-31 16:52:13.322 [WebSocket-7] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:52:13.322 [WebSocket-7] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753951453154_3pmq4f45z, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":80,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":12,"avgMonitoringCostMs":190.198225},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":17,"completedTaskCount":1411,"taskCount":1429,"totalThreadCount":63,"peakThreadCount":66,"poolUtilization":0.02,"queueUtilization":0.017,"throughput":2.337153196622437,"timestamp":1753951933322},"timestamp":1753951933322},"type":"threadpool_metrics"}
2025-07-31 16:52:13.323 [WebSocket-7] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:52:13.355 [WebSocket-6] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:52:23.229 [WebSocket-4] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:52:24.531 [WebSocket-2] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:52:25.056 [WebSocket-7] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:52:25.056 [WebSocket-9] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=2, 失败用户数=0
2025-07-31 16:52:25.893 [WebSocket-7] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:52:29.089 [pool-1-thread-1] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=notification, userId=user2, message={"type":"notification","title":"定时推送","content":"这是一个定时推送消息: 1753951949088","level":"info","timestamp":1753951949088}
2025-07-31 16:52:29.244 [WebSocket-3] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:52:30.063 [WebSocket-5] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:52:30.064 [WebSocket-5] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=2, 失败用户数=0
2025-07-31 16:52:35.331 [WebSocket-3] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:52:37.119 [WebSocket-8] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:52:40.060 [WebSocket-3] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=2, 失败用户数=0
2025-07-31 16:52:41.081 [WebSocket-8] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:52:43.310 [WebSocket-4] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753951453154_3pmq4f45z, sessionId=1, message={"action":"refresh","timestamp":1753951963308}
2025-07-31 16:52:43.310 [WebSocket-6] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:52:43.311 [WebSocket-6] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753951453154_3pmq4f45z, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":80,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":13,"avgMonitoringCostMs":175.56790769230767},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":17,"completedTaskCount":1486,"taskCount":1504,"totalThreadCount":63,"peakThreadCount":66,"poolUtilization":0.02,"queueUtilization":0.017,"throughput":2.3401524873556276,"timestamp":1753951963310},"timestamp":1753951963310},"type":"threadpool_metrics"}
2025-07-31 16:52:43.311 [WebSocket-6] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:52:43.371 [WebSocket-6] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:52:53.179 [WebSocket-4] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:52:54.120 [WebSocket-1] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:52:55.066 [WebSocket-5] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:52:55.899 [WebSocket-2] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:52:59.094 [pool-1-thread-1] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=notification, userId=user2, message={"type":"notification","title":"定时推送","content":"这是一个定时推送消息: 1753951979094","level":"info","timestamp":1753951979094}
2025-07-31 16:52:59.262 [WebSocket-9] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:53:00.063 [WebSocket-1] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:53:00.064 [WebSocket-1] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=2, 失败用户数=0
2025-07-31 16:53:05.350 [WebSocket-4] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:53:07.129 [WebSocket-3] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:53:10.055 [WebSocket-6] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=2, 失败用户数=0
2025-07-31 16:53:11.080 [WebSocket-6] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:53:13.381 [WebSocket-6] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:53:23.186 [WebSocket-8] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:53:24.132 [WebSocket-8] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:53:25.058 [WebSocket-5] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:53:25.058 [WebSocket-3] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=2, 失败用户数=0
2025-07-31 16:53:25.906 [WebSocket-2] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:53:29.088 [pool-1-thread-1] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=notification, userId=user2, message={"type":"notification","title":"定时推送","content":"这是一个定时推送消息: 1753952009088","level":"info","timestamp":1753952009088}
2025-07-31 16:53:29.256 [WebSocket-5] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:53:30.055 [WebSocket-7] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:53:30.056 [WebSocket-7] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=2, 失败用户数=0
2025-07-31 16:53:35.354 [WebSocket-1] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:53:37.143 [WebSocket-7] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:53:40.059 [WebSocket-8] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=2, 失败用户数=0
2025-07-31 16:53:41.094 [WebSocket-6] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:53:43.384 [WebSocket-2] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:53:44.318 [WebSocket-7] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753951453154_3pmq4f45z, sessionId=1, message={"action":"refresh","timestamp":1753952024317}
2025-07-31 16:53:44.318 [WebSocket-6] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:53:44.319 [WebSocket-6] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753951453154_3pmq4f45z, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":80,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":14,"avgMonitoringCostMs":163.0279142857143},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":17,"completedTaskCount":1638,"taskCount":1656,"totalThreadCount":63,"peakThreadCount":66,"poolUtilization":0.02,"queueUtilization":0.017,"throughput":2.7343476127042,"timestamp":1753952024318},"timestamp":1753952024318},"type":"threadpool_metrics"}
2025-07-31 16:53:44.319 [WebSocket-6] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:53:53.183 [WebSocket-7] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:53:54.135 [WebSocket-8] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:53:55.065 [WebSocket-7] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:53:55.929 [WebSocket-4] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:53:59.090 [pool-1-thread-1] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=notification, userId=user2, message={"type":"notification","title":"定时推送","content":"这是一个定时推送消息: 1753952039090","level":"info","timestamp":1753952039090}
2025-07-31 16:53:59.264 [WebSocket-5] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:54:00.056 [WebSocket-4] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:54:00.056 [WebSocket-4] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=2, 失败用户数=0
2025-07-31 16:54:05.359 [WebSocket-5] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:54:07.135 [WebSocket-7] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:54:10.064 [WebSocket-10] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=2, 失败用户数=0
2025-07-31 16:54:11.112 [WebSocket-5] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:54:13.394 [WebSocket-2] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:54:23.188 [WebSocket-2] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:54:24.140 [WebSocket-8] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:54:25.056 [WebSocket-9] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:54:25.056 [WebSocket-5] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=2, 失败用户数=0
2025-07-31 16:54:25.936 [WebSocket-6] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:54:29.090 [pool-1-thread-1] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=notification, userId=user2, message={"type":"notification","title":"定时推送","content":"这是一个定时推送消息: 1753952069090","level":"info","timestamp":1753952069090}
2025-07-31 16:54:29.272 [WebSocket-5] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:54:30.067 [WebSocket-9] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:54:30.067 [WebSocket-9] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=2, 失败用户数=0
2025-07-31 16:54:35.378 [WebSocket-2] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:54:37.153 [WebSocket-1] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:54:40.067 [WebSocket-8] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=2, 失败用户数=0
2025-07-31 16:54:41.114 [WebSocket-6] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:54:43.395 [WebSocket-3] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:54:45.321 [WebSocket-7] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753951453154_3pmq4f45z, sessionId=1, message={"action":"refresh","timestamp":1753952085320}
2025-07-31 16:54:45.321 [WebSocket-9] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:54:45.322 [WebSocket-9] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753951453154_3pmq4f45z, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":80,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":14,"avgMonitoringCostMs":163.0279142857143},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":17,"completedTaskCount":1783,"taskCount":1801,"totalThreadCount":63,"peakThreadCount":66,"poolUtilization":0.02,"queueUtilization":0.017,"throughput":2.55653883972468,"timestamp":1753952085322},"timestamp":1753952085322},"type":"threadpool_metrics"}
2025-07-31 16:54:45.322 [WebSocket-9] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:54:53.558 [WebSocket-7] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:54:54.166 [WebSocket-1] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:54:55.062 [WebSocket-9] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:54:55.119 [WebSocket-6] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=2, 失败用户数=0
2025-07-31 16:54:55.326 [ThreadPoolMonitor] INFO  c.f.w.monitor.ThreadPoolMonitor - 调整监控策略: 健康状态=健康, 监控间隔: 80秒->90秒, 采样率: 1:5 -> 1:5
2025-07-31 16:54:56.007 [WebSocket-6] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:54:59.102 [pool-1-thread-1] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=notification, userId=user2, message={"type":"notification","title":"定时推送","content":"这是一个定时推送消息: 1753952099102","level":"info","timestamp":1753952099102}
2025-07-31 16:54:59.280 [WebSocket-5] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:55:00.069 [WebSocket-3] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:55:00.069 [WebSocket-3] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=2, 失败用户数=0
2025-07-31 16:55:05.383 [WebSocket-8] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:55:07.164 [WebSocket-5] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:55:10.059 [WebSocket-3] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=2, 失败用户数=0
2025-07-31 16:55:11.127 [WebSocket-5] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:55:13.406 [WebSocket-10] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:55:25.064 [WebSocket-2] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:55:25.065 [WebSocket-8] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=2, 失败用户数=0
2025-07-31 16:55:28.211 [http-nio-8080-exec-7] WARN  c.f.w.s.WebSocketSessionManager - 更新心跳缓存失败: service=chatroom, userId=test_user
org.springframework.dao.QueryTimeoutException: Redis command timed out; nested exception is io.lettuce.core.RedisCommandTimeoutException: Command timed out after 5 second(s)
	at org.springframework.data.redis.connection.lettuce.LettuceExceptionConverter.convert(LettuceExceptionConverter.java:70)
	at org.springframework.data.redis.connection.lettuce.LettuceExceptionConverter.convert(LettuceExceptionConverter.java:41)
	at org.springframework.data.redis.PassThroughExceptionTranslationStrategy.translate(PassThroughExceptionTranslationStrategy.java:44)
	at org.springframework.data.redis.FallbackExceptionTranslationStrategy.translate(FallbackExceptionTranslationStrategy.java:42)
	at org.springframework.data.redis.connection.lettuce.LettuceConnection.convertLettuceAccessException(LettuceConnection.java:272)
	at org.springframework.data.redis.connection.lettuce.LettuceConnection.await(LettuceConnection.java:1063)
	at org.springframework.data.redis.connection.lettuce.LettuceConnection.lambda$doInvoke$4(LettuceConnection.java:920)
	at org.springframework.data.redis.connection.lettuce.LettuceInvoker$Synchronizer.invoke(LettuceInvoker.java:673)
	at org.springframework.data.redis.connection.lettuce.LettuceInvoker$DefaultSingleInvocationSpec.get(LettuceInvoker.java:589)
	at org.springframework.data.redis.connection.lettuce.LettuceStringCommands.setEx(LettuceStringCommands.java:167)
	at org.springframework.data.redis.connection.DefaultedRedisConnection.setEx(DefaultedRedisConnection.java:335)
	at org.springframework.data.redis.core.DefaultValueOperations$8.potentiallyUsePsetEx(DefaultValueOperations.java:337)
	at org.springframework.data.redis.core.DefaultValueOperations$8.doInRedis(DefaultValueOperations.java:330)
	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:224)
	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:191)
	at org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:97)
	at org.springframework.data.redis.core.DefaultValueOperations.set(DefaultValueOperations.java:325)
	at com.framework.websocket.session.WebSocketSessionManager.updateHeartbeat(WebSocketSessionManager.java:133)
	at com.framework.websocket.core.WebSocketServer.onPong(WebSocketServer.java:223)
	at sun.reflect.GeneratedMethodAccessor61.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.tomcat.websocket.pojo.PojoMessageHandlerWholeBase.onMessage(PojoMessageHandlerWholeBase.java:104)
	at org.apache.tomcat.websocket.WsFrameBase.processDataControl(WsFrameBase.java:376)
	at org.apache.tomcat.websocket.WsFrameBase.processData(WsFrameBase.java:296)
	at org.apache.tomcat.websocket.WsFrameBase.processInputBuffer(WsFrameBase.java:133)
	at org.apache.tomcat.websocket.server.WsFrameServer.onDataAvailable(WsFrameServer.java:85)
	at org.apache.tomcat.websocket.server.WsFrameServer.doOnDataAvailable(WsFrameServer.java:183)
	at org.apache.tomcat.websocket.server.WsFrameServer.notifyDataAvailable(WsFrameServer.java:162)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.upgradeDispatch(WsHttpUpgradeHandler.java:157)
	at org.apache.coyote.http11.upgrade.UpgradeProcessorInternal.dispatch(UpgradeProcessorInternal.java:60)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:59)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
Caused by: io.lettuce.core.RedisCommandTimeoutException: Command timed out after 5 second(s)
	at io.lettuce.core.internal.ExceptionFactory.createTimeoutException(ExceptionFactory.java:59)
	at io.lettuce.core.internal.Futures.awaitOrCancel(Futures.java:246)
	at io.lettuce.core.LettuceFutures.awaitOrCancel(LettuceFutures.java:74)
	at org.springframework.data.redis.connection.lettuce.LettuceConnection.await(LettuceConnection.java:1061)
	... 33 common frames omitted
2025-07-31 16:55:28.212 [WebSocket-8] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:55:29.096 [pool-1-thread-1] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=notification, userId=user2, message={"type":"notification","title":"定时推送","content":"这是一个定时推送消息: 1753952129096","level":"info","timestamp":1753952129096}
2025-07-31 16:55:29.130 [http-nio-8080-exec-8] WARN  c.f.w.s.WebSocketSessionManager - 更新心跳缓存失败: service=chatroom, userId=test_user
org.springframework.dao.QueryTimeoutException: Redis command timed out; nested exception is io.lettuce.core.RedisCommandTimeoutException: Command timed out after 5 second(s)
	at org.springframework.data.redis.connection.lettuce.LettuceExceptionConverter.convert(LettuceExceptionConverter.java:70)
	at org.springframework.data.redis.connection.lettuce.LettuceExceptionConverter.convert(LettuceExceptionConverter.java:41)
	at org.springframework.data.redis.PassThroughExceptionTranslationStrategy.translate(PassThroughExceptionTranslationStrategy.java:44)
	at org.springframework.data.redis.FallbackExceptionTranslationStrategy.translate(FallbackExceptionTranslationStrategy.java:42)
	at org.springframework.data.redis.connection.lettuce.LettuceConnection.convertLettuceAccessException(LettuceConnection.java:272)
	at org.springframework.data.redis.connection.lettuce.LettuceConnection.await(LettuceConnection.java:1063)
	at org.springframework.data.redis.connection.lettuce.LettuceConnection.lambda$doInvoke$4(LettuceConnection.java:920)
	at org.springframework.data.redis.connection.lettuce.LettuceInvoker$Synchronizer.invoke(LettuceInvoker.java:673)
	at org.springframework.data.redis.connection.lettuce.LettuceInvoker$DefaultSingleInvocationSpec.get(LettuceInvoker.java:589)
	at org.springframework.data.redis.connection.lettuce.LettuceStringCommands.setEx(LettuceStringCommands.java:167)
	at org.springframework.data.redis.connection.DefaultedRedisConnection.setEx(DefaultedRedisConnection.java:335)
	at org.springframework.data.redis.core.DefaultValueOperations$8.potentiallyUsePsetEx(DefaultValueOperations.java:337)
	at org.springframework.data.redis.core.DefaultValueOperations$8.doInRedis(DefaultValueOperations.java:330)
	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:224)
	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:191)
	at org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:97)
	at org.springframework.data.redis.core.DefaultValueOperations.set(DefaultValueOperations.java:325)
	at com.framework.websocket.session.WebSocketSessionManager.updateHeartbeat(WebSocketSessionManager.java:133)
	at com.framework.websocket.core.WebSocketServer.onPong(WebSocketServer.java:223)
	at sun.reflect.GeneratedMethodAccessor61.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.tomcat.websocket.pojo.PojoMessageHandlerWholeBase.onMessage(PojoMessageHandlerWholeBase.java:104)
	at org.apache.tomcat.websocket.WsFrameBase.processDataControl(WsFrameBase.java:376)
	at org.apache.tomcat.websocket.WsFrameBase.processData(WsFrameBase.java:296)
	at org.apache.tomcat.websocket.WsFrameBase.processInputBuffer(WsFrameBase.java:133)
	at org.apache.tomcat.websocket.server.WsFrameServer.onDataAvailable(WsFrameServer.java:85)
	at org.apache.tomcat.websocket.server.WsFrameServer.doOnDataAvailable(WsFrameServer.java:183)
	at org.apache.tomcat.websocket.server.WsFrameServer.notifyDataAvailable(WsFrameServer.java:162)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.upgradeDispatch(WsHttpUpgradeHandler.java:157)
	at org.apache.coyote.http11.upgrade.UpgradeProcessorInternal.dispatch(UpgradeProcessorInternal.java:60)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:59)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
Caused by: io.lettuce.core.RedisCommandTimeoutException: Command timed out after 5 second(s)
	at io.lettuce.core.internal.ExceptionFactory.createTimeoutException(ExceptionFactory.java:59)
	at io.lettuce.core.internal.Futures.awaitOrCancel(Futures.java:246)
	at io.lettuce.core.LettuceFutures.awaitOrCancel(LettuceFutures.java:74)
	at org.springframework.data.redis.connection.lettuce.LettuceConnection.await(LettuceConnection.java:1061)
	... 33 common frames omitted
2025-07-31 16:55:29.132 [WebSocket-5] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:55:30.062 [WebSocket-10] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:55:30.062 [WebSocket-10] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=2, 失败用户数=0
2025-07-31 16:55:30.077 [WebSocket-2] WARN  c.f.w.monitor.ThreadPoolMetricsStore - 收集监控数据失败
org.springframework.dao.QueryTimeoutException: Redis command timed out; nested exception is io.lettuce.core.RedisCommandTimeoutException: Command timed out after 5 second(s)
	at org.springframework.data.redis.connection.lettuce.LettuceExceptionConverter.convert(LettuceExceptionConverter.java:70)
	at org.springframework.data.redis.connection.lettuce.LettuceExceptionConverter.convert(LettuceExceptionConverter.java:41)
	at org.springframework.data.redis.PassThroughExceptionTranslationStrategy.translate(PassThroughExceptionTranslationStrategy.java:44)
	at org.springframework.data.redis.FallbackExceptionTranslationStrategy.translate(FallbackExceptionTranslationStrategy.java:42)
	at org.springframework.data.redis.connection.lettuce.LettuceConnection.convertLettuceAccessException(LettuceConnection.java:272)
	at org.springframework.data.redis.connection.lettuce.LettuceConnection.await(LettuceConnection.java:1063)
	at org.springframework.data.redis.connection.lettuce.LettuceConnection.lambda$doInvoke$4(LettuceConnection.java:920)
	at org.springframework.data.redis.connection.lettuce.LettuceInvoker$Synchronizer.invoke(LettuceInvoker.java:673)
	at org.springframework.data.redis.connection.lettuce.LettuceInvoker$DefaultSingleInvocationSpec.get(LettuceInvoker.java:589)
	at org.springframework.data.redis.connection.lettuce.LettuceStringCommands.setEx(LettuceStringCommands.java:167)
	at org.springframework.data.redis.connection.DefaultedRedisConnection.setEx(DefaultedRedisConnection.java:335)
	at org.springframework.data.redis.core.DefaultValueOperations$8.potentiallyUsePsetEx(DefaultValueOperations.java:337)
	at org.springframework.data.redis.core.DefaultValueOperations$8.doInRedis(DefaultValueOperations.java:330)
	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:224)
	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:191)
	at org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:97)
	at org.springframework.data.redis.core.DefaultValueOperations.set(DefaultValueOperations.java:325)
	at com.framework.websocket.monitor.ThreadPoolMetricsStore.collectAndStoreMetrics(ThreadPoolMetricsStore.java:69)
	at sun.reflect.GeneratedMethodAccessor64.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:308)
	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
Caused by: io.lettuce.core.RedisCommandTimeoutException: Command timed out after 5 second(s)
	at io.lettuce.core.internal.ExceptionFactory.createTimeoutException(ExceptionFactory.java:59)
	at io.lettuce.core.internal.Futures.awaitOrCancel(Futures.java:246)
	at io.lettuce.core.LettuceFutures.awaitOrCancel(LettuceFutures.java:74)
	at org.springframework.data.redis.connection.lettuce.LettuceConnection.await(LettuceConnection.java:1061)
	... 25 common frames omitted
2025-07-31 16:55:30.938 [http-nio-8080-exec-9] WARN  c.f.w.s.WebSocketSessionManager - 更新心跳缓存失败: service=chatroom, userId=user1
org.springframework.dao.QueryTimeoutException: Redis command timed out; nested exception is io.lettuce.core.RedisCommandTimeoutException: Command timed out after 5 second(s)
	at org.springframework.data.redis.connection.lettuce.LettuceExceptionConverter.convert(LettuceExceptionConverter.java:70)
	at org.springframework.data.redis.connection.lettuce.LettuceExceptionConverter.convert(LettuceExceptionConverter.java:41)
	at org.springframework.data.redis.PassThroughExceptionTranslationStrategy.translate(PassThroughExceptionTranslationStrategy.java:44)
	at org.springframework.data.redis.FallbackExceptionTranslationStrategy.translate(FallbackExceptionTranslationStrategy.java:42)
	at org.springframework.data.redis.connection.lettuce.LettuceConnection.convertLettuceAccessException(LettuceConnection.java:272)
	at org.springframework.data.redis.connection.lettuce.LettuceConnection.await(LettuceConnection.java:1063)
	at org.springframework.data.redis.connection.lettuce.LettuceConnection.lambda$doInvoke$4(LettuceConnection.java:920)
	at org.springframework.data.redis.connection.lettuce.LettuceInvoker$Synchronizer.invoke(LettuceInvoker.java:673)
	at org.springframework.data.redis.connection.lettuce.LettuceInvoker$DefaultSingleInvocationSpec.get(LettuceInvoker.java:589)
	at org.springframework.data.redis.connection.lettuce.LettuceStringCommands.setEx(LettuceStringCommands.java:167)
	at org.springframework.data.redis.connection.DefaultedRedisConnection.setEx(DefaultedRedisConnection.java:335)
	at org.springframework.data.redis.core.DefaultValueOperations$8.potentiallyUsePsetEx(DefaultValueOperations.java:337)
	at org.springframework.data.redis.core.DefaultValueOperations$8.doInRedis(DefaultValueOperations.java:330)
	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:224)
	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:191)
	at org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:97)
	at org.springframework.data.redis.core.DefaultValueOperations.set(DefaultValueOperations.java:325)
	at com.framework.websocket.session.WebSocketSessionManager.updateHeartbeat(WebSocketSessionManager.java:133)
	at com.framework.websocket.core.WebSocketServer.onPong(WebSocketServer.java:223)
	at sun.reflect.GeneratedMethodAccessor61.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.tomcat.websocket.pojo.PojoMessageHandlerWholeBase.onMessage(PojoMessageHandlerWholeBase.java:104)
	at org.apache.tomcat.websocket.WsFrameBase.processDataControl(WsFrameBase.java:376)
	at org.apache.tomcat.websocket.WsFrameBase.processData(WsFrameBase.java:296)
	at org.apache.tomcat.websocket.WsFrameBase.processInputBuffer(WsFrameBase.java:133)
	at org.apache.tomcat.websocket.server.WsFrameServer.onDataAvailable(WsFrameServer.java:85)
	at org.apache.tomcat.websocket.server.WsFrameServer.doOnDataAvailable(WsFrameServer.java:183)
	at org.apache.tomcat.websocket.server.WsFrameServer.notifyDataAvailable(WsFrameServer.java:162)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.upgradeDispatch(WsHttpUpgradeHandler.java:157)
	at org.apache.coyote.http11.upgrade.UpgradeProcessorInternal.dispatch(UpgradeProcessorInternal.java:60)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:59)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
Caused by: io.lettuce.core.RedisCommandTimeoutException: Command timed out after 5 second(s)
	at io.lettuce.core.internal.ExceptionFactory.createTimeoutException(ExceptionFactory.java:59)
	at io.lettuce.core.internal.Futures.awaitOrCancel(Futures.java:246)
	at io.lettuce.core.LettuceFutures.awaitOrCancel(LettuceFutures.java:74)
	at org.springframework.data.redis.connection.lettuce.LettuceConnection.await(LettuceConnection.java:1061)
	... 33 common frames omitted
2025-07-31 16:55:30.941 [WebSocket-3] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:55:34.257 [http-nio-8080-exec-10] WARN  c.f.w.s.WebSocketSessionManager - 更新心跳缓存失败: service=notification, userId=user2
org.springframework.dao.QueryTimeoutException: Redis command timed out; nested exception is io.lettuce.core.RedisCommandTimeoutException: Command timed out after 5 second(s)
	at org.springframework.data.redis.connection.lettuce.LettuceExceptionConverter.convert(LettuceExceptionConverter.java:70)
	at org.springframework.data.redis.connection.lettuce.LettuceExceptionConverter.convert(LettuceExceptionConverter.java:41)
	at org.springframework.data.redis.PassThroughExceptionTranslationStrategy.translate(PassThroughExceptionTranslationStrategy.java:44)
	at org.springframework.data.redis.FallbackExceptionTranslationStrategy.translate(FallbackExceptionTranslationStrategy.java:42)
	at org.springframework.data.redis.connection.lettuce.LettuceConnection.convertLettuceAccessException(LettuceConnection.java:272)
	at org.springframework.data.redis.connection.lettuce.LettuceConnection.await(LettuceConnection.java:1063)
	at org.springframework.data.redis.connection.lettuce.LettuceConnection.lambda$doInvoke$4(LettuceConnection.java:920)
	at org.springframework.data.redis.connection.lettuce.LettuceInvoker$Synchronizer.invoke(LettuceInvoker.java:673)
	at org.springframework.data.redis.connection.lettuce.LettuceInvoker$DefaultSingleInvocationSpec.get(LettuceInvoker.java:589)
	at org.springframework.data.redis.connection.lettuce.LettuceStringCommands.setEx(LettuceStringCommands.java:167)
	at org.springframework.data.redis.connection.DefaultedRedisConnection.setEx(DefaultedRedisConnection.java:335)
	at org.springframework.data.redis.core.DefaultValueOperations$8.potentiallyUsePsetEx(DefaultValueOperations.java:337)
	at org.springframework.data.redis.core.DefaultValueOperations$8.doInRedis(DefaultValueOperations.java:330)
	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:224)
	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:191)
	at org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:97)
	at org.springframework.data.redis.core.DefaultValueOperations.set(DefaultValueOperations.java:325)
	at com.framework.websocket.session.WebSocketSessionManager.updateHeartbeat(WebSocketSessionManager.java:133)
	at com.framework.websocket.core.WebSocketServer.onPong(WebSocketServer.java:223)
	at sun.reflect.GeneratedMethodAccessor61.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.tomcat.websocket.pojo.PojoMessageHandlerWholeBase.onMessage(PojoMessageHandlerWholeBase.java:104)
	at org.apache.tomcat.websocket.WsFrameBase.processDataControl(WsFrameBase.java:376)
	at org.apache.tomcat.websocket.WsFrameBase.processData(WsFrameBase.java:296)
	at org.apache.tomcat.websocket.WsFrameBase.processInputBuffer(WsFrameBase.java:133)
	at org.apache.tomcat.websocket.server.WsFrameServer.onDataAvailable(WsFrameServer.java:85)
	at org.apache.tomcat.websocket.server.WsFrameServer.doOnDataAvailable(WsFrameServer.java:183)
	at org.apache.tomcat.websocket.server.WsFrameServer.notifyDataAvailable(WsFrameServer.java:162)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.upgradeDispatch(WsHttpUpgradeHandler.java:157)
	at org.apache.coyote.http11.upgrade.UpgradeProcessorInternal.dispatch(UpgradeProcessorInternal.java:60)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:59)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
Caused by: io.lettuce.core.RedisCommandTimeoutException: Command timed out after 5 second(s)
	at io.lettuce.core.internal.ExceptionFactory.createTimeoutException(ExceptionFactory.java:59)
	at io.lettuce.core.internal.Futures.awaitOrCancel(Futures.java:246)
	at io.lettuce.core.LettuceFutures.awaitOrCancel(LettuceFutures.java:74)
	at org.springframework.data.redis.connection.lettuce.LettuceConnection.await(LettuceConnection.java:1061)
	... 33 common frames omitted
2025-07-31 16:55:34.258 [WebSocket-2] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:55:40.068 [WebSocket-5] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=2, 失败用户数=0
2025-07-31 16:55:40.363 [http-nio-8080-exec-2] WARN  c.f.w.s.WebSocketSessionManager - 更新心跳缓存失败: service=monitor, userId=test_user
org.springframework.dao.QueryTimeoutException: Redis command timed out; nested exception is io.lettuce.core.RedisCommandTimeoutException: Command timed out after 5 second(s)
	at org.springframework.data.redis.connection.lettuce.LettuceExceptionConverter.convert(LettuceExceptionConverter.java:70)
	at org.springframework.data.redis.connection.lettuce.LettuceExceptionConverter.convert(LettuceExceptionConverter.java:41)
	at org.springframework.data.redis.PassThroughExceptionTranslationStrategy.translate(PassThroughExceptionTranslationStrategy.java:44)
	at org.springframework.data.redis.FallbackExceptionTranslationStrategy.translate(FallbackExceptionTranslationStrategy.java:42)
	at org.springframework.data.redis.connection.lettuce.LettuceConnection.convertLettuceAccessException(LettuceConnection.java:272)
	at org.springframework.data.redis.connection.lettuce.LettuceConnection.await(LettuceConnection.java:1063)
	at org.springframework.data.redis.connection.lettuce.LettuceConnection.lambda$doInvoke$4(LettuceConnection.java:920)
	at org.springframework.data.redis.connection.lettuce.LettuceInvoker$Synchronizer.invoke(LettuceInvoker.java:673)
	at org.springframework.data.redis.connection.lettuce.LettuceInvoker$DefaultSingleInvocationSpec.get(LettuceInvoker.java:589)
	at org.springframework.data.redis.connection.lettuce.LettuceStringCommands.setEx(LettuceStringCommands.java:167)
	at org.springframework.data.redis.connection.DefaultedRedisConnection.setEx(DefaultedRedisConnection.java:335)
	at org.springframework.data.redis.core.DefaultValueOperations$8.potentiallyUsePsetEx(DefaultValueOperations.java:337)
	at org.springframework.data.redis.core.DefaultValueOperations$8.doInRedis(DefaultValueOperations.java:330)
	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:224)
	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:191)
	at org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:97)
	at org.springframework.data.redis.core.DefaultValueOperations.set(DefaultValueOperations.java:325)
	at com.framework.websocket.session.WebSocketSessionManager.updateHeartbeat(WebSocketSessionManager.java:133)
	at com.framework.websocket.core.WebSocketServer.onPong(WebSocketServer.java:223)
	at sun.reflect.GeneratedMethodAccessor61.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.tomcat.websocket.pojo.PojoMessageHandlerWholeBase.onMessage(PojoMessageHandlerWholeBase.java:104)
	at org.apache.tomcat.websocket.WsFrameBase.processDataControl(WsFrameBase.java:376)
	at org.apache.tomcat.websocket.WsFrameBase.processData(WsFrameBase.java:296)
	at org.apache.tomcat.websocket.WsFrameBase.processInputBuffer(WsFrameBase.java:133)
	at org.apache.tomcat.websocket.server.WsFrameServer.onDataAvailable(WsFrameServer.java:85)
	at org.apache.tomcat.websocket.server.WsFrameServer.doOnDataAvailable(WsFrameServer.java:183)
	at org.apache.tomcat.websocket.server.WsFrameServer.notifyDataAvailable(WsFrameServer.java:162)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.upgradeDispatch(WsHttpUpgradeHandler.java:157)
	at org.apache.coyote.http11.upgrade.UpgradeProcessorInternal.dispatch(UpgradeProcessorInternal.java:60)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:59)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
Caused by: io.lettuce.core.RedisCommandTimeoutException: Command timed out after 5 second(s)
	at io.lettuce.core.internal.ExceptionFactory.createTimeoutException(ExceptionFactory.java:59)
	at io.lettuce.core.internal.Futures.awaitOrCancel(Futures.java:246)
	at io.lettuce.core.LettuceFutures.awaitOrCancel(LettuceFutures.java:74)
	at org.springframework.data.redis.connection.lettuce.LettuceConnection.await(LettuceConnection.java:1061)
	... 33 common frames omitted
2025-07-31 16:55:40.364 [WebSocket-10] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:55:42.133 [http-nio-8080-exec-1] WARN  c.f.w.s.WebSocketSessionManager - 更新心跳缓存失败: service=monitor, userId=test_user
org.springframework.dao.QueryTimeoutException: Redis command timed out; nested exception is io.lettuce.core.RedisCommandTimeoutException: Command timed out after 5 second(s)
	at org.springframework.data.redis.connection.lettuce.LettuceExceptionConverter.convert(LettuceExceptionConverter.java:70)
	at org.springframework.data.redis.connection.lettuce.LettuceExceptionConverter.convert(LettuceExceptionConverter.java:41)
	at org.springframework.data.redis.PassThroughExceptionTranslationStrategy.translate(PassThroughExceptionTranslationStrategy.java:44)
	at org.springframework.data.redis.FallbackExceptionTranslationStrategy.translate(FallbackExceptionTranslationStrategy.java:42)
	at org.springframework.data.redis.connection.lettuce.LettuceConnection.convertLettuceAccessException(LettuceConnection.java:272)
	at org.springframework.data.redis.connection.lettuce.LettuceConnection.await(LettuceConnection.java:1063)
	at org.springframework.data.redis.connection.lettuce.LettuceConnection.lambda$doInvoke$4(LettuceConnection.java:920)
	at org.springframework.data.redis.connection.lettuce.LettuceInvoker$Synchronizer.invoke(LettuceInvoker.java:673)
	at org.springframework.data.redis.connection.lettuce.LettuceInvoker$DefaultSingleInvocationSpec.get(LettuceInvoker.java:589)
	at org.springframework.data.redis.connection.lettuce.LettuceStringCommands.setEx(LettuceStringCommands.java:167)
	at org.springframework.data.redis.connection.DefaultedRedisConnection.setEx(DefaultedRedisConnection.java:335)
	at org.springframework.data.redis.core.DefaultValueOperations$8.potentiallyUsePsetEx(DefaultValueOperations.java:337)
	at org.springframework.data.redis.core.DefaultValueOperations$8.doInRedis(DefaultValueOperations.java:330)
	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:224)
	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:191)
	at org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:97)
	at org.springframework.data.redis.core.DefaultValueOperations.set(DefaultValueOperations.java:325)
	at com.framework.websocket.session.WebSocketSessionManager.updateHeartbeat(WebSocketSessionManager.java:133)
	at com.framework.websocket.core.WebSocketServer.onPong(WebSocketServer.java:223)
	at sun.reflect.GeneratedMethodAccessor61.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.tomcat.websocket.pojo.PojoMessageHandlerWholeBase.onMessage(PojoMessageHandlerWholeBase.java:104)
	at org.apache.tomcat.websocket.WsFrameBase.processDataControl(WsFrameBase.java:376)
	at org.apache.tomcat.websocket.WsFrameBase.processData(WsFrameBase.java:296)
	at org.apache.tomcat.websocket.WsFrameBase.processInputBuffer(WsFrameBase.java:133)
	at org.apache.tomcat.websocket.server.WsFrameServer.onDataAvailable(WsFrameServer.java:85)
	at org.apache.tomcat.websocket.server.WsFrameServer.doOnDataAvailable(WsFrameServer.java:183)
	at org.apache.tomcat.websocket.server.WsFrameServer.notifyDataAvailable(WsFrameServer.java:162)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.upgradeDispatch(WsHttpUpgradeHandler.java:157)
	at org.apache.coyote.http11.upgrade.UpgradeProcessorInternal.dispatch(UpgradeProcessorInternal.java:60)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:59)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
Caused by: io.lettuce.core.RedisCommandTimeoutException: Command timed out after 5 second(s)
	at io.lettuce.core.internal.ExceptionFactory.createTimeoutException(ExceptionFactory.java:59)
	at io.lettuce.core.internal.Futures.awaitOrCancel(Futures.java:246)
	at io.lettuce.core.LettuceFutures.awaitOrCancel(LettuceFutures.java:74)
	at org.springframework.data.redis.connection.lettuce.LettuceConnection.await(LettuceConnection.java:1061)
	... 33 common frames omitted
2025-07-31 16:55:42.133 [WebSocket-2] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:55:42.403 [lettuce-eventExecutorLoop-1-6] INFO  i.l.core.protocol.ConnectionWatchdog - Reconnecting, last destination was r-uf69q33xkiw5c7tp8cpd.redis.rds.aliyuncs.com/47.100.128.136:6379
2025-07-31 16:55:42.590 [lettuce-nioEventLoop-4-2] INFO  i.l.c.protocol.ReconnectionHandler - Reconnected to r-uf69q33xkiw5c7tp8cpd.redis.rds.aliyuncs.com:6379
2025-07-31 16:55:42.622 [WebSocket-4] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:55:43.427 [WebSocket-1] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:55:46.313 [WebSocket-9] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753951453154_3pmq4f45z, sessionId=1, message={"action":"refresh","timestamp":1753952146313}
2025-07-31 16:55:46.314 [WebSocket-3] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:55:46.314 [WebSocket-3] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753951453154_3pmq4f45z, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":90,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":16,"avgMonitoringCostMs":152.206575},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":17,"completedTaskCount":1928,"taskCount":1946,"totalThreadCount":64,"peakThreadCount":66,"poolUtilization":0.02,"queueUtilization":0.017,"throughput":3.0765444253015017,"timestamp":1753952146314},"timestamp":1753952146314},"type":"threadpool_metrics"}
2025-07-31 16:55:46.314 [WebSocket-3] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:55:53.229 [WebSocket-3] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:55:54.148 [WebSocket-8] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:55:55.065 [WebSocket-2] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:55:55.963 [WebSocket-7] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:55:59.100 [pool-1-thread-1] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=notification, userId=user2, message={"type":"notification","title":"定时推送","content":"这是一个定时推送消息: 1753952159100","level":"info","timestamp":1753952159100}
2025-07-31 16:55:59.294 [WebSocket-7] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:56:00.065 [WebSocket-8] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:56:00.065 [WebSocket-8] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=2, 失败用户数=0
2025-07-31 16:56:05.389 [WebSocket-1] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:56:07.177 [WebSocket-8] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:56:10.067 [WebSocket-5] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=2, 失败用户数=0
2025-07-31 16:56:11.144 [WebSocket-2] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:56:13.435 [WebSocket-9] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:56:23.236 [WebSocket-10] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:56:24.172 [WebSocket-2] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:56:25.058 [WebSocket-6] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:56:25.059 [WebSocket-7] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=2, 失败用户数=0
2025-07-31 16:56:25.965 [WebSocket-7] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:56:29.092 [pool-1-thread-1] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=notification, userId=user2, message={"type":"notification","title":"定时推送","content":"这是一个定时推送消息: 1753952189092","level":"info","timestamp":1753952189092}
2025-07-31 16:56:29.307 [WebSocket-1] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:56:30.062 [WebSocket-6] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:56:30.062 [WebSocket-6] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=2, 失败用户数=0
2025-07-31 16:56:35.400 [WebSocket-6] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:56:37.177 [WebSocket-3] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:56:40.057 [WebSocket-2] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=2, 失败用户数=0
2025-07-31 16:56:41.144 [WebSocket-10] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:56:43.440 [WebSocket-10] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:56:47.323 [WebSocket-9] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753951453154_3pmq4f45z, sessionId=1, message={"action":"refresh","timestamp":1753952207321}
2025-07-31 16:56:47.323 [WebSocket-1] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:56:47.324 [WebSocket-1] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753951453154_3pmq4f45z, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":90,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":17,"avgMonitoringCostMs":143.25355294117645},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":17,"completedTaskCount":2072,"taskCount":2090,"totalThreadCount":64,"peakThreadCount":66,"poolUtilization":0.02,"queueUtilization":0.017,"throughput":2.259297879735836,"timestamp":1753952207324},"timestamp":1753952207324},"type":"threadpool_metrics"}
2025-07-31 16:56:47.324 [WebSocket-1] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:56:53.240 [WebSocket-10] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:56:54.169 [WebSocket-6] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:56:55.059 [WebSocket-7] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:56:55.968 [WebSocket-4] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:56:59.091 [pool-1-thread-2] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=notification, userId=user2, message={"type":"notification","title":"定时推送","content":"这是一个定时推送消息: 1753952219091","level":"info","timestamp":1753952219091}
2025-07-31 16:56:59.334 [WebSocket-8] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:57:00.058 [WebSocket-3] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:57:00.058 [WebSocket-3] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=2, 失败用户数=0
2025-07-31 16:57:05.408 [WebSocket-7] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:57:07.195 [WebSocket-7] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:57:10.063 [WebSocket-9] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=2, 失败用户数=0
2025-07-31 16:57:11.151 [WebSocket-7] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:57:13.444 [WebSocket-10] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:57:23.246 [WebSocket-5] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:57:24.173 [WebSocket-3] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:57:25.065 [WebSocket-6] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:57:25.066 [WebSocket-2] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=2, 失败用户数=0
2025-07-31 16:57:25.972 [WebSocket-8] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:57:29.089 [pool-1-thread-2] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=notification, userId=user2, message={"type":"notification","title":"定时推送","content":"这是一个定时推送消息: 1753952249089","level":"info","timestamp":1753952249089}
2025-07-31 16:57:29.321 [WebSocket-1] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:57:30.062 [WebSocket-5] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:57:30.063 [WebSocket-5] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=2, 失败用户数=0
2025-07-31 16:57:35.418 [WebSocket-1] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:57:37.198 [WebSocket-1] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:57:40.056 [WebSocket-3] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=2, 失败用户数=0
2025-07-31 16:57:41.161 [WebSocket-9] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:57:43.459 [WebSocket-3] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:57:48.309 [WebSocket-2] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753951453154_3pmq4f45z, sessionId=1, message={"action":"refresh","timestamp":1753952268306}
2025-07-31 16:57:48.310 [WebSocket-4] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:57:48.311 [WebSocket-4] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753951453154_3pmq4f45z, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":90,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":17,"avgMonitoringCostMs":143.25355294117645},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":17,"completedTaskCount":2216,"taskCount":2234,"totalThreadCount":64,"peakThreadCount":66,"poolUtilization":0.02,"queueUtilization":0.017,"throughput":2.1372205173169663,"timestamp":1753952268310},"timestamp":1753952268310},"type":"threadpool_metrics"}
2025-07-31 16:57:48.311 [WebSocket-4] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:57:53.257 [WebSocket-1] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:57:54.179 [WebSocket-4] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:57:55.054 [WebSocket-5] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:57:55.996 [WebSocket-8] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:57:59.097 [pool-1-thread-2] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=notification, userId=user2, message={"type":"notification","title":"定时推送","content":"这是一个定时推送消息: 1753952279095","level":"info","timestamp":1753952279095}
2025-07-31 16:57:59.317 [WebSocket-2] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:58:00.059 [WebSocket-6] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:58:00.060 [WebSocket-6] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=2, 失败用户数=0
2025-07-31 16:58:05.481 [WebSocket-2] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:58:07.219 [WebSocket-1] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:58:10.059 [WebSocket-9] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=2, 失败用户数=0
2025-07-31 16:58:11.246 [WebSocket-9] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:58:13.518 [WebSocket-7] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:58:23.253 [WebSocket-4] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:58:24.177 [WebSocket-3] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:58:25.058 [WebSocket-5] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:58:25.058 [WebSocket-7] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=2, 失败用户数=0
2025-07-31 16:58:25.986 [WebSocket-3] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:58:29.101 [pool-1-thread-2] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=notification, userId=user2, message={"type":"notification","title":"定时推送","content":"这是一个定时推送消息: 1753952309101","level":"info","timestamp":1753952309101}
2025-07-31 16:58:29.325 [WebSocket-5] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:58:30.056 [WebSocket-6] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:58:30.057 [WebSocket-6] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=2, 失败用户数=0
2025-07-31 16:58:33.168 [WebSocket-2] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753951453154_3pmq4f45z, sessionId=1, message={"action":"refresh","timestamp":1753952313167}
2025-07-31 16:58:33.168 [WebSocket-7] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:58:33.169 [WebSocket-7] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753951453154_3pmq4f45z, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":90,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":18,"avgMonitoringCostMs":135.29519444444446},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":17,"completedTaskCount":2327,"taskCount":2345,"totalThreadCount":64,"peakThreadCount":66,"poolUtilization":0.02,"queueUtilization":0.017,"throughput":1.9280205655526992,"timestamp":1753952313168},"timestamp":1753952313168},"type":"threadpool_metrics"}
2025-07-31 16:58:33.169 [WebSocket-7] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:58:35.484 [WebSocket-5] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:58:37.214 [WebSocket-6] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:58:40.060 [WebSocket-2] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=2, 失败用户数=0
2025-07-31 16:58:41.179 [WebSocket-8] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:58:43.163 [WebSocket-7] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753951453154_3pmq4f45z, sessionId=1, message={"action":"refresh","timestamp":1753952323161}
2025-07-31 16:58:43.164 [WebSocket-10] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:58:43.164 [WebSocket-10] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753951453154_3pmq4f45z, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":90,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":18,"avgMonitoringCostMs":135.29519444444446},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":17,"completedTaskCount":2358,"taskCount":2376,"totalThreadCount":64,"peakThreadCount":66,"poolUtilization":0.02,"queueUtilization":0.017,"throughput":3.1012404961984794,"timestamp":1753952323164},"timestamp":1753952323164},"type":"threadpool_metrics"}
2025-07-31 16:58:43.165 [WebSocket-10] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:58:43.483 [WebSocket-2] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:58:53.255 [WebSocket-2] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:58:54.197 [WebSocket-7] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:58:55.057 [WebSocket-4] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:58:56.005 [WebSocket-5] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:58:59.093 [pool-1-thread-2] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=notification, userId=user2, message={"type":"notification","title":"定时推送","content":"这是一个定时推送消息: 1753952339093","level":"info","timestamp":1753952339093}
2025-07-31 16:58:59.331 [WebSocket-8] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:59:00.062 [WebSocket-1] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:59:00.063 [WebSocket-1] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=2, 失败用户数=0
2025-07-31 16:59:05.450 [WebSocket-2] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:59:07.221 [WebSocket-9] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:59:10.067 [WebSocket-5] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=2, 失败用户数=0
2025-07-31 16:59:11.190 [WebSocket-9] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:59:13.318 [WebSocket-10] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753951453154_3pmq4f45z, sessionId=1, message={"action":"refresh","timestamp":1753952353317}
2025-07-31 16:59:13.319 [WebSocket-2] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:59:13.320 [WebSocket-2] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753951453154_3pmq4f45z, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":90,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":18,"avgMonitoringCostMs":135.29519444444446},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":17,"completedTaskCount":2434,"taskCount":2452,"totalThreadCount":64,"peakThreadCount":66,"poolUtilization":0.02,"queueUtilization":0.017,"throughput":2.338210891537185,"timestamp":1753952353320},"timestamp":1753952353320},"type":"threadpool_metrics"}
2025-07-31 16:59:13.320 [WebSocket-2] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:59:13.612 [WebSocket-2] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:59:23.267 [WebSocket-5] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:59:24.205 [WebSocket-7] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:59:25.064 [WebSocket-9] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=2, 失败用户数=0
2025-07-31 16:59:25.064 [WebSocket-9] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:59:26.008 [WebSocket-7] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:59:29.096 [pool-1-thread-2] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=notification, userId=user2, message={"type":"notification","title":"定时推送","content":"这是一个定时推送消息: 1753952369096","level":"info","timestamp":1753952369096}
2025-07-31 16:59:29.339 [WebSocket-1] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:59:30.066 [WebSocket-10] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:59:30.067 [WebSocket-10] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=2, 失败用户数=0
2025-07-31 16:59:35.478 [WebSocket-8] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:59:37.401 [WebSocket-10] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:59:40.063 [WebSocket-2] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=2, 失败用户数=0
2025-07-31 16:59:41.193 [WebSocket-10] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:59:43.324 [WebSocket-6] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753951453154_3pmq4f45z, sessionId=1, message={"action":"refresh","timestamp":1753952383322}
2025-07-31 16:59:43.324 [WebSocket-4] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:59:43.325 [WebSocket-4] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753951453154_3pmq4f45z, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":90,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":19,"avgMonitoringCostMs":128.17457894736842},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":17,"completedTaskCount":2509,"taskCount":2527,"totalThreadCount":64,"peakThreadCount":66,"poolUtilization":0.02,"queueUtilization":0.017,"throughput":2.3380345425748548,"timestamp":1753952383325},"timestamp":1753952383325},"type":"threadpool_metrics"}
2025-07-31 16:59:43.326 [WebSocket-4] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:59:43.500 [WebSocket-2] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:59:53.259 [WebSocket-6] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:59:54.195 [WebSocket-2] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:59:55.060 [WebSocket-9] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 16:59:55.115 [WebSocket-8] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=2, 失败用户数=0
2025-07-31 16:59:56.010 [WebSocket-1] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:59:59.099 [pool-1-thread-2] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=notification, userId=user2, message={"type":"notification","title":"定时推送","content":"这是一个定时推送消息: 1753952399098","level":"info","timestamp":1753952399098}
2025-07-31 16:59:59.349 [WebSocket-8] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 16:59:59.759 [http-nio-8080-exec-10] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已移除: service=monitor, userId=monitor_1753951453154_3pmq4f45z, sessionId=1
2025-07-31 16:59:59.759 [http-nio-8080-exec-10] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接关闭: service=monitor, userId=monitor_1753951453154_3pmq4f45z, sessionId=1, code=GOING_AWAY, reason=null
2025-07-31 16:59:59.760 [WebSocket-10] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端断开: monitor_1753951453154_3pmq4f45z
2025-07-31 16:59:59.760 [WebSocket-10] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:00:00.066 [WebSocket-4] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:00:00.066 [WebSocket-4] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 17:00:05.459 [WebSocket-7] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:00:07.230 [WebSocket-4] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:00:10.064 [WebSocket-5] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 17:00:11.194 [WebSocket-8] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:00:23.276 [WebSocket-7] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:00:24.218 [WebSocket-6] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:00:25.061 [WebSocket-4] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:00:25.061 [WebSocket-8] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 17:00:25.118 [WebSocket-4] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:00:26.044 [WebSocket-1] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:00:29.096 [pool-1-thread-2] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=notification, userId=user2, message={"type":"notification","title":"定时推送","content":"这是一个定时推送消息: 1753952429095","level":"info","timestamp":1753952429095}
2025-07-31 17:00:29.364 [WebSocket-2] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:00:30.060 [WebSocket-9] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:00:30.061 [WebSocket-9] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 17:00:35.477 [WebSocket-10] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:00:37.234 [WebSocket-4] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:00:40.067 [WebSocket-3] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 17:00:41.206 [WebSocket-7] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:00:53.789 [WebSocket-3] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:00:54.346 [WebSocket-7] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:00:55.067 [WebSocket-3] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:00:55.607 [ThreadPoolMonitor] INFO  c.f.w.monitor.ThreadPoolMonitor - 调整监控策略: 健康状态=健康, 监控间隔: 90秒->100秒, 采样率: 1:5 -> 1:5
2025-07-31 17:00:56.042 [WebSocket-7] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:00:59.095 [pool-1-thread-2] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=notification, userId=user2, message={"type":"notification","title":"定时推送","content":"这是一个定时推送消息: 1753952459095","level":"info","timestamp":1753952459095}
2025-07-31 17:00:59.850 [WebSocket-7] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:01:00.074 [WebSocket-4] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:01:00.076 [WebSocket-4] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 17:01:05.478 [WebSocket-2] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:01:07.242 [WebSocket-7] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:01:10.058 [WebSocket-9] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 17:01:11.211 [WebSocket-1] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:01:23.656 [WebSocket-8] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:01:24.291 [WebSocket-2] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:01:25.062 [WebSocket-3] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:01:25.062 [WebSocket-7] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 17:01:26.117 [WebSocket-3] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:01:29.095 [pool-1-thread-2] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=notification, userId=user2, message={"type":"notification","title":"定时推送","content":"这是一个定时推送消息: 1753952489095","level":"info","timestamp":1753952489095}
2025-07-31 17:01:29.367 [WebSocket-6] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:01:30.063 [WebSocket-4] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:01:30.065 [WebSocket-4] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 17:01:35.470 [WebSocket-9] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:01:37.255 [WebSocket-10] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:01:40.062 [WebSocket-6] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 17:01:41.215 [WebSocket-3] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:01:54.981 [WebSocket-7] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:01:54.982 [WebSocket-7] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:01:55.087 [WebSocket-7] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:01:56.052 [WebSocket-5] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:01:59.095 [pool-1-thread-2] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=notification, userId=user2, message={"type":"notification","title":"定时推送","content":"这是一个定时推送消息: 1753952519095","level":"info","timestamp":1753952519095}
2025-07-31 17:01:59.379 [WebSocket-10] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:02:00.063 [WebSocket-7] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:02:00.063 [WebSocket-7] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 17:02:05.487 [WebSocket-7] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:02:07.262 [WebSocket-10] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:02:10.061 [WebSocket-5] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 17:02:11.224 [WebSocket-9] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:02:24.727 [WebSocket-5] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:02:24.976 [WebSocket-9] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:02:25.069 [WebSocket-4] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:02:25.069 [WebSocket-10] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 17:02:26.086 [WebSocket-6] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:02:29.095 [pool-1-thread-2] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=notification, userId=user2, message={"type":"notification","title":"定时推送","content":"这是一个定时推送消息: 1753952549095","level":"info","timestamp":1753952549095}
2025-07-31 17:02:29.394 [WebSocket-9] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:02:30.053 [WebSocket-8] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:02:30.053 [WebSocket-8] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 17:02:31.135 [SpringApplicationShutdownHook] WARN  c.f.w.s.WebSocketSessionManager - WebSocket会话移除失败，会话不匹配: service=chatroom, userId=test_user
2025-07-31 17:02:31.135 [SpringApplicationShutdownHook] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接关闭: service=chatroom, userId=test_user, sessionId=5, code=GOING_AWAY, reason=The web application is stopping
2025-07-31 17:02:31.135 [SpringApplicationShutdownHook] WARN  c.f.w.s.WebSocketSessionManager - WebSocket会话移除失败，会话不匹配: service=chatroom, userId=test_user
2025-07-31 17:02:31.136 [WebSocket-11] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=chatroom, 成功用户数=2, 失败用户数=0
2025-07-31 17:02:31.136 [WebSocket-11] INFO  c.f.w.e.ChatRoomWebSocketService - 用户离开聊天室: userId=test_user, 当前在线数: 2
2025-07-31 17:02:31.136 [SpringApplicationShutdownHook] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接关闭: service=chatroom, userId=test_user, sessionId=6, code=GOING_AWAY, reason=The web application is stopping
2025-07-31 17:02:31.136 [WebSocket-11] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:02:31.137 [WebSocket-5] WARN  c.f.w.s.WebSocketSessionManager - 会话已关闭，跳过发送: service=chatroom, userId=test_user
2025-07-31 17:02:31.137 [WebSocket-5] WARN  c.f.w.s.WebSocketSessionManager - WebSocket会话移除失败，会话不匹配: service=chatroom, userId=test_user
2025-07-31 17:02:31.138 [WebSocket-5] INFO  c.f.w.s.WebSocketSessionManager - 清理失效会话: service=chatroom, userId=test_user
2025-07-31 17:02:31.138 [WebSocket-5] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=chatroom, 成功用户数=1, 失败用户数=1
2025-07-31 17:02:31.138 [WebSocket-5] INFO  c.f.w.e.ChatRoomWebSocketService - 用户离开聊天室: userId=test_user, 当前在线数: 1
2025-07-31 17:02:31.138 [WebSocket-5] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:02:31.178 [SpringApplicationShutdownHook] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已移除: service=chatroom, userId=test_user, sessionId=a
2025-07-31 17:02:31.179 [SpringApplicationShutdownHook] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接关闭: service=chatroom, userId=test_user, sessionId=a, code=GOING_AWAY, reason=The web application is stopping
2025-07-31 17:02:31.179 [WebSocket-10] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=chatroom, 成功用户数=1, 失败用户数=0
2025-07-31 17:02:31.179 [WebSocket-10] INFO  c.f.w.e.ChatRoomWebSocketService - 用户离开聊天室: userId=test_user, 当前在线数: 1
2025-07-31 17:02:31.180 [WebSocket-10] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:02:31.224 [SpringApplicationShutdownHook] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已移除: service=monitor, userId=test_user, sessionId=8
2025-07-31 17:02:31.225 [SpringApplicationShutdownHook] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接关闭: service=monitor, userId=test_user, sessionId=8, code=GOING_AWAY, reason=The web application is stopping
2025-07-31 17:02:31.225 [WebSocket-9] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端断开: test_user
2025-07-31 17:02:31.225 [WebSocket-9] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:02:31.225 [SpringApplicationShutdownHook] WARN  c.f.w.s.WebSocketSessionManager - WebSocket会话移除失败，会话不匹配: service=monitor, userId=test_user
2025-07-31 17:02:31.225 [SpringApplicationShutdownHook] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接关闭: service=monitor, userId=test_user, sessionId=4, code=GOING_AWAY, reason=The web application is stopping
2025-07-31 17:02:31.226 [WebSocket-6] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端断开: test_user
2025-07-31 17:02:31.226 [WebSocket-6] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:02:31.285 [SpringApplicationShutdownHook] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已移除: service=chatroom, userId=user1, sessionId=2
2025-07-31 17:02:31.286 [SpringApplicationShutdownHook] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接关闭: service=chatroom, userId=user1, sessionId=2, code=GOING_AWAY, reason=The web application is stopping
2025-07-31 17:02:31.288 [WebSocket-8] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=chatroom, 成功用户数=0, 失败用户数=0
2025-07-31 17:02:31.289 [WebSocket-8] INFO  c.f.w.e.ChatRoomWebSocketService - 用户离开聊天室: userId=user1, 当前在线数: 0
2025-07-31 17:02:31.289 [WebSocket-8] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:02:31.322 [SpringApplicationShutdownHook] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已移除: service=notification, userId=user2, sessionId=3
2025-07-31 17:02:31.323 [SpringApplicationShutdownHook] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接关闭: service=notification, userId=user2, sessionId=3, code=GOING_AWAY, reason=The web application is stopping
2025-07-31 17:02:31.323 [WebSocket-6] INFO  c.f.w.e.NotificationWebSocketService - 用户断开通知服务: userId=user2
2025-07-31 17:02:31.323 [WebSocket-6] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:02:31.369 [SpringApplicationShutdownHook] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件订阅者取消注册成功: WebSocketMessageHandlerDispatcher
2025-07-31 17:02:31.370 [SpringApplicationShutdownHook] INFO  c.f.w.h.WebSocketMessageHandlerDispatcher - WebSocketMessageHandlerDispatcher已取消EventBus订阅
2025-07-31 17:02:31.375 [SpringApplicationShutdownHook] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件总线线程池已关闭
2025-07-31 17:02:31.376 [SpringApplicationShutdownHook] INFO  c.f.w.monitor.ThreadPoolMonitor - 线程池监控器已关闭
2025-07-31 17:02:52.345 [main] INFO  c.f.w.WebSocketFrameworkApplication - Starting WebSocketFrameworkApplication using Java 1.8.0_202 on DESKTOP-EGK8BP4 with PID 18980 (D:\workTool\IdeaProjects\websocket-framework\target\classes started by admin in D:\workTool\IdeaProjects\websocket-framework)
2025-07-31 17:02:52.351 [main] INFO  c.f.w.WebSocketFrameworkApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-31 17:02:54.272 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2025-07-31 17:02:54.349 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-07-31 17:02:54.589 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 92 ms. Found 0 Redis repository interfaces.
2025-07-31 17:02:58.082 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2025-07-31 17:02:58.109 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-31 17:02:58.110 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.63]
2025-07-31 17:02:58.519 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-31 17:02:58.521 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 5955 ms
2025-07-31 17:02:59.609 [main] INFO  c.f.w.c.WebSocketFrameworkConfig - WebSocket线程池已创建: 核心线程=10, 最大线程=50, 队列容量=1000
2025-07-31 17:02:59.664 [main] INFO  c.f.w.monitor.ThreadPoolMonitor - 智能线程池监控器已启动，初始监控间隔: 30秒
2025-07-31 17:02:59.741 [main] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件总线初始化完成
2025-07-31 17:02:59.872 [main] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件订阅者注册成功: ThreadPoolHealthChecker
2025-07-31 17:02:59.873 [main] INFO  c.f.w.health.ThreadPoolHealthChecker - WebSocket指标收集已启用并注册到健康检查器
2025-07-31 17:02:59.899 [main] INFO  c.f.w.p.WebSocketServiceProcessor - WebSocket服务注册成功: serviceId=chatroom, serviceName=聊天室服务, beanName=chatRoomWebSocketService, class=ChatRoomWebSocketService
2025-07-31 17:02:59.902 [main] INFO  c.f.w.p.WebSocketServiceProcessor - WebSocket服务注册成功: serviceId=notification, serviceName=通知推送服务, beanName=notificationWebSocketService, class=NotificationWebSocketService
2025-07-31 17:02:59.917 [main] INFO  c.f.w.p.WebSocketServiceProcessor - WebSocket服务注册成功: serviceId=monitor, serviceName=monitor, beanName=threadPoolMonitorWebSocketService, class=ThreadPoolMonitorWebSocketService
2025-07-31 17:02:59.924 [main] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件订阅者注册成功: WebSocketMessageHandlerDispatcher
2025-07-31 17:02:59.924 [main] INFO  c.f.w.h.WebSocketMessageHandlerDispatcher - WebSocketMessageHandlerDispatcher初始化完成, 注册了4个消息处理器, 1个拦截器
2025-07-31 17:02:59.929 [main] INFO  c.f.w.monitor.ThreadPoolMetricsStore - 线程池监控数据存储服务已启动，数据保留时间: 24小时
2025-07-31 17:03:00.988 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2025-07-31 17:03:01.020 [WebSocket-7] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:03:01.039 [main] INFO  c.f.w.WebSocketFrameworkApplication - Started WebSocketFrameworkApplication in 10.105 seconds (JVM running for 12.721)
2025-07-31 17:03:12.022 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-07-31 17:03:12.022 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-07-31 17:03:12.023 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-07-31 17:03:12.085 [http-nio-8080-exec-1] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:03:12.146 [http-nio-8080-exec-5] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:03:29.921 [http-nio-8080-exec-7] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:03:29.924 [http-nio-8080-exec-7] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:03:31.029 [WebSocket-8] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:03:31.547 [http-nio-8080-exec-2] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已添加: service=monitor, userId=monitor_1753952609912_ocz9v3t5l, sessionId=0
2025-07-31 17:03:31.651 [http-nio-8080-exec-2] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接建立: service=monitor, userId=monitor_1753952609912_ocz9v3t5l, sessionId=0, clientIp=null
2025-07-31 17:03:31.681 [WebSocket-3] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端连接: monitor_1753952609912_ocz9v3t5l
2025-07-31 17:03:31.750 [WebSocket-3] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753952609912_ocz9v3t5l, message={"type":"welcome","message":"欢迎连接线程池监控中心","timestamp":1753952611682}
2025-07-31 17:03:31.750 [WebSocket-3] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:03:31.784 [WebSocket-3] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753952609912_ocz9v3t5l, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":30,"samplingRate":2,"lastHealthStatus":"HEALTHY","monitoringExecutions":1,"avgMonitoringCostMs":0.0197},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":2,"queueSize":10,"completedTaskCount":18,"taskCount":30,"totalThreadCount":62,"peakThreadCount":62,"poolUtilization":0.04,"queueUtilization":0.01,"throughput":14.184397163120568,"timestamp":1753952611750},"timestamp":1753952611750},"type":"threadpool_metrics"}
2025-07-31 17:03:31.784 [WebSocket-3] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:03:31.784 [WebSocket-7] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:03:36.035 [WebSocket-4] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:03:36.037 [WebSocket-4] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 17:03:46.040 [WebSocket-10] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 17:03:57.955 [http-nio-8080-exec-9] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已添加: service=chatroom, userId=user1, sessionId=1
2025-07-31 17:03:57.957 [http-nio-8080-exec-9] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接建立: service=chatroom, userId=user1, sessionId=1, clientIp=null
2025-07-31 17:03:57.960 [WebSocket-2] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=chatroom, 成功用户数=1, 失败用户数=0
2025-07-31 17:03:57.961 [WebSocket-2] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=chatroom, userId=user1, message={"type":"system","message":"系统消息: 当前在线用户数: 1","timestamp":1753952637960}
2025-07-31 17:03:57.961 [WebSocket-2] INFO  c.f.w.e.ChatRoomWebSocketService - 用户加入聊天室: userId=user1, 当前在线数: 1
2025-07-31 17:03:57.961 [WebSocket-2] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:03:57.991 [WebSocket-1] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:03:59.266 [http-nio-8080-exec-10] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已添加: service=notification, userId=user2, sessionId=2
2025-07-31 17:03:59.267 [http-nio-8080-exec-10] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接建立: service=notification, userId=user2, sessionId=2, clientIp=null
2025-07-31 17:03:59.271 [WebSocket-5] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=notification, userId=user2, message={"type":"notification","title":"系统通知","content":"欢迎使用通知推送服务","level":"info","timestamp":1753952639270}
2025-07-31 17:03:59.272 [WebSocket-5] INFO  c.f.w.e.NotificationWebSocketService - 用户连接通知服务: userId=user2
2025-07-31 17:03:59.272 [WebSocket-5] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:03:59.300 [WebSocket-2] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:04:00.315 [WebSocket-7] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753952609912_ocz9v3t5l, sessionId=0, message={"action":"refresh","timestamp":1753952640312}
2025-07-31 17:04:00.319 [http-nio-8080-exec-5] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:04:00.329 [WebSocket-7] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:04:00.329 [WebSocket-7] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753952609912_ocz9v3t5l, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":30,"samplingRate":2,"lastHealthStatus":"HEALTHY","monitoringExecutions":1,"avgMonitoringCostMs":0.0197},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":12,"completedTaskCount":49,"taskCount":62,"totalThreadCount":64,"peakThreadCount":64,"poolUtilization":0.02,"queueUtilization":0.012,"throughput":0.0,"timestamp":1753952640329},"timestamp":1753952640329},"type":"threadpool_metrics"}
2025-07-31 17:04:00.329 [WebSocket-7] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:04:00.746 [ThreadPoolMonitor] INFO  c.f.w.monitor.ThreadPoolMonitor - 调整监控策略: 健康状态=健康, 监控间隔: 30秒->40秒, 采样率: 1:2 -> 1:3
2025-07-31 17:04:00.925 [ThreadPoolMonitor] INFO  c.f.w.monitor.ThreadPoolMonitor - 调整监控策略: 健康状态=健康, 监控间隔: 40秒->50秒, 采样率: 1:3 -> 1:4
2025-07-31 17:04:01.029 [WebSocket-9] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:04:01.125 [WebSocket-3] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 17:04:01.157 [ThreadPoolMonitor] INFO  c.f.w.monitor.ThreadPoolMonitor - 调整监控策略: 健康状态=健康, 监控间隔: 50秒->60秒, 采样率: 1:4 -> 1:5
2025-07-31 17:04:01.344 [ThreadPoolMonitor] INFO  c.f.w.monitor.ThreadPoolMonitor - 调整监控策略: 健康状态=健康, 监控间隔: 60秒->70秒, 采样率: 1:5 -> 1:5
2025-07-31 17:04:01.625 [WebSocket-3] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:04:05.111 [WebSocket-4] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=chatroom, userId=user1, sessionId=1, message=1
2025-07-31 17:04:05.113 [WebSocket-5] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=chatroom, 成功用户数=1, 失败用户数=0
2025-07-31 17:04:05.113 [WebSocket-5] INFO  c.f.w.e.ChatRoomWebSocketService - 收到聊天消息: userId=user1, message=1
2025-07-31 17:04:05.113 [WebSocket-5] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:04:06.028 [WebSocket-7] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:04:06.028 [WebSocket-7] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 17:04:16.022 [WebSocket-2] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 17:04:27.997 [WebSocket-2] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:04:29.276 [pool-1-thread-1] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=notification, userId=user2, message={"type":"notification","title":"定时推送","content":"这是一个定时推送消息: 1753952669276","level":"info","timestamp":1753952669276}
2025-07-31 17:04:29.312 [WebSocket-8] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:04:30.314 [WebSocket-4] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753952609912_ocz9v3t5l, sessionId=0, message={"action":"refresh","timestamp":1753952670314}
2025-07-31 17:04:30.314 [WebSocket-3] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:04:30.330 [http-nio-8080-exec-1] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:04:30.330 [WebSocket-3] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753952609912_ocz9v3t5l, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":6,"avgMonitoringCostMs":231.60155},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":12,"completedTaskCount":91,"taskCount":104,"totalThreadCount":64,"peakThreadCount":64,"poolUtilization":0.02,"queueUtilization":0.012,"throughput":0.9470476817919788,"timestamp":1753952670314},"timestamp":1753952670314},"type":"threadpool_metrics"}
2025-07-31 17:04:30.330 [WebSocket-3] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:04:31.023 [WebSocket-6] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:04:31.023 [WebSocket-1] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 17:04:31.629 [WebSocket-10] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:04:32.250 [http-nio-8080-exec-3] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已添加: service=chatroom, userId=test_user, sessionId=3
2025-07-31 17:04:32.251 [http-nio-8080-exec-3] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接建立: service=chatroom, userId=test_user, sessionId=3, clientIp=null
2025-07-31 17:04:32.253 [WebSocket-5] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=chatroom, 成功用户数=2, 失败用户数=0
2025-07-31 17:04:32.254 [WebSocket-5] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=chatroom, userId=test_user, message={"type":"system","message":"系统消息: 当前在线用户数: 2","timestamp":1753952672253}
2025-07-31 17:04:32.254 [WebSocket-5] INFO  c.f.w.e.ChatRoomWebSocketService - 用户加入聊天室: userId=test_user, 当前在线数: 2
2025-07-31 17:04:32.254 [WebSocket-5] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:04:32.289 [WebSocket-8] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:04:36.814 [WebSocket-7] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:04:36.814 [WebSocket-7] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 17:04:46.029 [WebSocket-7] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 17:04:48.868 [http-nio-8080-exec-2] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已移除: service=chatroom, userId=test_user, sessionId=3
2025-07-31 17:04:48.870 [http-nio-8080-exec-2] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接关闭: service=chatroom, userId=test_user, sessionId=3, code=GOING_AWAY, reason=null
2025-07-31 17:04:48.875 [WebSocket-5] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=chatroom, 成功用户数=1, 失败用户数=0
2025-07-31 17:04:48.875 [WebSocket-5] INFO  c.f.w.e.ChatRoomWebSocketService - 用户离开聊天室: userId=test_user, 当前在线数: 1
2025-07-31 17:04:48.875 [WebSocket-5] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:04:50.420 [http-nio-8080-exec-8] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已添加: service=monitor, userId=test_user, sessionId=4
2025-07-31 17:04:50.422 [http-nio-8080-exec-8] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接建立: service=monitor, userId=test_user, sessionId=4, clientIp=null
2025-07-31 17:04:50.422 [WebSocket-8] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端连接: test_user
2025-07-31 17:04:50.423 [WebSocket-8] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"type":"welcome","message":"欢迎连接线程池监控中心","timestamp":1753952690423}
2025-07-31 17:04:50.423 [WebSocket-8] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:04:50.424 [WebSocket-8] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":6,"avgMonitoringCostMs":231.60155},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":14,"completedTaskCount":126,"taskCount":141,"totalThreadCount":63,"peakThreadCount":64,"poolUtilization":0.02,"queueUtilization":0.014,"throughput":0.881704628949302,"timestamp":1753952690424},"timestamp":1753952690424},"type":"threadpool_metrics"}
2025-07-31 17:04:50.425 [WebSocket-8] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:04:50.453 [WebSocket-9] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:04:51.636 [WebSocket-4] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=4, message={"action":"refresh"}
2025-07-31 17:04:51.638 [WebSocket-4] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:04:51.654 [WebSocket-4] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":6,"avgMonitoringCostMs":231.60155},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":14,"completedTaskCount":137,"taskCount":152,"totalThreadCount":63,"peakThreadCount":64,"poolUtilization":0.02,"queueUtilization":0.014,"throughput":9.01639344262295,"timestamp":1753952691644},"timestamp":1753952691645},"type":"threadpool_metrics"}
2025-07-31 17:04:51.663 [WebSocket-4] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:04:51.814 [WebSocket-10] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=4, message={"action":"refresh"}
2025-07-31 17:04:51.815 [WebSocket-10] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:04:51.816 [WebSocket-10] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":6,"avgMonitoringCostMs":231.60155},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":14,"completedTaskCount":143,"taskCount":158,"totalThreadCount":63,"peakThreadCount":64,"poolUtilization":0.02,"queueUtilization":0.014,"throughput":35.08771929824561,"timestamp":1753952691815},"timestamp":1753952691815},"type":"threadpool_metrics"}
2025-07-31 17:04:51.821 [WebSocket-10] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:04:52.023 [WebSocket-7] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=4, message={"action":"refresh"}
2025-07-31 17:04:52.024 [WebSocket-2] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:04:52.029 [WebSocket-2] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":6,"avgMonitoringCostMs":231.60155},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":14,"completedTaskCount":149,"taskCount":164,"totalThreadCount":63,"peakThreadCount":64,"poolUtilization":0.02,"queueUtilization":0.014,"throughput":28.70813397129187,"timestamp":1753952692024},"timestamp":1753952692024},"type":"threadpool_metrics"}
2025-07-31 17:04:52.030 [WebSocket-2] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:04:52.270 [WebSocket-10] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=4, message={"action":"refresh"}
2025-07-31 17:04:52.270 [WebSocket-4] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:04:52.271 [WebSocket-4] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":6,"avgMonitoringCostMs":231.60155},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":14,"completedTaskCount":155,"taskCount":170,"totalThreadCount":63,"peakThreadCount":64,"poolUtilization":0.02,"queueUtilization":0.014,"throughput":24.390243902439025,"timestamp":1753952692270},"timestamp":1753952692270},"type":"threadpool_metrics"}
2025-07-31 17:04:52.272 [WebSocket-4] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:04:52.452 [WebSocket-3] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=4, message={"action":"refresh"}
2025-07-31 17:04:52.453 [WebSocket-2] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:04:52.459 [WebSocket-2] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":6,"avgMonitoringCostMs":231.60155},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":14,"completedTaskCount":161,"taskCount":176,"totalThreadCount":63,"peakThreadCount":64,"poolUtilization":0.02,"queueUtilization":0.014,"throughput":32.0855614973262,"timestamp":1753952692457},"timestamp":1753952692457},"type":"threadpool_metrics"}
2025-07-31 17:04:52.468 [WebSocket-2] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:04:52.708 [WebSocket-6] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=4, message={"action":"refresh"}
2025-07-31 17:04:52.709 [WebSocket-9] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:04:52.709 [WebSocket-9] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":6,"avgMonitoringCostMs":231.60155},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":14,"completedTaskCount":167,"taskCount":182,"totalThreadCount":63,"peakThreadCount":64,"poolUtilization":0.02,"queueUtilization":0.014,"throughput":23.80952380952381,"timestamp":1753952692709},"timestamp":1753952692709},"type":"threadpool_metrics"}
2025-07-31 17:04:52.710 [WebSocket-9] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:04:52.924 [WebSocket-5] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=4, message={"action":"refresh"}
2025-07-31 17:04:52.925 [WebSocket-10] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:04:52.926 [WebSocket-10] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":6,"avgMonitoringCostMs":231.60155},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":14,"completedTaskCount":173,"taskCount":188,"totalThreadCount":63,"peakThreadCount":64,"poolUtilization":0.02,"queueUtilization":0.014,"throughput":27.77777777777778,"timestamp":1753952692925},"timestamp":1753952692925},"type":"threadpool_metrics"}
2025-07-31 17:04:52.927 [WebSocket-10] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:04:53.283 [WebSocket-8] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=4, message={"action":"refresh"}
2025-07-31 17:04:53.283 [WebSocket-2] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:04:53.284 [WebSocket-2] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":6,"avgMonitoringCostMs":231.60155},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":14,"completedTaskCount":179,"taskCount":194,"totalThreadCount":63,"peakThreadCount":64,"poolUtilization":0.02,"queueUtilization":0.014,"throughput":16.75977653631285,"timestamp":1753952693283},"timestamp":1753952693283},"type":"threadpool_metrics"}
2025-07-31 17:04:53.284 [WebSocket-2] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:04:53.460 [WebSocket-3] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=4, message={"action":"refresh"}
2025-07-31 17:04:53.461 [WebSocket-5] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:04:53.461 [WebSocket-5] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":6,"avgMonitoringCostMs":231.60155},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":14,"completedTaskCount":185,"taskCount":200,"totalThreadCount":63,"peakThreadCount":64,"poolUtilization":0.02,"queueUtilization":0.014,"throughput":33.70786516853933,"timestamp":1753952693461},"timestamp":1753952693461},"type":"threadpool_metrics"}
2025-07-31 17:04:53.461 [WebSocket-5] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:04:53.612 [WebSocket-2] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=4, message={"action":"refresh"}
2025-07-31 17:04:53.613 [WebSocket-8] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:04:53.614 [WebSocket-8] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":6,"avgMonitoringCostMs":231.60155},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":14,"completedTaskCount":191,"taskCount":206,"totalThreadCount":63,"peakThreadCount":64,"poolUtilization":0.02,"queueUtilization":0.014,"throughput":39.473684210526315,"timestamp":1753952693613},"timestamp":1753952693613},"type":"threadpool_metrics"}
2025-07-31 17:04:53.614 [WebSocket-8] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:04:53.815 [WebSocket-7] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=4, message={"action":"refresh"}
2025-07-31 17:04:53.815 [WebSocket-2] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:04:53.816 [WebSocket-2] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":6,"avgMonitoringCostMs":231.60155},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":14,"completedTaskCount":197,"taskCount":212,"totalThreadCount":63,"peakThreadCount":64,"poolUtilization":0.02,"queueUtilization":0.014,"throughput":29.7029702970297,"timestamp":1753952693815},"timestamp":1753952693815},"type":"threadpool_metrics"}
2025-07-31 17:04:53.816 [WebSocket-2] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:04:54.061 [WebSocket-8] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=4, message={"action":"refresh"}
2025-07-31 17:04:54.061 [WebSocket-8] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:04:54.062 [WebSocket-8] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":6,"avgMonitoringCostMs":231.60155},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":14,"completedTaskCount":203,"taskCount":218,"totalThreadCount":63,"peakThreadCount":64,"poolUtilization":0.02,"queueUtilization":0.014,"throughput":24.390243902439025,"timestamp":1753952694061},"timestamp":1753952694061},"type":"threadpool_metrics"}
2025-07-31 17:04:54.062 [WebSocket-8] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:04:54.675 [http-nio-8080-exec-5] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已添加: service=chatroom, userId=test_user, sessionId=5
2025-07-31 17:04:54.676 [http-nio-8080-exec-5] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接建立: service=chatroom, userId=test_user, sessionId=5, clientIp=null
2025-07-31 17:04:54.677 [WebSocket-10] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=chatroom, 成功用户数=2, 失败用户数=0
2025-07-31 17:04:54.678 [WebSocket-10] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=chatroom, userId=test_user, message={"type":"system","message":"系统消息: 当前在线用户数: 2","timestamp":1753952694678}
2025-07-31 17:04:54.678 [WebSocket-10] INFO  c.f.w.e.ChatRoomWebSocketService - 用户加入聊天室: userId=test_user, 当前在线数: 2
2025-07-31 17:04:54.678 [WebSocket-10] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:04:54.712 [WebSocket-2] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:04:55.874 [http-nio-8080-exec-4] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已添加: service=chatroom, userId=test_user, sessionId=6
2025-07-31 17:04:55.875 [http-nio-8080-exec-4] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接建立: service=chatroom, userId=test_user, sessionId=6, clientIp=null
2025-07-31 17:04:55.876 [WebSocket-1] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=chatroom, 成功用户数=2, 失败用户数=0
2025-07-31 17:04:55.877 [WebSocket-1] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=chatroom, userId=test_user, message={"type":"system","message":"系统消息: 当前在线用户数: 2","timestamp":1753952695876}
2025-07-31 17:04:55.877 [WebSocket-1] INFO  c.f.w.e.ChatRoomWebSocketService - 用户加入聊天室: userId=test_user, 当前在线数: 2
2025-07-31 17:04:55.877 [WebSocket-1] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:04:55.917 [WebSocket-6] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:04:56.150 [WebSocket-3] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=chatroom, userId=test_user, sessionId=6, message={"action":"refresh"}
2025-07-31 17:04:56.152 [WebSocket-7] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=chatroom, 成功用户数=2, 失败用户数=0
2025-07-31 17:04:56.152 [WebSocket-7] INFO  c.f.w.e.ChatRoomWebSocketService - 收到聊天消息: userId=test_user, message={"action":"refresh"}
2025-07-31 17:04:56.152 [WebSocket-7] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:04:56.325 [WebSocket-6] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=chatroom, userId=test_user, sessionId=6, message={"action":"refresh"}
2025-07-31 17:04:56.325 [WebSocket-1] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=chatroom, 成功用户数=2, 失败用户数=0
2025-07-31 17:04:56.325 [WebSocket-1] INFO  c.f.w.e.ChatRoomWebSocketService - 收到聊天消息: userId=test_user, message={"action":"refresh"}
2025-07-31 17:04:56.325 [WebSocket-1] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:04:56.476 [WebSocket-5] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=chatroom, userId=test_user, sessionId=6, message={"action":"refresh"}
2025-07-31 17:04:56.478 [WebSocket-4] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=chatroom, 成功用户数=2, 失败用户数=0
2025-07-31 17:04:56.478 [WebSocket-4] INFO  c.f.w.e.ChatRoomWebSocketService - 收到聊天消息: userId=test_user, message={"action":"refresh"}
2025-07-31 17:04:56.478 [WebSocket-4] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:04:56.919 [WebSocket-6] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=chatroom, userId=test_user, sessionId=6, message={"action":"refresh"}
2025-07-31 17:04:56.920 [WebSocket-5] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=chatroom, 成功用户数=2, 失败用户数=0
2025-07-31 17:04:56.922 [WebSocket-5] INFO  c.f.w.e.ChatRoomWebSocketService - 收到聊天消息: userId=test_user, message={"action":"refresh"}
2025-07-31 17:04:56.922 [WebSocket-5] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:04:57.093 [WebSocket-1] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=chatroom, userId=test_user, sessionId=6, message={"action":"refresh"}
2025-07-31 17:04:57.094 [WebSocket-1] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=chatroom, 成功用户数=2, 失败用户数=0
2025-07-31 17:04:57.094 [WebSocket-1] INFO  c.f.w.e.ChatRoomWebSocketService - 收到聊天消息: userId=test_user, message={"action":"refresh"}
2025-07-31 17:04:57.094 [WebSocket-1] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:04:57.261 [WebSocket-7] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=chatroom, userId=test_user, sessionId=6, message={"action":"refresh"}
2025-07-31 17:04:57.263 [WebSocket-2] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=chatroom, 成功用户数=2, 失败用户数=0
2025-07-31 17:04:57.263 [WebSocket-2] INFO  c.f.w.e.ChatRoomWebSocketService - 收到聊天消息: userId=test_user, message={"action":"refresh"}
2025-07-31 17:04:57.263 [WebSocket-2] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:04:57.427 [WebSocket-1] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=chatroom, userId=test_user, sessionId=6, message={"action":"refresh"}
2025-07-31 17:04:57.428 [WebSocket-9] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=chatroom, 成功用户数=2, 失败用户数=0
2025-07-31 17:04:57.428 [WebSocket-9] INFO  c.f.w.e.ChatRoomWebSocketService - 收到聊天消息: userId=test_user, message={"action":"refresh"}
2025-07-31 17:04:57.428 [WebSocket-9] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:04:57.598 [WebSocket-7] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=chatroom, userId=test_user, sessionId=6, message={"action":"refresh"}
2025-07-31 17:04:57.599 [WebSocket-3] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=chatroom, 成功用户数=2, 失败用户数=0
2025-07-31 17:04:57.600 [WebSocket-3] INFO  c.f.w.e.ChatRoomWebSocketService - 收到聊天消息: userId=test_user, message={"action":"refresh"}
2025-07-31 17:04:57.600 [WebSocket-3] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:04:57.747 [WebSocket-5] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=chatroom, userId=test_user, sessionId=6, message={"action":"refresh"}
2025-07-31 17:04:57.748 [WebSocket-2] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=chatroom, 成功用户数=2, 失败用户数=0
2025-07-31 17:04:57.748 [WebSocket-2] INFO  c.f.w.e.ChatRoomWebSocketService - 收到聊天消息: userId=test_user, message={"action":"refresh"}
2025-07-31 17:04:57.748 [WebSocket-2] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:04:57.915 [WebSocket-6] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=chatroom, userId=test_user, sessionId=6, message={"action":"refresh"}
2025-07-31 17:04:57.917 [WebSocket-6] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=chatroom, 成功用户数=2, 失败用户数=0
2025-07-31 17:04:57.917 [WebSocket-6] INFO  c.f.w.e.ChatRoomWebSocketService - 收到聊天消息: userId=test_user, message={"action":"refresh"}
2025-07-31 17:04:57.917 [WebSocket-6] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:04:57.999 [WebSocket-7] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:04:58.093 [WebSocket-3] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=chatroom, userId=test_user, sessionId=6, message={"action":"refresh"}
2025-07-31 17:04:58.094 [WebSocket-3] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=chatroom, 成功用户数=2, 失败用户数=0
2025-07-31 17:04:58.095 [WebSocket-3] INFO  c.f.w.e.ChatRoomWebSocketService - 收到聊天消息: userId=test_user, message={"action":"refresh"}
2025-07-31 17:04:58.095 [WebSocket-3] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:04:58.268 [WebSocket-4] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=chatroom, userId=test_user, sessionId=6, message={"action":"refresh"}
2025-07-31 17:04:58.269 [WebSocket-2] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=chatroom, 成功用户数=2, 失败用户数=0
2025-07-31 17:04:58.269 [WebSocket-2] INFO  c.f.w.e.ChatRoomWebSocketService - 收到聊天消息: userId=test_user, message={"action":"refresh"}
2025-07-31 17:04:58.269 [WebSocket-2] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:04:58.444 [WebSocket-9] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=chatroom, userId=test_user, sessionId=6, message={"action":"refresh"}
2025-07-31 17:04:58.445 [WebSocket-3] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=chatroom, 成功用户数=2, 失败用户数=0
2025-07-31 17:04:58.445 [WebSocket-3] INFO  c.f.w.e.ChatRoomWebSocketService - 收到聊天消息: userId=test_user, message={"action":"refresh"}
2025-07-31 17:04:58.446 [WebSocket-3] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:04:58.820 [WebSocket-7] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=chatroom, userId=test_user, sessionId=6, message={"action":"refresh"}
2025-07-31 17:04:58.821 [WebSocket-7] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=chatroom, 成功用户数=2, 失败用户数=0
2025-07-31 17:04:58.822 [WebSocket-7] INFO  c.f.w.e.ChatRoomWebSocketService - 收到聊天消息: userId=test_user, message={"action":"refresh"}
2025-07-31 17:04:58.822 [WebSocket-7] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:04:59.279 [pool-1-thread-1] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=notification, userId=user2, message={"type":"notification","title":"定时推送","content":"这是一个定时推送消息: 1753952699278","level":"info","timestamp":1753952699278}
2025-07-31 17:04:59.323 [WebSocket-6] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:04:59.673 [http-nio-8080-exec-3] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已添加: service=monitor, userId=test_user, sessionId=7
2025-07-31 17:04:59.674 [http-nio-8080-exec-3] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接建立: service=monitor, userId=test_user, sessionId=7, clientIp=null
2025-07-31 17:04:59.674 [WebSocket-8] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端连接: test_user
2025-07-31 17:04:59.675 [WebSocket-8] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"type":"welcome","message":"欢迎连接线程池监控中心","timestamp":1753952699674}
2025-07-31 17:04:59.675 [WebSocket-8] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:04:59.675 [WebSocket-8] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":6,"avgMonitoringCostMs":231.60155},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":17,"completedTaskCount":331,"taskCount":349,"totalThreadCount":63,"peakThreadCount":64,"poolUtilization":0.02,"queueUtilization":0.017,"throughput":22.80014250089063,"timestamp":1753952699675},"timestamp":1753952699675},"type":"threadpool_metrics"}
2025-07-31 17:04:59.676 [WebSocket-8] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:04:59.707 [WebSocket-4] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:05:00.309 [WebSocket-1] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753952609912_ocz9v3t5l, sessionId=0, message={"action":"refresh","timestamp":1753952700308}
2025-07-31 17:05:00.310 [WebSocket-5] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:05:00.311 [WebSocket-5] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753952609912_ocz9v3t5l, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":6,"avgMonitoringCostMs":231.60155},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":17,"completedTaskCount":342,"taskCount":360,"totalThreadCount":63,"peakThreadCount":64,"poolUtilization":0.02,"queueUtilization":0.017,"throughput":17.322834645669293,"timestamp":1753952700310},"timestamp":1753952700310},"type":"threadpool_metrics"}
2025-07-31 17:05:00.311 [WebSocket-5] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:05:00.316 [http-nio-8080-exec-6] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:05:00.853 [WebSocket-4] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=7, message={"action":"refresh"}
2025-07-31 17:05:00.854 [WebSocket-7] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:05:00.856 [WebSocket-7] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":6,"avgMonitoringCostMs":231.60155},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":17,"completedTaskCount":348,"taskCount":366,"totalThreadCount":63,"peakThreadCount":64,"poolUtilization":0.02,"queueUtilization":0.017,"throughput":9.276437847866418,"timestamp":1753952700855},"timestamp":1753952700855},"type":"threadpool_metrics"}
2025-07-31 17:05:00.856 [WebSocket-7] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:05:01.028 [WebSocket-5] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:05:01.063 [WebSocket-5] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:05:01.085 [WebSocket-7] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=7, message={"action":"refresh"}
2025-07-31 17:05:01.085 [WebSocket-7] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:05:01.087 [WebSocket-7] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":6,"avgMonitoringCostMs":231.60155},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":2,"queueSize":16,"completedTaskCount":356,"taskCount":374,"totalThreadCount":63,"peakThreadCount":64,"poolUtilization":0.04,"queueUtilization":0.016,"throughput":227.27272727272728,"timestamp":1753952701085},"timestamp":1753952701085},"type":"threadpool_metrics"}
2025-07-31 17:05:01.087 [WebSocket-7] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:05:01.414 [WebSocket-3] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=7, message={"action":"refresh"}
2025-07-31 17:05:01.416 [WebSocket-1] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:05:01.416 [WebSocket-1] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":6,"avgMonitoringCostMs":231.60155},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":17,"completedTaskCount":363,"taskCount":381,"totalThreadCount":63,"peakThreadCount":64,"poolUtilization":0.02,"queueUtilization":0.017,"throughput":21.148036253776436,"timestamp":1753952701416},"timestamp":1753952701416},"type":"threadpool_metrics"}
2025-07-31 17:05:01.419 [WebSocket-1] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:05:01.581 [WebSocket-5] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=7, message={"action":"refresh"}
2025-07-31 17:05:01.581 [WebSocket-6] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:05:01.582 [WebSocket-6] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":6,"avgMonitoringCostMs":231.60155},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":17,"completedTaskCount":369,"taskCount":387,"totalThreadCount":63,"peakThreadCount":64,"poolUtilization":0.02,"queueUtilization":0.017,"throughput":36.36363636363636,"timestamp":1753952701581},"timestamp":1753952701581},"type":"threadpool_metrics"}
2025-07-31 17:05:01.582 [WebSocket-6] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:05:01.637 [WebSocket-4] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:05:02.079 [http-nio-8080-exec-5] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已移除: service=monitor, userId=test_user, sessionId=7
2025-07-31 17:05:02.079 [http-nio-8080-exec-5] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接关闭: service=monitor, userId=test_user, sessionId=7, code=NORMAL_CLOSURE, reason=null
2025-07-31 17:05:02.079 [WebSocket-1] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端断开: test_user
2025-07-31 17:05:02.080 [WebSocket-1] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:05:02.583 [http-nio-8080-exec-3] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已添加: service=monitor, userId=test_user, sessionId=8
2025-07-31 17:05:02.583 [http-nio-8080-exec-3] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接建立: service=monitor, userId=test_user, sessionId=8, clientIp=null
2025-07-31 17:05:02.584 [WebSocket-4] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端连接: test_user
2025-07-31 17:05:02.585 [WebSocket-4] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"type":"welcome","message":"欢迎连接线程池监控中心","timestamp":1753952702584}
2025-07-31 17:05:02.585 [WebSocket-4] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:05:02.587 [WebSocket-4] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":6,"avgMonitoringCostMs":231.60155},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":17,"completedTaskCount":389,"taskCount":407,"totalThreadCount":63,"peakThreadCount":64,"poolUtilization":0.02,"queueUtilization":0.017,"throughput":19.9203187250996,"timestamp":1753952702585},"timestamp":1753952702585},"type":"threadpool_metrics"}
2025-07-31 17:05:02.588 [WebSocket-4] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:05:02.621 [WebSocket-3] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:05:02.981 [WebSocket-9] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=8, message={"action":"refresh"}
2025-07-31 17:05:02.981 [WebSocket-8] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:05:02.982 [WebSocket-8] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":6,"avgMonitoringCostMs":231.60155},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":17,"completedTaskCount":400,"taskCount":418,"totalThreadCount":63,"peakThreadCount":64,"poolUtilization":0.02,"queueUtilization":0.017,"throughput":27.777777777777775,"timestamp":1753952702981},"timestamp":1753952702981},"type":"threadpool_metrics"}
2025-07-31 17:05:02.982 [WebSocket-8] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:05:03.430 [WebSocket-10] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=8, message={"action":"refresh"}
2025-07-31 17:05:03.430 [WebSocket-6] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:05:03.432 [WebSocket-6] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":6,"avgMonitoringCostMs":231.60155},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":17,"completedTaskCount":406,"taskCount":424,"totalThreadCount":63,"peakThreadCount":64,"poolUtilization":0.02,"queueUtilization":0.017,"throughput":13.333333333333332,"timestamp":1753952703431},"timestamp":1753952703431},"type":"threadpool_metrics"}
2025-07-31 17:05:03.432 [WebSocket-6] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:05:03.613 [WebSocket-8] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=8, message={"action":"refresh"}
2025-07-31 17:05:03.614 [WebSocket-1] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:05:03.616 [WebSocket-1] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":6,"avgMonitoringCostMs":231.60155},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":17,"completedTaskCount":412,"taskCount":430,"totalThreadCount":63,"peakThreadCount":64,"poolUtilization":0.02,"queueUtilization":0.017,"throughput":32.608695652173914,"timestamp":1753952703615},"timestamp":1753952703615},"type":"threadpool_metrics"}
2025-07-31 17:05:03.616 [WebSocket-1] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:05:03.772 [WebSocket-10] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=8, message={"action":"refresh"}
2025-07-31 17:05:03.773 [WebSocket-6] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:05:03.774 [WebSocket-6] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":6,"avgMonitoringCostMs":231.60155},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":17,"completedTaskCount":418,"taskCount":436,"totalThreadCount":63,"peakThreadCount":64,"poolUtilization":0.02,"queueUtilization":0.017,"throughput":37.974683544303794,"timestamp":1753952703773},"timestamp":1753952703773},"type":"threadpool_metrics"}
2025-07-31 17:05:03.774 [WebSocket-6] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:05:03.948 [WebSocket-9] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=8, message={"action":"refresh"}
2025-07-31 17:05:03.949 [WebSocket-9] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:05:03.950 [WebSocket-9] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":6,"avgMonitoringCostMs":231.60155},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":17,"completedTaskCount":424,"taskCount":442,"totalThreadCount":63,"peakThreadCount":64,"poolUtilization":0.02,"queueUtilization":0.017,"throughput":34.09090909090909,"timestamp":1753952703949},"timestamp":1753952703949},"type":"threadpool_metrics"}
2025-07-31 17:05:03.950 [WebSocket-9] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:05:04.804 [http-nio-8080-exec-1] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已添加: service=monitor, userId=test_user, sessionId=9
2025-07-31 17:05:04.805 [http-nio-8080-exec-1] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接建立: service=monitor, userId=test_user, sessionId=9, clientIp=null
2025-07-31 17:05:04.805 [WebSocket-6] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端连接: test_user
2025-07-31 17:05:04.807 [WebSocket-6] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"type":"welcome","message":"欢迎连接线程池监控中心","timestamp":1753952704806}
2025-07-31 17:05:04.807 [WebSocket-6] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:05:04.808 [WebSocket-6] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":6,"avgMonitoringCostMs":231.60155},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":18,"completedTaskCount":430,"taskCount":449,"totalThreadCount":63,"peakThreadCount":64,"poolUtilization":0.02,"queueUtilization":0.018,"throughput":6.993006993006993,"timestamp":1753952704807},"timestamp":1753952704807},"type":"threadpool_metrics"}
2025-07-31 17:05:04.808 [WebSocket-6] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:05:04.841 [WebSocket-9] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:05:05.204 [WebSocket-7] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=9, message={"action":"refresh"}
2025-07-31 17:05:05.205 [WebSocket-2] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:05:05.208 [WebSocket-2] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":6,"avgMonitoringCostMs":231.60155},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":18,"completedTaskCount":441,"taskCount":460,"totalThreadCount":63,"peakThreadCount":64,"poolUtilization":0.02,"queueUtilization":0.018,"throughput":27.63819095477387,"timestamp":1753952705205},"timestamp":1753952705205},"type":"threadpool_metrics"}
2025-07-31 17:05:05.209 [WebSocket-2] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:05:05.408 [WebSocket-5] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=9, message={"action":"refresh"}
2025-07-31 17:05:05.409 [WebSocket-5] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:05:05.410 [WebSocket-5] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":6,"avgMonitoringCostMs":231.60155},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":18,"completedTaskCount":447,"taskCount":466,"totalThreadCount":63,"peakThreadCount":64,"poolUtilization":0.02,"queueUtilization":0.018,"throughput":29.411764705882355,"timestamp":1753952705409},"timestamp":1753952705409},"type":"threadpool_metrics"}
2025-07-31 17:05:05.410 [WebSocket-5] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:05:05.574 [WebSocket-9] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:05:05.573 [WebSocket-8] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=9, message={"action":"refresh"}
2025-07-31 17:05:05.575 [WebSocket-9] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":6,"avgMonitoringCostMs":231.60155},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":2,"queueSize":18,"completedTaskCount":452,"taskCount":472,"totalThreadCount":63,"peakThreadCount":64,"poolUtilization":0.04,"queueUtilization":0.018,"throughput":30.3030303030303,"timestamp":1753952705574},"timestamp":1753952705574},"type":"threadpool_metrics"}
2025-07-31 17:05:05.575 [WebSocket-9] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:05:05.763 [WebSocket-4] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=9, message={"action":"refresh"}
2025-07-31 17:05:05.764 [WebSocket-4] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:05:05.764 [WebSocket-4] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":6,"avgMonitoringCostMs":231.60155},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":18,"completedTaskCount":459,"taskCount":478,"totalThreadCount":63,"peakThreadCount":64,"poolUtilization":0.02,"queueUtilization":0.018,"throughput":36.8421052631579,"timestamp":1753952705764},"timestamp":1753952705764},"type":"threadpool_metrics"}
2025-07-31 17:05:05.764 [WebSocket-4] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:05:05.937 [WebSocket-1] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=9, message={"action":"refresh"}
2025-07-31 17:05:05.938 [WebSocket-1] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:05:05.939 [WebSocket-1] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":6,"avgMonitoringCostMs":231.60155},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":18,"completedTaskCount":465,"taskCount":484,"totalThreadCount":63,"peakThreadCount":64,"poolUtilization":0.02,"queueUtilization":0.018,"throughput":34.48275862068966,"timestamp":1753952705938},"timestamp":1753952705938},"type":"threadpool_metrics"}
2025-07-31 17:05:05.939 [WebSocket-1] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:05:06.026 [WebSocket-1] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:05:06.027 [WebSocket-1] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=2, 失败用户数=0
2025-07-31 17:05:06.296 [http-nio-8080-exec-9] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已移除: service=monitor, userId=test_user, sessionId=9
2025-07-31 17:05:06.296 [http-nio-8080-exec-9] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接关闭: service=monitor, userId=test_user, sessionId=9, code=NORMAL_CLOSURE, reason=null
2025-07-31 17:05:06.296 [WebSocket-4] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端断开: test_user
2025-07-31 17:05:06.296 [WebSocket-4] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:05:07.250 [http-nio-8080-exec-10] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已添加: service=monitor, userId=test_user, sessionId=a
2025-07-31 17:05:07.251 [http-nio-8080-exec-10] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接建立: service=monitor, userId=test_user, sessionId=a, clientIp=null
2025-07-31 17:05:07.251 [WebSocket-9] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端连接: test_user
2025-07-31 17:05:07.252 [WebSocket-9] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"type":"welcome","message":"欢迎连接线程池监控中心","timestamp":1753952707251}
2025-07-31 17:05:07.252 [WebSocket-9] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:05:07.253 [WebSocket-9] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":6,"avgMonitoringCostMs":231.60155},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":19,"completedTaskCount":477,"taskCount":497,"totalThreadCount":63,"peakThreadCount":64,"poolUtilization":0.02,"queueUtilization":0.019,"throughput":8.97226753670473,"timestamp":1753952707252},"timestamp":1753952707252},"type":"threadpool_metrics"}
2025-07-31 17:05:07.253 [WebSocket-9] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:05:07.288 [WebSocket-6] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:05:07.477 [http-nio-8080-exec-1] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已添加: service=monitor, userId=test_user, sessionId=b
2025-07-31 17:05:07.478 [http-nio-8080-exec-1] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接建立: service=monitor, userId=test_user, sessionId=b, clientIp=null
2025-07-31 17:05:07.478 [WebSocket-2] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端连接: test_user
2025-07-31 17:05:07.480 [WebSocket-2] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"type":"welcome","message":"欢迎连接线程池监控中心","timestamp":1753952707479}
2025-07-31 17:05:07.480 [WebSocket-2] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:05:07.480 [WebSocket-2] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":6,"avgMonitoringCostMs":231.60155},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":20,"completedTaskCount":488,"taskCount":509,"totalThreadCount":63,"peakThreadCount":64,"poolUtilization":0.02,"queueUtilization":0.02,"throughput":48.24561403508772,"timestamp":1753952707480},"timestamp":1753952707480},"type":"threadpool_metrics"}
2025-07-31 17:05:07.482 [WebSocket-2] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:05:07.580 [WebSocket-7] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:05:07.748 [WebSocket-8] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=b, message={"action":"refresh"}
2025-07-31 17:05:07.749 [WebSocket-8] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:05:07.750 [WebSocket-8] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":6,"avgMonitoringCostMs":231.60155},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":20,"completedTaskCount":499,"taskCount":520,"totalThreadCount":63,"peakThreadCount":64,"poolUtilization":0.02,"queueUtilization":0.02,"throughput":40.89219330855018,"timestamp":1753952707749},"timestamp":1753952707749},"type":"threadpool_metrics"}
2025-07-31 17:05:07.750 [WebSocket-8] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:05:07.941 [WebSocket-5] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=b, message={"action":"refresh"}
2025-07-31 17:05:07.941 [WebSocket-1] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:05:07.942 [WebSocket-1] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":6,"avgMonitoringCostMs":231.60155},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":20,"completedTaskCount":505,"taskCount":526,"totalThreadCount":63,"peakThreadCount":64,"poolUtilization":0.02,"queueUtilization":0.02,"throughput":31.25,"timestamp":1753952707941},"timestamp":1753952707941},"type":"threadpool_metrics"}
2025-07-31 17:05:07.942 [WebSocket-1] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:05:08.318 [http-nio-8080-exec-6] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已添加: service=monitor, userId=test_user, sessionId=c
2025-07-31 17:05:08.319 [http-nio-8080-exec-6] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接建立: service=monitor, userId=test_user, sessionId=c, clientIp=null
2025-07-31 17:05:08.320 [WebSocket-8] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端连接: test_user
2025-07-31 17:05:08.321 [WebSocket-8] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"type":"welcome","message":"欢迎连接线程池监控中心","timestamp":1753952708320}
2025-07-31 17:05:08.321 [WebSocket-8] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:05:08.322 [WebSocket-8] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":6,"avgMonitoringCostMs":231.60155},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":21,"completedTaskCount":511,"taskCount":533,"totalThreadCount":63,"peakThreadCount":64,"poolUtilization":0.02,"queueUtilization":0.021,"throughput":15.789473684210526,"timestamp":1753952708321},"timestamp":1753952708321},"type":"threadpool_metrics"}
2025-07-31 17:05:08.322 [WebSocket-8] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:05:08.358 [WebSocket-3] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:05:08.532 [http-nio-8080-exec-8] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已添加: service=monitor, userId=test_user, sessionId=d
2025-07-31 17:05:08.533 [http-nio-8080-exec-8] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接建立: service=monitor, userId=test_user, sessionId=d, clientIp=null
2025-07-31 17:05:08.534 [WebSocket-6] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端连接: test_user
2025-07-31 17:05:08.535 [WebSocket-6] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"type":"welcome","message":"欢迎连接线程池监控中心","timestamp":1753952708534}
2025-07-31 17:05:08.535 [WebSocket-6] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:05:08.537 [WebSocket-6] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":6,"avgMonitoringCostMs":231.60155},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":22,"completedTaskCount":522,"taskCount":545,"totalThreadCount":63,"peakThreadCount":64,"poolUtilization":0.02,"queueUtilization":0.022,"throughput":51.401869158878505,"timestamp":1753952708535},"timestamp":1753952708535},"type":"threadpool_metrics"}
2025-07-31 17:05:08.537 [WebSocket-6] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:05:08.582 [WebSocket-2] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:05:08.696 [http-nio-8080-exec-10] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已添加: service=monitor, userId=test_user, sessionId=e
2025-07-31 17:05:08.696 [http-nio-8080-exec-10] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接建立: service=monitor, userId=test_user, sessionId=e, clientIp=null
2025-07-31 17:05:08.697 [WebSocket-7] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端连接: test_user
2025-07-31 17:05:08.703 [WebSocket-7] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"type":"welcome","message":"欢迎连接线程池监控中心","timestamp":1753952708698}
2025-07-31 17:05:08.703 [WebSocket-7] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:05:08.705 [WebSocket-7] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":6,"avgMonitoringCostMs":231.60155},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":23,"completedTaskCount":533,"taskCount":557,"totalThreadCount":63,"peakThreadCount":64,"poolUtilization":0.02,"queueUtilization":0.023,"throughput":65.47619047619047,"timestamp":1753952708703},"timestamp":1753952708703},"type":"threadpool_metrics"}
2025-07-31 17:05:08.706 [WebSocket-7] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:05:08.736 [WebSocket-2] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:05:08.866 [http-nio-8080-exec-5] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已添加: service=monitor, userId=test_user, sessionId=f
2025-07-31 17:05:08.866 [http-nio-8080-exec-5] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接建立: service=monitor, userId=test_user, sessionId=f, clientIp=null
2025-07-31 17:05:08.866 [WebSocket-5] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端连接: test_user
2025-07-31 17:05:08.866 [WebSocket-5] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"type":"welcome","message":"欢迎连接线程池监控中心","timestamp":1753952708866}
2025-07-31 17:05:08.866 [WebSocket-5] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:05:08.881 [WebSocket-5] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":6,"avgMonitoringCostMs":231.60155},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":24,"completedTaskCount":544,"taskCount":569,"totalThreadCount":63,"peakThreadCount":64,"poolUtilization":0.02,"queueUtilization":0.024,"throughput":67.48466257668711,"timestamp":1753952708866},"timestamp":1753952708866},"type":"threadpool_metrics"}
2025-07-31 17:05:08.881 [WebSocket-5] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:05:08.912 [WebSocket-10] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:05:09.285 [WebSocket-4] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=f, message={"action":"refresh"}
2025-07-31 17:05:09.286 [WebSocket-5] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:05:09.286 [WebSocket-5] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":6,"avgMonitoringCostMs":231.60155},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":24,"completedTaskCount":555,"taskCount":580,"totalThreadCount":63,"peakThreadCount":64,"poolUtilization":0.02,"queueUtilization":0.024,"throughput":26.19047619047619,"timestamp":1753952709286},"timestamp":1753952709286},"type":"threadpool_metrics"}
2025-07-31 17:05:09.286 [WebSocket-5] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:05:09.620 [http-nio-8080-exec-6] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已移除: service=monitor, userId=test_user, sessionId=f
2025-07-31 17:05:09.621 [http-nio-8080-exec-6] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接关闭: service=monitor, userId=test_user, sessionId=f, code=NORMAL_CLOSURE, reason=null
2025-07-31 17:05:09.622 [WebSocket-1] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端断开: test_user
2025-07-31 17:05:09.622 [WebSocket-1] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:05:11.192 [http-nio-8080-exec-2] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已添加: service=monitor, userId=test_user, sessionId=10
2025-07-31 17:05:11.194 [http-nio-8080-exec-2] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接建立: service=monitor, userId=test_user, sessionId=10, clientIp=null
2025-07-31 17:05:11.194 [WebSocket-8] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端连接: test_user
2025-07-31 17:05:11.197 [WebSocket-8] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"type":"welcome","message":"欢迎连接线程池监控中心","timestamp":1753952711194}
2025-07-31 17:05:11.197 [WebSocket-8] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:05:11.197 [WebSocket-8] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":6,"avgMonitoringCostMs":231.60155},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":25,"completedTaskCount":566,"taskCount":592,"totalThreadCount":63,"peakThreadCount":64,"poolUtilization":0.02,"queueUtilization":0.025,"throughput":5.7561486132914705,"timestamp":1753952711197},"timestamp":1753952711197},"type":"threadpool_metrics"}
2025-07-31 17:05:11.197 [WebSocket-8] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:05:11.240 [WebSocket-3] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:05:11.476 [WebSocket-7] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=10, message={"action":"refresh"}
2025-07-31 17:05:11.476 [WebSocket-1] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:05:11.479 [WebSocket-1] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":7,"avgMonitoringCostMs":198.51597142857142},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":25,"completedTaskCount":577,"taskCount":603,"totalThreadCount":63,"peakThreadCount":64,"poolUtilization":0.02,"queueUtilization":0.025,"throughput":39.42652329749104,"timestamp":1753952711476},"timestamp":1753952711476},"type":"threadpool_metrics"}
2025-07-31 17:05:11.480 [WebSocket-1] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:05:11.662 [WebSocket-2] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=10, message={"action":"refresh"}
2025-07-31 17:05:11.662 [WebSocket-8] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:05:11.664 [WebSocket-8] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":7,"avgMonitoringCostMs":198.51597142857142},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":25,"completedTaskCount":583,"taskCount":609,"totalThreadCount":63,"peakThreadCount":64,"poolUtilization":0.02,"queueUtilization":0.025,"throughput":32.25806451612903,"timestamp":1753952711662},"timestamp":1753952711662},"type":"threadpool_metrics"}
2025-07-31 17:05:11.664 [WebSocket-8] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:05:11.854 [WebSocket-6] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=test_user, sessionId=10, message={"action":"refresh"}
2025-07-31 17:05:11.855 [WebSocket-3] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:05:11.855 [WebSocket-3] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=test_user, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":7,"avgMonitoringCostMs":198.51597142857142},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":25,"completedTaskCount":589,"taskCount":615,"totalThreadCount":63,"peakThreadCount":64,"poolUtilization":0.02,"queueUtilization":0.025,"throughput":31.088082901554404,"timestamp":1753952711855},"timestamp":1753952711855},"type":"threadpool_metrics"}
2025-07-31 17:05:11.855 [WebSocket-3] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:05:12.464 [http-nio-8080-exec-5] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已添加: service=chatroom, userId=test_user, sessionId=11
2025-07-31 17:05:12.464 [http-nio-8080-exec-5] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接建立: service=chatroom, userId=test_user, sessionId=11, clientIp=null
2025-07-31 17:05:12.464 [WebSocket-1] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=chatroom, 成功用户数=2, 失败用户数=0
2025-07-31 17:05:12.464 [WebSocket-1] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=chatroom, userId=test_user, message={"type":"system","message":"系统消息: 当前在线用户数: 2","timestamp":1753952712464}
2025-07-31 17:05:12.464 [WebSocket-1] INFO  c.f.w.e.ChatRoomWebSocketService - 用户加入聊天室: userId=test_user, 当前在线数: 2
2025-07-31 17:05:12.464 [WebSocket-1] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:05:12.508 [WebSocket-3] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:05:13.495 [WebSocket-7] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=chatroom, userId=test_user, sessionId=11, message={"action":"refresh"}
2025-07-31 17:05:13.496 [WebSocket-5] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=chatroom, 成功用户数=2, 失败用户数=0
2025-07-31 17:05:13.496 [WebSocket-5] INFO  c.f.w.e.ChatRoomWebSocketService - 收到聊天消息: userId=test_user, message={"action":"refresh"}
2025-07-31 17:05:13.496 [WebSocket-5] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:05:13.671 [WebSocket-2] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=chatroom, userId=test_user, sessionId=11, message={"action":"refresh"}
2025-07-31 17:05:13.672 [WebSocket-3] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=chatroom, 成功用户数=2, 失败用户数=0
2025-07-31 17:05:13.672 [WebSocket-3] INFO  c.f.w.e.ChatRoomWebSocketService - 收到聊天消息: userId=test_user, message={"action":"refresh"}
2025-07-31 17:05:13.672 [WebSocket-3] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:05:13.831 [WebSocket-4] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=chatroom, userId=test_user, sessionId=11, message={"action":"refresh"}
2025-07-31 17:05:13.831 [WebSocket-5] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=chatroom, 成功用户数=2, 失败用户数=0
2025-07-31 17:05:13.832 [WebSocket-5] INFO  c.f.w.e.ChatRoomWebSocketService - 收到聊天消息: userId=test_user, message={"action":"refresh"}
2025-07-31 17:05:13.832 [WebSocket-5] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:05:14.004 [WebSocket-6] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=chatroom, userId=test_user, sessionId=11, message={"action":"refresh"}
2025-07-31 17:05:14.005 [WebSocket-7] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=chatroom, 成功用户数=2, 失败用户数=0
2025-07-31 17:05:14.006 [WebSocket-7] INFO  c.f.w.e.ChatRoomWebSocketService - 收到聊天消息: userId=test_user, message={"action":"refresh"}
2025-07-31 17:05:14.006 [WebSocket-7] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:05:14.172 [WebSocket-5] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=chatroom, userId=test_user, sessionId=11, message={"action":"refresh"}
2025-07-31 17:05:14.173 [WebSocket-3] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=chatroom, 成功用户数=2, 失败用户数=0
2025-07-31 17:05:14.173 [WebSocket-3] INFO  c.f.w.e.ChatRoomWebSocketService - 收到聊天消息: userId=test_user, message={"action":"refresh"}
2025-07-31 17:05:14.173 [WebSocket-3] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:05:14.336 [WebSocket-10] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=chatroom, userId=test_user, sessionId=11, message={"action":"refresh"}
2025-07-31 17:05:14.337 [WebSocket-8] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=chatroom, 成功用户数=2, 失败用户数=0
2025-07-31 17:05:14.337 [WebSocket-8] INFO  c.f.w.e.ChatRoomWebSocketService - 收到聊天消息: userId=test_user, message={"action":"refresh"}
2025-07-31 17:05:14.337 [WebSocket-8] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:05:16.038 [WebSocket-10] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=2, 失败用户数=0
2025-07-31 17:05:20.519 [WebSocket-7] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:05:24.716 [WebSocket-3] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:05:25.952 [WebSocket-7] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:05:28.241 [WebSocket-7] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:05:29.285 [pool-1-thread-1] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=notification, userId=user2, message={"type":"notification","title":"定时推送","content":"这是一个定时推送消息: 1753952729285","level":"info","timestamp":1753952729285}
2025-07-31 17:05:29.608 [WebSocket-10] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:05:29.930 [WebSocket-1] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753952609912_ocz9v3t5l, sessionId=0, message={"action":"refresh","timestamp":1753952729929}
2025-07-31 17:05:29.930 [WebSocket-6] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:05:29.930 [http-nio-8080-exec-8] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:05:29.930 [WebSocket-6] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753952609912_ocz9v3t5l, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":7,"avgMonitoringCostMs":198.51597142857142},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":25,"completedTaskCount":684,"taskCount":710,"totalThreadCount":63,"peakThreadCount":64,"poolUtilization":0.02,"queueUtilization":0.025,"throughput":5.255878284923928,"timestamp":1753952729930},"timestamp":1753952729930},"type":"threadpool_metrics"}
2025-07-31 17:05:29.930 [WebSocket-6] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:05:31.032 [WebSocket-1] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:05:31.032 [WebSocket-8] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=2, 失败用户数=0
2025-07-31 17:05:31.645 [WebSocket-6] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:05:32.623 [WebSocket-1] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:05:36.030 [WebSocket-6] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:05:36.040 [WebSocket-6] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=2, 失败用户数=0
2025-07-31 17:05:37.296 [WebSocket-10] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:05:37.515 [WebSocket-6] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:05:38.364 [WebSocket-10] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:05:38.580 [WebSocket-6] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:05:38.781 [WebSocket-5] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:05:41.235 [WebSocket-8] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:05:42.513 [WebSocket-4] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:05:46.030 [WebSocket-10] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=2, 失败用户数=0
2025-07-31 17:05:50.483 [WebSocket-6] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:05:54.730 [WebSocket-1] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:05:55.957 [WebSocket-3] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:05:58.019 [WebSocket-7] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:05:59.279 [pool-1-thread-1] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=notification, userId=user2, message={"type":"notification","title":"定时推送","content":"这是一个定时推送消息: 1753952759279","level":"info","timestamp":1753952759279}
2025-07-31 17:05:59.347 [WebSocket-6] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:05:59.913 [WebSocket-8] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753952609912_ocz9v3t5l, sessionId=0, message={"action":"refresh","timestamp":1753952759914}
2025-07-31 17:05:59.913 [WebSocket-7] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:05:59.913 [WebSocket-7] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753952609912_ocz9v3t5l, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":7,"avgMonitoringCostMs":198.51597142857142},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":23,"completedTaskCount":809,"taskCount":833,"totalThreadCount":63,"peakThreadCount":64,"poolUtilization":0.02,"queueUtilization":0.023,"throughput":4.35456182221664,"timestamp":1753952759913},"timestamp":1753952759913},"type":"threadpool_metrics"}
2025-07-31 17:05:59.913 [WebSocket-7] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:05:59.913 [http-nio-8080-exec-6] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:06:00.861 [WebSocket-9] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753952609912_ocz9v3t5l, sessionId=0, message={"action":"refresh","timestamp":1753952760861}
2025-07-31 17:06:00.861 [WebSocket-4] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:06:00.862 [WebSocket-4] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753952609912_ocz9v3t5l, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":7,"avgMonitoringCostMs":198.51597142857142},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":23,"completedTaskCount":815,"taskCount":839,"totalThreadCount":63,"peakThreadCount":64,"poolUtilization":0.02,"queueUtilization":0.023,"throughput":6.329113924050633,"timestamp":1753952760861},"timestamp":1753952760861},"type":"threadpool_metrics"}
2025-07-31 17:06:00.862 [WebSocket-4] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:06:00.863 [http-nio-8080-exec-8] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:06:01.028 [WebSocket-9] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:06:01.649 [WebSocket-6] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:06:02.137 [WebSocket-5] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753952609912_ocz9v3t5l, sessionId=0, message={"action":"refresh","timestamp":1753952762135}
2025-07-31 17:06:02.137 [WebSocket-10] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:06:02.138 [WebSocket-10] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753952609912_ocz9v3t5l, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":7,"avgMonitoringCostMs":198.51597142857142},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":23,"completedTaskCount":832,"taskCount":856,"totalThreadCount":63,"peakThreadCount":64,"poolUtilization":0.02,"queueUtilization":0.023,"throughput":12.623985572587918,"timestamp":1753952762137},"timestamp":1753952762137},"type":"threadpool_metrics"}
2025-07-31 17:06:02.138 [WebSocket-10] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:06:02.140 [http-nio-8080-exec-1] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:06:02.648 [WebSocket-5] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:06:02.780 [WebSocket-8] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753952609912_ocz9v3t5l, sessionId=0, message={"action":"refresh","timestamp":1753952762782}
2025-07-31 17:06:02.780 [WebSocket-1] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:06:02.780 [WebSocket-1] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753952609912_ocz9v3t5l, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":7,"avgMonitoringCostMs":198.51597142857142},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":23,"completedTaskCount":846,"taskCount":870,"totalThreadCount":63,"peakThreadCount":64,"poolUtilization":0.02,"queueUtilization":0.023,"throughput":20.3125,"timestamp":1753952762780},"timestamp":1753952762780},"type":"threadpool_metrics"}
2025-07-31 17:06:02.780 [WebSocket-1] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:06:02.780 [http-nio-8080-exec-4] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:06:03.587 [WebSocket-2] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753952609912_ocz9v3t5l, sessionId=0, message={"action":"refresh","timestamp":1753952763587}
2025-07-31 17:06:03.588 [WebSocket-9] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:06:03.589 [WebSocket-9] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753952609912_ocz9v3t5l, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":7,"avgMonitoringCostMs":198.51597142857142},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":23,"completedTaskCount":852,"taskCount":876,"totalThreadCount":63,"peakThreadCount":64,"poolUtilization":0.02,"queueUtilization":0.023,"throughput":7.425742574257425,"timestamp":1753952763588},"timestamp":1753952763588},"type":"threadpool_metrics"}
2025-07-31 17:06:03.589 [WebSocket-9] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:06:03.589 [http-nio-8080-exec-2] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:06:05.108 [WebSocket-8] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753952609912_ocz9v3t5l, sessionId=0, message={"action":"refresh","timestamp":1753952765107}
2025-07-31 17:06:05.108 [WebSocket-10] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:06:05.108 [WebSocket-10] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753952609912_ocz9v3t5l, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":7,"avgMonitoringCostMs":198.51597142857142},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":23,"completedTaskCount":858,"taskCount":882,"totalThreadCount":63,"peakThreadCount":64,"poolUtilization":0.02,"queueUtilization":0.023,"throughput":3.2916392363396976,"timestamp":1753952765108},"timestamp":1753952765108},"type":"threadpool_metrics"}
2025-07-31 17:06:05.108 [WebSocket-10] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:06:05.110 [http-nio-8080-exec-9] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:06:06.029 [WebSocket-4] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:06:06.030 [WebSocket-4] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=2, 失败用户数=0
2025-07-31 17:06:06.400 [http-nio-8080-exec-1] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:06:06.407 [WebSocket-9] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753952609912_ocz9v3t5l, sessionId=0, message={"action":"refresh","timestamp":1753952766396}
2025-07-31 17:06:06.407 [WebSocket-6] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:06:06.408 [WebSocket-6] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753952609912_ocz9v3t5l, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":7,"avgMonitoringCostMs":198.51597142857142},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":23,"completedTaskCount":865,"taskCount":889,"totalThreadCount":63,"peakThreadCount":64,"poolUtilization":0.02,"queueUtilization":0.023,"throughput":625.0,"timestamp":1753952766408},"timestamp":1753952766408},"type":"threadpool_metrics"}
2025-07-31 17:06:06.408 [WebSocket-6] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:06:07.296 [WebSocket-10] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:06:07.530 [WebSocket-3] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:06:08.381 [WebSocket-5] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:06:08.582 [WebSocket-10] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:06:08.749 [WebSocket-6] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:06:11.232 [WebSocket-3] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:06:12.517 [WebSocket-1] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:06:14.804 [WebSocket-10] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753952609912_ocz9v3t5l, sessionId=0, message={"action":"refresh","timestamp":1753952774804}
2025-07-31 17:06:14.805 [WebSocket-5] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:06:14.806 [WebSocket-5] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753952609912_ocz9v3t5l, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":7,"avgMonitoringCostMs":198.51597142857142},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":23,"completedTaskCount":927,"taskCount":951,"totalThreadCount":63,"peakThreadCount":64,"poolUtilization":0.02,"queueUtilization":0.023,"throughput":7.383589377158509,"timestamp":1753952774805},"timestamp":1753952774805},"type":"threadpool_metrics"}
2025-07-31 17:06:14.806 [WebSocket-5] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:06:14.807 [http-nio-8080-exec-10] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:06:16.032 [WebSocket-7] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=2, 失败用户数=0
2025-07-31 17:06:20.505 [WebSocket-8] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:06:24.721 [WebSocket-6] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:06:25.912 [WebSocket-4] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:06:28.030 [WebSocket-3] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:06:29.280 [pool-1-thread-1] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=notification, userId=user2, message={"type":"notification","title":"定时推送","content":"这是一个定时推送消息: 1753952789279","level":"info","timestamp":1753952789279}
2025-07-31 17:06:29.336 [WebSocket-9] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:06:29.913 [WebSocket-6] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753952609912_ocz9v3t5l, sessionId=0, message={"action":"refresh","timestamp":1753952789913}
2025-07-31 17:06:29.915 [WebSocket-6] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:06:29.915 [WebSocket-6] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753952609912_ocz9v3t5l, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":8,"avgMonitoringCostMs":173.7017875},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":23,"completedTaskCount":974,"taskCount":998,"totalThreadCount":63,"peakThreadCount":64,"poolUtilization":0.02,"queueUtilization":0.023,"throughput":3.044744506221869,"timestamp":1753952789915},"timestamp":1753952789915},"type":"threadpool_metrics"}
2025-07-31 17:06:29.915 [WebSocket-6] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:06:29.915 [http-nio-8080-exec-9] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:06:31.029 [WebSocket-10] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:06:31.030 [WebSocket-7] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=2, 失败用户数=0
2025-07-31 17:06:31.647 [WebSocket-4] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:06:32.630 [WebSocket-10] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:06:36.035 [WebSocket-4] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:06:36.035 [WebSocket-4] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=2, 失败用户数=0
2025-07-31 17:06:37.319 [WebSocket-10] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:06:37.531 [WebSocket-9] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:06:38.380 [WebSocket-5] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:06:38.587 [WebSocket-7] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:06:38.760 [WebSocket-2] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:06:41.253 [WebSocket-9] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:06:42.538 [WebSocket-9] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:06:46.032 [WebSocket-7] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=2, 失败用户数=0
2025-07-31 17:06:50.777 [WebSocket-9] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:06:54.729 [WebSocket-10] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:06:55.944 [WebSocket-3] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:06:58.034 [WebSocket-6] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:06:58.975 [SpringApplicationShutdownHook] WARN  c.f.w.s.WebSocketSessionManager - WebSocket会话移除失败，会话不匹配: service=monitor, userId=test_user
2025-07-31 17:06:58.975 [SpringApplicationShutdownHook] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接关闭: service=monitor, userId=test_user, sessionId=a, code=GOING_AWAY, reason=The web application is stopping
2025-07-31 17:06:58.975 [WebSocket-4] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端断开: test_user
2025-07-31 17:06:58.976 [WebSocket-4] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:06:59.014 [SpringApplicationShutdownHook] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已移除: service=notification, userId=user2, sessionId=2
2025-07-31 17:06:59.014 [SpringApplicationShutdownHook] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接关闭: service=notification, userId=user2, sessionId=2, code=GOING_AWAY, reason=The web application is stopping
2025-07-31 17:06:59.015 [WebSocket-8] INFO  c.f.w.e.NotificationWebSocketService - 用户断开通知服务: userId=user2
2025-07-31 17:06:59.015 [SpringApplicationShutdownHook] WARN  c.f.w.s.WebSocketSessionManager - WebSocket会话移除失败，会话不匹配: service=monitor, userId=test_user
2025-07-31 17:06:59.015 [WebSocket-8] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:06:59.015 [SpringApplicationShutdownHook] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接关闭: service=monitor, userId=test_user, sessionId=b, code=GOING_AWAY, reason=The web application is stopping
2025-07-31 17:06:59.015 [WebSocket-2] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端断开: test_user
2025-07-31 17:06:59.015 [WebSocket-2] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:06:59.046 [SpringApplicationShutdownHook] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已移除: service=monitor, userId=test_user, sessionId=10
2025-07-31 17:06:59.047 [SpringApplicationShutdownHook] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接关闭: service=monitor, userId=test_user, sessionId=10, code=GOING_AWAY, reason=The web application is stopping
2025-07-31 17:06:59.047 [WebSocket-6] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端断开: test_user
2025-07-31 17:06:59.047 [WebSocket-6] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:06:59.047 [SpringApplicationShutdownHook] WARN  c.f.w.s.WebSocketSessionManager - WebSocket会话移除失败，会话不匹配: service=monitor, userId=test_user
2025-07-31 17:06:59.047 [SpringApplicationShutdownHook] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接关闭: service=monitor, userId=test_user, sessionId=d, code=GOING_AWAY, reason=The web application is stopping
2025-07-31 17:06:59.047 [WebSocket-2] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端断开: test_user
2025-07-31 17:06:59.047 [SpringApplicationShutdownHook] WARN  c.f.w.s.WebSocketSessionManager - WebSocket会话移除失败，会话不匹配: service=monitor, userId=test_user
2025-07-31 17:06:59.048 [WebSocket-2] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:06:59.048 [SpringApplicationShutdownHook] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接关闭: service=monitor, userId=test_user, sessionId=c, code=GOING_AWAY, reason=The web application is stopping
2025-07-31 17:06:59.048 [WebSocket-1] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端断开: test_user
2025-07-31 17:06:59.048 [WebSocket-1] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:06:59.081 [SpringApplicationShutdownHook] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已移除: service=chatroom, userId=test_user, sessionId=11
2025-07-31 17:06:59.081 [SpringApplicationShutdownHook] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接关闭: service=chatroom, userId=test_user, sessionId=11, code=GOING_AWAY, reason=The web application is stopping
2025-07-31 17:06:59.082 [SpringApplicationShutdownHook] WARN  c.f.w.s.WebSocketSessionManager - WebSocket会话移除失败，会话不匹配: service=monitor, userId=test_user
2025-07-31 17:06:59.082 [WebSocket-6] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=chatroom, 成功用户数=1, 失败用户数=0
2025-07-31 17:06:59.082 [WebSocket-6] INFO  c.f.w.e.ChatRoomWebSocketService - 用户离开聊天室: userId=test_user, 当前在线数: 1
2025-07-31 17:06:59.082 [WebSocket-6] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:06:59.082 [SpringApplicationShutdownHook] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接关闭: service=monitor, userId=test_user, sessionId=e, code=GOING_AWAY, reason=The web application is stopping
2025-07-31 17:06:59.082 [WebSocket-8] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端断开: test_user
2025-07-31 17:06:59.082 [WebSocket-8] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:06:59.115 [SpringApplicationShutdownHook] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已移除: service=monitor, userId=monitor_1753952609912_ocz9v3t5l, sessionId=0
2025-07-31 17:06:59.115 [SpringApplicationShutdownHook] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接关闭: service=monitor, userId=monitor_1753952609912_ocz9v3t5l, sessionId=0, code=GOING_AWAY, reason=The web application is stopping
2025-07-31 17:06:59.115 [WebSocket-6] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端断开: monitor_1753952609912_ocz9v3t5l
2025-07-31 17:06:59.115 [WebSocket-6] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:06:59.115 [SpringApplicationShutdownHook] WARN  c.f.w.s.WebSocketSessionManager - WebSocket会话移除失败，会话不匹配: service=monitor, userId=test_user
2025-07-31 17:06:59.115 [SpringApplicationShutdownHook] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接关闭: service=monitor, userId=test_user, sessionId=4, code=GOING_AWAY, reason=The web application is stopping
2025-07-31 17:06:59.115 [WebSocket-7] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端断开: test_user
2025-07-31 17:06:59.115 [WebSocket-7] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:06:59.117 [SpringApplicationShutdownHook] WARN  c.f.w.s.WebSocketSessionManager - WebSocket会话移除失败，会话不匹配: service=chatroom, userId=test_user
2025-07-31 17:06:59.117 [SpringApplicationShutdownHook] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接关闭: service=chatroom, userId=test_user, sessionId=6, code=GOING_AWAY, reason=The web application is stopping
2025-07-31 17:06:59.117 [WebSocket-10] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=chatroom, 成功用户数=1, 失败用户数=0
2025-07-31 17:06:59.117 [WebSocket-10] INFO  c.f.w.e.ChatRoomWebSocketService - 用户离开聊天室: userId=test_user, 当前在线数: 1
2025-07-31 17:06:59.117 [WebSocket-10] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:06:59.118 [SpringApplicationShutdownHook] WARN  c.f.w.s.WebSocketSessionManager - WebSocket会话移除失败，会话不匹配: service=chatroom, userId=test_user
2025-07-31 17:06:59.118 [SpringApplicationShutdownHook] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接关闭: service=chatroom, userId=test_user, sessionId=5, code=GOING_AWAY, reason=The web application is stopping
2025-07-31 17:06:59.118 [SpringApplicationShutdownHook] WARN  c.f.w.s.WebSocketSessionManager - WebSocket会话移除失败，会话不匹配: service=monitor, userId=test_user
2025-07-31 17:06:59.118 [SpringApplicationShutdownHook] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接关闭: service=monitor, userId=test_user, sessionId=8, code=GOING_AWAY, reason=The web application is stopping
2025-07-31 17:06:59.118 [WebSocket-1] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=chatroom, 成功用户数=1, 失败用户数=0
2025-07-31 17:06:59.119 [WebSocket-1] INFO  c.f.w.e.ChatRoomWebSocketService - 用户离开聊天室: userId=test_user, 当前在线数: 0
2025-07-31 17:06:59.119 [WebSocket-1] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:06:59.119 [WebSocket-5] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端断开: test_user
2025-07-31 17:06:59.119 [WebSocket-5] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:06:59.154 [SpringApplicationShutdownHook] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已移除: service=chatroom, userId=user1, sessionId=1
2025-07-31 17:06:59.155 [SpringApplicationShutdownHook] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接关闭: service=chatroom, userId=user1, sessionId=1, code=GOING_AWAY, reason=The web application is stopping
2025-07-31 17:06:59.156 [WebSocket-10] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=chatroom, 成功用户数=0, 失败用户数=0
2025-07-31 17:06:59.156 [WebSocket-10] INFO  c.f.w.e.ChatRoomWebSocketService - 用户离开聊天室: userId=user1, 当前在线数: 0
2025-07-31 17:06:59.156 [WebSocket-10] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:06:59.187 [SpringApplicationShutdownHook] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件订阅者取消注册成功: WebSocketMessageHandlerDispatcher
2025-07-31 17:06:59.187 [SpringApplicationShutdownHook] INFO  c.f.w.h.WebSocketMessageHandlerDispatcher - WebSocketMessageHandlerDispatcher已取消EventBus订阅
2025-07-31 17:06:59.190 [SpringApplicationShutdownHook] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件总线线程池已关闭
2025-07-31 17:06:59.190 [SpringApplicationShutdownHook] INFO  c.f.w.monitor.ThreadPoolMonitor - 线程池监控器已关闭
2025-07-31 17:41:02.855 [main] INFO  c.f.w.WebSocketFrameworkApplication - Starting WebSocketFrameworkApplication using Java 1.8.0_202 on DESKTOP-EGK8BP4 with PID 35360 (D:\workTool\IdeaProjects\websocket-framework\target\classes started by admin in D:\workTool\IdeaProjects\websocket-framework)
2025-07-31 17:41:02.858 [main] INFO  c.f.w.WebSocketFrameworkApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-31 17:41:04.175 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2025-07-31 17:41:04.181 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-07-31 17:41:04.232 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 22 ms. Found 0 Redis repository interfaces.
2025-07-31 17:41:05.064 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2025-07-31 17:41:05.087 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-31 17:41:05.087 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.63]
2025-07-31 17:41:05.385 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-31 17:41:05.386 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2381 ms
2025-07-31 17:41:06.257 [main] INFO  c.f.w.c.WebSocketFrameworkConfig - WebSocket线程池已创建: 核心线程=10, 最大线程=50, 队列容量=1000
2025-07-31 17:41:06.308 [main] INFO  c.f.w.monitor.ThreadPoolMonitor - 智能线程池监控器已启动，初始监控间隔: 30秒
2025-07-31 17:41:06.373 [main] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件总线初始化完成
2025-07-31 17:41:06.478 [main] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件订阅者注册成功: ThreadPoolHealthChecker
2025-07-31 17:41:06.478 [main] INFO  c.f.w.health.ThreadPoolHealthChecker - WebSocket指标收集已启用并注册到健康检查器
2025-07-31 17:41:06.511 [main] INFO  c.f.w.p.WebSocketServiceProcessor - WebSocket服务注册成功: serviceId=chatroom, serviceName=聊天室服务, beanName=chatRoomWebSocketService, class=ChatRoomWebSocketService
2025-07-31 17:41:06.513 [main] INFO  c.f.w.p.WebSocketServiceProcessor - WebSocket服务注册成功: serviceId=notification, serviceName=通知推送服务, beanName=notificationWebSocketService, class=NotificationWebSocketService
2025-07-31 17:41:06.526 [main] INFO  c.f.w.p.WebSocketServiceProcessor - WebSocket服务注册成功: serviceId=monitor, serviceName=线程池监控服务, beanName=threadPoolMonitorWebSocketService, class=ThreadPoolMonitorWebSocketService
2025-07-31 17:41:06.531 [main] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件订阅者注册成功: WebSocketMessageHandlerDispatcher
2025-07-31 17:41:06.532 [main] INFO  c.f.w.h.WebSocketMessageHandlerDispatcher - WebSocketMessageHandlerDispatcher初始化完成, 注册了4个消息处理器, 1个拦截器
2025-07-31 17:41:06.535 [main] INFO  c.f.w.monitor.ThreadPoolMetricsStore - 线程池监控数据存储服务已启动，数据保留时间: 24小时
2025-07-31 17:41:07.570 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2025-07-31 17:41:07.601 [WebSocket-6] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:41:07.619 [main] INFO  c.f.w.WebSocketFrameworkApplication - Started WebSocketFrameworkApplication in 6.011 seconds (JVM running for 8.656)
2025-07-31 17:41:07.626 [main] INFO  c.f.w.t.TimeoutTaskWrapperIntegrationTest - 开始TimeoutTaskWrapper集成测试...
2025-07-31 17:41:07.635 [main] INFO  c.f.w.t.TimeoutTaskWrapperIntegrationTest - === 测试基本超时功能 ===
2025-07-31 17:41:08.651 [WebSocket-10] INFO  c.f.w.t.TimeoutTaskWrapperIntegrationTest - 正常任务执行完成
2025-07-31 17:41:09.817 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-07-31 17:41:09.817 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-07-31 17:41:09.819 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-07-31 17:41:11.656 [WebSocket-5] ERROR c.f.w.s.WebSocketSessionManager - 清理过期心跳缓存失败
org.springframework.data.redis.RedisConnectionFailureException: Unable to connect to Redis; nested exception is io.lettuce.core.RedisConnectionException: Unable to connect to localhost:6379
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.translateException(LettuceConnectionFactory.java:1689)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1597)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getNativeConnection(LettuceConnectionFactory.java:1383)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getConnection(LettuceConnectionFactory.java:1366)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getSharedConnection(LettuceConnectionFactory.java:1093)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getConnection(LettuceConnectionFactory.java:421)
	at org.springframework.data.redis.core.RedisConnectionUtils.fetchConnection(RedisConnectionUtils.java:193)
	at org.springframework.data.redis.core.RedisConnectionUtils.doGetConnection(RedisConnectionUtils.java:144)
	at org.springframework.data.redis.core.RedisConnectionUtils.getConnection(RedisConnectionUtils.java:105)
	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:211)
	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:191)
	at org.springframework.data.redis.core.RedisTemplate.keys(RedisTemplate.java:896)
	at com.framework.websocket.session.WebSocketSessionManager.cleanupExpiredHeartbeats(WebSocketSessionManager.java:221)
	at com.framework.websocket.session.WebSocketSessionCleaner.cleanupExpiredHeartbeatCache(WebSocketSessionCleaner.java:270)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:308)
	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
Caused by: io.lettuce.core.RedisConnectionException: Unable to connect to localhost:6379
	at io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:78)
	at io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:56)
	at io.lettuce.core.AbstractRedisClient.getConnection(AbstractRedisClient.java:330)
	at io.lettuce.core.RedisClient.connect(RedisClient.java:216)
	at org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.lambda$getConnection$1(StandaloneConnectionProvider.java:115)
	at java.util.Optional.orElseGet(Optional.java:267)
	at org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.getConnection(StandaloneConnectionProvider.java:115)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1595)
	... 26 common frames omitted
Caused by: io.netty.channel.AbstractChannel$AnnotatedConnectException: Connection refused: no further information: localhost/127.0.0.1:6379
Caused by: java.net.ConnectException: Connection refused: no further information
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:717)
	at io.netty.channel.socket.nio.NioSocketChannel.doFinishConnect(NioSocketChannel.java:337)
	at io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.finishConnect(AbstractNioChannel.java:334)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:710)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:658)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:584)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:496)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:995)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 17:41:12.605 [WebSocket-7] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:41:12.624 [WebSocket-7] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 17:41:13.674 [http-nio-8080-exec-1] WARN  c.f.w.s.WebSocketSessionManager - 更新心跳缓存失败: service=monitor, userId=monitor_1753954869311_lb7bd3gvk
org.springframework.data.redis.RedisConnectionFailureException: Unable to connect to Redis; nested exception is io.lettuce.core.RedisConnectionException: Unable to connect to localhost:6379
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.translateException(LettuceConnectionFactory.java:1689)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1597)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getNativeConnection(LettuceConnectionFactory.java:1383)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getConnection(LettuceConnectionFactory.java:1366)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getSharedConnection(LettuceConnectionFactory.java:1093)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getConnection(LettuceConnectionFactory.java:421)
	at org.springframework.data.redis.core.RedisConnectionUtils.fetchConnection(RedisConnectionUtils.java:193)
	at org.springframework.data.redis.core.RedisConnectionUtils.doGetConnection(RedisConnectionUtils.java:144)
	at org.springframework.data.redis.core.RedisConnectionUtils.getConnection(RedisConnectionUtils.java:105)
	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:211)
	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:191)
	at org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:97)
	at org.springframework.data.redis.core.DefaultValueOperations.set(DefaultValueOperations.java:325)
	at com.framework.websocket.session.WebSocketSessionManager.updateHeartbeat(WebSocketSessionManager.java:133)
	at com.framework.websocket.session.WebSocketSessionManager.updateHeartbeat(WebSocketSessionManager.java:120)
	at com.framework.websocket.session.WebSocketSessionManager.addSession(WebSocketSessionManager.java:45)
	at com.framework.websocket.core.WebSocketServer.onOpen(WebSocketServer.java:92)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.tomcat.websocket.pojo.PojoEndpointBase.doOnOpen(PojoEndpointBase.java:69)
	at org.apache.tomcat.websocket.pojo.PojoEndpointServer.onOpen(PojoEndpointServer.java:48)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.init(WsHttpUpgradeHandler.java:136)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:933)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
Caused by: io.lettuce.core.RedisConnectionException: Unable to connect to localhost:6379
	at io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:78)
	at io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:56)
	at io.lettuce.core.AbstractRedisClient.getConnection(AbstractRedisClient.java:330)
	at io.lettuce.core.RedisClient.connect(RedisClient.java:216)
	at org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.lambda$getConnection$1(StandaloneConnectionProvider.java:115)
	at java.util.Optional.orElseGet(Optional.java:267)
	at org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.getConnection(StandaloneConnectionProvider.java:115)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1595)
	... 29 common frames omitted
Caused by: io.netty.channel.AbstractChannel$AnnotatedConnectException: Connection refused: no further information: localhost/127.0.0.1:6379
Caused by: java.net.ConnectException: Connection refused: no further information
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:717)
	at io.netty.channel.socket.nio.NioSocketChannel.doFinishConnect(NioSocketChannel.java:337)
	at io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.finishConnect(AbstractNioChannel.java:334)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:710)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:658)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:584)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:496)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:995)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 17:41:13.677 [http-nio-8080-exec-1] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已添加: service=monitor, userId=monitor_1753954869311_lb7bd3gvk, sessionId=0
2025-07-31 17:41:13.691 [http-nio-8080-exec-1] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接建立: service=monitor, userId=monitor_1753954869311_lb7bd3gvk, sessionId=0, clientIp=null
2025-07-31 17:41:13.693 [WebSocket-8] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端连接: monitor_1753954869311_lb7bd3gvk
2025-07-31 17:41:13.694 [WebSocket-8] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753954869311_lb7bd3gvk, message={"type":"welcome","message":"欢迎连接线程池监控中心","timestamp":1753954873693}
2025-07-31 17:41:13.694 [WebSocket-8] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:41:13.694 [WebSocket-8] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753954869311_lb7bd3gvk, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":30,"samplingRate":2,"lastHealthStatus":"HEALTHY","monitoringExecutions":0,"avgMonitoringCostMs":0.0},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":3,"queueSize":9,"completedTaskCount":10,"taskCount":22,"totalThreadCount":42,"peakThreadCount":42,"poolUtilization":0.06,"queueUtilization":0.009,"throughput":5.5096418732782375,"timestamp":1753954873694},"timestamp":1753954873694},"type":"threadpool_metrics"}
2025-07-31 17:41:13.694 [WebSocket-8] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:41:15.713 [WebSocket-6] WARN  c.f.w.monitor.ThreadPoolMetricsStore - 收集监控数据失败
org.springframework.data.redis.RedisConnectionFailureException: Unable to connect to Redis; nested exception is io.lettuce.core.RedisConnectionException: Unable to connect to localhost:6379
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.translateException(LettuceConnectionFactory.java:1689)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1597)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getNativeConnection(LettuceConnectionFactory.java:1383)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getConnection(LettuceConnectionFactory.java:1366)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getSharedConnection(LettuceConnectionFactory.java:1093)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getConnection(LettuceConnectionFactory.java:421)
	at org.springframework.data.redis.core.RedisConnectionUtils.fetchConnection(RedisConnectionUtils.java:193)
	at org.springframework.data.redis.core.RedisConnectionUtils.doGetConnection(RedisConnectionUtils.java:144)
	at org.springframework.data.redis.core.RedisConnectionUtils.getConnection(RedisConnectionUtils.java:105)
	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:211)
	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:191)
	at org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:97)
	at org.springframework.data.redis.core.DefaultValueOperations.set(DefaultValueOperations.java:325)
	at com.framework.websocket.monitor.ThreadPoolMetricsStore.collectAndStoreMetrics(ThreadPoolMetricsStore.java:69)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:308)
	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
Caused by: io.lettuce.core.RedisConnectionException: Unable to connect to localhost:6379
	at io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:78)
	at io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:56)
	at io.lettuce.core.AbstractRedisClient.getConnection(AbstractRedisClient.java:330)
	at io.lettuce.core.RedisClient.connect(RedisClient.java:216)
	at org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.lambda$getConnection$1(StandaloneConnectionProvider.java:115)
	at java.util.Optional.orElseGet(Optional.java:267)
	at org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.getConnection(StandaloneConnectionProvider.java:115)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1595)
	... 26 common frames omitted
Caused by: io.netty.channel.AbstractChannel$AnnotatedConnectException: Connection refused: no further information: localhost/127.0.0.1:6379
Caused by: java.net.ConnectException: Connection refused: no further information
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:717)
	at io.netty.channel.socket.nio.NioSocketChannel.doFinishConnect(NioSocketChannel.java:337)
	at io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.finishConnect(AbstractNioChannel.java:334)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:710)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:658)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:584)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:496)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:995)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 17:41:17.652 [WebSocket-2] INFO  c.f.w.t.TimeoutTaskWrapperIntegrationTest - 超时任务执行完成（不应该看到这条日志）
2025-07-31 17:41:17.654 [main] INFO  c.f.w.t.TimeoutTaskWrapperIntegrationTest - 基本超时功能测试完成
2025-07-31 17:41:17.654 [main] INFO  c.f.w.t.TimeoutTaskWrapperIntegrationTest - === 测试智能提交功能 ===
2025-07-31 17:41:17.747 [http-nio-8080-exec-1] WARN  c.f.w.s.WebSocketSessionManager - 更新心跳缓存失败: service=monitor, userId=monitor_1753954869311_lb7bd3gvk
org.springframework.data.redis.RedisConnectionFailureException: Unable to connect to Redis; nested exception is io.lettuce.core.RedisConnectionException: Unable to connect to localhost:6379
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.translateException(LettuceConnectionFactory.java:1689)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1597)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getNativeConnection(LettuceConnectionFactory.java:1383)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getConnection(LettuceConnectionFactory.java:1366)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getSharedConnection(LettuceConnectionFactory.java:1093)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getConnection(LettuceConnectionFactory.java:421)
	at org.springframework.data.redis.core.RedisConnectionUtils.fetchConnection(RedisConnectionUtils.java:193)
	at org.springframework.data.redis.core.RedisConnectionUtils.doGetConnection(RedisConnectionUtils.java:144)
	at org.springframework.data.redis.core.RedisConnectionUtils.getConnection(RedisConnectionUtils.java:105)
	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:211)
	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:191)
	at org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:97)
	at org.springframework.data.redis.core.DefaultValueOperations.set(DefaultValueOperations.java:325)
	at com.framework.websocket.session.WebSocketSessionManager.updateHeartbeat(WebSocketSessionManager.java:133)
	at com.framework.websocket.core.WebSocketServer.onPong(WebSocketServer.java:223)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.tomcat.websocket.pojo.PojoMessageHandlerWholeBase.onMessage(PojoMessageHandlerWholeBase.java:104)
	at org.apache.tomcat.websocket.WsFrameBase.processDataControl(WsFrameBase.java:376)
	at org.apache.tomcat.websocket.WsFrameBase.processData(WsFrameBase.java:296)
	at org.apache.tomcat.websocket.WsFrameBase.processInputBuffer(WsFrameBase.java:133)
	at org.apache.tomcat.websocket.server.WsFrameServer.onDataAvailable(WsFrameServer.java:85)
	at org.apache.tomcat.websocket.server.WsFrameServer.doOnDataAvailable(WsFrameServer.java:183)
	at org.apache.tomcat.websocket.server.WsFrameServer.notifyDataAvailable(WsFrameServer.java:162)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.upgradeDispatch(WsHttpUpgradeHandler.java:157)
	at org.apache.coyote.http11.upgrade.UpgradeProcessorInternal.dispatch(UpgradeProcessorInternal.java:60)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:59)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
Caused by: io.lettuce.core.RedisConnectionException: Unable to connect to localhost:6379
	at io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:78)
	at io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:56)
	at io.lettuce.core.AbstractRedisClient.getConnection(AbstractRedisClient.java:330)
	at io.lettuce.core.RedisClient.connect(RedisClient.java:216)
	at org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.lambda$getConnection$1(StandaloneConnectionProvider.java:115)
	at java.util.Optional.orElseGet(Optional.java:267)
	at org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.getConnection(StandaloneConnectionProvider.java:115)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1595)
	... 34 common frames omitted
Caused by: io.netty.channel.AbstractChannel$AnnotatedConnectException: Connection refused: no further information: localhost/127.0.0.1:6379
Caused by: java.net.ConnectException: Connection refused: no further information
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:717)
	at io.netty.channel.socket.nio.NioSocketChannel.doFinishConnect(NioSocketChannel.java:337)
	at io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.finishConnect(AbstractNioChannel.java:334)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:710)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:658)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:584)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:496)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:995)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 17:41:18.070 [WebSocket-5] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:41:22.614 [WebSocket-4] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 17:41:22.671 [main] INFO  c.f.w.t.TimeoutTaskWrapperIntegrationTest - 智能提交功能测试完成
2025-07-31 17:41:22.671 [main] INFO  c.f.w.t.TimeoutTaskWrapperIntegrationTest - === 测试批量任务处理 ===
2025-07-31 17:41:22.673 [WebSocket-1] INFO  c.f.w.t.TimeoutTaskWrapperIntegrationTest - 批量任务1执行成功
2025-07-31 17:41:22.674 [WebSocket-10] WARN  c.f.w.util.TimeoutTaskWrapper - 批量任务执行失败，准备重试: task=批量任务失败测试, attempt=1/2
java.lang.RuntimeException: 模拟任务总是失败
	at com.framework.websocket.test.TimeoutTaskWrapperIntegrationTest.lambda$testBatchProcessing$7(TimeoutTaskWrapperIntegrationTest.java:152)
	at com.framework.websocket.util.TimeoutTaskWrapper$1.run(TimeoutTaskWrapper.java:162)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 17:41:22.675 [WebSocket-2] WARN  c.f.w.util.TimeoutTaskWrapper - 批量任务执行失败，准备重试: task=批量任务重试测试, attempt=1/5
java.lang.RuntimeException: 模拟任务失败
	at com.framework.websocket.test.TimeoutTaskWrapperIntegrationTest.lambda$testBatchProcessing$6(TimeoutTaskWrapperIntegrationTest.java:144)
	at com.framework.websocket.util.TimeoutTaskWrapper$1.run(TimeoutTaskWrapper.java:162)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 17:41:23.686 [WebSocket-3] ERROR c.f.w.util.TimeoutTaskWrapper - 批量任务执行失败，已达最大重试次数: task=批量任务失败测试, maxRetries=2
java.lang.RuntimeException: 模拟任务总是失败
	at com.framework.websocket.test.TimeoutTaskWrapperIntegrationTest.lambda$testBatchProcessing$7(TimeoutTaskWrapperIntegrationTest.java:152)
	at com.framework.websocket.util.TimeoutTaskWrapper$1.run(TimeoutTaskWrapper.java:162)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 17:41:23.686 [WebSocket-5] WARN  c.f.w.util.TimeoutTaskWrapper - 批量任务执行失败，准备重试: task=批量任务重试测试, attempt=2/5
java.lang.RuntimeException: 模拟任务失败
	at com.framework.websocket.test.TimeoutTaskWrapperIntegrationTest.lambda$testBatchProcessing$6(TimeoutTaskWrapperIntegrationTest.java:144)
	at com.framework.websocket.util.TimeoutTaskWrapper$1.run(TimeoutTaskWrapper.java:162)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 17:41:24.688 [WebSocket-5] INFO  c.f.w.t.TimeoutTaskWrapperIntegrationTest - 批量任务2重试成功
2025-07-31 17:41:24.689 [main] INFO  c.f.w.t.TimeoutTaskWrapperIntegrationTest - 批量任务处理测试完成
2025-07-31 17:41:24.690 [main] INFO  c.f.w.t.TimeoutTaskWrapperIntegrationTest - === 测试心跳检测场景 ===
2025-07-31 17:41:25.217 [WebSocket-7] INFO  c.f.w.t.TimeoutTaskWrapperIntegrationTest - 用户user5心跳检测完成
2025-07-31 17:41:25.399 [WebSocket-1] INFO  c.f.w.t.TimeoutTaskWrapperIntegrationTest - 用户user1心跳检测完成
2025-07-31 17:41:25.445 [WebSocket-2] INFO  c.f.w.t.TimeoutTaskWrapperIntegrationTest - 用户user4心跳检测完成
2025-07-31 17:41:25.728 [WebSocket-10] INFO  c.f.w.t.TimeoutTaskWrapperIntegrationTest - 用户user3心跳检测完成
2025-07-31 17:41:25.855 [WebSocket-8] INFO  c.f.w.t.TimeoutTaskWrapperIntegrationTest - 用户user2心跳检测完成
2025-07-31 17:41:25.855 [main] INFO  c.f.w.t.TimeoutTaskWrapperIntegrationTest - 心跳检测场景测试完成
2025-07-31 17:41:25.855 [main] INFO  c.f.w.t.TimeoutTaskWrapperIntegrationTest - TimeoutTaskWrapper集成测试完成
2025-07-31 17:41:35.324 [WebSocket-6] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753954869311_lb7bd3gvk, sessionId=0, message={"action":"refresh","timestamp":1753954895318}
2025-07-31 17:41:35.380 [WebSocket-5] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:41:35.381 [WebSocket-5] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753954869311_lb7bd3gvk, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":30,"samplingRate":2,"lastHealthStatus":"HEALTHY","monitoringExecutions":0,"avgMonitoringCostMs":0.0},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":10,"completedTaskCount":55,"taskCount":66,"totalThreadCount":54,"peakThreadCount":55,"poolUtilization":0.02,"queueUtilization":0.01,"throughput":2.0749757919490937,"timestamp":1753954895381},"timestamp":1753954895381},"type":"threadpool_metrics"}
2025-07-31 17:41:35.381 [WebSocket-5] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:41:35.381 [http-nio-8080-exec-6] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:41:37.611 [WebSocket-8] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:41:37.613 [WebSocket-10] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 17:41:39.670 [WebSocket-8] WARN  c.f.w.monitor.ThreadPoolMetricsStore - 收集监控数据失败
org.springframework.data.redis.RedisConnectionFailureException: Unable to connect to Redis; nested exception is io.lettuce.core.RedisConnectionException: Unable to connect to localhost:6379
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.translateException(LettuceConnectionFactory.java:1689)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1597)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getNativeConnection(LettuceConnectionFactory.java:1383)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getConnection(LettuceConnectionFactory.java:1366)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getSharedConnection(LettuceConnectionFactory.java:1093)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getConnection(LettuceConnectionFactory.java:421)
	at org.springframework.data.redis.core.RedisConnectionUtils.fetchConnection(RedisConnectionUtils.java:193)
	at org.springframework.data.redis.core.RedisConnectionUtils.doGetConnection(RedisConnectionUtils.java:144)
	at org.springframework.data.redis.core.RedisConnectionUtils.getConnection(RedisConnectionUtils.java:105)
	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:211)
	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:191)
	at org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:97)
	at org.springframework.data.redis.core.DefaultValueOperations.set(DefaultValueOperations.java:325)
	at com.framework.websocket.monitor.ThreadPoolMetricsStore.collectAndStoreMetrics(ThreadPoolMetricsStore.java:69)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:308)
	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
Caused by: io.lettuce.core.RedisConnectionException: Unable to connect to localhost:6379
	at io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:78)
	at io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:56)
	at io.lettuce.core.AbstractRedisClient.getConnection(AbstractRedisClient.java:330)
	at io.lettuce.core.RedisClient.connect(RedisClient.java:216)
	at org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.lambda$getConnection$1(StandaloneConnectionProvider.java:115)
	at java.util.Optional.orElseGet(Optional.java:267)
	at org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.getConnection(StandaloneConnectionProvider.java:115)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1595)
	... 26 common frames omitted
Caused by: io.netty.channel.AbstractChannel$AnnotatedConnectException: Connection refused: no further information: localhost/127.0.0.1:6379
Caused by: java.net.ConnectException: Connection refused: no further information
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:717)
	at io.netty.channel.socket.nio.NioSocketChannel.doFinishConnect(NioSocketChannel.java:337)
	at io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.finishConnect(AbstractNioChannel.java:334)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:710)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:658)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:584)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:496)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:995)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 17:41:42.602 [WebSocket-9] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:41:42.606 [WebSocket-9] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 17:41:45.750 [http-nio-8080-exec-5] WARN  c.f.w.s.WebSocketSessionManager - 更新心跳缓存失败: service=monitor, userId=monitor_1753954869311_lb7bd3gvk
org.springframework.data.redis.RedisConnectionFailureException: Unable to connect to Redis; nested exception is io.lettuce.core.RedisConnectionException: Unable to connect to localhost:6379
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.translateException(LettuceConnectionFactory.java:1689)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1597)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getNativeConnection(LettuceConnectionFactory.java:1383)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getConnection(LettuceConnectionFactory.java:1366)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getSharedConnection(LettuceConnectionFactory.java:1093)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getConnection(LettuceConnectionFactory.java:421)
	at org.springframework.data.redis.core.RedisConnectionUtils.fetchConnection(RedisConnectionUtils.java:193)
	at org.springframework.data.redis.core.RedisConnectionUtils.doGetConnection(RedisConnectionUtils.java:144)
	at org.springframework.data.redis.core.RedisConnectionUtils.getConnection(RedisConnectionUtils.java:105)
	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:211)
	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:191)
	at org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:97)
	at org.springframework.data.redis.core.DefaultValueOperations.set(DefaultValueOperations.java:325)
	at com.framework.websocket.session.WebSocketSessionManager.updateHeartbeat(WebSocketSessionManager.java:133)
	at com.framework.websocket.core.WebSocketServer.onPong(WebSocketServer.java:223)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.tomcat.websocket.pojo.PojoMessageHandlerWholeBase.onMessage(PojoMessageHandlerWholeBase.java:104)
	at org.apache.tomcat.websocket.WsFrameBase.processDataControl(WsFrameBase.java:376)
	at org.apache.tomcat.websocket.WsFrameBase.processData(WsFrameBase.java:296)
	at org.apache.tomcat.websocket.WsFrameBase.processInputBuffer(WsFrameBase.java:133)
	at org.apache.tomcat.websocket.server.WsFrameServer.onDataAvailable(WsFrameServer.java:85)
	at org.apache.tomcat.websocket.server.WsFrameServer.doOnDataAvailable(WsFrameServer.java:183)
	at org.apache.tomcat.websocket.server.WsFrameServer.notifyDataAvailable(WsFrameServer.java:162)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.upgradeDispatch(WsHttpUpgradeHandler.java:157)
	at org.apache.coyote.http11.upgrade.UpgradeProcessorInternal.dispatch(UpgradeProcessorInternal.java:60)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:59)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
Caused by: io.lettuce.core.RedisConnectionException: Unable to connect to localhost:6379
	at io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:78)
	at io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:56)
	at io.lettuce.core.AbstractRedisClient.getConnection(AbstractRedisClient.java:330)
	at io.lettuce.core.RedisClient.connect(RedisClient.java:216)
	at org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.lambda$getConnection$1(StandaloneConnectionProvider.java:115)
	at java.util.Optional.orElseGet(Optional.java:267)
	at org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.getConnection(StandaloneConnectionProvider.java:115)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1595)
	... 34 common frames omitted
Caused by: io.netty.channel.AbstractChannel$AnnotatedConnectException: Connection refused: no further information: localhost/127.0.0.1:6379
Caused by: java.net.ConnectException: Connection refused: no further information
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:717)
	at io.netty.channel.socket.nio.NioSocketChannel.doFinishConnect(NioSocketChannel.java:337)
	at io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.finishConnect(AbstractNioChannel.java:334)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:710)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:658)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:584)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:496)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:995)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 17:41:45.753 [WebSocket-8] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:41:53.757 [SpringApplicationShutdownHook] WARN  c.f.w.s.WebSocketSessionManager - 清除心跳缓存失败: service=monitor, userId=monitor_1753954869311_lb7bd3gvk
org.springframework.data.redis.RedisConnectionFailureException: Unable to connect to Redis; nested exception is io.lettuce.core.RedisConnectionException: Unable to connect to localhost:6379
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.translateException(LettuceConnectionFactory.java:1689)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1597)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getNativeConnection(LettuceConnectionFactory.java:1383)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getConnection(LettuceConnectionFactory.java:1366)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getSharedConnection(LettuceConnectionFactory.java:1093)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getConnection(LettuceConnectionFactory.java:421)
	at org.springframework.data.redis.core.RedisConnectionUtils.fetchConnection(RedisConnectionUtils.java:193)
	at org.springframework.data.redis.core.RedisConnectionUtils.doGetConnection(RedisConnectionUtils.java:144)
	at org.springframework.data.redis.core.RedisConnectionUtils.getConnection(RedisConnectionUtils.java:105)
	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:211)
	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:191)
	at org.springframework.data.redis.core.RedisTemplate.delete(RedisTemplate.java:723)
	at com.framework.websocket.session.WebSocketSessionManager.clearHeartbeat(WebSocketSessionManager.java:185)
	at com.framework.websocket.session.WebSocketSessionManager.removeSession(WebSocketSessionManager.java:57)
	at com.framework.websocket.core.WebSocketServer.onClose(WebSocketServer.java:138)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.tomcat.websocket.pojo.PojoEndpointBase.onClose(PojoEndpointBase.java:107)
	at org.apache.tomcat.websocket.WsSession.fireEndpointOnClose(WsSession.java:767)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:715)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:665)
	at org.apache.tomcat.websocket.WsSession.close(WsSession.java:652)
	at org.apache.tomcat.websocket.WsWebSocketContainer.destroy(WsWebSocketContainer.java:1046)
	at org.apache.tomcat.websocket.server.WsContextListener.contextDestroyed(WsContextListener.java:48)
	at org.apache.catalina.core.StandardContext.listenerStop(StandardContext.java:4814)
	at org.apache.catalina.core.StandardContext.stopInternal(StandardContext.java:5477)
	at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:257)
	at org.apache.catalina.core.ContainerBase$StopChild.call(ContainerBase.java:1412)
	at org.apache.catalina.core.ContainerBase$StopChild.call(ContainerBase.java:1401)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:134)
	at org.apache.catalina.core.ContainerBase.stopInternal(ContainerBase.java:986)
	at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:257)
	at org.apache.catalina.core.ContainerBase$StopChild.call(ContainerBase.java:1412)
	at org.apache.catalina.core.ContainerBase$StopChild.call(ContainerBase.java:1401)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:134)
	at org.apache.catalina.core.ContainerBase.stopInternal(ContainerBase.java:986)
	at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:257)
	at org.apache.catalina.core.StandardService.stopInternal(StandardService.java:497)
	at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:257)
	at org.apache.catalina.core.StandardServer.stopInternal(StandardServer.java:979)
	at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:257)
	at org.apache.catalina.startup.Tomcat.stop(Tomcat.java:496)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.stopTomcat(TomcatWebServer.java:273)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.stop(TomcatWebServer.java:331)
	at org.springframework.boot.web.servlet.context.WebServerStartStopLifecycle.stop(WebServerStartStopLifecycle.java:51)
	at org.springframework.context.SmartLifecycle.stop(SmartLifecycle.java:117)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:234)
	at org.springframework.context.support.DefaultLifecycleProcessor.access$300(DefaultLifecycleProcessor.java:54)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:373)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:206)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:129)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1067)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:174)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1021)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:145)
	at java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:114)
	at java.lang.Thread.run(Thread.java:748)
Caused by: io.lettuce.core.RedisConnectionException: Unable to connect to localhost:6379
	at io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:78)
	at io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:56)
	at io.lettuce.core.AbstractRedisClient.getConnection(AbstractRedisClient.java:330)
	at io.lettuce.core.RedisClient.connect(RedisClient.java:216)
	at org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.lambda$getConnection$1(StandaloneConnectionProvider.java:115)
	at java.util.Optional.orElseGet(Optional.java:267)
	at org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.getConnection(StandaloneConnectionProvider.java:115)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1595)
	... 64 common frames omitted
Caused by: io.netty.channel.AbstractChannel$AnnotatedConnectException: Connection refused: no further information: localhost/127.0.0.1:6379
Caused by: java.net.ConnectException: Connection refused: no further information
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:717)
	at io.netty.channel.socket.nio.NioSocketChannel.doFinishConnect(NioSocketChannel.java:337)
	at io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.finishConnect(AbstractNioChannel.java:334)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:710)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:658)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:584)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:496)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:995)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 17:41:53.758 [SpringApplicationShutdownHook] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已移除: service=monitor, userId=monitor_1753954869311_lb7bd3gvk, sessionId=0
2025-07-31 17:41:53.758 [SpringApplicationShutdownHook] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接关闭: service=monitor, userId=monitor_1753954869311_lb7bd3gvk, sessionId=0, code=GOING_AWAY, reason=The web application is stopping
2025-07-31 17:41:53.759 [WebSocket-6] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端断开: monitor_1753954869311_lb7bd3gvk
2025-07-31 17:41:53.759 [WebSocket-6] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:41:53.767 [SpringApplicationShutdownHook] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件订阅者取消注册成功: WebSocketMessageHandlerDispatcher
2025-07-31 17:41:53.767 [SpringApplicationShutdownHook] INFO  c.f.w.h.WebSocketMessageHandlerDispatcher - WebSocketMessageHandlerDispatcher已取消EventBus订阅
2025-07-31 17:41:58.779 [SpringApplicationShutdownHook] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件总线线程池已关闭
2025-07-31 17:41:58.779 [SpringApplicationShutdownHook] INFO  c.f.w.monitor.ThreadPoolMonitor - 线程池监控器已关闭
2025-07-31 17:42:04.571 [main] INFO  c.f.w.WebSocketFrameworkApplication - Starting WebSocketFrameworkApplication using Java 1.8.0_202 on DESKTOP-EGK8BP4 with PID 28216 (D:\workTool\IdeaProjects\websocket-framework\target\classes started by admin in D:\workTool\IdeaProjects\websocket-framework)
2025-07-31 17:42:04.576 [main] INFO  c.f.w.WebSocketFrameworkApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-31 17:42:06.391 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2025-07-31 17:42:06.398 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-07-31 17:42:06.469 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 30 ms. Found 0 Redis repository interfaces.
2025-07-31 17:42:07.717 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2025-07-31 17:42:07.746 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-31 17:42:07.747 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.63]
2025-07-31 17:42:08.876 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-31 17:42:08.876 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 4081 ms
2025-07-31 17:42:10.321 [main] INFO  c.f.w.c.WebSocketFrameworkConfig - WebSocket线程池已创建: 核心线程=10, 最大线程=50, 队列容量=1000
2025-07-31 17:42:10.459 [main] INFO  c.f.w.monitor.ThreadPoolMonitor - 智能线程池监控器已启动，初始监控间隔: 30秒
2025-07-31 17:42:10.672 [main] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件总线初始化完成
2025-07-31 17:42:11.065 [main] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件订阅者注册成功: ThreadPoolHealthChecker
2025-07-31 17:42:11.088 [main] INFO  c.f.w.health.ThreadPoolHealthChecker - WebSocket指标收集已启用并注册到健康检查器
2025-07-31 17:42:11.187 [main] INFO  c.f.w.p.WebSocketServiceProcessor - WebSocket服务注册成功: serviceId=chatroom, serviceName=聊天室服务, beanName=chatRoomWebSocketService, class=ChatRoomWebSocketService
2025-07-31 17:42:11.197 [main] INFO  c.f.w.p.WebSocketServiceProcessor - WebSocket服务注册成功: serviceId=notification, serviceName=通知推送服务, beanName=notificationWebSocketService, class=NotificationWebSocketService
2025-07-31 17:42:11.236 [main] INFO  c.f.w.p.WebSocketServiceProcessor - WebSocket服务注册成功: serviceId=monitor, serviceName=线程池监控服务, beanName=threadPoolMonitorWebSocketService, class=ThreadPoolMonitorWebSocketService
2025-07-31 17:42:11.247 [main] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件订阅者注册成功: WebSocketMessageHandlerDispatcher
2025-07-31 17:42:11.248 [main] INFO  c.f.w.h.WebSocketMessageHandlerDispatcher - WebSocketMessageHandlerDispatcher初始化完成, 注册了4个消息处理器, 1个拦截器
2025-07-31 17:42:11.261 [main] INFO  c.f.w.monitor.ThreadPoolMetricsStore - 线程池监控数据存储服务已启动，数据保留时间: 24小时
2025-07-31 17:42:14.180 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2025-07-31 17:42:14.236 [WebSocket-4] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:42:14.270 [main] INFO  c.f.w.WebSocketFrameworkApplication - Started WebSocketFrameworkApplication in 11.062 seconds (JVM running for 12.119)
2025-07-31 17:42:14.289 [main] INFO  c.f.w.t.TimeoutTaskWrapperIntegrationTest - 开始TimeoutTaskWrapper集成测试...
2025-07-31 17:42:14.290 [main] INFO  c.f.w.t.TimeoutTaskWrapperIntegrationTest - === 测试基本超时功能 ===
2025-07-31 17:42:15.317 [WebSocket-8] INFO  c.f.w.t.TimeoutTaskWrapperIntegrationTest - 正常任务执行完成
2025-07-31 17:42:19.699 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-07-31 17:42:19.700 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-07-31 17:42:19.706 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 4 ms
2025-07-31 17:42:21.997 [http-nio-8080-exec-1] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已添加: service=monitor, userId=monitor_1753954937683_x72v09ihc, sessionId=0
2025-07-31 17:42:22.072 [http-nio-8080-exec-1] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接建立: service=monitor, userId=monitor_1753954937683_x72v09ihc, sessionId=0, clientIp=null
2025-07-31 17:42:22.093 [WebSocket-8] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端连接: monitor_1753954937683_x72v09ihc
2025-07-31 17:42:22.147 [WebSocket-8] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753954937683_x72v09ihc, message={"type":"welcome","message":"欢迎连接线程池监控中心","timestamp":1753954942094}
2025-07-31 17:42:22.148 [WebSocket-8] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:42:22.158 [WebSocket-8] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753954937683_x72v09ihc, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":30,"samplingRate":2,"lastHealthStatus":"HEALTHY","monitoringExecutions":0,"avgMonitoringCostMs":0.0},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":2,"queueSize":10,"completedTaskCount":11,"taskCount":23,"totalThreadCount":46,"peakThreadCount":46,"poolUtilization":0.04,"queueUtilization":0.01,"throughput":1.1376564277588168,"timestamp":1753954942148},"timestamp":1753954942148},"type":"threadpool_metrics"}
2025-07-31 17:42:22.158 [WebSocket-8] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:42:22.163 [WebSocket-7] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:42:24.324 [WebSocket-9] INFO  c.f.w.t.TimeoutTaskWrapperIntegrationTest - 超时任务执行完成（不应该看到这条日志）
2025-07-31 17:42:24.325 [main] INFO  c.f.w.t.TimeoutTaskWrapperIntegrationTest - 基本超时功能测试完成
2025-07-31 17:42:24.325 [main] INFO  c.f.w.t.TimeoutTaskWrapperIntegrationTest - === 测试智能提交功能 ===
2025-07-31 17:42:29.247 [WebSocket-4] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 17:42:29.336 [main] INFO  c.f.w.t.TimeoutTaskWrapperIntegrationTest - 智能提交功能测试完成
2025-07-31 17:42:29.337 [main] INFO  c.f.w.t.TimeoutTaskWrapperIntegrationTest - === 测试批量任务处理 ===
2025-07-31 17:42:29.337 [WebSocket-6] INFO  c.f.w.t.TimeoutTaskWrapperIntegrationTest - 批量任务1执行成功
2025-07-31 17:42:29.344 [WebSocket-3] WARN  c.f.w.util.TimeoutTaskWrapper - 批量任务执行失败，准备重试: task=批量任务重试测试, attempt=1/5
java.lang.RuntimeException: 模拟任务失败
	at com.framework.websocket.test.TimeoutTaskWrapperIntegrationTest.lambda$testBatchProcessing$6(TimeoutTaskWrapperIntegrationTest.java:144)
	at com.framework.websocket.util.TimeoutTaskWrapper$1.run(TimeoutTaskWrapper.java:162)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 17:42:29.344 [WebSocket-8] WARN  c.f.w.util.TimeoutTaskWrapper - 批量任务执行失败，准备重试: task=批量任务失败测试, attempt=1/2
java.lang.RuntimeException: 模拟任务总是失败
	at com.framework.websocket.test.TimeoutTaskWrapperIntegrationTest.lambda$testBatchProcessing$7(TimeoutTaskWrapperIntegrationTest.java:152)
	at com.framework.websocket.util.TimeoutTaskWrapper$1.run(TimeoutTaskWrapper.java:162)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 17:42:30.354 [WebSocket-10] WARN  c.f.w.util.TimeoutTaskWrapper - 批量任务执行失败，准备重试: task=批量任务重试测试, attempt=2/5
java.lang.RuntimeException: 模拟任务失败
	at com.framework.websocket.test.TimeoutTaskWrapperIntegrationTest.lambda$testBatchProcessing$6(TimeoutTaskWrapperIntegrationTest.java:144)
	at com.framework.websocket.util.TimeoutTaskWrapper$1.run(TimeoutTaskWrapper.java:162)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 17:42:30.355 [WebSocket-1] ERROR c.f.w.util.TimeoutTaskWrapper - 批量任务执行失败，已达最大重试次数: task=批量任务失败测试, maxRetries=2
java.lang.RuntimeException: 模拟任务总是失败
	at com.framework.websocket.test.TimeoutTaskWrapperIntegrationTest.lambda$testBatchProcessing$7(TimeoutTaskWrapperIntegrationTest.java:152)
	at com.framework.websocket.util.TimeoutTaskWrapper$1.run(TimeoutTaskWrapper.java:162)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 17:42:31.370 [WebSocket-1] WARN  c.f.w.util.TimeoutTaskWrapper - 批量任务执行失败，准备重试: task=批量任务重试测试, attempt=3/5
java.lang.RuntimeException: 模拟任务失败
	at com.framework.websocket.test.TimeoutTaskWrapperIntegrationTest.lambda$testBatchProcessing$6(TimeoutTaskWrapperIntegrationTest.java:144)
	at com.framework.websocket.util.TimeoutTaskWrapper$1.run(TimeoutTaskWrapper.java:162)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 17:42:32.380 [WebSocket-5] WARN  c.f.w.util.TimeoutTaskWrapper - 批量任务执行失败，准备重试: task=批量任务重试测试, attempt=4/5
java.lang.RuntimeException: 模拟任务失败
	at com.framework.websocket.test.TimeoutTaskWrapperIntegrationTest.lambda$testBatchProcessing$6(TimeoutTaskWrapperIntegrationTest.java:144)
	at com.framework.websocket.util.TimeoutTaskWrapper$1.run(TimeoutTaskWrapper.java:162)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 17:42:33.387 [WebSocket-5] ERROR c.f.w.util.TimeoutTaskWrapper - 批量任务执行失败，已达最大重试次数: task=批量任务重试测试, maxRetries=5
java.lang.RuntimeException: 模拟任务失败
	at com.framework.websocket.test.TimeoutTaskWrapperIntegrationTest.lambda$testBatchProcessing$6(TimeoutTaskWrapperIntegrationTest.java:144)
	at com.framework.websocket.util.TimeoutTaskWrapper$1.run(TimeoutTaskWrapper.java:162)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 17:42:36.324 [WebSocket-8] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753954937683_x72v09ihc, sessionId=0, message={"action":"refresh","timestamp":1753954956316}
2025-07-31 17:42:36.562 [http-nio-8080-exec-3] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:42:36.611 [WebSocket-2] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:42:36.617 [WebSocket-2] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753954937683_x72v09ihc, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":30,"samplingRate":2,"lastHealthStatus":"HEALTHY","monitoringExecutions":0,"avgMonitoringCostMs":0.0},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":10,"completedTaskCount":52,"taskCount":63,"totalThreadCount":46,"peakThreadCount":47,"poolUtilization":0.02,"queueUtilization":0.01,"throughput":0.0,"timestamp":1753954956616},"timestamp":1753954956616},"type":"threadpool_metrics"}
2025-07-31 17:42:36.619 [WebSocket-2] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:42:39.342 [main] INFO  c.f.w.t.TimeoutTaskWrapperIntegrationTest - 批量任务处理测试完成
2025-07-31 17:42:39.344 [main] INFO  c.f.w.t.TimeoutTaskWrapperIntegrationTest - === 测试心跳检测场景 ===
2025-07-31 17:42:39.886 [WebSocket-4] INFO  c.f.w.t.TimeoutTaskWrapperIntegrationTest - 用户user1心跳检测完成
2025-07-31 17:42:39.887 [WebSocket-6] INFO  c.f.w.t.TimeoutTaskWrapperIntegrationTest - 用户user3心跳检测完成
2025-07-31 17:42:39.949 [WebSocket-7] INFO  c.f.w.t.TimeoutTaskWrapperIntegrationTest - 用户user2心跳检测完成
2025-07-31 17:42:40.120 [WebSocket-8] INFO  c.f.w.t.TimeoutTaskWrapperIntegrationTest - 用户user4心跳检测完成
2025-07-31 17:42:40.419 [WebSocket-5] ERROR c.f.w.t.TimeoutTaskWrapperIntegrationTest - 用户user5心跳检测失败
java.lang.RuntimeException: 心跳检测网络异常
	at com.framework.websocket.test.TimeoutTaskWrapperIntegrationTest.simulateHeartbeatCheck(TimeoutTaskWrapperIntegrationTest.java:204)
	at com.framework.websocket.test.TimeoutTaskWrapperIntegrationTest.lambda$testHeartbeatScenario$8(TimeoutTaskWrapperIntegrationTest.java:179)
	at com.framework.websocket.util.TimeoutTaskWrapper$InterruptibleTaskWrapper.run(TimeoutTaskWrapper.java:112)
	at java.util.concurrent.CompletableFuture$AsyncRun.run$$$capture(CompletableFuture.java:1626)
	at java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 17:42:40.421 [main] INFO  c.f.w.t.TimeoutTaskWrapperIntegrationTest - 心跳检测场景测试完成
2025-07-31 17:42:40.421 [main] INFO  c.f.w.t.TimeoutTaskWrapperIntegrationTest - TimeoutTaskWrapper集成测试完成
2025-07-31 17:42:44.236 [WebSocket-2] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:42:44.240 [WebSocket-1] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 17:42:49.236 [WebSocket-10] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:42:49.238 [WebSocket-10] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 17:42:52.178 [WebSocket-10] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:42:59.239 [WebSocket-1] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 17:43:10.837 [ThreadPoolMonitor] INFO  c.f.w.monitor.ThreadPoolMonitor - 调整监控策略: 健康状态=健康, 监控间隔: 30秒->40秒, 采样率: 1:2 -> 1:3
2025-07-31 17:43:10.984 [ThreadPoolMonitor] INFO  c.f.w.monitor.ThreadPoolMonitor - 调整监控策略: 健康状态=健康, 监控间隔: 40秒->50秒, 采样率: 1:3 -> 1:4
2025-07-31 17:43:11.132 [ThreadPoolMonitor] INFO  c.f.w.monitor.ThreadPoolMonitor - 调整监控策略: 健康状态=健康, 监控间隔: 50秒->60秒, 采样率: 1:4 -> 1:5
2025-07-31 17:43:11.286 [ThreadPoolMonitor] INFO  c.f.w.monitor.ThreadPoolMonitor - 调整监控策略: 健康状态=健康, 监控间隔: 60秒->70秒, 采样率: 1:5 -> 1:5
2025-07-31 17:43:14.243 [WebSocket-4] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:43:14.291 [WebSocket-8] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 17:43:14.741 [SpringApplicationShutdownHook] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已移除: service=monitor, userId=monitor_1753954937683_x72v09ihc, sessionId=0
2025-07-31 17:43:14.742 [SpringApplicationShutdownHook] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接关闭: service=monitor, userId=monitor_1753954937683_x72v09ihc, sessionId=0, code=GOING_AWAY, reason=The web application is stopping
2025-07-31 17:43:14.743 [WebSocket-2] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端断开: monitor_1753954937683_x72v09ihc
2025-07-31 17:43:14.745 [WebSocket-2] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:43:14.754 [SpringApplicationShutdownHook] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件订阅者取消注册成功: WebSocketMessageHandlerDispatcher
2025-07-31 17:43:14.754 [SpringApplicationShutdownHook] INFO  c.f.w.h.WebSocketMessageHandlerDispatcher - WebSocketMessageHandlerDispatcher已取消EventBus订阅
2025-07-31 17:43:19.770 [SpringApplicationShutdownHook] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件总线线程池已关闭
2025-07-31 17:43:19.771 [SpringApplicationShutdownHook] INFO  c.f.w.monitor.ThreadPoolMonitor - 线程池监控器已关闭
2025-07-31 17:44:48.837 [main] INFO  c.f.w.WebSocketFrameworkApplication - Starting WebSocketFrameworkApplication using Java 1.8.0_202 on DESKTOP-EGK8BP4 with PID 14640 (D:\workTool\IdeaProjects\websocket-framework\target\classes started by admin in D:\workTool\IdeaProjects\websocket-framework)
2025-07-31 17:44:48.838 [main] INFO  c.f.w.WebSocketFrameworkApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-31 17:44:49.334 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2025-07-31 17:44:49.336 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-07-31 17:44:49.356 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 9 ms. Found 0 Redis repository interfaces.
2025-07-31 17:44:49.700 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2025-07-31 17:44:49.709 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-31 17:44:49.709 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.63]
2025-07-31 17:44:49.841 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-31 17:44:49.841 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 950 ms
2025-07-31 17:44:50.243 [main] INFO  c.f.w.c.WebSocketFrameworkConfig - WebSocket线程池已创建: 核心线程=10, 最大线程=50, 队列容量=1000
2025-07-31 17:44:50.265 [main] INFO  c.f.w.monitor.ThreadPoolMonitor - 智能线程池监控器已启动，初始监控间隔: 30秒
2025-07-31 17:44:50.293 [main] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件总线初始化完成
2025-07-31 17:44:50.340 [main] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件订阅者注册成功: ThreadPoolHealthChecker
2025-07-31 17:44:50.340 [main] INFO  c.f.w.health.ThreadPoolHealthChecker - WebSocket指标收集已启用并注册到健康检查器
2025-07-31 17:44:50.355 [main] INFO  c.f.w.p.WebSocketServiceProcessor - WebSocket服务注册成功: serviceId=chatroom, serviceName=聊天室服务, beanName=chatRoomWebSocketService, class=ChatRoomWebSocketService
2025-07-31 17:44:50.359 [main] INFO  c.f.w.p.WebSocketServiceProcessor - WebSocket服务注册成功: serviceId=notification, serviceName=通知推送服务, beanName=notificationWebSocketService, class=NotificationWebSocketService
2025-07-31 17:44:50.368 [main] INFO  c.f.w.p.WebSocketServiceProcessor - WebSocket服务注册成功: serviceId=monitor, serviceName=线程池监控服务, beanName=threadPoolMonitorWebSocketService, class=ThreadPoolMonitorWebSocketService
2025-07-31 17:44:50.372 [main] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件订阅者注册成功: WebSocketMessageHandlerDispatcher
2025-07-31 17:44:50.372 [main] INFO  c.f.w.h.WebSocketMessageHandlerDispatcher - WebSocketMessageHandlerDispatcher初始化完成, 注册了4个消息处理器, 1个拦截器
2025-07-31 17:44:50.374 [main] INFO  c.f.w.monitor.ThreadPoolMetricsStore - 线程池监控数据存储服务已启动，数据保留时间: 24小时
2025-07-31 17:44:50.953 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2025-07-31 17:44:50.975 [WebSocket-5] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:44:50.989 [main] INFO  c.f.w.WebSocketFrameworkApplication - Started WebSocketFrameworkApplication in 2.515 seconds (JVM running for 3.267)
2025-07-31 17:44:51.006 [main] INFO  c.f.w.t.TimeoutTaskWrapperIntegrationTest - 开始TimeoutTaskWrapper集成测试...
2025-07-31 17:44:51.007 [main] INFO  c.f.w.t.TimeoutTaskWrapperIntegrationTest - === 测试基本超时功能 ===
2025-07-31 17:44:52.013 [WebSocket-7] INFO  c.f.w.t.TimeoutTaskWrapperIntegrationTest - 正常任务执行完成
2025-07-31 17:45:01.027 [WebSocket-9] INFO  c.f.w.t.TimeoutTaskWrapperIntegrationTest - 超时任务执行完成（不应该看到这条日志）
2025-07-31 17:45:01.029 [main] INFO  c.f.w.t.TimeoutTaskWrapperIntegrationTest - 基本超时功能测试完成
2025-07-31 17:45:01.030 [main] INFO  c.f.w.t.TimeoutTaskWrapperIntegrationTest - === 测试智能提交功能 ===
2025-07-31 17:45:06.036 [main] INFO  c.f.w.t.TimeoutTaskWrapperIntegrationTest - 智能提交功能测试完成
2025-07-31 17:45:06.037 [main] INFO  c.f.w.t.TimeoutTaskWrapperIntegrationTest - === 测试批量任务处理 ===
2025-07-31 17:45:06.041 [WebSocket-7] INFO  c.f.w.t.TimeoutTaskWrapperIntegrationTest - 批量任务1执行成功
2025-07-31 17:45:06.057 [WebSocket-9] WARN  c.f.w.util.TimeoutTaskWrapper - 批量任务执行失败，准备重试: task=批量任务失败测试, attempt=1/2
java.lang.RuntimeException: 模拟任务总是失败
	at com.framework.websocket.test.TimeoutTaskWrapperIntegrationTest.lambda$testBatchProcessing$7(TimeoutTaskWrapperIntegrationTest.java:152)
	at com.framework.websocket.util.TimeoutTaskWrapper$1.run(TimeoutTaskWrapper.java:162)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 17:45:06.057 [WebSocket-10] WARN  c.f.w.util.TimeoutTaskWrapper - 批量任务执行失败，准备重试: task=批量任务重试测试, attempt=1/5
java.lang.RuntimeException: 模拟任务失败
	at com.framework.websocket.test.TimeoutTaskWrapperIntegrationTest.lambda$testBatchProcessing$6(TimeoutTaskWrapperIntegrationTest.java:144)
	at com.framework.websocket.util.TimeoutTaskWrapper$1.run(TimeoutTaskWrapper.java:162)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 17:45:07.065 [WebSocket-9] ERROR c.f.w.util.TimeoutTaskWrapper - 批量任务执行失败，已达最大重试次数: task=批量任务失败测试, maxRetries=2
java.lang.RuntimeException: 模拟任务总是失败
	at com.framework.websocket.test.TimeoutTaskWrapperIntegrationTest.lambda$testBatchProcessing$7(TimeoutTaskWrapperIntegrationTest.java:152)
	at com.framework.websocket.util.TimeoutTaskWrapper$1.run(TimeoutTaskWrapper.java:162)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 17:45:07.065 [WebSocket-2] WARN  c.f.w.util.TimeoutTaskWrapper - 批量任务执行失败，准备重试: task=批量任务重试测试, attempt=2/5
java.lang.RuntimeException: 模拟任务失败
	at com.framework.websocket.test.TimeoutTaskWrapperIntegrationTest.lambda$testBatchProcessing$6(TimeoutTaskWrapperIntegrationTest.java:144)
	at com.framework.websocket.util.TimeoutTaskWrapper$1.run(TimeoutTaskWrapper.java:162)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 17:45:08.079 [WebSocket-8] WARN  c.f.w.util.TimeoutTaskWrapper - 批量任务执行失败，准备重试: task=批量任务重试测试, attempt=3/5
java.lang.RuntimeException: 模拟任务失败
	at com.framework.websocket.test.TimeoutTaskWrapperIntegrationTest.lambda$testBatchProcessing$6(TimeoutTaskWrapperIntegrationTest.java:144)
	at com.framework.websocket.util.TimeoutTaskWrapper$1.run(TimeoutTaskWrapper.java:162)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 17:45:09.090 [WebSocket-7] WARN  c.f.w.util.TimeoutTaskWrapper - 批量任务执行失败，准备重试: task=批量任务重试测试, attempt=4/5
java.lang.RuntimeException: 模拟任务失败
	at com.framework.websocket.test.TimeoutTaskWrapperIntegrationTest.lambda$testBatchProcessing$6(TimeoutTaskWrapperIntegrationTest.java:144)
	at com.framework.websocket.util.TimeoutTaskWrapper$1.run(TimeoutTaskWrapper.java:162)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 17:45:10.104 [WebSocket-7] ERROR c.f.w.util.TimeoutTaskWrapper - 批量任务执行失败，已达最大重试次数: task=批量任务重试测试, maxRetries=5
java.lang.RuntimeException: 模拟任务失败
	at com.framework.websocket.test.TimeoutTaskWrapperIntegrationTest.lambda$testBatchProcessing$6(TimeoutTaskWrapperIntegrationTest.java:144)
	at com.framework.websocket.util.TimeoutTaskWrapper$1.run(TimeoutTaskWrapper.java:162)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2025-07-31 17:45:11.763 [SpringApplicationShutdownHook] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件订阅者取消注册成功: WebSocketMessageHandlerDispatcher
2025-07-31 17:45:11.763 [SpringApplicationShutdownHook] INFO  c.f.w.h.WebSocketMessageHandlerDispatcher - WebSocketMessageHandlerDispatcher已取消EventBus订阅
2025-07-31 17:45:16.055 [main] INFO  c.f.w.t.TimeoutTaskWrapperIntegrationTest - 批量任务处理测试完成
2025-07-31 17:45:16.056 [main] INFO  c.f.w.t.TimeoutTaskWrapperIntegrationTest - === 测试心跳检测场景 ===
2025-07-31 17:45:16.064 [main] INFO  o.s.b.a.l.ConditionEvaluationReportLoggingListener - 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
2025-07-31 17:45:16.105 [main] ERROR o.s.boot.SpringApplication - Application run failed
java.lang.IllegalStateException: Failed to execute CommandLineRunner
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:774)
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:755)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:315)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295)
	at com.framework.websocket.WebSocketFrameworkApplication.main(WebSocketFrameworkApplication.java:21)
Caused by: java.util.concurrent.RejectedExecutionException: Task java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask@da09250 rejected from java.util.concurrent.ScheduledThreadPoolExecutor@587f4f63[Shutting down, pool size = 2, active threads = 0, queued tasks = 3, completed tasks = 0]
	at java.util.concurrent.ThreadPoolExecutor$AbortPolicy.rejectedExecution(ThreadPoolExecutor.java:2063)
	at java.util.concurrent.ThreadPoolExecutor.reject(ThreadPoolExecutor.java:830)
	at java.util.concurrent.ScheduledThreadPoolExecutor.delayedExecute(ScheduledThreadPoolExecutor.java:326)
	at java.util.concurrent.ScheduledThreadPoolExecutor.schedule(ScheduledThreadPoolExecutor.java:533)
	at com.framework.websocket.util.TimeoutTaskWrapper.executeWithTimeout(TimeoutTaskWrapper.java:51)
	at com.framework.websocket.test.TimeoutTaskWrapperIntegrationTest.testHeartbeatScenario(TimeoutTaskWrapperIntegrationTest.java:176)
	at com.framework.websocket.test.TimeoutTaskWrapperIntegrationTest.run(TimeoutTaskWrapperIntegrationTest.java:43)
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:771)
	... 5 common frames omitted
2025-07-31 17:45:16.780 [SpringApplicationShutdownHook] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件总线线程池已关闭
2025-07-31 17:45:16.781 [SpringApplicationShutdownHook] INFO  c.f.w.monitor.ThreadPoolMonitor - 线程池监控器已关闭
2025-07-31 17:45:25.321 [main] INFO  c.f.w.WebSocketFrameworkApplication - Starting WebSocketFrameworkApplication using Java 1.8.0_202 on DESKTOP-EGK8BP4 with PID 20188 (D:\workTool\IdeaProjects\websocket-framework\target\classes started by admin in D:\workTool\IdeaProjects\websocket-framework)
2025-07-31 17:45:25.326 [main] INFO  c.f.w.WebSocketFrameworkApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-31 17:45:26.609 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2025-07-31 17:45:26.616 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-07-31 17:45:26.667 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 23 ms. Found 0 Redis repository interfaces.
2025-07-31 17:45:27.500 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2025-07-31 17:45:27.521 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-31 17:45:27.522 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.63]
2025-07-31 17:45:27.810 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-31 17:45:27.810 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2345 ms
2025-07-31 17:45:28.680 [main] INFO  c.f.w.c.WebSocketFrameworkConfig - WebSocket线程池已创建: 核心线程=10, 最大线程=50, 队列容量=1000
2025-07-31 17:45:28.726 [main] INFO  c.f.w.monitor.ThreadPoolMonitor - 智能线程池监控器已启动，初始监控间隔: 30秒
2025-07-31 17:45:28.790 [main] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件总线初始化完成
2025-07-31 17:45:28.896 [main] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件订阅者注册成功: ThreadPoolHealthChecker
2025-07-31 17:45:28.896 [main] INFO  c.f.w.health.ThreadPoolHealthChecker - WebSocket指标收集已启用并注册到健康检查器
2025-07-31 17:45:28.923 [main] INFO  c.f.w.p.WebSocketServiceProcessor - WebSocket服务注册成功: serviceId=chatroom, serviceName=聊天室服务, beanName=chatRoomWebSocketService, class=ChatRoomWebSocketService
2025-07-31 17:45:28.926 [main] INFO  c.f.w.p.WebSocketServiceProcessor - WebSocket服务注册成功: serviceId=notification, serviceName=通知推送服务, beanName=notificationWebSocketService, class=NotificationWebSocketService
2025-07-31 17:45:28.938 [main] INFO  c.f.w.p.WebSocketServiceProcessor - WebSocket服务注册成功: serviceId=monitor, serviceName=线程池监控服务, beanName=threadPoolMonitorWebSocketService, class=ThreadPoolMonitorWebSocketService
2025-07-31 17:45:28.943 [main] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件订阅者注册成功: WebSocketMessageHandlerDispatcher
2025-07-31 17:45:28.944 [main] INFO  c.f.w.h.WebSocketMessageHandlerDispatcher - WebSocketMessageHandlerDispatcher初始化完成, 注册了4个消息处理器, 1个拦截器
2025-07-31 17:45:28.947 [main] INFO  c.f.w.monitor.ThreadPoolMetricsStore - 线程池监控数据存储服务已启动，数据保留时间: 24小时
2025-07-31 17:45:29.832 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2025-07-31 17:45:29.857 [WebSocket-1] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:45:29.872 [main] INFO  c.f.w.WebSocketFrameworkApplication - Started WebSocketFrameworkApplication in 5.746 seconds (JVM running for 7.988)
2025-07-31 17:45:32.083 [WebSocket-1] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:45:59.864 [WebSocket-3] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:46:21.379 [http-nio-8080-exec-3] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-07-31 17:46:21.380 [http-nio-8080-exec-3] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-07-31 17:46:21.380 [http-nio-8080-exec-3] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 0 ms
2025-07-31 17:46:21.867 [http-nio-8080-exec-1] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:46:21.868 [http-nio-8080-exec-1] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:46:22.037 [http-nio-8080-exec-2] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已添加: service=monitor, userId=monitor_1753955181823_goqepqe46, sessionId=0
2025-07-31 17:46:22.062 [http-nio-8080-exec-2] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接建立: service=monitor, userId=monitor_1753955181823_goqepqe46, sessionId=0, clientIp=null
2025-07-31 17:46:22.065 [WebSocket-9] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端连接: monitor_1753955181823_goqepqe46
2025-07-31 17:46:22.075 [WebSocket-9] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753955181823_goqepqe46, message={"type":"welcome","message":"欢迎连接线程池监控中心","timestamp":1753955182065}
2025-07-31 17:46:22.075 [WebSocket-9] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:46:22.078 [WebSocket-9] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753955181823_goqepqe46, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":30,"samplingRate":2,"lastHealthStatus":"HEALTHY","monitoringExecutions":1,"avgMonitoringCostMs":0.0233},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":10,"completedTaskCount":16,"taskCount":27,"totalThreadCount":61,"peakThreadCount":61,"poolUtilization":0.02,"queueUtilization":0.01,"throughput":24.154589371980677,"timestamp":1753955182075},"timestamp":1753955182075},"type":"threadpool_metrics"}
2025-07-31 17:46:22.078 [WebSocket-9] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:46:22.104 [WebSocket-7] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:46:29.161 [ThreadPoolMonitor] INFO  c.f.w.monitor.ThreadPoolMonitor - 调整监控策略: 健康状态=健康, 监控间隔: 30秒->40秒, 采样率: 1:2 -> 1:3
2025-07-31 17:46:29.313 [ThreadPoolMonitor] INFO  c.f.w.monitor.ThreadPoolMonitor - 调整监控策略: 健康状态=健康, 监控间隔: 40秒->50秒, 采样率: 1:3 -> 1:4
2025-07-31 17:46:29.468 [ThreadPoolMonitor] INFO  c.f.w.monitor.ThreadPoolMonitor - 调整监控策略: 健康状态=健康, 监控间隔: 50秒->60秒, 采样率: 1:4 -> 1:5
2025-07-31 17:46:29.622 [ThreadPoolMonitor] INFO  c.f.w.monitor.ThreadPoolMonitor - 调整监控策略: 健康状态=健康, 监控间隔: 60秒->70秒, 采样率: 1:5 -> 1:5
2025-07-31 17:46:29.864 [WebSocket-3] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:46:29.910 [WebSocket-9] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 17:46:34.872 [WebSocket-5] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:46:34.873 [WebSocket-5] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 17:46:44.866 [WebSocket-10] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 17:46:52.094 [WebSocket-5] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:46:52.310 [WebSocket-3] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753955181823_goqepqe46, sessionId=0, message={"action":"refresh","timestamp":1753955212307}
2025-07-31 17:46:52.321 [http-nio-8080-exec-5] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:46:52.363 [WebSocket-10] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:46:52.364 [WebSocket-10] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753955181823_goqepqe46, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":6,"avgMonitoringCostMs":161.36283333333333},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":10,"completedTaskCount":41,"taskCount":52,"totalThreadCount":64,"peakThreadCount":64,"poolUtilization":0.02,"queueUtilization":0.01,"throughput":0.0,"timestamp":1753955212364},"timestamp":1753955212364},"type":"threadpool_metrics"}
2025-07-31 17:46:52.364 [WebSocket-10] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:46:59.871 [WebSocket-2] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 17:46:59.871 [WebSocket-9] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:47:04.869 [WebSocket-4] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:47:04.870 [WebSocket-4] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 17:47:14.872 [WebSocket-6] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 17:47:22.106 [WebSocket-11] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:47:22.321 [WebSocket-7] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753955181823_goqepqe46, sessionId=0, message={"action":"refresh","timestamp":1753955242321}
2025-07-31 17:47:22.322 [WebSocket-4] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:47:22.322 [WebSocket-4] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753955181823_goqepqe46, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":6,"avgMonitoringCostMs":161.36283333333333},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":10,"completedTaskCount":60,"taskCount":71,"totalThreadCount":61,"peakThreadCount":64,"poolUtilization":0.02,"queueUtilization":0.01,"throughput":0.8594510972325675,"timestamp":1753955242322},"timestamp":1753955242322},"type":"threadpool_metrics"}
2025-07-31 17:47:22.322 [WebSocket-4] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:47:22.330 [http-nio-8080-exec-10] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:47:29.870 [WebSocket-10] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:47:34.867 [WebSocket-2] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:47:34.869 [WebSocket-2] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 17:47:44.862 [WebSocket-9] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 17:47:52.129 [WebSocket-6] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:47:52.318 [WebSocket-9] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753955181823_goqepqe46, sessionId=0, message={"action":"refresh","timestamp":1753955272317}
2025-07-31 17:47:52.319 [WebSocket-10] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:47:52.320 [WebSocket-10] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753955181823_goqepqe46, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":7,"avgMonitoringCostMs":138.31142857142856},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":10,"completedTaskCount":79,"taskCount":90,"totalThreadCount":61,"peakThreadCount":64,"poolUtilization":0.02,"queueUtilization":0.01,"throughput":0.8594510972325675,"timestamp":1753955272320},"timestamp":1753955272320},"type":"threadpool_metrics"}
2025-07-31 17:47:52.321 [WebSocket-10] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:47:52.324 [http-nio-8080-exec-4] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:47:59.868 [WebSocket-6] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:47:59.868 [WebSocket-3] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 17:48:04.870 [WebSocket-11] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:48:04.874 [WebSocket-11] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 17:48:14.859 [WebSocket-13] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 17:48:22.138 [WebSocket-6] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:48:22.319 [WebSocket-10] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753955181823_goqepqe46, sessionId=0, message={"action":"refresh","timestamp":1753955302318}
2025-07-31 17:48:22.320 [WebSocket-9] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:48:22.320 [WebSocket-9] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753955181823_goqepqe46, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":7,"avgMonitoringCostMs":138.31142857142856},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":10,"completedTaskCount":98,"taskCount":109,"totalThreadCount":61,"peakThreadCount":64,"poolUtilization":0.02,"queueUtilization":0.01,"throughput":0.8595988538681949,"timestamp":1753955302320},"timestamp":1753955302320},"type":"threadpool_metrics"}
2025-07-31 17:48:22.320 [WebSocket-9] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:48:22.322 [http-nio-8080-exec-8] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:48:29.867 [WebSocket-12] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:48:34.865 [WebSocket-2] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:48:34.866 [WebSocket-2] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 17:48:44.872 [WebSocket-13] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 17:48:52.149 [WebSocket-14] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:48:52.312 [WebSocket-3] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753955181823_goqepqe46, sessionId=0, message={"action":"refresh","timestamp":1753955332309}
2025-07-31 17:48:52.313 [http-nio-8080-exec-3] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:48:52.313 [WebSocket-13] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:48:52.313 [WebSocket-13] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753955181823_goqepqe46, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":8,"avgMonitoringCostMs":121.02295},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":10,"completedTaskCount":117,"taskCount":128,"totalThreadCount":61,"peakThreadCount":64,"poolUtilization":0.02,"queueUtilization":0.01,"throughput":0.0,"timestamp":1753955332313},"timestamp":1753955332313},"type":"threadpool_metrics"}
2025-07-31 17:48:52.313 [WebSocket-13] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:48:59.868 [WebSocket-4] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:48:59.869 [WebSocket-2] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 17:49:04.867 [WebSocket-14] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:49:04.870 [WebSocket-14] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 17:49:14.861 [WebSocket-10] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 17:49:22.156 [WebSocket-9] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:49:22.312 [WebSocket-13] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753955181823_goqepqe46, sessionId=0, message={"action":"refresh","timestamp":1753955362312}
2025-07-31 17:49:22.312 [WebSocket-11] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:49:22.314 [WebSocket-11] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753955181823_goqepqe46, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":8,"avgMonitoringCostMs":121.02295},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":10,"completedTaskCount":136,"taskCount":147,"totalThreadCount":61,"peakThreadCount":64,"poolUtilization":0.02,"queueUtilization":0.01,"throughput":0.8598452278589853,"timestamp":1753955362313},"timestamp":1753955362313},"type":"threadpool_metrics"}
2025-07-31 17:49:22.314 [WebSocket-11] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:49:22.315 [http-nio-8080-exec-6] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:49:29.860 [WebSocket-3] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:49:34.871 [WebSocket-4] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:49:34.873 [WebSocket-4] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 17:49:44.865 [WebSocket-12] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 17:49:52.166 [WebSocket-14] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:49:52.318 [WebSocket-11] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753955181823_goqepqe46, sessionId=0, message={"action":"refresh","timestamp":1753955392316}
2025-07-31 17:49:52.320 [WebSocket-11] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:49:52.321 [WebSocket-11] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753955181823_goqepqe46, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":8,"avgMonitoringCostMs":121.02295},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":10,"completedTaskCount":155,"taskCount":166,"totalThreadCount":61,"peakThreadCount":64,"poolUtilization":0.02,"queueUtilization":0.01,"throughput":0.859746661317132,"timestamp":1753955392320},"timestamp":1753955392320},"type":"threadpool_metrics"}
2025-07-31 17:49:52.321 [WebSocket-11] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:49:52.322 [http-nio-8080-exec-8] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:49:59.872 [WebSocket-10] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:49:59.872 [WebSocket-6] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 17:50:04.864 [WebSocket-9] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:50:04.864 [WebSocket-9] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 17:50:14.871 [WebSocket-14] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 17:50:22.171 [WebSocket-6] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:50:29.862 [WebSocket-11] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:50:29.910 [WebSocket-11] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:50:30.005 [WebSocket-4] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753955181823_goqepqe46, sessionId=0, message={"action":"refresh","timestamp":1753955430004}
2025-07-31 17:50:30.006 [WebSocket-14] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:50:30.008 [WebSocket-14] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753955181823_goqepqe46, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":9,"avgMonitoringCostMs":107.57637777777778},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":10,"completedTaskCount":178,"taskCount":189,"totalThreadCount":61,"peakThreadCount":64,"poolUtilization":0.02,"queueUtilization":0.01,"throughput":72.91666666666667,"timestamp":1753955430007},"timestamp":1753955430007},"type":"threadpool_metrics"}
2025-07-31 17:50:30.009 [WebSocket-14] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:50:30.011 [http-nio-8080-exec-2] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:50:34.859 [WebSocket-2] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:50:34.863 [WebSocket-2] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 17:50:44.858 [WebSocket-12] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 17:50:52.291 [WebSocket-4] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:50:52.307 [WebSocket-3] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753955181823_goqepqe46, sessionId=0, message={"action":"refresh","timestamp":1753955452306}
2025-07-31 17:50:52.308 [WebSocket-10] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:50:52.309 [WebSocket-10] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753955181823_goqepqe46, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":70,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":9,"avgMonitoringCostMs":107.57637777777778},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":10,"completedTaskCount":194,"taskCount":205,"totalThreadCount":61,"peakThreadCount":64,"poolUtilization":0.02,"queueUtilization":0.01,"throughput":0.859697386519945,"timestamp":1753955452309},"timestamp":1753955452309},"type":"threadpool_metrics"}
2025-07-31 17:50:52.310 [WebSocket-10] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:50:52.311 [http-nio-8080-exec-1] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:50:59.872 [WebSocket-11] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 17:50:59.872 [WebSocket-11] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:51:04.857 [WebSocket-9] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:51:04.859 [WebSocket-9] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 17:51:09.837 [ThreadPoolMonitor] INFO  c.f.w.monitor.ThreadPoolMonitor - 调整监控策略: 健康状态=健康, 监控间隔: 70秒->80秒, 采样率: 1:5 -> 1:5
2025-07-31 17:51:14.863 [WebSocket-14] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 17:51:22.178 [WebSocket-11] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:51:22.321 [WebSocket-3] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753955181823_goqepqe46, sessionId=0, message={"action":"refresh","timestamp":1753955482319}
2025-07-31 17:51:22.321 [WebSocket-2] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:51:22.321 [WebSocket-2] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753955181823_goqepqe46, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":80,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":11,"avgMonitoringCostMs":106.07411818181818},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":10,"completedTaskCount":213,"taskCount":224,"totalThreadCount":61,"peakThreadCount":64,"poolUtilization":0.02,"queueUtilization":0.01,"throughput":1.1214354373598205,"timestamp":1753955482321},"timestamp":1753955482321},"type":"threadpool_metrics"}
2025-07-31 17:51:22.321 [WebSocket-2] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:51:22.321 [http-nio-8080-exec-8] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:51:29.869 [WebSocket-11] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:51:29.988 [WebSocket-4] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 17:51:34.870 [WebSocket-10] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:51:34.870 [WebSocket-10] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 17:51:44.869 [WebSocket-12] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 17:51:52.188 [WebSocket-11] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:51:58.310 [WebSocket-9] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753955181823_goqepqe46, sessionId=0, message={"action":"refresh","timestamp":1753955518311}
2025-07-31 17:51:58.310 [WebSocket-15] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:51:58.310 [WebSocket-15] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753955181823_goqepqe46, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":80,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":11,"avgMonitoringCostMs":106.07411818181818},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":10,"completedTaskCount":233,"taskCount":244,"totalThreadCount":61,"peakThreadCount":64,"poolUtilization":0.02,"queueUtilization":0.01,"throughput":0.6399317406143344,"timestamp":1753955518310},"timestamp":1753955518310},"type":"threadpool_metrics"}
2025-07-31 17:51:58.310 [WebSocket-15] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:51:58.319 [http-nio-8080-exec-3] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:51:59.874 [WebSocket-3] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:51:59.874 [WebSocket-6] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 17:52:04.861 [WebSocket-2] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:52:04.863 [WebSocket-2] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 17:52:14.869 [WebSocket-14] INFO  c.f.w.s.WebSocketSessionManager - 广播消息已发送: service=monitor, 成功用户数=1, 失败用户数=0
2025-07-31 17:52:22.195 [WebSocket-6] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:52:22.310 [WebSocket-10] INFO  c.f.websocket.core.WebSocketServer - 接收到WebSocket消息: service=monitor, userId=monitor_1753955181823_goqepqe46, sessionId=0, message={"action":"refresh","timestamp":1753955542307}
2025-07-31 17:52:22.310 [WebSocket-15] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:52:22.310 [WebSocket-15] INFO  c.f.w.s.WebSocketSessionManager - 消息发送成功: service=monitor, userId=monitor_1753955181823_goqepqe46, message={"payload":{"monitoringStatus":{"isActive":true,"currentInterval":80,"samplingRate":5,"lastHealthStatus":"HEALTHY","monitoringExecutions":11,"avgMonitoringCostMs":106.07411818181818},"metrics":{"corePoolSize":10,"maximumPoolSize":50,"activeCount":1,"queueSize":10,"completedTaskCount":252,"taskCount":263,"totalThreadCount":61,"peakThreadCount":64,"poolUtilization":0.02,"queueUtilization":0.01,"throughput":0.859746661317132,"timestamp":1753955542310},"timestamp":1753955542310},"type":"threadpool_metrics"}
2025-07-31 17:52:22.310 [WebSocket-15] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:52:22.318 [http-nio-8080-exec-6] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:52:29.859 [WebSocket-12] INFO  c.f.w.monitor.ThreadPoolMonitor - 手动触发线程池监控
2025-07-31 17:52:31.281 [SpringApplicationShutdownHook] INFO  c.f.w.s.WebSocketSessionManager - WebSocket会话已移除: service=monitor, userId=monitor_1753955181823_goqepqe46, sessionId=0
2025-07-31 17:52:31.297 [SpringApplicationShutdownHook] INFO  c.f.websocket.core.WebSocketServer - WebSocket连接关闭: service=monitor, userId=monitor_1753955181823_goqepqe46, sessionId=0, code=GOING_AWAY, reason=The web application is stopping
2025-07-31 17:52:31.297 [WebSocket-11] INFO  c.f.w.m.ThreadPoolMonitorWebSocketService - 监控客户端断开: monitor_1753955181823_goqepqe46
2025-07-31 17:52:31.297 [WebSocket-11] ERROR c.f.w.h.DefaultWebSocketMessageHandler - WebSocketEvent的eventType为null: sessionId=null, service=null, userId=null
2025-07-31 17:52:31.318 [SpringApplicationShutdownHook] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件订阅者取消注册成功: WebSocketMessageHandlerDispatcher
2025-07-31 17:52:31.318 [SpringApplicationShutdownHook] INFO  c.f.w.h.WebSocketMessageHandlerDispatcher - WebSocketMessageHandlerDispatcher已取消EventBus订阅
2025-07-31 17:52:31.329 [SpringApplicationShutdownHook] INFO  c.f.w.event.WebSocketEventBus - WebSocket事件总线线程池已关闭
2025-07-31 17:52:31.330 [SpringApplicationShutdownHook] INFO  c.f.w.monitor.ThreadPoolMonitor - 线程池监控器已关闭
